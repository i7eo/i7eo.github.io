<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è¯‘æ–‡: Virtual DOM is pure overhead</title>
      <link href="/2019/08/10/%E8%AF%91%E6%96%87-Virtual-DOM-is-pure-overhead.html"/>
      <url>/2019/08/10/%E8%AF%91%E6%96%87-Virtual-DOM-is-pure-overhead.html</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŸæ–‡åœ°å€ï¼š</p><blockquote><p><a href="https://www.sveltejs.cn/blog/virtual-dom-is-pure-overhead" target="_blank" rel="noopener">Virtual DOM is pure overhead</a></p></blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœæ‚¨åœ¨æœ€è¿‘å‡ å¹´ä¸­ä½¿ç”¨è¿‡JavaScriptæ¡†æ¶ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å·²ç»å¬è¯´è¿‡â€œè™šæ‹ŸDOMå¾ˆå¿«â€è¿™ä¸€çŸ­è¯­ï¼Œé€šå¸¸è¢«è¯´æ¥æ„å‘³ç€å®ƒæ¯”çœŸå®DOMå¿«ã€‚è¿™æ˜¯ä¸€ä¸ªä»¤äººæƒŠè®¶çš„å‰ç«¯æŠ€æœ¯æ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œäººä»¬é—®Svelteåœ¨ä¸ä½¿ç”¨è™šæ‹ŸDOMæ—¶å¦‚ä½•æ›´å¿«ã€‚ï¼ˆä½œè€…åœ¨åè®½ğŸ¤”ï¼‰</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ˜¯æ—¶å€™è®©æˆ‘ä»¬ä»”ç»†æ£æ‘©æ£æ‘©äº†ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-dom-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-dom-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ dom ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿ dom ï¼Ÿ</h3><a id="more"></a><p>åœ¨è®¸å¤šæ¡†æ¶ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ <code>render</code> æ¥æ„å»ºä¸€ä¸ªåº”ç”¨ï¼Œä¸‹é¢ç”¨ react æ¥å½“ä½œç¤ºä¾‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HelloMessage</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"greeting"</span>&gt;</span><br><span class="line">      Hello &#123;props.name&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ jsx æ¥å®Œæˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HelloMessage</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(</span><br><span class="line">    <span class="string">'div'</span>,</span><br><span class="line">    &#123; <span class="attr">className</span>: <span class="string">'greeting'</span> &#125;,</span><br><span class="line">    <span class="string">'Hello '</span>,</span><br><span class="line">    props.name</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ç›¸åŒçš„ï¼Œåœ¨è¿™å…¶ä¸­æœ‰ä¸€ä¸ªå¯¹è±¡ä¼šå‘æˆ‘ä»¬å±•ç¤ºå½“å‰çš„é¡µé¢é•¿ä»€ä¹ˆæ ·ï¼Œè€Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯è™šæ‹ŸDOMã€‚æ¯ä¸€æ¬¡ä½ çš„åº”ç”¨ä¸­çš„çŠ¶æ€æ›´æ–°ï¼ˆä¾‹å¦‚ï¼šnameï¼‰ï¼Œæ¡†æ¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚æ¡†æ¶çš„ä»»åŠ¡å°±æ˜¯å°†æ–°çŠ¶æ€ä¸æ—§çŠ¶æ€ä»”ç»†å¯¹æ¯”ï¼Œæ‰¾åˆ°å˜åŒ–å¹¶å°†ä»–ä»¬è¾“å‡ºä¸ºçœŸå®çš„DOMã€‚</p><h3 id="è™šæ‹Ÿ-dom-æ›´å¿«è¿™ä¸ªæ¦‚å¿µæ˜¯æ€ä¹ˆå¼€å§‹çš„-ï¼Ÿ"><a href="#è™šæ‹Ÿ-dom-æ›´å¿«è¿™ä¸ªæ¦‚å¿µæ˜¯æ€ä¹ˆå¼€å§‹çš„-ï¼Ÿ" class="headerlink" title="è™šæ‹Ÿ dom æ›´å¿«è¿™ä¸ªæ¦‚å¿µæ˜¯æ€ä¹ˆå¼€å§‹çš„ ï¼Ÿ"></a>è™šæ‹Ÿ dom æ›´å¿«è¿™ä¸ªæ¦‚å¿µæ˜¯æ€ä¹ˆå¼€å§‹çš„ ï¼Ÿ</h3><p>å…³äºè™šæ‹ŸDOMæ€§èƒ½çš„è¯¯è§£å¯è¿½æº¯åˆ°Reactçš„å‘å¸ƒã€‚åœ¨<a href="https://www.youtube.com/watch?v=x7cQ3mrcKaY" target="_blank" rel="noopener">åæ€æœ€ä½³å®è·µ</a>å¼€åˆ›æ€§çš„2013é€šè¯ç”±åŸé˜µè¥çš„æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜çš®ç‰¹Â·äº¨ç‰¹ï¼Œæˆ‘ä»¬å­¦åˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š</p><blockquote><p>è¿™å®é™…ä¸Šæ˜¯éå¸¸å¿«çš„ï¼Œä¸»è¦æ˜¯å› ä¸ºå¤§å¤šæ•°DOMæ“ä½œå¾€å¾€å¾ˆæ…¢ã€‚DOMä¸Šæœ‰å¾ˆå¤šæ€§èƒ½å·¥ä½œï¼Œä½†æ˜¯å¤§å¤šæ•°DOMæ“ä½œå¾€å¾€ä¼šä¸¢å¸§ã€‚</p></blockquote><p>ä½†æ˜¯ç­‰ä¸€ä¸‹ï¼å¦‚æœå°†å…¶ä¸æ•ˆç‡è¾ƒä½çš„æ¡†æ¶æ¯”è¾ƒé‚£è‚¯å®šæ˜¯å¿«çš„ã€‚ä¸å…¶å¦‚æ­¤ï¼Œä¸å¦‚è¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onEveryStateChange(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.innerHTML = renderMyApp();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ï¼ˆç–¯ç‹‚åæ§½ ğŸ¤” ï¼Œæ€»ç»“ä¸€ä¸‹ä½œè€…è®¤ä¸ºè™šæ‹ŸDOMçš„å¿«å¯ä»¥ç”¨ä¸Šè¿°ä»£ç æ¦‚æ‹¬ï¼Œé‚£å°±æ˜¯çŠ¶æ€å˜åŒ–ï¼Œå°†é‡æ–°ç¼–è¯‘å¥½çš„jsxå®Œå…¨èµ‹å€¼ç»™ innerHTML â€¦ï¼‰</p><p>çš®ç‰¹åœ¨ä¸ä¹…åæ¾„æ¸…â€¦</p><blockquote><p>React å¹¶ä¸æ˜¯é­”æœ¯ï¼Œå°±åƒå°† c å†™å…¥æ±‡ç¼–åå‡»è´¥ c ç¼–è¯‘å™¨ä¸€æ ·ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä½ éœ€è¦çš„æƒ…å†µä¸‹ä½¿ç”¨åŸç”ŸDOMå’Œ API è¿›è¡Œæ“ä½œä»è€Œå‡»è´¥ reactã€‚ä½¿ç”¨Cæˆ–Javaæˆ–JavaScriptå¯ä»¥å°†æ€§èƒ½æé«˜ä¸€ä¸ªæ•°é‡çº§ï¼Œå› æ­¤æ‚¨ä¸å¿…åœ¨æ„å¹³å°çš„ç»†èŠ‚ã€‚ä½¿ç”¨ react ä½ ç”šè‡³å¯ä»¥ä¸è€ƒè™‘æ€§èƒ½è€Œæ„å»ºåº”ç”¨ï¼Œå› ä¸ºå®ƒé»˜è®¤æ˜¯å¿«é€Ÿçš„ã€‚</p></blockquote><p>â€¦ä½†è¿™ä¸ªè§£é‡Šæˆ‘å¹¶ä¸ä¹°è´¦</p><h3 id="å› æ­¤â€¦-è™šæ‹ŸDOMæ˜¯æ…¢çš„ä¹ˆï¼Ÿ"><a href="#å› æ­¤â€¦-è™šæ‹ŸDOMæ˜¯æ…¢çš„ä¹ˆï¼Ÿ" class="headerlink" title="å› æ­¤â€¦ è™šæ‹ŸDOMæ˜¯æ…¢çš„ä¹ˆï¼Ÿ"></a>å› æ­¤â€¦ è™šæ‹ŸDOMæ˜¯æ…¢çš„ä¹ˆï¼Ÿ</h3><p>ä¹Ÿä¸èƒ½è¿™ä¹ˆè¯´ã€‚åªèƒ½è¯´ è™šæ‹ŸDOMåœ¨é€šå¸¸æƒ…å†µä¸‹è¶³å¤Ÿå¿« ï¼Œä½†æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚</p><p>React æœ€åˆçš„æ‰¿è¯ºæ˜¯å½“ä½ ä¿®æ”¹çŠ¶æ€é‡æ–°æ¸²æŸ“æ•´ä¸ªåº”ç”¨æ—¶ä¸ç”¨æ‹…å¿ƒæ€§èƒ½ã€‚æˆ‘è®¤ä¸ºè¿™å¹¶ä¸æ­£ç¡®ï¼Œå¦‚æœçœŸå¦‚æ­¤ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šæä¾› <code>shouldComponentUpdate</code> è¿™æ ·çš„å‡½æ•°è¿˜è·³è¿‡å¯¹ç»„ä»¶çš„æ›´æ–°ã€‚</p><p>å³ä½¿æœ‰äº† <code>shouldComponentUpdate</code> ï¼Œä¸€æ¬¡å®Œæˆæ›´æ–°æ•´ä¸ªåº”ç”¨ç¨‹åºçš„è™šæ‹ŸDOMçš„å·¥ä½œé‡ä»ç„¶å¾ˆå¤§ã€‚ä¸ä¹…å‰ï¼ŒReactå›¢é˜Ÿæ¨å‡ºäº†ä¸€ç§å«åšReact Fiberçš„ä¸œè¥¿ï¼Œå®ƒå¯ä»¥å°†æ›´æ–°åˆ†æˆè¾ƒå°çš„å—ã€‚è¿™æ„å‘³ç€ï¼ˆé™¤å…¶ä»–äº‹é¡¹å¤–ï¼‰æ›´æ–°ä¸ä¼šé•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹ï¼Œå°½ç®¡å®ƒä¸ä¼šå‡å°‘å·¥ä½œæ€»é‡æˆ–æ›´æ–°æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚</p><h3 id="å¼€é”€åœ¨å“ªé‡Œï¼Ÿ"><a href="#å¼€é”€åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="å¼€é”€åœ¨å“ªé‡Œï¼Ÿ"></a>å¼€é”€åœ¨å“ªé‡Œï¼Ÿ</h3><p>é‡ç‚¹åœ¨äº <code>diff</code> ã€‚æ‚¨å¿…é¡»å…ˆå°†æ–°çš„è™šæ‹ŸDOMä¸å…ˆå‰çš„å¿«ç…§è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæ‰èƒ½å¯¹çœŸå®DOMåº”ç”¨æ›´æ”¹ã€‚ä»¥å‰é¢çš„HelloMessage ç¤ºä¾‹ä¸ºä¾‹ï¼Œå‡è®¾ <code>name</code> ä» world æ”¹ä¸º everybodyã€‚</p><ol><li>ä¸¤ä¸ªå¿«ç…§éƒ½åŒ…å«ä¸€ä¸ªå…ƒç´ ã€‚åœ¨ä¸¤ç§æƒ…å†µä¸‹éƒ½æ˜¯ <code>&lt;div&gt;</code> ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¿ç•™ç›¸åŒçš„DOMèŠ‚ç‚¹</li><li>æˆ‘ä»¬åˆ—ä¸¾äº†æ–°æ—§å±æ€§ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œ <code>&lt;div&gt;</code> ä»¥æŸ¥çœ‹æ˜¯å¦éœ€è¦æ›´æ”¹ï¼Œæ·»åŠ æˆ–åˆ é™¤ä»»ä½•å±æ€§ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸€ä¸ªå±æ€§ className çš„å€¼ä¸ºâ€greetingâ€</li><li>åˆ°å…ƒç´ ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°æ–‡æœ¬å·²æ›´æ”¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´æ–°çœŸå®çš„DOMã€‚</li></ol><p>åœ¨è¿™ä¸‰æ­¥ä¸­ï¼Œåªæœ‰ç¬¬3æ­¥å¯¹äº DOM æ˜¯æœ‰å½±å“çš„ã€‚è€Œè¿™äº›éƒ½å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªä»£ç ä»£æ›¿ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (changed.name) &#123;</span><br><span class="line">  text.data = name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆè¿™å‡ ä¹å®Œå…¨æ˜¯Svelteç”Ÿæˆçš„æ›´æ–°ä»£ç ã€‚ä¸ä¼ ç»Ÿçš„UIæ¡†æ¶ä¸åŒï¼ŒSvelteæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œå®ƒåœ¨æ„å»ºæ—¶å°±çŸ¥é“åº”ç”¨ç¨‹åºä¸­çš„æƒ…å†µå¦‚ä½•å‘ç”Ÿå˜åŒ–ï¼Œè€Œä¸å¿…ç­‰ç€åœ¨è¿è¡Œæ—¶è¿›è¡Œå·¥ä½œã€‚ï¼‰</p><h3 id="ä¸ºä»€ä¹ˆæ¡†æ¶è¦ä½¿ç”¨è™šæ‹ŸDOMï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæ¡†æ¶è¦ä½¿ç”¨è™šæ‹ŸDOMï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæ¡†æ¶è¦ä½¿ç”¨è™šæ‹ŸDOMï¼Ÿ"></a>ä¸ºä»€ä¹ˆæ¡†æ¶è¦ä½¿ç”¨è™šæ‹ŸDOMï¼Ÿ</h3><p>é‡è¦çš„æ˜¯è¦äº†è§£è™šæ‹ŸDOMä¸æ˜¯åŠŸèƒ½ã€‚è¿™æ˜¯è¾¾åˆ°ç›®çš„çš„ä¸€ç§æ‰‹æ®µï¼Œæœ€ç»ˆæ˜¯å£°æ˜æ€§çš„ï¼ŒçŠ¶æ€é©±åŠ¨çš„UIå¼€å‘ã€‚è™šæ‹ŸDOMéå¸¸æœ‰ä»·å€¼ï¼Œå› ä¸ºå®ƒä½¿æ‚¨æ— éœ€è€ƒè™‘çŠ¶æ€è½¬æ¢å³å¯æ„å»ºåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”æ€§èƒ½é€šå¸¸è¶³å¤Ÿå¥½ã€‚è¿™æ„å‘³ç€æ›´å°‘çš„é”™è¯¯ä»£ç ï¼Œè€Œå°†æ›´å¤šçš„æ—¶é—´èŠ±è´¹åœ¨åˆ›é€ æ€§çš„ä»»åŠ¡ä¸Šï¼Œè€Œä¸æ˜¯ä¹å‘³çš„å·¥ä½œä¸Šã€‚</p><p>ä½†äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬æ— éœ€ä½¿ç”¨è™šæ‹ŸDOMå°±å¯ä»¥å®ç°ç±»ä¼¼çš„ç¼–ç¨‹æ¨¡å‹-è¿™å°±æ˜¯Svelteçš„ç”¨æ­¦ä¹‹åœ°ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li>è™šæ‹ŸDOMä¸æ˜¯åŠŸèƒ½ã€‚è¿™æ˜¯è¾¾åˆ°ç›®çš„çš„ä¸€ç§æ‰‹æ®µ</li><li>åœºæ™¯ä¸åŒéœ€æ±‚ä¸åŒ</li></ol><p>å°¤å¤§çš„å›ç­”ä¹Ÿå·®ä¸å¤šï¼Œå…·ä½“å¯è§ï¼š<a href="https://www.zhihu.com/question/31809713/answer/1735884666" target="_blank" rel="noopener">ç½‘ä¸Šéƒ½è¯´æ“ä½œçœŸå® DOM æ…¢ï¼Œä½†æµ‹è¯•ç»“æœå´æ¯” React æ›´å¿«ï¼Œä¸ºä»€ä¹ˆ?</a></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è™šæ‹ŸDom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥æµ…å‡ºreact&amp;reduxç¬”è®°</title>
      <link href="/2019/06/11/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAreact-redux%E7%AC%94%E8%AE%B0.html"/>
      <url>/2019/06/11/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAreact-redux%E7%AC%94%E8%AE%B0.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±å…¥æµ…å‡ºreact-amp-reduxç¬”è®°"><a href="#æ·±å…¥æµ…å‡ºreact-amp-reduxç¬”è®°" class="headerlink" title="æ·±å…¥æµ…å‡ºreact&amp;reduxç¬”è®°"></a>æ·±å…¥æµ…å‡ºreact&amp;reduxç¬”è®°</h3><ol><li>é«˜å†…èšï¼ˆjsã€jsxã€cssï¼‰ ä½è€¦åˆï¼ˆå¼±åŒ–ä¸åŒç»„ä»¶é—´çš„å…³ç³»ï¼‰</li><li><p>reactç»„ä»¶æ•°æ®</p><ol><li><p>ç”Ÿå‘½å‘¨æœŸ (æ‰§è¡Œé¡ºåºå¦‚åºå·é¡ºåº)</p><ul><li>è£…è½½è¿‡ç¨‹<ol><li>constructor (åˆå§‹åŒ–stateï¼Œç»‘å®šthisã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä¸ç»‘å®šï¼Œåœ¨classä¸­ä½¿ç”¨å£°æ˜å˜é‡&amp;å°–å¤´å‡½æ•°çš„å†™æ³•)</li><li>getlnitialState (React.createClassä¸­ä½¿ç”¨)</li><li>getDefaultProps (React.createClassä¸­ä½¿ç”¨)</li><li>componentWillMount (è¿™ä¸ªæ—¶å€™æ²¡æœ‰ä»»ä½•æ¸²æŸ“å‡ºæ¥çš„ç»“æœï¼Œå³ä½¿è°ƒç”¨this.setState ä¿®æ”¹çŠ¶æ€ä¹Ÿä¸ä¼šå¼•å‘é‡æ–°ç»˜åˆ¶æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¯ä»¥åœ¨è¿™ä¸ª componentÂ­WillMount ä¸­åšçš„äº‹æƒ…ï¼Œéƒ½å¯ä»¥æå‰åˆ° constructor ä¸­é—´å»åš)</li><li>render (å®Œå…¨æ ¹æ® this.state å’Œ this.props æ¥å†³å®šè¿”å›çš„ç»“æœï¼Œè€Œä¸”ä¸è¦äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚åœ¨ render å‡½æ•°ä¸­å»è°ƒç”¨ this.setState æ¯«æ— ç–‘é—®æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸€ä¸ªçº¯å‡½æ•°ä¸åº”è¯¥å¼•èµ·çŠ¶æ€çš„æ”¹å˜)</li><li>componentDidMount (ç»„ä»¶å·²ç»è¢«è£…è½½åˆ° DOM æ ‘ä¸Šäº†,è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯·æ±‚æ¥å¡«å……ç»„ä»¶çš„å†…å®¹ã€ä½¿ç”¨ä¸‰æ–¹ä»£ç è·å–dom, éœ€è¦æ³¨æ„çš„æ˜¯è¯¥ç”Ÿå‘½å‘¨æœŸä¸ä¼šåœ¨ä¸€ä¸ªrenderåç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æ‰€æœ‰å­ç»„ä»¶renderç»“æŸåæ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºrenderåªè¿”å›jsxå¯¹è±¡å¹¶ä¸å¾€domæ ‘ä¸Šè£…è½½å†…å®¹ï¼Œå…·ä½“çš„å†…å®¹è£…è½½æ˜¯reactç»è¿‡vmåæ‰å†³å®šçš„)</li></ol></li><li>æ›´æ–°è¿‡ç¨‹<ol><li>shouldComponentUpdate (å¦‚æœè¿™ä¸ªå‡½æ•°è¿”å› trueï¼Œé‚£å°±ä¼šç»§ç»­æ›´æ–°è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥è°ƒç”¨ render å‡½æ•°;åä¹‹ï¼Œå¦‚æœå¾—åˆ° ä¸€ä¸ª falseï¼Œé‚£å°±ç«‹åˆ»åœæ­¢æ›´æ–°è¿‡ç¨‹ï¼Œä¹Ÿå°±ä¸ä¼šå¼•å‘åç»­çš„æ¸²æŸ“äº†)</li><li>componentWillReceiveProps (åªè¦æ˜¯çˆ¶ç»„ä»¶çš„ render å‡½æ•°è¢«è°ƒç”¨ï¼Œåœ¨ render å‡½æ•°é‡Œé¢è¢«è°ŠæŸ“çš„å­ç»„ä»¶å°±ä¼šç»å†æ›´æ–°è¿‡ç¨‹ï¼Œä¸ç®¡çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ props æœ‰æ²¡æœ‰æ”¹å˜ï¼Œéƒ½ä¼šè§¦å‘å­ç»„ä»¶çš„ componentWillReceiveProps å‡½æ•°, å­ç»„ä»¶ä¸­çš„ setstate ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•)</li><li>componentWillUpdate</li><li>render</li><li>componentDidUpdate</li></ol></li><li>å¸è½½è¿‡ç¨‹<ol><li>componentWillUnmount (é€šå¸¸è§£ç»‘äº‹ä»¶ã€å®šæ—¶å™¨ç­‰)</li></ol></li></ul><a id="more"></a></li><li><p>propTypes å»ºè®®åœ¨å¼€å‘ç¯å¢ƒå¯åŠ ï¼Œç”Ÿäº§ç¯å¢ƒé€šè¿‡babel-react-optimizeå»æ‰</p></li><li><p>åˆå§‹åŒ–stateï¼š</p><ol><li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.state = &#123;</span><br><span class="line">    count: props.initValue || <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// =&gt;</span></span><br><span class="line"><span class="keyword">this</span>.state = &#123;</span><br><span class="line">    count: props.initValue</span><br><span class="line">&#125;</span><br><span class="line">xxx.defaultProps = &#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>prop&amp;stateçš„å¯¹æ¯”ï¼š</p><ol><li>prop ç”¨äºå®šä¹‰å¤–éƒ¨æ¥å£ï¼Œ state ç”¨äºè®°å½•å†…éƒ¨çŠ¶æ€;</li><li>prop çš„èµ‹å€¼åœ¨å¤–éƒ¨ä¸–ç•Œä½¿ç”¨ç»„ä»¶æ—¶ï¼Œ state çš„èµ‹å€¼åœ¨ç»„ä»¶å†…éƒ¨;</li><li>ç»„ä»¶ç»ä¸åº”è¯¥æ”¹å˜ prop çš„å€¼ï¼ˆè¦ä¸¥æ ¼éµå®ˆå•å‘æ•°æ®æµåŸåˆ™ï¼Œä¿è¯ ui=render(data) è¿™ä¸ªå‡½æ•°æ— ä»»ä½•å‰¯ä½œç”¨ï¼‰ï¼Œè€Œ stateå­˜åœ¨çš„ç›®çš„å°±æ˜¯è®©ç»„ä»¶æ¥æ”¹å˜çš„ ã€‚</li></ol></li></ol></li><li><p>æ¨¡å—åŒ–<br> ç”¨ Reactå’Œ Reduxæ¥æ„å»ºå‰ç«¯ç½‘é¡µåº”ç”¨ï¼Œè¿™ä¸¤è€…éƒ½å¥‰ è¡Œè¿™æ ·ä¸€ä¸ªå…¬å¼ UI=render(state) æ¥äº§ç”Ÿç”¨æˆ·ç•Œé¢ã€‚ Reactæ‰é€‚åˆäºè§†å›¾å±‚é¢çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¸èƒ½æŒ‡æœ›é Reactæ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ï¼Œ Reduxæ‰é€‚åˆæ‹…å½“åº”ç”¨çŠ¶æ€çš„ç®¡ç†å·¥ä½œã€‚</p><ul><li><p>ä»æ¶æ„å‡ºå‘ï¼Œå½“æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªæ–°çš„åº”ç”¨çš„æ—¶å€™ï¼Œæœ‰å‡ ä»¶äº‹æƒ…æ˜¯ä¸€å®šè¦è€ƒè™‘æ¸…æ¥šçš„ï¼š</p><ol><li><p>ä»£ç æ–‡ä»¶çš„ç»„ç»‡ç»“æ„</p><ul><li><p>æŒ‰è§’è‰²ç»„ç»‡ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">reducers/</span><br><span class="line">  todoReducer.js</span><br><span class="line">  filterReducer.js</span><br><span class="line">actions/ </span><br><span class="line">  todoActions.js</span><br><span class="line">  filterActions.js</span><br><span class="line">components/</span><br><span class="line">  todoList.js</span><br><span class="line">  todoItem.js</span><br><span class="line">  filter.js</span><br><span class="line">containers/</span><br><span class="line">  todoListContainer.js</span><br><span class="line">  todoiternContainer.js</span><br><span class="line">  filterContainer.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// å”¯ä¸€çš„ç¼ºç‚¹æ˜¯æ–°å¢åŠŸèƒ½éœ€è¦åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹åˆ‡æ¢å¹¶ä¸”åˆ›å»ºæ–°æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li><li><p>æ¥åŠŸèƒ½ç»„ç»‡ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">todoList/</span><br><span class="line">  actions.js</span><br><span class="line">  actionTypes.js</span><br><span class="line">  index.js</span><br><span class="line">  reducer.js</span><br><span class="line">  views/</span><br><span class="line">    component.js</span><br><span class="line">    container.js</span><br><span class="line">filter/</span><br><span class="line">  actions.js</span><br><span class="line">  actionTypes.js</span><br><span class="line">  index.js</span><br><span class="line">  reducer.js</span><br><span class="line">  views/</span><br><span class="line">    component.js</span><br><span class="line">    container.js</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ¨¡å—æ¥å£</p><ul><li><p>å¸¸è§„å¯¼å…¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> â€™ .. /todoList/actions â€™;</span><br><span class="line"><span class="keyword">import</span> container <span class="keyword">as</span> TodoList <span class="keyword">from</span> â€™../todoList/views/containerâ€™;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ç§å†™æ³•å½“ç„¶èƒ½å¤Ÿå®ŒæˆåŠŸèƒ½ï¼Œä½†æ˜¯å´éå¸¸ä¸åˆç†ï¼Œå› ä¸ºè¿™è®© filteræ¨¡å—ä¾èµ–äº todoListæ¨¡å—çš„å†…éƒ¨ç»“æ„ï¼Œè€Œä¸”ç›´æ¥ä¼¸æ‰‹åˆ° todoList å†…éƒ¨å»å¯¼äººæƒ³è¦çš„éƒ¨åˆ†</span></span><br></pre></td></tr></table></figure></li><li><p>ç»Ÿä¸€å…¥å£å¯¼å…¥ (index.js)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> â€™. /actions.js â€™;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> â€™. /reducer.jsâ€™;</span><br><span class="line"><span class="keyword">import</span> view <span class="keyword">from</span> â€™./views/container.js â€™;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;actions, reducer, view&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨å¦‚ä¸‹</span></span><br><span class="line"><span class="keyword">import</span> &#123;actions , reducer, view <span class="keyword">as</span> TodoList&#125; <span class="keyword">from</span> â€™../todoListâ€™</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Store çš„çŠ¶æ€æ ‘è®¾è®¡</p><ul><li>ä¸€ä¸ªæ¨¡å—æ§åˆ¶ä¸€ä¸ªçŠ¶æ€èŠ‚ç‚¹</li><li>é¿å…å†—ä½™æ•°æ® (æ•°æ®ä¸€è‡´æ€§)</li><li>æ ‘å½¢ç»“æ„æ‰å¹³ï¼Œé¿å…å‡ºç°ä»¥ä¸‹æƒ…å†µï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> d = state.A &amp;&amp; state.A.B &amp;&amp; state.A.B.C &amp;&amp; state.A.B.C.D;</span><br></pre></td></tr></table></figure></li></ul></li></ol></li></ul></li><li><p>ç»„ä»¶æ€§èƒ½ä¼˜åŒ–</p><ol><li>å®¹å™¨ç»„ä»¶ä¸å‚»ç“œç»„ä»¶ (è®©ä¸€ä¸ªç»„ä»¶åªä¸“æ³¨åšä¸€ä»¶äº‹ï¼Œå®¹å™¨ç»„ä»¶è¿›è¡Œæ•°æ®å¤„ç†ç„¶åå°†æ•°æ®ä¼ å…¥å‚»ç“œç»„ä»¶ï¼Œå‚»ç“œç»„ä»¶åªè´Ÿè´£æ¸²æŸ“)</li><li>ä½¿ç”¨ shouldcomponentupdate æ¥é¿å…ä¸å¿…è¦çš„ç»„ä»¶æ›´æ–°ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰</li><li>é‚£ä¹ˆå¦‚ä½•æŸ¥çœ‹ chrome ä¸­ react æ€§èƒ½è¡¨ç°ï¼Ÿå‚è€ƒèµ„æ–™å¦‚ä¸‹ï¼š<ul><li><a href="https://calibreapp.com/blog/react-performance-profiling-optimization" target="_blank" rel="noopener">Profiling React Performance with React 16 and Chrome DevTools.</a></li><li><a href="https://zh-hans.reactjs.org/docs/optimizing-performance.html#profiling-components-with-the-chrome-performance-tab" target="_blank" rel="noopener">ä½¿ç”¨ Chrome Performance æ ‡ç­¾åˆ†æç»„ä»¶</a></li></ul></li></ol></li><li><p>é«˜é˜¶ç»„ä»¶<br> |  | ç‰¹ç‚¹ | åŒºåˆ« |<br> | :â€”â€“| :â€”-: | :â€”-: |<br> | ä»£ç†æ–¹å¼çš„é«˜é˜¶ç»„ä»¶ | æ“çºµ prop / è®¿é—® ref / æŠ½å–çŠ¶æ€ / åŒ…è£…ç»„ä»¶ | æ–°ç»„ä»¶ã€å‚æ•°ç»„ä»¶éƒ½è¦ç»å†å„è‡ªçš„ç”Ÿå‘½å‘¨æœŸ |<br> | ç»§æ‰¿æ–¹å¼çš„é«˜é˜¶ç»„ä»¶ | æ“çºµ prop / æ“çºµç”Ÿå‘½å‘¨æœŸå‡½æ•° | åªæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆsuper.render()ï¼‰ |</p></li><li><p>redux</p><ol><li>reduxåŸºæœ¬åŸåˆ™ï¼š<ul><li>å”¯ä¸€æ•°æ®æº(Single Source ofTruth)</li><li>ä¿æŒçŠ¶æ€åªè¯»( State is read-only)</li><li>æ•°æ®æ”¹å˜åªèƒ½é€šè¿‡çº¯å‡½æ•°å®Œæˆ( Changes are made with pure functions)</li></ul></li><li>ä¿æŒæ•°æ®çš„å”¯ä¸€æ€§ (context &amp; react-redux)</li><li>react-redux ä¸¤ä¸ªæœ€ä¸»è¦åŠŸèƒ½:<ul><li>connect: è¿æ¥å®¹å™¨ç»„ä»¶å’Œå‚»ç“œç»„ä»¶;</li><li>Provider: æä¾›åŒ…å« store çš„ context (context å®Œå…¨å¯ä»¥å®ç° provider ä½†æ˜¯ react-redux ä¸­çš„ provider åŒ…å«ä¸‰ä¸ªå‡½æ•°ï¼šsubscribeã€dispatchã€getStateã€‚react-redux å®šä¹‰äº† Provider çš„ componentWillReceiveProps å‡½æ•°ï¼Œåœ¨ Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ componentWillReceiveProps å‡½æ•°åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶éƒ½ä¼šè°ƒç”¨åˆ°ï¼ŒreactÂ­ redux åœ¨ componentWillReceiveProps å‡½æ•°ä¸­ä¼šæ£€æŸ¥è¿™ä¸€æ¬¡æ¸²æŸ“æ—¶ä»£è¡¨ store çš„ prop å’Œä¸Š ä¸€æ¬¡çš„æ˜¯å¦ä¸€æ ·ã€‚ å¦‚æœä¸ä¸€æ ·ï¼Œå°±ä¼šç»™å‡ºè­¦å‘Šï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é¿å…å¤šæ¬¡æ¸²æŸ“ç”¨äº†ä¸åŒçš„ Redux Storeã€‚ æ¯ä¸ª Redux åº”ç”¨åªèƒ½æœ‰ä¸€ä¸ª Redux Storeï¼Œåœ¨æ•´ä¸ª Redux çš„ç”Ÿå‘½å‘¨æœŸä¸­éƒ½åº”è¯¥ä¿æŒ Store çš„å”¯ä¸€æ€§)</li></ul></li></ol></li></ol><h3 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h3><ol><li>åœ¨ jsx ç”¨ç›´æ¥æŠŠåŒ¿åå‡½æ•°èµ‹å€¼çš„æ–¹æ³•ï¼Œçœ‹èµ·æ¥éå¸¸ç®€æ´è€Œä¸”æ–¹ä¾¿ï¼Œå…¶å®å¹¶ä¸æ˜¯å€¼å¾—æå€¡çš„æ–¹æ³•ã€‚å› ä¸ºæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›é€ ä¸€ä¸ªæ–°çš„åŒ¿åæ–¹æ³•å¯¹è±¡ ï¼Œè€Œä¸”æœ‰å¯èƒ½å¼•å‘å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚</li><li>render å’Œ shouldComponentUpdate å‡½æ•°ï¼Œä¹Ÿæ˜¯ React ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å”¯äºŒä¸¤ä¸ªè¦æ±‚æœ‰è¿”å›ç»“æœçš„å‡½æ•°ã€‚ render å‡½æ•°çš„è¿”å›ç»“æœå°†ç”¨äºæ„é€  DOM å¯¹è±¡ï¼Œè€Œ shouldComponentÂ­Update å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå‘Šè¯‰ React åº“è¿™ä¸ªç»„ä»¶åœ¨è¿™æ¬¡æ›´æ–°è¿‡ç¨‹ä¸­æ˜¯å¦è¦ç»§ç»­ã€‚</li><li>ä¸ºä»€ä¹ˆ react ä¸­å¤§å¤šæ•°çš„è°ƒç”¨é€šå¸¸æ˜¯é—­åŒ…å½¢å¼çš„å¤šå±‚è°ƒç”¨ï¼Ÿ å› ä¸ºéµä»ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹çš„åŸåˆ™<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect(mapStateToProps, mapDispatchToProps)(Counter)</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createThunkMiddleware</span>(<span class="params">extraArgument</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">&#123; dispatch, getState &#125;</span>) =&gt;</span> next =&gt; <span class="function"><span class="params">action</span>=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> action === <span class="string">"function"</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> action(dispatch , getState , extraArgument);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> next(action)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** è¿™æ˜¯ thunk çš„æºç å®ç°ï¼Œåªæ˜¯å•çº¯çš„åˆ¤æ–­äº† action ç±»å‹ï¼Œå…·ä½“åšäº†å¦‚ä¸‹æ“ä½œï¼š</span></span><br><span class="line"><span class="comment"> * 1. è°ƒç”¨ dispatchæ´¾å‘å‡ºä¸€ä¸ªæ–° actionå¯¹è±¡;</span></span><br><span class="line"><span class="comment"> * 2. è°ƒç”¨ getStateè·å¾—å½“å‰ReduxStoreä¸Šçš„çŠ¶æ€;</span></span><br><span class="line"><span class="comment"> * 3. è°ƒç”¨nextå‘Šè¯‰Reduxå½“å‰ä¸­é—´ä»¶å·¥ä½œå®Œæ¯•ï¼Œè®©Reduxè°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶;</span></span><br><span class="line"><span class="comment"> * 4. è®¿é—® actionå¯¹è±¡ actionä¸Šçš„æ‰€æœ‰æ•°æ®;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><ol start="4"><li><p>è§¦å‘ re-render çš„æ–¹å¼ï¼š</p><ul><li>setState</li><li>props æ”¹å˜</li><li>forceupdate</li></ul></li><li><p>fetchè®¤ä¸ºåªè¦æœåŠ¡å™¨è¿”å›ä¸€ä¸ªåˆæ³•çš„ HTTP å“åº”å°±ç®—æˆåŠŸï¼Œå°±ä¼šè°ƒç”¨ thenæä¾›çš„å›è°ƒå‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªHTTPå“åº”çš„çŠ¶æ€ç æ˜¯è¡¨ç¤ºå‡ºé”™äº†çš„400æˆ–è€…500ã€‚å› ä¸º fetch çš„è¿™ä¸ªç‰¹ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ then ä¸­ï¼Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ£€æŸ¥ä¼ äººå‚æ•° response status å­—æ®µï¼Œåªæœ‰ status æ˜¯ä»£è¡¨æˆåŠŸçš„ 200 çš„æ—¶å€™æ‰ç»§ç»­ï¼Œå¦åˆ™ä»¥é”™è¯¯å¤„ç† ã€‚</p></li><li>ç»„ä»¶-action-store-reducerså…³ç³»å›¾ï¼š</li></ol><p><img src="/2019/06/11/æ·±å…¥æµ…å‡ºreact-reduxç¬”è®°/i7eo_25f291ba15777c663644a0f507fde1af.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> Redux </tag>
            
            <tag> ä¸­é—´ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰æ–¹æ¥å…¥è¸©å‘é›†åˆ</title>
      <link href="/2019/05/21/%E4%B8%89%E6%96%B9%E6%8E%A5%E5%85%A5%E8%B8%A9%E5%9D%91%E9%9B%86%E5%90%88.html"/>
      <url>/2019/05/21/%E4%B8%89%E6%96%B9%E6%8E%A5%E5%85%A5%E8%B8%A9%E5%9D%91%E9%9B%86%E5%90%88.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨åšè·¨å¢ƒç”µå•†ç½‘ç«™çš„æ—¶å€™é¿å…ä¸äº†æ¥å…¥ä¸‰æ–¹çš„æ”¯ä»˜ã€ç»Ÿè®¡ç­‰ä»£ç æ¥è¿›è¡Œä¸€ç³»åˆ—çš„æ•°æ®ç»Ÿè®¡ã€åˆ†æã€å¼•æµç­‰ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹è‡ªå·±è¸©è¿‡çš„å‘ã€‚</p><h3 id="worldpayä¿©æ–¹"><a href="#worldpayä¿©æ–¹" class="headerlink" title="worldpayä¿©æ–¹"></a>worldpayä¿©æ–¹</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¹‹å‰ä¸è®ºæ˜¯ <code>paypal</code> è¿˜æ˜¯ <code>worldpay</code> æ¥æ”¯ä»˜éƒ½æ˜¯è·³è½¬åˆ°ä¸‰æ–¹é¡µé¢ï¼Œå› ä¸ºä¸­é—´è·³è½¬çš„è¿™ä¸€æ­¥ä¼šå¯¼è‡´éƒ¨åˆ†ç”¨æˆ·å¼ƒå•ï¼Œè½¬åŒ–ç‡ä¸‹é™ã€‚æ ¹æ®æˆ‘ä»¬è‡ªå·±çš„ç»Ÿè®¡å’Œä¸æµ·å¤–å®¢æˆ·æ²Ÿé€šæ¥çœ‹å¾—åˆ°çš„ç»“è®ºæ—¶å°½é‡ä¸è¦è·³è½¬ï¼Œæ‰€ä»¥è¦æŠŠä¹‹å‰çš„ä¸‰æ–¹æ”¹ä¸ºä¿©æ–¹ï¼Œå³é¡µé¢ä¸­<code>åµŒå¥— iframe</code> çš„æ–¹å¼ã€‚</p><ol><li>å¼•å…¥èµ„æºcss/js/helper.html</li><li>åˆ›å»ºç›®æ ‡div</li><li>æ‰§è¡Œsetup</li></ol><a id="more"></a><p>å…·ä½“å¦‚ä¸‹ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>My test page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">'stylesheet'</span> <span class="attr">href</span>=<span class="string">'https://payments.worldpay.com/resources/hpp/integrations/embedded/css/hpp-embedded-integration-library.css'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'https://payments.worldpay.com/resources/hpp/integrations/embedded/js/hpp-embedded-integration-library.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'custom-html'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/javascript'</span>&gt;</span><span class="undefined">  </span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> customOptions = &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="string">'lightbox'</span>,</span></span><br><span class="line"><span class="javascript">        iframeIntegrationId: <span class="string">'libraryObject'</span>,</span></span><br><span class="line"><span class="javascript">        iframeHelperURL: <span class="string">'https://www.example.com/helper.html'</span>,</span></span><br><span class="line"><span class="javascript">        iframeBaseURL: <span class="string">'https://www.example.com'</span>,</span></span><br><span class="line"><span class="javascript">        url: <span class="string">'https://payments.worldpay.com/ngpp/integration/wpg/corporate?OrderKey=YOUR_ORDER_KEY&amp;Ticket=YOUR_TICKET_ID'</span>,</span></span><br><span class="line"><span class="javascript">        target: <span class="string">'custom-html'</span>,</span></span><br><span class="line"><span class="javascript">        accessibility: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">        debug: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">        language: <span class="string">'en'</span>,</span></span><br><span class="line"><span class="javascript">        country: <span class="string">'gb'</span>,</span></span><br><span class="line"><span class="javascript">        preferredPaymentMethod: <span class="string">''</span>,</span></span><br><span class="line"><span class="javascript">        successURL: <span class="string">'https://www.example.com/success'</span>,</span></span><br><span class="line"><span class="javascript">        cancelURL: <span class="string">'https://www.example.com/cancel'</span>,</span></span><br><span class="line"><span class="javascript">        failureURL: <span class="string">'https://www.example.com/failure'</span>,</span></span><br><span class="line"><span class="javascript">        pendingURL: <span class="string">'https://www.example.com/pending'</span>,</span></span><br><span class="line"><span class="javascript">        errorURL: <span class="string">'https://www.example.com/error'</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//initialise the library and pass options</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> libraryObject = <span class="keyword">new</span> WPCL.Library();</span></span><br><span class="line"><span class="undefined">    libraryObject.setup(customOptions);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p>éœ€è¦æ³¨æ„çš„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>helper.html å¿…é¡»æ”¾åœ¨ä¸å½“å‰ç«™ç‚¹åŒæºçš„ç¯å¢ƒä¸­ï¼ˆå¿…é¡»ç¬¦åˆåŒæºç­–ç•¥ï¼‰ï¼Œä»¥æˆ‘ä»¬çš„ <code>javaé¡¹ç›®</code> æ¥è¯´ï¼Œæˆ‘æŠŠ helper.html æ”¾åœ¨äº† static ç›®å½•ä¸‹ï¼Œè¿™æ ·é¿å…ç»è¿‡åç«¯çš„æ‹¦æˆªå™¨å‡ºç°è®¿é—®ä¸åˆ°çš„æƒ…å†µã€‚ç»“æœæ”¾åœ¨ <code>iframeHelperURL</code> å±æ€§å¤„å³å¯: <code>iframeHelperURL: window.location.origin + &#39;/static/html/helper.html&#39;</code> </li><li>å¯ä»¥åœ¨ç›®æ ‡ div ä¸­åŠ å…¥ loading æ•ˆæœï¼Œå› ä¸º iframe ç”Ÿæˆåä¼šç›´æ¥æ›¿æ¢ç›®æ ‡ div ä¸­çš„å†…å®¹ï¼š </li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'custom-html'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>=&gt;<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'custom-html'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"worldpay-loading"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sp sp-circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ol start="3"><li>ç¤ºä¾‹ä»£ç ä¸­çš„é…ç½®å¯¹è±¡ <code>customOptions</code> ä¸­æ—  <code>inject</code> å±æ€§è€Œä¸”æ–‡æ¡£ä¸­ <code>inject</code> ä¹Ÿæ˜¯éå¿…å¡«çš„ï¼Œä½†æ˜¯ <code>hpp-embedded-integration-library.js</code> è¿™ä¸ªèµ„æºä¸­å¯¹è¿™ä¸ªå±æ€§æ²¡æœ‰åšä»»ä½•ç©ºå€¼å¤„ç†ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (self.options.inject === <span class="string">'immediate'</span>) &#123;</span><br><span class="line">    injectIframeToTarget.call(self);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (self.options.inject === <span class="string">'onload'</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">        writeMessage.call(self, <span class="string">'The browser supports addEventListener'</span>);</span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, self.onloadInject, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">        writeMessage.call(self, <span class="string">'The  browser supports attachEvent'</span>);</span><br><span class="line">        <span class="built_in">window</span>.attachEvent(<span class="string">'onload'</span>, self.onloadInject);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        writeMessage.call(self, <span class="string">'ERROR: the  browser does not support an onload event-handler'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (self.options.inject === <span class="string">'default'</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        injectIframeToTarget.call(self);</span><br><span class="line">        <span class="keyword">if</span> (e &amp;&amp; e.target &amp;&amp; e.target != <span class="built_in">document</span>) &#123;</span><br><span class="line">            self.isFakeLoadEvent = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    writeMessage.call(self, <span class="string">'ERROR: accepted parameters are immediate, onload, default'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>å¯ä»¥çœ‹åˆ°å¦‚æœä¸é…ç½® <code>inject: immediate|default|onload</code> çš„è¯ï¼Œè¿™é‡Œç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ iframe å¹¶æœªç”Ÿæˆå‡ºæ¥æ‰€ä»¥å½“å‰ç½‘é¡µçš„æ§åˆ¶å°ä¸­ä¸ä¼šå‡ºç°ä»»ä½•ä¿¡æ¯ï¼Œæ‰€ä»¥åº”è¯¥å°† <code>inject: immediate</code> åŠ å…¥åˆ°é…ç½®å¯¹è±¡ <code>customOptions</code> ä¸­ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://payments.worldpay.com/resources/hpp/integrations/embedded/doc/#top" target="_blank" rel="noopener">worldpay iframe &amp; lightbox å¸®åŠ©æ–‡æ¡£</a></li></ul><h3 id="paypal-smart-button"><a href="#paypal-smart-button" class="headerlink" title="paypal smart button"></a>paypal smart button</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åšè¿™ä¸ªçš„èµ·å› æ˜¯ paypal æ¥æˆ‘å¸å¹äº†ä¸€ç•ª <code>smart buttonï¼ˆsbpï¼‰</code> å¯¹äºè·¨å¢ƒç”µå•†å…¬å¸æ˜¯å¤šä¹ˆçš„å¥½ï¼ˆè‡ªåŠ¨åˆ‡æ¢ä¸åŒè¯­ç§ã€é¿å…å¤šæ¬¡è·³è½¬ã€balblablaï¼‰ç»“æœçœŸæ­£å®æ–½èµ·æ¥å‡ºç°çš„ bug è¿˜éƒ½æ˜¯å¯¼è‡´ iframe æœªç”Ÿæˆæˆ–è€… æ”¯ä»˜å¤±è´¥çš„é‡å¤§ bug ï¼Œæ„Ÿè§‰ sbp è¿˜å¤„äºå®éªŒé˜¶æ®µã€‚ã€‚ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœä½ åªéœ€åœ¨ pc ä¸Šä½¿ç”¨ sbp é‚£ä¹ˆ ie 8+ æ²¡é—®é¢˜ï¼Œå¦‚æœè¦è€ƒè™‘æ‰‹æœºã€pcã€å¹³æ¿ç­‰å¤šç«¯ç¯å¢ƒæ—¶ï¼Œå¼ºçƒˆå»ºè®®æš‚æ—¶ä¸è¦ä½¿ç”¨ã€‚é™„ä¸Šä¸€å¼ è€ƒè™‘å¤šç«¯ç¯å¢ƒä¸‹çš„ issue æ‰¯çš®æˆªå›¾ï¼š</p><p><img src="/2019/05/21/ä¸‰æ–¹æ¥å…¥è¸©å‘é›†åˆ/i7eo_df4a2176f1f9163f1d158cffcd294291.png" alt="spb-bug-issue"></p><p>æ¥å…¥ pc çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//www.paypal.com/sdk/js?client-id=$SITE.paypalClientId&amp;commit=true&amp;locale=$LANG.spbLang&amp;currency=$CURRENCY.code&amp;disable-funding=credit"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span>(!<span class="built_in">window</span>.paypal) &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'spb error: .js file has some errors when loading'</span>);</span></span><br><span class="line"><span class="javascript">&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="undefined">    paypal.Buttons(&#123;</span></span><br><span class="line"><span class="undefined">        style: &#123;</span></span><br><span class="line"><span class="javascript">            size: <span class="string">'responsive'</span>,</span></span><br><span class="line"><span class="javascript">            layout: <span class="string">'horizontal'</span>, <span class="comment">// vertical</span></span></span><br><span class="line"><span class="javascript">            tagline: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">            label: <span class="string">'checkout'</span>,</span></span><br><span class="line"><span class="javascript">            shape: <span class="string">'rect'</span>,</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        commit: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">        onInit: <span class="function"><span class="keyword">function</span>(<span class="params">data, actions</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'onInit, please wait ...'</span>);</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        createOrder: <span class="function"><span class="keyword">function</span>(<span class="params">data, actions</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'createOrder, please wait ...'</span>);</span></span><br><span class="line"><span class="javascript">             <span class="comment">// return fetch(ajaxUrl, &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     method: 'get'</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// .then(data =&gt; data.json())</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// .then(function(res) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     return resolveFunction(res);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $.get(ajaxUrl, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(res.code === <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> token = res.data.redirectUrl.split(<span class="string">'token='</span>)[<span class="number">1</span>];</span></span><br><span class="line"><span class="javascript">                        result = $.extend(res.data, &#123;<span class="attr">token</span>: token&#125;)</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">if</span>(token) &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">console</span>.log(<span class="string">'send ajax'</span>);</span></span><br><span class="line"><span class="undefined">                            resolve(token);</span></span><br><span class="line"><span class="javascript">                        &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.location.href = location;</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">window</span>.location.href = res.msg || location;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;)</span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="comment">// Finalize the transaction</span></span></span><br><span class="line"><span class="javascript">        onApprove: <span class="function"><span class="keyword">function</span>(<span class="params">data, actions</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'onApprove, please wait ...'</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> returnUrl = result.returnUrl + <span class="string">"&amp;paymentId="</span> + data.paymentID + <span class="string">"&amp;token="</span> + result.token + <span class="string">"&amp;PayerID="</span> + data.payerID;</span></span><br><span class="line"><span class="undefined">            actions.redirect(returnUrl);</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        onCancel: <span class="function"><span class="keyword">function</span>(<span class="params">data, actions</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        onError: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.error(<span class="string">'smart payment button has some errors. like: '</span>, err);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="built_in">window</span>.location = result.failedUrl + <span class="string">'&amp;err='</span> + err;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;).render(spbEl);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>sbp åœ¨ createOrder è¿™ä¸€æ­¥å‘é€è¯·æ±‚çš„æ—¶å€™è¦ä¹ˆå¯¹æ™®é€šè¯·æ±‚è¿›è¡Œ promise åŒ–ï¼Œè¦ä¹ˆç›´æ¥ä½¿ç”¨ fetchã€‚å¦åˆ™ä¼šå‡ºç° iframe ä¸­ä¸€ç›´ loading çš„æƒ…å†µ</li></ol><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://developer.paypal.com/docs/checkout/" target="_blank" rel="noopener">Smart Payment Buttons Overview</a></li></ul><h3 id="certona"><a href="#certona" class="headerlink" title="certona"></a>certona</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;certonaæ¥å…¥åº”è¯¥æ˜¯æˆ‘åšè¿‡æœ€æ–¹ä¾¿å¿«æ·çš„äº†ã€‚</p><p>nodeç¯å¢ƒæ¥å…¥å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// å½“å‰é¡µé¢ï¼š404.html</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%-</span> <span class="attr">include</span>('<span class="attr">.</span>/<span class="attr">analysis</span>/<span class="attr">certona.html</span>', &#123;<span class="attr">pageType:</span> '<span class="attr">404</span>'&#125;)%&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// å½“å‰é¡µé¢ï¼šcertona.html</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"//edge1.certona.net/YOUR_TAG/scripts/resonance.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">id</span>=<span class="string">"Certona"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">&lt;% <span class="keyword">if</span>(<span class="keyword">typeof</span>(pageType) != <span class="string">'undefined'</span>) &#123; %&gt;</span></span><br><span class="line"><span class="javascript">    &lt;% <span class="keyword">if</span>(pageType == <span class="string">'404'</span>) &#123; %&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> certona = &#123;</span></span><br><span class="line"><span class="javascript">            <span class="string">"pagetype"</span> : <span class="string">"404ERROR"</span>,</span></span><br><span class="line"><span class="javascript">            <span class="string">"devicetype"</span> : <span class="string">"DESKTOP"</span>,</span></span><br><span class="line"><span class="javascript">            <span class="string">"recommendations"</span> : <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="pinterest"><a href="#pinterest" class="headerlink" title="pinterest"></a>pinterest</h3><ol><li>æ·»åŠ ä¸»ä»£ç ä¸ pagevisti è¿½è¸ª</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">!<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">if</span>(!<span class="built_in">window</span>.pintrk)&#123;<span class="built_in">window</span>.pintrk=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></span></span><br><span class="line"><span class="javascript">&#123;<span class="built_in">window</span>.pintrk.queue.push(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>))&#125;;<span class="keyword">var</span></span></span><br><span class="line"><span class="javascript">n=<span class="built_in">window</span>.pintrk;n.queue=[],n.version=<span class="string">"3.0"</span>;<span class="keyword">var</span></span></span><br><span class="line"><span class="javascript">t=<span class="built_in">document</span>.createElement(<span class="string">"script"</span>);t.async=!<span class="number">0</span>,t.src=e;<span class="keyword">var</span></span></span><br><span class="line"><span class="javascript">r=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>)[<span class="number">0</span>];r.parentNode.insertBefore(t,r)&#125;&#125;</span></span><br><span class="line"><span class="javascript">(<span class="string">"https://s.pinimg.com/ct/core.js"</span>); </span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">pintrk(<span class="string">'load'</span>,<span class="string">'YOUR_TAG_ID'</span>);</span></span><br><span class="line"><span class="javascript">pintrk(<span class="string">'page'</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;noscript=1"</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">pintrk(<span class="string">'track'</span>, <span class="string">'pagevisit'</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;event=pagevisit&amp;noscript=1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>æ”¯ä»˜æˆåŠŸé¡µ</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    !<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">if</span>(!<span class="built_in">window</span>.pintrk)&#123;<span class="built_in">window</span>.pintrk=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">window</span>.pintrk.queue.push(</span></span><br><span class="line"><span class="javascript">    <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>))&#125;;<span class="keyword">var</span></span></span><br><span class="line"><span class="javascript">    n=<span class="built_in">window</span>.pintrk;n.queue=[],n.version=<span class="string">"3.0"</span>;<span class="keyword">var</span></span></span><br><span class="line"><span class="javascript">    t=<span class="built_in">document</span>.createElement(<span class="string">"script"</span>);t.async=!<span class="number">0</span>,t.src=e;<span class="keyword">var</span></span></span><br><span class="line"><span class="javascript">    r=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>)[<span class="number">0</span>];r.parentNode.insertBefore(t,r)&#125;&#125;(<span class="string">"https://s.pinimg.com/ct/core.js"</span>);</span></span><br><span class="line"><span class="javascript">    pintrk(<span class="string">'load'</span>, <span class="string">'YOUR_TAG_ID'</span>);</span></span><br><span class="line"><span class="javascript">    pintrk(<span class="string">'page'</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;noscript=1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">pintrk (<span class="string">'track'</span>, <span class="string">'checkout'</span>, &#123;&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag"><span class="attr">src</span>=<span class="string">"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;event=checkout&amp;noscript=1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>ä¸è®ºä»€ä¹ˆä¸‰æ–¹ä»£ç ï¼Œåœ¨æ”¯ä»˜æˆåŠŸé¡µæ·»åŠ æ—¶ä¸€å®šè¦æ³¨æ„é¿å…åˆ·æ–°åé‡å¤ä¸Šä¼ ï¼Œä¸€èˆ¬åšæ³•æ˜¯åˆ©ç”¨cookieåˆ¤æ–­ã€‚shopify å¹³å°è¿˜æä¾›äº†ä¸€ä¸ª <code>first_time_accessed</code> çš„æ–¹æ³•ã€‚</li></ol><h3 id="GA"><a href="#GA" class="headerlink" title="GA"></a>GA</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gaçš„ä»£ç æ–‡æ¡£å·²ç»å¾ˆè¯¦ç»†ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡ä»¥åŠæ•°æ®çš„ä¸åŒç»´åº¦æ¥è‡ªå®šä¹‰ä¸Šä¼ æ•°æ®ï¼Œä¹Ÿæ²¡ä»€ä¹ˆæ·±å‘ï¼Œè¿™é‡Œå°±ä¸å†é˜è¿°äº†ã€‚</p><h3 id="Ping-Pong-Pay"><a href="#Ping-Pong-Pay" class="headerlink" title="Ping Pong Pay"></a>Ping Pong Pay</h3><p>ç°åœ¨å¤§å¤šæ”¯ä»˜å·²ç»ä»é‡å®šå‘çš„ä¸‰æ–¹æ¨¡å¼ï¼Œå‘ä¼ªä¿©æ–¹æˆ–è€…ä¿©æ–¹çš„æ¨¡å¼å‘å±•ã€‚æ¯•ç«Ÿä¿©æ–¹ä¸ä¼šè·³é¡µé¢ï¼Œè¿™æ ·ä¼šé™ä½ç”¨æˆ·çš„æµå¤±ç‡ã€‚</p><p>åœ¨å¯¹æ¥è¿™ä¸ªæ”¯ä»˜æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯ä¼ªä¿©æ–¹çš„æ¨¡å¼ï¼Œä½†æ˜¯ pingpong çš„ä¼ªä¿©æ–¹å¹¶ä¸æ˜¯ç›´æ¥ç”Ÿæˆ iframe è€Œæ˜¯ç›´æ¥ç”Ÿæˆ domï¼Œä½†é—®é¢˜æ˜¯è¿™ä¸ªæ”¯ä»˜ç”Ÿæˆ dom çš„çˆ¶å…ƒç´ æ˜¯ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±ä¸šåŠ¡çš„è¡¨å•ï¼Œå½“åˆ‡æ¢å…¶ä»–æ”¯ä»˜å•å‡»æˆ‘ä»¬è‡ªå·±çš„è¡¨å•æäº¤æŒ‰é’®æ—¶ pingpong çš„æ”¯ä»˜ä¹Ÿä¼šè¢«è§¦å‘ã€‚ä¸ pingpong æ²Ÿé€šåï¼Œå¯¹æ–¹ç»™äº†ä¸€ä¸ªåŠ¨æ€ç”Ÿæˆè¡¨å•çš„å»ºè®®ã€‚ä½†æ˜¯é‰´äºæˆ‘ä»¬æ¥å…¥çš„æ”¯ä»˜å¾ˆå¤šï¼Œå¦‚æœé‡‡ç”¨åŠ¨æ€ç”Ÿæˆè¡¨å•éœ€è¦èŠ±æ—¶é—´é‡æ„ã€æµ‹è¯•ï¼Œæ‰€ä»¥è¿™ä¸ªæ„è§å¹¶æ²¡æœ‰é‡‡çº³ã€‚ä¸è¿‡æ²Ÿé€šåå½“æˆ‘å°† pingpong çš„ js ä¸å¼•å…¥åï¼Œä¸Šè¿°é—®é¢˜å¹¶æ²¡ç”¨å¤ç°ã€‚ç°åœ¨çš„é—®é¢˜å°±æ˜¯æ€ä¹ˆå»é™¤ js çš„å½±å“ï¼Ÿ<br>é¦–å…ˆæƒ³åˆ°çš„æ˜¯åˆ é™¤ script æ ‡ç­¾ï¼Œä½†æ˜¯åªè¦ js åŠ è½½ï¼Œå³ä½¿åˆ é™¤äº† dom ä»£ç è¿˜æ˜¯ä¼šæ‰§è¡Œã€‚ï¼ˆå…·ä½“å¯å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/29970467/removed-javascript-is-still-executable" target="_blank" rel="noopener">Removed JavaScript is still executable</a>ï¼‰æ‰€ä»¥éœ€è¦æ¢ä¸€ç§æ€è·¯ï¼Œé€‰æ‹©é pingpong æ”¯ä»˜æ—¶å°†è¯¥ js æš´éœ²å‡ºæ¥çš„ä¸‰æ–¹å¯¹è±¡å­˜èµ·æ¥åç›´æ¥ç½® nullï¼Œå½“ä»å…¶ä»–æ”¯ä»˜åˆ‡å› pingpong æ”¯ä»˜æ—¶å°†å­˜èµ·æ¥çš„å€¼é‡æ–°èµ‹å›å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰æ–¹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> worldpay </tag>
            
            <tag> paypal smart button </tag>
            
            <tag> certona </tag>
            
            <tag> pinterest </tag>
            
            <tag> ga </tag>
            
            <tag> pingpong </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptç»§æ‰¿</title>
      <link href="/2019/03/13/Javascript%E7%BB%A7%E6%89%BF.html"/>
      <url>/2019/03/13/Javascript%E7%BB%A7%E6%89%BF.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Javascriptçš„ç»§æ‰¿æ˜¯åŸºäºåŸå‹çš„ï¼Œä¹‹å‰ç†è§£çš„æ¯”è¾ƒç®€å•ï¼Œç›´åˆ°æœ€è¿‘åœ¨ç”¨ es5 å†™æ˜Ÿçº§è¯„åˆ†ç»„ä»¶çš„æ—¶å€™é‡åˆ°äº†äº›é—®é¢˜ï¼Œè§£å†³ä¹‹åç†è§£æ·±äº†ä¸€äº›ã€‚æ€»ç»“å½’çº³ï¼Œä»¥ä¾¿åç”¨ã€‚</p><h3 id="æ˜Ÿçº§è¯„åˆ†"><a href="#æ˜Ÿçº§è¯„åˆ†" class="headerlink" title="æ˜Ÿçº§è¯„åˆ†"></a>æ˜Ÿçº§è¯„åˆ†</h3><p>åŸæœ¬çš„éœ€æ±‚æœ‰ä¿©ä¸ªï¼š</p><ol><li>æ ¹æ®åå°è¿”å›çš„è¯„ä»·åˆ†æ•°å•çº¯è¿›è¡Œ5é¢—æ˜Ÿçš„å±•ç¤º</li><li>ç”¨æˆ·å¯ä»¥åœ¨5é¢—æ˜Ÿä¸Šä¸ºå•†å“è¿›è¡Œæ‰“åˆ†ï¼Œå•å‡»åä¸Šä¼ </li></ol><p>å¼€å§‹ç”¨æœ€ç¬¨çš„æ–¹æ³•ï¼Œä»ä¸šåŠ¡å‡ºå‘å¾ˆå¿«é€Ÿçš„æŠŠä¿©ä¸ªéœ€æ±‚éƒ½å®ç°äº†ã€‚æœ€åæƒ³ç€èƒ½ä¸èƒ½åˆ©ç”¨ç»§æ‰¿æ¥ä¼˜åŒ–ï¼Œæ–¹ä¾¿åæœŸæ‰©å±•å¯ä»¥è¿›è¡ŒåŠæ˜Ÿæˆ–è€…å››åˆ†ä¹‹ä¸€æ˜Ÿè¯„åˆ†ã€‚</p><p>å…·ä½“æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/2019/03/13/Javascriptç»§æ‰¿/i7eo-Mar-14-201900-56-35.gif" alt="star"></p><h3 id="åˆ©ç”¨åŸå‹åˆ†åˆ«å®ç°æ»¡æ˜Ÿä¸åŠæ˜Ÿ"><a href="#åˆ©ç”¨åŸå‹åˆ†åˆ«å®ç°æ»¡æ˜Ÿä¸åŠæ˜Ÿ" class="headerlink" title="åˆ©ç”¨åŸå‹åˆ†åˆ«å®ç°æ»¡æ˜Ÿä¸åŠæ˜Ÿ"></a>åˆ©ç”¨åŸå‹åˆ†åˆ«å®ç°æ»¡æ˜Ÿä¸åŠæ˜Ÿ</h3><a id="more"></a><p>psï¼šè¿™é‡Œçš„æ˜Ÿæ˜Ÿä½¿ç”¨ iconfont çš„å­—ä½“å›¾æ ‡</p><h4 id="Domç»“æ„"><a href="#Domç»“æ„" class="headerlink" title="Domç»“æ„"></a>Domç»“æ„</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"star"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"star-list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item iconfont icon-star-off"</span> <span class="attr">title</span>=<span class="string">"wtf"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item iconfont icon-star-off"</span> <span class="attr">title</span>=<span class="string">"bad"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item iconfont icon-star-off"</span> <span class="attr">title</span>=<span class="string">"not bad"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item iconfont icon-star-off"</span> <span class="attr">title</span>=<span class="string">"good"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item iconfont icon-star-off"</span> <span class="attr">title</span>=<span class="string">"perfect"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ»¡æ˜Ÿ-amp-åŠæ˜ŸJSä»£ç "><a href="#æ»¡æ˜Ÿ-amp-åŠæ˜ŸJSä»£ç " class="headerlink" title="æ»¡æ˜Ÿ&amp;åŠæ˜ŸJSä»£ç "></a>æ»¡æ˜Ÿ&amp;åŠæ˜ŸJSä»£ç </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> starRating = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ•´é¢—</span></span><br><span class="line">    <span class="keyword">var</span> lightenFullStar = <span class="function"><span class="keyword">function</span>(<span class="params">el, opts</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.$el = $(el)</span><br><span class="line">        <span class="keyword">this</span>.$stars = <span class="keyword">this</span>.$el.find(<span class="string">'.item'</span>)</span><br><span class="line">        <span class="keyword">this</span>.opts = opts</span><br><span class="line">    &#125;</span><br><span class="line">    lightenFullStar.prototype.lighten = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">        num = <span class="built_in">parseInt</span>(num)</span><br><span class="line">        <span class="keyword">this</span>.$stars.each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &lt; num ) &#123;</span><br><span class="line">                $(<span class="keyword">this</span>).removeClass(<span class="string">'icon-star-off'</span>).addClass(<span class="string">'icon-star-on'</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                $(<span class="keyword">this</span>).removeClass(<span class="string">'icon-star-on'</span>).addClass(<span class="string">'icon-star-off'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    lightenFullStar.prototype.bindEvent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span></span><br><span class="line">        self.$el.on(<span class="string">'click'</span>, <span class="string">'.item'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> selectedStar = $(<span class="keyword">this</span>).index() + <span class="number">1</span></span><br><span class="line">            self.opts.num = selectedStar</span><br><span class="line">            <span class="keyword">typeof</span> self.opts.select === <span class="string">'function'</span> &amp;&amp; self.opts.select.call(<span class="keyword">this</span>, selectedStar, self.$stars.length)</span><br><span class="line">        &#125;).on(<span class="string">'mouseover'</span>, <span class="string">'.item'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            self.lighten($(<span class="keyword">this</span>).index() + <span class="number">1</span>)</span><br><span class="line">        &#125;).on(<span class="string">'mouseout'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            self.lighten(self.opts.num)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    lightenFullStar.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lighten(<span class="keyword">this</span>.opts.num)</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">this</span>.opts.readOnly)&#123;</span><br><span class="line">            <span class="keyword">this</span>.bindEvent()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠé¢—</span></span><br><span class="line">    <span class="keyword">var</span> lightenHalfStar = <span class="function"><span class="keyword">function</span>(<span class="params">el, opts</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.$el = $(el)</span><br><span class="line">        <span class="keyword">this</span>.$stars = <span class="keyword">this</span>.$el.find(<span class="string">'.item'</span>)</span><br><span class="line">        <span class="keyword">this</span>.opts = opts</span><br><span class="line">        <span class="keyword">this</span>.patch = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    lightenHalfStar.prototype.lighten = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> integer = <span class="built_in">parseInt</span>(num),</span><br><span class="line">            hasDecimals = integer !== num</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">this</span>.$stars.each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &lt; num ) &#123;</span><br><span class="line">                $(<span class="keyword">this</span>).removeClass(<span class="string">'icon-star-off icon-star-half'</span>).addClass(<span class="string">'icon-star-on'</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                $(<span class="keyword">this</span>).removeClass(<span class="string">'icon-star-on icon-star-half'</span>).addClass(<span class="string">'icon-star-off'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// åŠé¢—çš„ç‚¹äº®</span></span><br><span class="line">        <span class="keyword">if</span>(hasDecimals) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$stars.eq(integer).removeClass(<span class="string">'icon-star-off icon-star-on'</span>).addClass(<span class="string">'icon-star-half'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    lightenHalfStar.prototype.bindEvent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span></span><br><span class="line">        self.$el.on(<span class="string">'mousemove'</span>, <span class="string">'.item'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// è¿™æ˜¯ç†æƒ³çŠ¶æ€å¦‚æœè®¾ç½®padingleft/right è¿˜æ²¡åˆ°ç›®æ ‡domæ˜Ÿæ˜Ÿå°±äº§ç”Ÿå˜åŒ–</span></span><br><span class="line">            <span class="comment">// æ˜Ÿæ˜Ÿçš„é—´è·æœ€å¥½è®¾ç½®ä¸ºmargin</span></span><br><span class="line">            <span class="keyword">if</span>(e.pageX - $(<span class="keyword">this</span>).offset().left &lt; $(<span class="keyword">this</span>).width() / <span class="number">2</span>) &#123;</span><br><span class="line">                self.patch = <span class="number">0.5</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                self.patch = <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> selectedStar = $(<span class="keyword">this</span>).index() + self.patch</span><br><span class="line">            self.lighten(selectedStar)</span><br><span class="line">        &#125;).on(<span class="string">'click'</span>, <span class="string">'.item'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            self.opts.num = $(<span class="keyword">this</span>).index() + self.patch</span><br><span class="line">            <span class="keyword">typeof</span> self.opts.select === <span class="string">'function'</span> &amp;&amp; self.opts.select.call(<span class="keyword">this</span>, self.opts.num, self.$stars.length)</span><br><span class="line">        &#125;).on(<span class="string">'mouseout'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            self.lighten(self.opts.num)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    lightenHalfStar.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lighten(<span class="keyword">this</span>.opts.num)</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">this</span>.opts.readOnly)&#123;</span><br><span class="line">            <span class="keyword">this</span>.bindEvent()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// default</span></span><br><span class="line">    <span class="keyword">var</span> defaults = &#123;</span><br><span class="line">        mode: <span class="string">'full'</span>,</span><br><span class="line">        num: <span class="number">0</span>,</span><br><span class="line">        readOnly: <span class="literal">false</span>,</span><br><span class="line">        select: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> reflect = &#123;</span><br><span class="line">        <span class="string">'full'</span>: lightenFullStar,</span><br><span class="line">        <span class="string">'half'</span>: lightenHalfStar</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> _init = <span class="function"><span class="keyword">function</span>(<span class="params">el, opts</span>) </span>&#123;</span><br><span class="line">        opts = $.extend(&#123;&#125;, defaults, opts)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!reflect[opts.mode]) opts.mode = <span class="string">'full'</span></span><br><span class="line">        <span class="keyword">new</span> reflect[opts.mode](el, opts).init()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        init: _init</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">starRating.init(<span class="string">'.star-list'</span>, &#123;</span><br><span class="line">    mode:<span class="string">'full'</span>,</span><br><span class="line">    num: <span class="number">4.6</span>,</span><br><span class="line">    readOnly: <span class="literal">false</span>,</span><br><span class="line">    select: <span class="function"><span class="keyword">function</span>(<span class="params">selected, total</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(selected + <span class="string">'/'</span> + total)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´ä¸€ä¸‹ï¼Œè¿™é‡Œä¸»è¦è¿ç”¨çš„äº‹ä»¶æœ‰ mouseover(mousemove)ã€mouseoutã€clickã€‚ä¸ºä»€ä¹ˆä¸ç”¨  mouseenter&amp;mouseleave å…·ä½“å¯ä»¥å‚è€ƒmdnã€‚æ»¡æ˜Ÿåˆ©ç”¨ mouseover ç›‘å¬é¼ æ ‡ç§»å…¥å½“å‰ dom çš„æ“ä½œï¼ŒåŠæ˜Ÿåˆ™å°† mouseover æ›¿æ¢ä¸º mousemove ï¼Œå› ä¸ºæ­¤æ—¶æˆ‘ä»¬çš„é¼ æ ‡ç§»å…¥æ—¶åœ¨æ˜Ÿæ˜Ÿçš„å³ä¾§ä¹Ÿå°±æ˜¯æ•´é¢—æ˜Ÿï¼Œæ­¤æ—¶åœ¨æ˜Ÿæ˜Ÿå†…éƒ¨é¼ æ ‡ä»å³å‘å·¦ç§»åŠ¨ mouseover æ˜¯æ— æ³•è§¦å‘çš„ï¼Œæ‰€ä»¥ä¸èƒ½é€‰æ‹©åŠæ˜Ÿã€‚å…¶ä»–çš„å®ç°å°±æ˜¯æŒ‰ç…§ä¸šåŠ¡ä¸€æ­¥æ­¥æ¥å³å¯ï¼Œè¿™ä¿©æ®µä»£ç å†™å®Œä¹‹åï¼Œå‘ç°å…¶å®å¾ˆåƒã€‚okï¼Œä¸‹æ¥åˆ©ç”¨ç»§æ‰¿ä¸å¤šæ€æ¥æ”¹å†™ã€‚</p><h3 id="åˆ©ç”¨æ¨¡ç‰ˆæ–¹æ³•æ”¹å†™ä»£ç "><a href="#åˆ©ç”¨æ¨¡ç‰ˆæ–¹æ³•æ”¹å†™ä»£ç " class="headerlink" title="åˆ©ç”¨æ¨¡ç‰ˆæ–¹æ³•æ”¹å†™ä»£ç "></a>åˆ©ç”¨æ¨¡ç‰ˆæ–¹æ³•æ”¹å†™ä»£ç </h3><p>æ¨¡ç‰ˆæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿç®€å•æ¥è¯´ï¼ŒæŠ½ç¦»å‡ºå…¬å…±é€»è¾‘ä½œä¸ºçˆ¶ç±»ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œå¯¹äºç‰¹æœ‰çš„é€»è¾‘æˆ–æ–¹æ³•å¯¹çˆ¶ç±»ä¸­çš„é€»è¾‘æˆ–æ–¹æ³•è¿›è¡Œé‡å†™ã€‚å…·ä½“å¯ä»¥å‚è€ƒè®¾è®¡æ¨¡å¼ã€‚</p><h4 id="æå–å…¬å…±é€»è¾‘è®¾ç½®çˆ¶ç±»-Lighten"><a href="#æå–å…¬å…±é€»è¾‘è®¾ç½®çˆ¶ç±»-Lighten" class="headerlink" title="æå–å…¬å…±é€»è¾‘è®¾ç½®çˆ¶ç±» Lighten"></a>æå–å…¬å…±é€»è¾‘è®¾ç½®çˆ¶ç±» Lighten</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Lighten = <span class="function"><span class="keyword">function</span>(<span class="params">el, opts</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.$el = $(el)</span><br><span class="line">    <span class="keyword">this</span>.$stars = <span class="keyword">this</span>.$el.find(<span class="string">'.item'</span>)</span><br><span class="line">    <span class="keyword">this</span>.opts = opts</span><br><span class="line">    <span class="keyword">this</span>.patch = <span class="number">1</span></span><br><span class="line">    <span class="keyword">this</span>.selectEvent = <span class="string">'mouseover'</span></span><br><span class="line">&#125;</span><br><span class="line">Lighten.prototype.lighten = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    num = <span class="built_in">parseInt</span>(num)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.$stars.each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &lt; num ) &#123;</span><br><span class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'icon-star-off icon-star-half'</span>).addClass(<span class="string">'icon-star-on'</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'icon-star-on icon-star-half'</span>).addClass(<span class="string">'icon-star-off'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">Lighten.prototype.bindEvent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span></span><br><span class="line">    self.$el.on(self.selectEvent, <span class="string">'.item'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        self.calculateRange(e, $(<span class="keyword">this</span>))</span><br><span class="line">        self.lighten($(<span class="keyword">this</span>).index() + self.patch)</span><br><span class="line">    &#125;).on(<span class="string">'click'</span>, <span class="string">'.item'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> selectedStar = $(<span class="keyword">this</span>).index() + self.patch</span><br><span class="line">        self.opts.num = selectedStar</span><br><span class="line">        <span class="keyword">typeof</span> self.opts.select === <span class="string">'function'</span> &amp;&amp; self.opts.select.call(<span class="keyword">this</span>, selectedStar, self.$stars.length)</span><br><span class="line">    &#125;).on(<span class="string">'mouseout'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        self.lighten(self.opts.num)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">Lighten.prototype.calculateRange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å­ç±»å¿…é¡»é‡å†™è¯¥æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">'Subclasses must be overridden'</span>)</span><br><span class="line">&#125;</span><br><span class="line">Lighten.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.lighten(<span class="keyword">this</span>.opts.num)</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">this</span>.opts.readOnly)&#123;</span><br><span class="line">        <span class="keyword">this</span>.bindEvent()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å­ç±»-lightenFullStar-amp-lightenHalfStar"><a href="#å­ç±»-lightenFullStar-amp-lightenHalfStar" class="headerlink" title="å­ç±» lightenFullStar &amp; lightenHalfStar"></a>å­ç±» lightenFullStar &amp; lightenHalfStar</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lightenFullStar = <span class="function"><span class="keyword">function</span>(<span class="params">el, opts</span>) </span>&#123;</span><br><span class="line">    Lighten.call(<span class="keyword">this</span>, el, opts)</span><br><span class="line">    <span class="keyword">this</span>.selectEvent = <span class="string">'mouseover'</span></span><br><span class="line">&#125;</span><br><span class="line">lightenFullStar.prototype.lighten = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    Lighten.prototype.lighten.call(<span class="keyword">this</span>, num)</span><br><span class="line">&#125;</span><br><span class="line">lightenFullStar.prototype.calculateRange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">lightenFullStar.prototype = <span class="keyword">new</span> Lighten()</span><br><span class="line">lightenFullStar.prototype.construtor = lightenFullStar</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lightenHalfStar = <span class="function"><span class="keyword">function</span>(<span class="params">el, opts</span>) </span>&#123;</span><br><span class="line">    Lighten.call(<span class="keyword">this</span>, el, opts)</span><br><span class="line">    <span class="keyword">this</span>.selectEvent = <span class="string">'mousemove'</span></span><br><span class="line">&#125;</span><br><span class="line">lightenHalfStar.prototype.lighten = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> integer = <span class="built_in">parseInt</span>(num),</span><br><span class="line">        hasDecimals = integer !== num</span><br><span class="line">    </span><br><span class="line">    Lighten.prototype.lighten.call(<span class="keyword">this</span>, integer)</span><br><span class="line">    <span class="comment">// åŠé¢—çš„ç‚¹äº®</span></span><br><span class="line">    <span class="keyword">if</span>(hasDecimals) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$stars.eq(integer).removeClass(<span class="string">'icon-star-off icon-star-on'</span>).addClass(<span class="string">'icon-star-half'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">lightenHalfStar.prototype.calculateRange = <span class="function"><span class="keyword">function</span>(<span class="params">e, $this</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e.pageX - $<span class="keyword">this</span>.offset().left &lt; $<span class="keyword">this</span>.width() / <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.patch = <span class="number">0.5</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.patch = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">lightenHalfStar.prototype = <span class="keyword">new</span> Lighten()</span><br><span class="line">lightenHalfStar.prototype.construtor = lightenHalfStar</span><br></pre></td></tr></table></figure><p>alrightï¼çœ‹èµ·æ¥ä¸é”™ï¼Œæ„Ÿè§‰ä¸‡äº‹å¤§å‰äº†ã€‚è·‘èµ·æ¥è¯•è¯•ï¼Œå‘ç°æŠ¥é”™</p><p><img src="/2019/03/13/Javascriptç»§æ‰¿/i7eo_a35030fe568d86cdf0bec5f6714af413.png" alt="wtf?"></p><p>çœ‹èµ·æ¥è¿˜ä¸é”™çš„ä»£ç ç«Ÿç„¶è·‘æŒ‚äº†ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯å¾ˆæ˜æ˜¾å¯ä»¥åˆ†æå‡ºæ²¡æœ‰æ‰§è¡Œå­ç±»é‡å†™çš„ lighten æ–¹æ³•ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å‘¢ï¼Ÿ</p><p><code>lightenHalfStar.prototype = new Lighten()</code> </p><p>è¿™è¡Œä»£ç æ˜¯å°†æ„é€ å‡½æ•° <code>Lighten</code> çš„åŸå‹å¯¹è±¡èµ‹å€¼ç»™  <code>lightenHalfStar</code> çš„åŸå‹å¯¹è±¡ã€‚è¿™æœ¬èº«æ˜¯æ²¡ä»€ä¹ˆé”™çš„ï¼ŒåŸå‹ç»§æ‰¿çš„å…³é”®ä¹Ÿæ˜¯è¿™å¥è¯ã€‚å°†æ­¤æ—¶çš„<code>lightenHalfStar.prototype</code>æ‰“å°å‡ºæ¥å¦‚ä¸‹ï¼š</p><p><img src="/2019/03/13/Javascriptç»§æ‰¿/i7eo_ca76e0e73be95c62ffd52b0221daa84a.png" alt="result-1"></p><p>åœ¨æ‰§è¡Œ<code>lightenHalfStar.prototype = new Lighten()</code>ä¹‹å‰<code>lightenHalfStar.prototype</code>ä¸­çš„ <code>lighten</code>ç¡®å®æ˜¯è‡ªå·±é‡å†™çš„ï¼ˆå¯ä»¥çœ‹ FunctionLocation:120ï¼‰ã€‚è®©æˆ‘å†çœ‹çœ‹æ‰§è¡Œä¹‹åçš„ç»“æœã€‚å¦‚ä¸‹ï¼š</p><p><img src="/2019/03/13/Javascriptç»§æ‰¿/i7eo_da48d95e719506e8f5554c12a4f6f09a.png" alt="result-2"></p><p>å¯ä»¥çœ‹åˆ° FunctionLocation:41 ï¼ˆå³æŒ‡å‘äº†çˆ¶ç±»çš„ lighten æ–¹æ³•æ‰€åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®ï¼‰ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿç­”æ¡ˆå…¶å®å¾ˆç®€å•ï¼Œå°† <code>lightenHalfStar.prototype = new Lighten()</code> çš„é¡ºåºæ”¾åœ¨å£°æ˜ lightenHalfStar åŸå‹æ–¹æ³•ä¹‹å‰å³å¯ã€‚</p><h3 id="æ€»ç»“-amp-æ”¹è¿›"><a href="#æ€»ç»“-amp-æ”¹è¿›" class="headerlink" title="æ€»ç»“&amp;æ”¹è¿›"></a>æ€»ç»“&amp;æ”¹è¿›</h3><p>å¯¹äºå®ç°é‡å†™æ–¹æ³•æ¥è¯´ï¼Œç»§æ‰¿è¯­å¥çš„ä½ç½®æ˜¯ç›¸å½“å…³é”®çš„ã€‚ä¸€ä¸æ³¨æ„å°±è¿›äº†å‘ã€‚</p><p>æ³¨æ„åŸå‹ç»§æ‰¿ä¸­å­ç±»çš„æ„é€ å™¨éœ€è¦æ‰‹åŠ¨ç½®å›ã€‚å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lightenHalfStar.prototype = <span class="keyword">new</span> Lighten()</span><br><span class="line">lightenHalfStar.prototype.constructor = lightenHalfStar</span><br></pre></td></tr></table></figure></p><p>åŸå‹ç»§æ‰¿è‹¥å­ç±»ä¸çˆ¶ç±»æ„é€ å™¨ä¸­å˜é‡åŒååˆ™å­ç±»çš„å˜é‡ä¼šè¢«è¦†ç›–ï¼Œè¦æƒ³é‡å†™ï¼Œå°±å¾—åœ¨æ„é€ å™¨ä¸­æ”¹å˜ this æŒ‡å‘ã€‚å¦‚ä»£ç ä¸­çš„ï¼š<code>Lighten.call(this, el, opts)</code></p><p>é€šè¿‡å›¾ result-2 æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°å®ä¾‹åŒ–ä¹‹åçˆ¶ç±»æ„é€ å‡½æ•°çš„å€¼ä¹Ÿä¼šè¢«å¸¦è¿›æ¥ã€‚å¦‚æœå€¼å¾ˆå¤šçš„è¯ä¹Ÿä¼šæµªè´¹èµ„æºï¼Œè¿™å¹¶ä¸æ˜¯æ¯”è¾ƒå¥½çš„ç»“æœã€‚ä¼˜åŒ–æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> extend = <span class="function"><span class="keyword">function</span>(<span class="params">sub, sup</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    F.prototype = sup.prototype</span><br><span class="line">    sub.prototype = <span class="keyword">new</span> F()</span><br><span class="line">    sub.prototype.construtor = sub</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ç©ºçš„æ„é€ å‡½æ•°åšä¸­é—´äººï¼ˆä»£ç†ï¼‰å³å¯è§£å†³ã€‚</p><h3 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h3><ol><li><p>å®Œæ•´ä»£ç ï¼š<a href="https://github.com/i7eo/WebCodeHodgepodge/blob/master/starRating/v2/star-v3.html" target="_blank" rel="noopener">æ˜Ÿçº§è¯„åˆ†ç»„ä»¶</a></p></li><li><p><a href="http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html" target="_blank" rel="noopener">Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼šæ„é€ å‡½æ•°çš„ç»§æ‰¿</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»§æ‰¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ä»£ç ç¼–å†™æ³¨æ„äº‹é¡¹</title>
      <link href="/2019/03/02/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.html"/>
      <url>/2019/03/02/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.html</url>
      
        <content type="html"><![CDATA[<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><ol><li><p>å£°æ˜ä¸ç”¨ï¼Œæ•°æ®åªä½¿ç”¨ä¸€æ¬¡æˆ–ä¸ä½¿ç”¨å°±æ— éœ€è£…åˆ°å˜é‡ä¸­</p></li><li><p>å˜é‡å‘½åï¼Œé©¼å³°ã€ç®€æ´ã€æ˜“æ‡‚</p></li><li><p>ç‰¹å®šå˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MAX_INPUT_LENGTH = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">if</span> (value.length &lt; MAX_INPUT_LENGTH) &#123;</span><br><span class="line">     <span class="comment">// ä¸€ç›®äº†ç„¶ï¼Œä¸èƒ½è¶…è¿‡æœ€å¤§è¾“å…¥é•¿åº¦</span></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨è¯´æ˜æ€§çš„å˜é‡(å³æœ‰æ„ä¹‰çš„å˜é‡å)</p></li></ol><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> address = <span class="string">'One Infinite Loop, Cupertino 95014'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cityZipCodeRegex = <span class="regexp">/^[^,\]+[,\s]+(.+?)s*(d&#123;5&#125;)?$/</span>;</span><br><span class="line"></span><br><span class="line">saveCityZipCode(</span><br><span class="line">address.match(cityZipCodeRegex)[<span class="number">1</span>],<span class="comment">// è¿™ä¸ªå…¬å¼åˆ°åº•è¦å¹²å˜›ï¼Œå¯¹ä¸èµ·ï¼ŒåŸä½œè€…å·²ç»ç¦»èŒäº†ã€‚è‡ªå·±çœ‹ä»£ç      </span></span><br><span class="line">address.match(cityZipCodeRegex)[<span class="number">2</span>], <span class="comment">// è¿™ä¸ªå…¬å¼åˆ°åº•è¦å¹²å˜›ï¼Œå¯¹ä¸èµ·ï¼ŒåŸä½œè€…å·²ç»ç¦»èŒäº†ã€‚è‡ªå·±çœ‹ä»£ç </span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹ä¸ºå¦‚ä¸‹ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> address = <span class="string">'One Infinite Loop, Cupertino 95014'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cityZipCodeRegex = <span class="regexp">/^[^,\]+[,\s]+(.+?)s*(d&#123;5&#125;)?$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [, city, zipCode] = address.match(cityZipCodeRegex) || [];</span><br><span class="line"></span><br><span class="line">saveCityZipCode(city, zipCode);</span><br></pre></td></tr></table></figure><ol start="5"><li><p>é¿å…ä½¿ç”¨å¤ªå¤šçš„å…¨å±€å˜é‡ï¼Œå¦‚æœ‰éœ€è¦è¯·ä½¿ç”¨å‘½åç©ºé—´</p></li><li><p>å¯¹äºæ±‚å€¼å˜é‡åšå¥½é»˜è®¤å€¼ï¼ˆå…œåº•ï¼‰ï¼Œå¯¹äºèµ‹å€¼å˜é‡å¯ä¸ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¶å®åœ¨é¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ±‚å€¼å˜é‡ï¼Œå¯¹äºæ¯ä¸ªæ±‚å€¼å˜é‡éƒ½éœ€è¦åšå¥½å…œåº•ã€‚</span></span><br><span class="line"><span class="keyword">let</span> propertyValue = <span class="built_in">Object</span>.attr || <span class="number">0</span>; <span class="comment">// å› ä¸ºObject.attræœ‰å¯èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥éœ€è¦å…œåº•ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†æ˜¯ï¼Œèµ‹å€¼å˜é‡å°±ä¸éœ€è¦å…œåº•äº†ã€‚</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">2</span>; <span class="comment">// å› ä¸ºæœ‰åº•äº†ï¼Œæ‰€ä»¥ä¸è¦å…œç€ã€‚</span></span><br><span class="line"><span class="keyword">let</span> myName = <span class="string">'Tiny'</span>; <span class="comment">// å› ä¸ºæœ‰åº•äº†ï¼Œæ‰€ä»¥ä¸è¦å…œç€ã€‚</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>1.å¯¹äºè¿”å›true or falseçš„å‡½æ•°ï¼Œæœ€å¥½ä»¥should/is/can/haså¼€å¤´</p><p>2.åŠ¨ä½œå‡½æ•°å·²åŠ¨è¯å¼€å¤´å¦åˆ™ä¸å¥½è¾¨åˆ«æ„å›¾</p><p>3.åŠŸèƒ½å‡½æ•°æœ€å¥½ä¸ºçº¯å‡½æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NO: ä¸è¦è®©åŠŸèƒ½å‡½æ•°çš„è¾“å‡ºå˜åŒ–æ— å¸¸ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusAbc</span>(<span class="params">a, b, c</span>) </span>&#123;  <span class="comment">// è¿™ä¸ªå‡½æ•°çš„è¾“å‡ºå°†å˜åŒ–æ— å¸¸ï¼Œå› ä¸ºapiè¿”å›çš„å€¼ä¸€æ—¦æ”¹å˜ï¼ŒåŒæ ·è¾“å…¥å‡½æ•°çš„aï¼Œb,cçš„å€¼ï¼Œä½†å‡½æ•°è¿”å›çš„ç»“æœå´ä¸ä¸€å®šç›¸åŒã€‚</span></span><br><span class="line"><span class="keyword">var</span> c = fetch(<span class="string">'../api'</span>);</span><br><span class="line">    <span class="keyword">return</span> a+b+c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//YESï¼šåŠŸèƒ½å‡½æ•°ä½¿ç”¨çº¯å‡½æ•°ï¼Œè¾“å…¥ä¸€è‡´ï¼Œè¾“å‡ºç»“æœæ°¸è¿œå”¯ä¸€</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusAbc</span>(<span class="params">a, b, c</span>) </span>&#123;  <span class="comment">// åŒæ ·è¾“å…¥å‡½æ•°çš„aï¼Œb,cçš„å€¼ï¼Œä½†å‡½æ•°è¿”å›çš„ç»“æœæ°¸è¿œç›¸åŒã€‚</span></span><br><span class="line">        <span class="keyword">return</span> a+b+c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ol start="4"><li><p>å‡½æ•°ä¼ å‚è¦æœ‰è¯´æ˜ï¼ˆå‚æ•°è¿‡å¤šï¼Œä½¿ç”¨å¯¹è±¡æ¥ä»£æ›¿ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NOï¼šä¼ å‚æ— è¯´æ˜</span></span><br><span class="line">page.getSVG(api, <span class="literal">true</span>, <span class="literal">false</span>); <span class="comment">// trueå’Œfalseå•¥æ„æ€ï¼Œä¸€ç›®ä¸äº†ç„¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// YES: ä¼ å‚æœ‰è¯´æ˜</span></span><br><span class="line">page.getSVG(&#123;</span><br><span class="line">    imageApi: api,</span><br><span class="line">    includePageBackground: <span class="literal">true</span>, <span class="comment">// ä¸€ç›®äº†ç„¶ï¼ŒçŸ¥é“è¿™äº›trueå’Œfalseæ˜¯å•¥æ„æ€</span></span><br><span class="line">    compress: <span class="literal">false</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ªå‡½æ•°å®Œæˆä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ï¼Œä¸è¦ä¸€ä¸ªå‡½æ•°æ··æ‚å¤šä¸ªåŠŸèƒ½</p></li><li><p>ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ï¼Œå°‘ç”¨for</p></li><li><p>å¤šé‡åˆ¤æ–­ä½¿ç”¨array.includesï¼ˆé€»è¾‘å¤æ‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼‰ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NO </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit</span>) </span></span><br><span class="line"><span class="function">  <span class="title">if</span> (<span class="params">fruit == <span class="string">'apple'</span> || fruit == <span class="string">'strawberry'</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'red'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// YES</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> redFruits = [<span class="string">'apple'</span>, <span class="string">'strawberry'</span>, <span class="string">'cherry'</span>, <span class="string">'cranberries'</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (redFruits.includes(fruit)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'red'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ›´å°‘çš„åµŒå¥—ï¼Œå°½æ—©returnï¼Œè€ƒè™‘ä½¿ç”¨éï¼ˆï¼ï¼‰</p></li><li><p>å€¾å‘äºéå†å¯¹è±¡è¿˜ä¸æ˜¯switchï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NO</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨æ¡ä»¶è¯­å¥æ¥å¯»æ‰¾å¯¹åº”é¢œè‰²çš„æ°´æœ</span></span><br><span class="line">  <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'red'</span>:</span><br><span class="line">      <span class="keyword">return</span> [<span class="string">'apple'</span>, <span class="string">'strawberry'</span>];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'yellow'</span>:</span><br><span class="line">      <span class="keyword">return</span> [<span class="string">'banana'</span>, <span class="string">'pineapple'</span>];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'purple'</span>:</span><br><span class="line">      <span class="keyword">return</span> [<span class="string">'grape'</span>, <span class="string">'plum'</span>];</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test results</span></span><br><span class="line">test(<span class="literal">null</span>); <span class="comment">// []</span></span><br><span class="line">test(<span class="string">'yellow'</span>); <span class="comment">// ['banana', 'pineapple']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// YES</span></span><br><span class="line"><span class="keyword">const</span> fruitColor = &#123;</span><br><span class="line">  red: [<span class="string">'apple'</span>, <span class="string">'strawberry'</span>],</span><br><span class="line">  yellow: [<span class="string">'banana'</span>, <span class="string">'pineapple'</span>],</span><br><span class="line">  purple: [<span class="string">'grape'</span>, <span class="string">'plum'</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fruitColor[color] || [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯¹ æ‰€æœ‰/éƒ¨åˆ† åˆ¤æ–­ä½¿ç”¨ Array.every &amp; Array.some</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue çš„å“åº”å¼/æ¨¡ç‰ˆè§£æ/æ¸²æŸ“</title>
      <link href="/2019/01/03/vuesc.html"/>
      <url>/2019/01/03/vuesc.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¯¹äºä½¿ç”¨ vue çš„åŒå­¦æ¥è¯´ï¼Œå“åº”å¼ã€æ¨¡ç‰ˆè§£æ/æ¸²æŸ“åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œvue å¼€å‘ç¦»ä¸å¼€è¿™äº›ç‰¹æ€§ã€‚ç”¨äº† vue æŒºé•¿æ—¶é—´äº†ï¼Œå†™å†™æ€»ç»“ã€‚</p><h3 id="å“åº”å¼"><a href="#å“åº”å¼" class="headerlink" title="å“åº”å¼"></a>å“åº”å¼</h3><p>åˆ›å»ºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> t = &#123;</span><br><span class="line">    name: <span class="string">'t1'</span></span><br><span class="line">    age: <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(t.age) <span class="comment">// 19 é‚£ä¹ˆå¦‚ä½•ç›‘å¬ageå±æ€§çš„è®¿é—®ä¸è®¾ç½®å‘¢ï¼Ÿ</span></span><br></pre></td></tr></table></figure><p>åœ¨es5ä¸­åŠ å…¥äº†ä¸€ä¸ªapiå« Object.defineProperty,è¯¥apiå…è®¸</p><a id="more"></a><p>åˆ›å»ºå¯¹è±¡çš„å±æ€§è‡ªå®šä¹‰ get/set å‡½æ•°ã€‚ä¿®æ”¹ä¸Šé¢ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> t = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'t1'</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'name'</span>, &#123;</span><br><span class="line">get() &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'get'</span>)</span><br><span class="line"><span class="keyword">return</span> name</span><br><span class="line">&#125;,</span><br><span class="line">set(newVal) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'set'</span>)</span><br><span class="line">name = newVal</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(obj.name)</span><br><span class="line"><span class="comment">// get</span></span><br><span class="line"><span class="comment">// t1</span></span><br><span class="line">obj.name = <span class="string">'george'</span></span><br><span class="line"><span class="comment">// set</span></span><br></pre></td></tr></table></figure><p>åœ¨vueä¸­æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œå¤§æ¦‚è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    name: <span class="string">'lyn'</span>,</span><br><span class="line">    age: <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">in</span> data) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(vm, v, &#123;</span><br><span class="line">            get() &#123;</span><br><span class="line">        <span class="keyword">return</span> data[v]</span><br><span class="line">        &#125;,</span><br><span class="line">        set(newVal) &#123;</span><br><span class="line">        data[v] = newVal</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¦å°†dataçš„å€¼å…¨éƒ¨ä»£ç†è‡³vmå¯¹è±¡ä¸Šï¼Ÿvueä¸­å°±æ˜¯è¿™ä¹ˆå†™çš„ â€¦ï¼Œè€Œä¸”æ¨¡ç‰ˆè§£æçš„æ—¶å€™ä¼šç”¨åˆ°ã€‚</p><h3 id="æ¨¡æ¿è§£æ"><a href="#æ¨¡æ¿è§£æ" class="headerlink" title="æ¨¡æ¿è§£æ"></a>æ¨¡æ¿è§£æ</h3><p>æˆ‘ä»¬ç»å¸¸åœ¨vueä¸­ä½¿ç”¨vueæ¨¡æ¿ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">  &lt;input v-model=<span class="string">"title"</span>&gt;</span><br><span class="line">  &lt;button @click=<span class="string">"add"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;ul&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li v-for="v in list"&gt;&#123;&#123; v &#125;&#125;&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br></pre></td></tr></table></figure><p>æ¨¡æ¿çš„æœ¬è´¨æ˜¯å­—ç¬¦ä¸²ï¼Œå…¶ç‰¹ç‚¹æœ‰ï¼š</p><ul><li>åŒ…å« if/for ç­‰é€»è¾‘æŒ‡ä»¤</li><li>åŠ¨æ€çš„ï¼ˆåŠ¨æ€ç”Ÿæˆ dom ï¼‰</li><li>æœ€ç»ˆè½¬æ¢ä¸º html</li></ul><p>ç»¼ä¸Šï¼Œè¦å°†æ¨¡æ¿è½¬æ¢ä¸º html ï¼Œåªèƒ½ä½¿ç”¨ js æ¥æ“ä½œã€‚åœ¨ html/css/js ä¸­ï¼Œåªæœ‰jsèƒ½å¤„ç†é€»è¾‘å’Œæ¸²æŸ“é¡µé¢ã€‚</p><p>åœ¨å½“å‰æ–‡ä»¶å¼•å…¥vueæ–‡ä»¶ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œåœ¨æºç ä¸­æœç´¢code.render åœ¨ return å‰æ‰“å° code.renderï¼Œè§‚å¯Ÿæ¨¡æ¿è¢«è§£æåç”Ÿæˆçš„renderå‡½æ•°ï¼Œrenderå‡½æ•°æœ€ç»ˆè¿”å›vnodeã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span>(<span class="keyword">this</span>)&#123;  <span class="comment">// this å°±æ˜¯ vm</span></span><br><span class="line">    <span class="keyword">return</span> _c(</span><br><span class="line">        <span class="string">'div'</span>,</span><br><span class="line">        &#123;</span><br><span class="line">            attrs:&#123;<span class="string">"id"</span>:<span class="string">"app"</span>&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        [_c(</span><br><span class="line">            <span class="string">'div'</span>,</span><br><span class="line">            [</span><br><span class="line">                _c(</span><br><span class="line">                    <span class="string">'input'</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        directives:[</span><br><span class="line">                        &#123;</span><br><span class="line">                       name:<span class="string">"model"</span>,</span><br><span class="line">                       rawName:<span class="string">"v-model"</span>,</span><br><span class="line">                       value:(title),  <span class="comment">// vm.title åœ¨è¿™é‡Œå°±å°†modelä¸­çš„çš„å€¼é€šè¿‡vmä¸viewä¸­çš„inputæ•°æ®è”ç³»äº†èµ·æ¥</span></span><br><span class="line">                       expression:<span class="string">"title"</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        ],</span><br><span class="line">                        domProps:&#123;</span><br><span class="line">                            <span class="string">"value"</span>:(title)</span><br><span class="line">                        &#125;,</span><br><span class="line">                        on:&#123;</span><br><span class="line">                            <span class="string">"input"</span>:<span class="function"><span class="keyword">function</span>(<span class="params">$event</span>)</span>&#123;</span><br><span class="line">                          <span class="comment">// åœ¨è¿™é‡Œå¯ä»¥å‘ç°v-model å…¶å®åœ¨vueæ¨¡ç‰ˆå†…è¢«å°è£…äº†è¿›å»</span></span><br><span class="line">                                <span class="keyword">if</span>($event.target.composing)<span class="keyword">return</span>;</span><br><span class="line">                                title=$event.target.value</span><br><span class="line">                                åœ¨è¿™é‡Œå°±å°†viewä¸­çš„inputä¸­çš„å€¼é€šè¿‡vmä¸modelä¸­çš„æ•°æ®è”ç³»äº†èµ·æ¥ä¸ä¸Šé¢ç›¸å¯¹åº”å®ç°åŒå‘ç»‘å®š</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ),</span><br><span class="line">                _v(<span class="string">" "</span>),</span><br><span class="line">                <span class="comment">// å› ä¸ºhtmlä¸­ä¿©ä¸ªæ ‡ç­¾é—´æˆ‘ä»¬æ¢è¡Œæ‰€ä»¥è¿™é‡Œæ˜¯ç©º</span></span><br><span class="line">                _c(</span><br><span class="line">                    <span class="string">'button'</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        on:&#123;</span><br><span class="line">                            <span class="string">"click"</span>:add</span><br><span class="line">                            <span class="comment">// ç›¸å½“äº vm.addè¿™é‡Œç›´æ¥è°ƒç”¨methodsä¸­å®šä¹‰çš„addå‡½æ•°</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    [_v(<span class="string">"submit"</span>)]</span><br><span class="line">                )</span><br><span class="line">            ]),</span><br><span class="line">        _v(<span class="string">" "</span>),</span><br><span class="line">        _c(<span class="string">'div'</span>,</span><br><span class="line">            [</span><br><span class="line">                _c(</span><br><span class="line">                    <span class="string">'ul'</span>,</span><br><span class="line">                   <span class="comment">//v-forè¿™é‡Œä½¿ç”¨å†…éƒ¨å®šä¹‰çš„ _lå‡½æ•°æ¥å¤„ç†</span></span><br><span class="line">                    _l((list),<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;<span class="keyword">return</span> _c(<span class="string">'li'</span>,[_v(_s(item))])&#125;)</span><br><span class="line">                )</span><br><span class="line">            ]</span><br><span class="line">        )]</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>_c åˆ›å»ºæ ‡ç­¾ï¼Œ_våˆ›å»ºæ–‡æœ¬å…ƒç´ ï¼Œ_s toString()ï¼Œè¿™ä¸ª_c å’Œ snabbdom ä¸­çš„ h å‡½æ•°å¾ˆåƒï¼Œé‚£vueä¸­æ›´æ–°çš„æ“ä½œä¼šä¸ä¼šå’Œ snabbdom ä¸­çš„é€»è¾‘é¡µç›¸ä¼¼å‘¢ï¼Ÿ<br>vue ä¸­çš„æ›´æ–°å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vm._update(vnode) &#123;</span><br><span class="line">    <span class="keyword">const</span> prevNode = vm._vnode</span><br><span class="line">    vm._node = vnode</span><br><span class="line">    <span class="keyword">if</span>(!prevNode) &#123;</span><br><span class="line">        vm.$el = vm.__patch___(vm.$el, vnode)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        vm.$el = vm.__patch__(prevNode, vnode)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    vm._update(vm._render())</span><br><span class="line">    <span class="comment">// vm._render å³ç”Ÿæˆä¸Šé¢åŒ…å« _c/_v/_sçš„æ¨¡æ¿è§£æå‡½æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡æ”¹å˜dataï¼Œé€šè¿‡Object.definePropertyç›‘å¬ä¿®æ”¹æ“ä½œï¼Œä¸€æ—¦ä¿®æ”¹å°±è°ƒç”¨ updateComponent å‡½æ•°ï¼Œåˆ©ç”¨vm._renderæ–¹æ³•ç”Ÿæˆæ–°çš„ vnodeã€‚é€šè¿‡ vm._patch_ å°†vnodeè½¬åŒ–ä¸ºhtmlå¹¶æ›´æ–°è‡³åŸç”Ÿdomä¸­ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>è§£ææ¨¡æ¿ç”Ÿæˆrenderå‡½æ•°</li><li>å“åº”å¼å¼€å§‹ç›‘å¬</li><li>é¦–æ¬¡æ¸²æŸ“ï¼Œæ˜¾ç¤ºé¡µé¢ä¸”ç»‘å®šä¾èµ–</li><li>dataå±æ€§å˜åŒ–ï¼Œå†æ¬¡æ¸²æŸ“</li></ul>]]></content>
      
      
      <categories>
          
          <category> Vuejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡ç‰ˆè§£æ </tag>
            
            <tag> render å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯‘æ–‡ï¼šUnderstanding the Virtual DOM</title>
      <link href="/2019/01/01/vdom.html"/>
      <url>/2019/01/01/vdom.html</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŸæ–‡åœ°å€ï¼š</p><blockquote><p><a href="https://bitsofco.de/understanding-the-virtual-dom/" target="_blank" rel="noopener">Understanding the Virtual DOM</a></p></blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘æœ€è¿‘åœ¨å†™ä¸€äº›å¦‚ä½•æ­£ç¡®åŒºåˆ† dom ä¸ shadow dom çš„æ–‡ç« ã€‚æ€»çš„æ¥è¯´ï¼Œdom æ˜¯HTMLæ–‡æ¡£çš„åŸºäºå¯¹è±¡çš„è¡¨ç¤ºï¼Œä»¥åŠæ“ä½œè¯¥å¯¹è±¡çš„æ¥å£ã€‚shadow dom å¯ä»¥è¢«è®¤ä¸ºæ˜¯è½»é‡çº§ç‰ˆæœ¬çš„ domã€‚å®ƒåŒæ ·æ˜¯ä»¥åŸç”Ÿå¯¹è±¡ä¸ºåŸºç¡€çš„ html documentï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯å®Œæ•´çš„ã€‚å¯èƒ½æœ‰äº›éš¾æ‡‚ï¼Œæ¢ä¸€ç§è¯´æ³•æ¥çœ‹ï¼Œshadow dom å…è®¸æˆ‘ä»¬å»å°†æˆ‘ä»¬çš„ dom åˆ’åˆ†çš„æ›´å°ï¼Œæ›´è½»ï¼Œå¯ä»¥è·¨æ–‡æ¡£ä½¿ç”¨ã€‚ï¼ˆè¿™é‡Œä½œè€…æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æˆªå–éƒ¨åˆ† dom ç”Ÿæˆ vdomï¼Œè€Œä¸ç”¨æ¯æ¬¡ä» html æ ‡ç­¾å¼€å§‹å†™ vdom ç›´åˆ° html æ ‡ç­¾é—­åˆï¼‰</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦ä¸€ä¸ªä½ å¯èƒ½é‡åˆ°è¿‡çš„ç›¸ä¼¼è¯´æ³•ç§° â€œshadow domâ€ ä¸º â€œvirtual DOMâ€ã€‚å°½ç®¡</p><a id="more"></a><p>è¿™ä¸ªè¯´æ³•å·²ç»å­˜åœ¨äº†å¾ˆå¤šå¹´ï¼Œä½†æ˜¯å®ƒçœŸæ­£çš„æµè¡Œæ˜¯åœ¨ react ä½¿ç”¨å®ƒä¹‹åã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘å°†å°½åŠ›é˜è¿°ä»€ä¹ˆæ˜¯è™šæ‹Ÿ dom ï¼Œå®ƒä¸åŸç”Ÿ dom åˆä»€ä¹ˆä¸åŒä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚</p><h3 id="æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ-dom-ï¼Ÿ"><a href="#æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ-dom-ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ dom ï¼Ÿ"></a>æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ dom ï¼Ÿ</h3><p>æƒ³è¦äº†è§£è™šæ‹Ÿdomä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾ä»¥ä¸‹åŸç”Ÿdomã€‚æ­£å¦‚æˆ‘æ‰€æåˆ°çš„ï¼Œdom æ˜¯HTMLæ–‡æ¡£çš„åŸºäºå¯¹è±¡çš„è¡¨ç¤ºï¼Œä»¥åŠæ“ä½œè¯¥å¯¹è±¡çš„æ¥å£ã€‚ä¸¾ä¸ªä¾‹å­çœ‹çœ‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"list__item"</span>&gt;</span>List item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨å¦‚ä¸‹ dom æ ‘æ¥è¡¨ç¤ºï¼š</p><p><img src="/2019/01/01/vdom/i7eo_854852a0e956219a4a2a016470fe6c6c.png" alt=""></p><p>è®©æˆ‘ä»¬æ¥è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>ä¿®æ”¹ç¬¬ä¸€ä¸ª li çš„å†…å®¹ä¸º list item one</li><li>åŠ ä¸Šä¸€ä¸ª li</li></ul><p>è¦å®Œæˆä¸Šè¿°æ“ä½œéœ€è¦åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œæ·»åŠ æ–°å±æ€§ä¸å†…å®¹ï¼Œæœ€ç»ˆå®Œæˆæ›´æ–°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> listItemOne = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"list__item"</span>)[<span class="number">0</span>];</span><br><span class="line">listItemOne.textContent = <span class="string">"List item one"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"list"</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">const</span> listItemTwo = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">listItemTwo.classList.add(<span class="string">"list__item"</span>);</span><br><span class="line">listItemTwo.textContent = <span class="string">"List item two"</span>;</span><br><span class="line">list.appendChild(listItemTwo);</span><br></pre></td></tr></table></figure><h3 id="Dom-å¹¶ä¸æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„"><a href="#Dom-å¹¶ä¸æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„" class="headerlink" title="Dom å¹¶ä¸æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„"></a>Dom å¹¶ä¸æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å½“1998å¹´å‘å¸ƒDOMçš„ç¬¬ä¸€ä¸ªè§„èŒƒæ—¶ï¼Œæˆ‘ä»¬ä»¥éå¸¸ä¸åŒçš„æ–¹å¼æ„å»ºå’Œç®¡ç†webé¡µé¢ã€‚å¾ˆå°‘åƒä»Šå¤©è¿™æ ·ä¾èµ–DOM apiæ¥åˆ›å»ºå’Œæ›´æ–°é¡µé¢å†…å®¹ã€‚</p><p>åƒ <code>document.getElementsByClassName()</code> è¿™ä¸ªæ–¹æ³•å°è§„æ¨¡ä½¿ç”¨æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœåœ¨åŒä¸€é¡µé¢é—´éš”å¾ˆçŸ­çš„æƒ…å†µä¸‹å»æ›´æ–°å¤šä¸ªå…ƒç´ ï¼Œå°±ä¼šä½¿å¯¹äº dom çš„æŸ¥è¯¢ä¸æ›´æ–°æ“ä½œå˜å¾—å¾ˆæ˜‚è´µã€‚æ­¤å¤–ï¼Œæ›´æ–°æ–‡æ¡£ä¸­è¾ƒå¤§ä¸€éƒ¨åˆ†æ¯”æ›´æ–°ç‰¹å®šå…ƒç´ çš„å¼€é”€ä¼šå°ä¸€äº›ã€‚å›åˆ°æˆ‘ä»¬åˆ—è¡¨ä¾‹å­ä¸­ï¼Œä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ç”¨æ–°å…ƒç´ æ›¿æ¢æ•´ä¸ªæ— åºåˆ—è¡¨æ¯”ä¿®æ”¹æŸä¸ªç‰¹å®šå…ƒç´ è¦ç®€å•ä¸€äº›ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"list"</span>)[<span class="number">0</span>];</span><br><span class="line">list.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;li class="list__item"&gt;List item one&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class="list__item"&gt;List item two&lt;/li&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¿©ä¸ªä¾‹å­ä¸­ï¼Œæ€§èƒ½å·®å¼‚å¹¶ä¸å¤§ã€‚ä½†æ˜¯éšç€é¡µé¢æ•°é‡çš„å¢åŠ ï¼Œé€‰æ‹©ã€æ›´æ–°æˆ‘ä»¬éœ€è¦çš„ä»£ç ä¼šæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p><h3 id="è™šæ‹Ÿ-Dom-å› æ­¤è€Œå‡ºç°"><a href="#è™šæ‹Ÿ-Dom-å› æ­¤è€Œå‡ºç°" class="headerlink" title="è™šæ‹Ÿ Dom å› æ­¤è€Œå‡ºç°"></a>è™šæ‹Ÿ Dom å› æ­¤è€Œå‡ºç°</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è™šæ‹Ÿ Dom çš„å‡ºç°æ˜¯ä¸ºäº†ç”¨æ›´åŠ é«˜æ•ˆçš„æ–¹å¼æ¥å¤„ç†é¢‘ç¹æ›´æ–° dom æ‰€äº§ç”Ÿçš„é—®é¢˜ã€‚ä¸ dom å’Œ shadow dom ä¸åŒçš„æ˜¯ï¼Œè™šæ‹Ÿ dom ä¸æ˜¯ä¸€ç§æ­£å¼çš„è§„èŒƒï¼Œå®ƒæ›´åƒä¸€ç§ä¸ dom äº¤äº’çš„æ–°æ–¹æ³•ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è™šæ‹Ÿ dom å¯ä»¥è¢«è®¤ä¸ºæ˜¯åŸç”Ÿ dom çš„ä¸€ä¸ªå¤åˆ¶å“ã€‚åœ¨è¿™ä¸ªå¤åˆ¶å“ä¸Šæˆ‘ä»¬å¯ä»¥ä¸é€šè¿‡ dom api å°±èƒ½é¢‘ç¹æ›´æ–°æ•°æ®ã€‚ä¸€æ—¦å¯¹è™šæ‹ŸDOMè¿›è¡Œäº†æ‰€æœ‰æ›´æ–°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹éœ€è¦å¯¹åŸå§‹DOMè¿›è¡Œå“ªäº›ç‰¹å®šæ›´æ”¹ï¼Œå¹¶ä¸”ä½¿è¿™äº›æ”¹å˜æ›´åŠ å…·ä½“ä¸ä¼˜åŒ–ã€‚</p><h3 id="è™šæ‹Ÿ-Dom-å¼ ä»€ä¹ˆæ ·å‘¢ï¼Ÿ"><a href="#è™šæ‹Ÿ-Dom-å¼ ä»€ä¹ˆæ ·å‘¢ï¼Ÿ" class="headerlink" title="è™šæ‹Ÿ Dom å¼ ä»€ä¹ˆæ ·å‘¢ï¼Ÿ"></a>è™šæ‹Ÿ Dom å¼ ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€å¬åˆ°è™šæ‹Ÿï¼Œå¯èƒ½ä¼šè§‰å¾—æœ‰äº›ç¥ç§˜æ„Ÿã€‚å…¶å®è™šæ‹Ÿ dom å°±æ˜¯ js å¯¹è±¡ã€‚è®©æˆ‘ä»¬å†æ¥å›é¡¾å…ˆå‰åˆ›å»ºçš„ dom æ ‘ï¼š</p><p><img src="/2019/01/01/vdom/i7eo_854852a0e956219a4a2a016470fe6c6c.png" alt=""></p><p>è¿™ä¸ªæ ‘å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹ js å¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vdom = &#123;</span><br><span class="line">    tagName: <span class="string">"html"</span>,</span><br><span class="line">    children: [</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">"head"</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            tagName: <span class="string">"body"</span>,</span><br><span class="line">            children: [</span><br><span class="line">                &#123;</span><br><span class="line">                    tagName: <span class="string">"ul"</span>,</span><br><span class="line">                    attributes: &#123; <span class="string">"class"</span>: <span class="string">"list"</span> &#125;,</span><br><span class="line">                    children: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            tagName: <span class="string">"li"</span>,</span><br><span class="line">                            attributes: &#123; <span class="string">"class"</span>: <span class="string">"list__item"</span> &#125;,</span><br><span class="line">                            textContent: <span class="string">"List item"</span></span><br><span class="line">                        &#125; <span class="comment">// end li</span></span><br><span class="line">                    ]</span><br><span class="line">                &#125; <span class="comment">// end ul</span></span><br><span class="line">            ]</span><br><span class="line">        &#125; <span class="comment">// end body</span></span><br><span class="line">    ]</span><br><span class="line">&#125; <span class="comment">// end html</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠè¿™ä¸ª js å¯¹è±¡å½“ä½œè™šæ‹Ÿ dom ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±çš„é¢‘ç¹æ“ä½œå®ƒè€Œä¸æ”¹å˜åŸç”Ÿ domã€‚</p><p>ç›¸æ¯”äºä½¿ç”¨æ•´ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨éƒ¨åˆ†è™šæ‹Ÿ domã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¦æ“ä½œä¸€ä¸ª list ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¸æˆ‘ä»¬çš„æ— åºåˆ—è¡¨å…ƒç´ ç›¸å…³è”ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = &#123;</span><br><span class="line">    tagName: <span class="string">"ul"</span>,</span><br><span class="line">    attributes: &#123; <span class="string">"class"</span>: <span class="string">"list"</span> &#125;,</span><br><span class="line">    children: [</span><br><span class="line">        &#123;</span><br><span class="line">            tagName: <span class="string">"li"</span>,</span><br><span class="line">            attributes: &#123; <span class="string">"class"</span>: <span class="string">"list__item"</span> &#125;,</span><br><span class="line">            textContent: <span class="string">"List item"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="è™šæ‹Ÿ-Dom-å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#è™šæ‹Ÿ-Dom-å¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="è™šæ‹Ÿ Dom å¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>è™šæ‹Ÿ Dom å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨æˆ‘ä»¬è§è¯†è¿‡äº†è™šæ‹Ÿdomçš„æ ·å­ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å¤„ç†domæ“ä½œçš„æ€§èƒ½é—®é¢˜ï¼Ÿ</p><p>æ­£å¦‚æˆ‘æ‰€æåˆ°çš„ï¼Œè™šæ‹Ÿ dom å¯ä»¥ä¸“é—¨ç”¨æ¥å¯¹ä½ éœ€è¦æ”¹å˜çš„å…ƒç´ è¿›è¡Œæ“ä½œã€‚ï¼ˆä¸å½±å“æ²¡æœ‰æ”¹å˜çš„å…ƒç´ ï¼‰è®©æˆ‘ä»¬é‡å›æ— åºåˆ—è¡¨çš„ä¾‹å­ã€‚</p><p>ç¬¬ä¸€ä»¶äº‹æˆ‘ä»¬åº”è¯¥å¤åˆ¶domæ¥äº§ç”Ÿè™šæ‹Ÿdomï¼Œç„¶åå¯¹éœ€è¦æ”¹å˜çš„å…ƒç´ åœ¨è™šæ‹Ÿdomä¸­è¿›è¡Œæ”¹å˜æ“ä½œã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copy = &#123;</span><br><span class="line">    tagName: <span class="string">"ul"</span>,</span><br><span class="line">    attributes: &#123; <span class="string">"class"</span>: <span class="string">"list"</span> &#125;,</span><br><span class="line">    children: [</span><br><span class="line">        &#123;</span><br><span class="line">            tagName: <span class="string">"li"</span>,</span><br><span class="line">            attributes: &#123; <span class="string">"class"</span>: <span class="string">"list__item"</span> &#125;,</span><br><span class="line">            textContent: <span class="string">"List item one"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            tagName: <span class="string">"li"</span>,</span><br><span class="line">            attributes: &#123; <span class="string">"class"</span>: <span class="string">"list__item"</span> &#125;,</span><br><span class="line">            textContent: <span class="string">"List item two"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¤åˆ¶å‡ºæ¥çš„è™šæ‹Ÿ dom ç”¨æ¥å’ŒåŸç”Ÿ dom è¿›è¡Œæ¯”è¾ƒï¼Œä»è€ŒæŠŠæ¯”è¾ƒå‡ºæ¥çš„å·®å¼‚ç”¨åˆ›å»ºçš„ diff æ¥ä¿å­˜ã€‚ diff æ˜¯åƒè¿™ä¸ªæ ·å­çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> diffs = [</span><br><span class="line">    &#123;</span><br><span class="line">        newNode: &#123; <span class="comment">/* new version of list item one */</span> &#125;,</span><br><span class="line">        oldNode: &#123; <span class="comment">/* original version of list item one */</span> &#125;,</span><br><span class="line">        index: <span class="comment">/* index of element in parent's list of child nodes */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        newNode: &#123; <span class="comment">/* list item two */</span> &#125;,</span><br><span class="line">        index: &#123; <span class="comment">/* */</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª diff æä¾›äº†ä¸€ä¸ªç»“æ„ï¼Œè¿™ä¸ªç»“æ„å¯ä»¥ç”¨æ¥æ›´æ–°åŸç”Ÿçš„ domã€‚ä¸€æ—¦æ‰€æœ‰çš„ diff æ£€æµ‹å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åŸç”Ÿ dom åªè¿›è¡Œä¸€æ¬¡æ›´æ–°æ“ä½œå³å¯ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯¹ diff è¿›è¡Œå¾ªç¯ï¼Œä¸è®ºæ˜¯æ·»åŠ æ–°çš„å…ƒç´ è¿˜æ˜¯æ›´æ–°æ—§çš„å…ƒç´ ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åƒä¸‹é¢è¿™æ ·åšï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> domElement = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"list"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">diffs.forEach(<span class="function">(<span class="params">diff</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newElement = <span class="built_in">document</span>.createElement(diff.newNode.tagName);</span><br><span class="line">    <span class="comment">/* Add attributes ... */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (diff.oldNode) &#123;</span><br><span class="line">        <span class="comment">// If there is an old version, replace it with the new version</span></span><br><span class="line">        domElement.replaceChild(diff.newNode, diff.index);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// If no old version exists, create a new node</span></span><br><span class="line">        domElement.appendChild(diff.newNode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>è™šæ‹Ÿdomæ˜¯è®©æˆ‘ä»¬ä¸domäº¤äº’æ›´åŠ é«˜æ•ˆçš„ä¸”æ€§èƒ½æ›´å¥½ä¸€ç§æ–¹æ³•</li><li>è™šæ‹Ÿdomæ˜¯ä¸€ä¸ªjså¯¹è±¡ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¯¹jså¯¹è±¡è¿›è¡Œé¢‘ç¹çš„ä¿®æ”¹</li><li>æ‰€æœ‰çš„ä¿®æ”¹åœ¨è™šæ‹Ÿdomä¸­ç»“æŸåï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§å¯¹åŸç”Ÿdomä¸­éœ€è¦æ”¹å˜çš„åœ°æ–¹è¿›è¡Œæ›´æ–°</li></ul><h3 id="é™„å½•ï¼šsnabbdom"><a href="#é™„å½•ï¼šsnabbdom" class="headerlink" title="é™„å½•ï¼šsnabbdom"></a>é™„å½•ï¼šsnabbdom</h3><p>å®ç° vdom çš„åº“ä¸å¤šï¼Œsnabbdom ç®—æ˜¯ä½¼ä½¼è€…ã€‚vue ä¸­é›†æˆäº†å®ƒçš„æ ¸å¿ƒä»£ç ï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹æ•°æ®åï¼Œéƒ½ä¼šæ‰§è¡Œå‡½æ•°è¿›è¡Œ diffã€‚ä¸‹é¢æ€»ç»“ä¸€ä¸‹éæ¡†æ¶ä¸‹vdomçš„ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn-submit"</span>&gt;</span>change<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-class.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-props.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-style.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-eventlisteners.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/snabbdom/0.7.3/h.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯htmlç»“æ„ï¼Œå¼•å…¥ä¸åŒçš„snabbdomæ–‡ä»¶æ˜¯å¯¹åº”è§£æç»‘å®šçš„äº‹ä»¶ã€å±æ€§ç­‰ã€‚é¦–å…ˆä½¿ç”¨ <code>patch(c, vnode)</code> åˆ›å»ºæ— åºåˆ—è¡¨å¦‚ä¸‹ï¼š</p><p><img src="/2019/01/01/vdom/i7eo_e5b8b50c2235d093133d181540a27ca4.png" alt=""></p><p>å•å‡»æŒ‰é’®å†æ¬¡è°ƒç”¨ <code>patch</code> å‡½æ•°å³å¯ç”Ÿæˆï¼š</p><p><img src="/2019/01/01/vdom/i7eo_f5991aaaa93507781a69bbf70d507739.png" alt=""></p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> snabbdom = <span class="built_in">window</span>.snabbdom</span><br><span class="line"></span><br><span class="line">      <span class="comment">// init snabbdom</span></span><br><span class="line">      <span class="keyword">let</span> patch = snabbdom.init([</span><br><span class="line">        snabbdom_class,</span><br><span class="line">        snabbdom_props,</span><br><span class="line">        snabbdom_style,</span><br><span class="line">        snabbdom_eventlisteners</span><br><span class="line">      ])</span><br><span class="line"></span><br><span class="line">      <span class="comment">//define h()</span></span><br><span class="line">      <span class="keyword">let</span> h = snabbdom.h</span><br><span class="line">      <span class="keyword">let</span> c = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>)</span><br><span class="line">      <span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn-submit'</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// create vnode</span></span><br><span class="line">      <span class="keyword">let</span> vnode = h(<span class="string">'ul#list'</span>, &#123;&#125;, [</span><br><span class="line">        h(<span class="string">'li.item'</span>, &#123;&#125;, <span class="string">'item1'</span>),</span><br><span class="line">        h(<span class="string">'li.item'</span>, &#123;&#125;, <span class="string">'item2'</span>)</span><br><span class="line">      ])</span><br><span class="line"></span><br><span class="line">      <span class="comment">// first time create vdom and transform it to dom</span></span><br><span class="line">      patch(c, vnode)</span><br><span class="line"></span><br><span class="line">      btn.addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">        <span class="comment">// define new node</span></span><br><span class="line">        <span class="keyword">let</span> newNode = h(<span class="string">'ul#list'</span>, &#123;&#125;, [</span><br><span class="line">          h(<span class="string">'li.item'</span>, &#123;&#125;, <span class="string">'item1'</span>),</span><br><span class="line">          h(<span class="string">'li.item'</span>, &#123;&#125;, <span class="string">'item22'</span>),</span><br><span class="line">          h(<span class="string">'li.item'</span>, &#123;&#125;, <span class="string">'item3'</span>)</span><br><span class="line">        ])</span><br><span class="line">        <span class="comment">// find diffs , update diffs into original DOM</span></span><br><span class="line">        patch(vnode, newNode)</span><br><span class="line">        vnode = newNode</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure><p>h å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¼ å…¥çš„æ•°æ®è½¬åŒ–ä¸ºvnodeï¼ˆvnodeå…·ä½“æ ¼å¼å‚ç…§ä¸Šè¿°è¯‘æ–‡ä¸­çš„ copyï¼‰ï¼Œpatch å‡½æ•°å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ vnodeï¼Œä¸å­˜åœ¨çš„è¯ç›´æ¥å°† vnodeï¼Œç”Ÿæˆ domï¼Œæ’å…¥ç›®æ ‡ä¸­ï¼›è‹¥å­˜åœ¨è¿›è¡Œ diff ç®—æ³•ï¼Œæ‰¾å‡ºå·®å¼‚åå¯¹åŸç”Ÿ dom è¿›è¡Œæ›´æ–°ã€‚</p><h3 id="åŠ¨æ‰‹æ¨¡æ‹Ÿ-patch-å®ç°è¿‡ç¨‹"><a href="#åŠ¨æ‰‹æ¨¡æ‹Ÿ-patch-å®ç°è¿‡ç¨‹" class="headerlink" title="åŠ¨æ‰‹æ¨¡æ‹Ÿ patch å®ç°è¿‡ç¨‹"></a>åŠ¨æ‰‹æ¨¡æ‹Ÿ patch å®ç°è¿‡ç¨‹</h3><p>patch å‡½æ•°æœ‰ä¿©ç§ç”¨æ³•ï¼š</p><ul><li><code>patch(container, vnode)</code></li><li><code>patch(vnode, newNode)</code></li></ul><p>å…ˆæ¥çœ‹ç¬¬ä¸€ç§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    tag: <span class="string">'ul'</span>,</span><br><span class="line">    attrs: &#123;</span><br><span class="line">        id: <span class="string">'list'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">        &#123;</span><br><span class="line">            tag: <span class="string">'li'</span>,</span><br><span class="line">            attrs: &#123;</span><br><span class="line">                classname: <span class="string">'item'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            children: [<span class="string">'item1'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆå¾—å°†vnodeè½¬åŒ–ä¸ºhtmlç»“æ„ï¼Œæ‰èƒ½åŠ å…¥åˆ°containerç§ï¼Œé‚£ä¹ˆå¦‚ä½•å°†ä¸Šè¿°jså¯¹è±¡ï¼ˆvnodeï¼‰è½¬åŒ–ä¸º html å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createEl</span>(<span class="params">vnode</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tag = vnode.tag</span><br><span class="line">    <span class="keyword">let</span> attrs = vnode.attrs || &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> children = vnode.children || []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!tag) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> el = <span class="built_in">document</span>.createElement(tag)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> attrName <span class="keyword">in</span> attrs) &#123;</span><br><span class="line">        <span class="keyword">if</span>(attrs.hasOwnProperty(attrName))&#123;</span><br><span class="line">            el.setAttribute(attrName, attrs[attrName])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    children.forEach(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">        el.append(createElement(v))</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> el;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œåˆ©ç”¨é€’å½’å¾ªç¯éå† childrenï¼Œè®¾ç½® <code>!tag</code> ä¸ºç»ˆæ­¢æ¡ä»¶ã€‚</p><p>ç¬¬äºŒç§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    tag: <span class="string">'ul'</span>,</span><br><span class="line">    attrs: &#123;</span><br><span class="line">        id: <span class="string">'list'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">        &#123;</span><br><span class="line">            tag: <span class="string">'li'</span>,</span><br><span class="line">            attrs: &#123;</span><br><span class="line">                classname: <span class="string">'item'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            children: [<span class="string">'item12'</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            tag: <span class="string">'li'</span>,</span><br><span class="line">            attrs: &#123;</span><br><span class="line">                classname: <span class="string">'item'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            children: [<span class="string">'item2'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>item 12<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬æƒ³è¦å°†åˆ—è¡¨æ›´æ–°ä¸ºä¸Šè¿°ç»“æ„ï¼Œä½¿ç”¨ <code>patch(vnode, newNode)</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­è‚¯å®šæ˜¯è¦ä¸æ–­çš„å»å¯¹æ¯”ï¼Œä¸æ–­çš„å¯¹æ¯”childrenè‚¯å®šè¿˜ä¼šç”¨åˆ°é€’å½’ï¼Œæ¨¡æ‹Ÿä»£ç ï¼ˆåªè€ƒè™‘æœ€ç®€å•çš„æƒ…å†µï¼‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateEl</span>(<span class="params">vnode, newNode</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> children = vnode.children || []</span><br><span class="line">    <span class="keyword">let</span> newChildren = newNode.children || []</span><br><span class="line"></span><br><span class="line">    children.forEach(<span class="function">(<span class="params">child, idx</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> newChild = newChildren[idx]</span><br><span class="line">        <span class="keyword">if</span>(newChild === <span class="literal">null</span>) <span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">if</span>(child.tag === newChild.tag) &#123;</span><br><span class="line">            <span class="comment">// the same tag</span></span><br><span class="line">            updateEl(child, newChild)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// the different tag</span></span><br><span class="line">            replaceNode(child, newChild)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è™šæ‹ŸDom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Event Loopæ€»ç»“</title>
      <link href="/2018/11/11/Event-Loop%E6%80%BB%E7%BB%93.html"/>
      <url>/2018/11/11/Event-Loop%E6%80%BB%E7%BB%93.html</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰ä¹Ÿæœ‰ event loop çš„æ¦‚å¿µï¼Œä½†ä¸€ç›´éƒ½æ˜¯çç¢çš„ã€‚ç›´åˆ°é˜…è¯»ä»¥ä¸‹ä¸‰ç¯‡æ–‡ç« åï¼Œçç¢çš„ç‚¹ä¸²åœ¨äº†ä¸€èµ·ã€‚</p><blockquote><p><a href="https://www.cnblogs.com/cangqinglang/p/8963557.html" target="_blank" rel="noopener">ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†</a></p></blockquote><blockquote><p><a href="https://juejin.im/post/59e85eebf265da430d571f89" target="_blank" rel="noopener">è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶</a></p></blockquote><blockquote><p><a href="https://zhuanlan.zhihu.com/p/33087629" target="_blank" rel="noopener">Event Loopçš„è§„èŒƒå’Œå®ç°</a></p></blockquote><p>ä¸ºäº†å°è±¡æ·±åˆ»ï¼Œè¿˜æ˜¯å†³å®šè‡ªå·±å†™ä¸€å†™ã€‚æ€»ç»“å¦‚ä¸‹ï¼š</p><h3 id="1ã€è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«"><a href="#1ã€è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="1ã€è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«"></a>1ã€è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«</h3><h4 id="1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ</h4><p>åœ¨è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­ï¼Œåªæœ‰è¿›ç¨‹æ‰èƒ½åœ¨ç³»ç»Ÿä¸­è¿è¡Œã€‚æ‰€ä»¥è¦ä½¿ç¨‹åºè¿è¡Œå°±å¿…é¡»ä¸ºå…¶åˆ›å»ºè¿›ç¨‹ã€‚å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ—¶å°±å·²ç»åˆ›å»ºäº†è¿›ç¨‹ã€‚åˆ›å»ºè¿›ç¨‹ä¹‹åï¼Œç³»ç»Ÿä¼šä¸ºå…¶åˆ†é…èµ„æº(å†…å­˜ç­‰)ä¾›å…¶ä½¿ç”¨ã€‚</p><p><a href="https://zh.wikipedia.org/wiki/%E8%A1%8C%E7%A8%8B" target="_blank" rel="noopener">è¿›ç¨‹</a>æ˜¯ç¨‹åºï¼ˆæŒ‡ä»¤å’Œæ•°æ®ï¼‰çš„çœŸæ­£è¿è¡Œå®ä¾‹ã€‚è‹¥å¹²<a href="https://zh.wikipedia.org/wiki/%E8%A1%8C%E7%A8%8B" target="_blank" rel="noopener">è¿›ç¨‹</a>æœ‰å¯èƒ½ â€¦</p><a id="more"></a><p>ä¸åŒä¸€ä¸ªç¨‹åºç›¸å…³ç³»ï¼Œä¸”æ¯ä¸ª<a href="https://zh.wikipedia.org/wiki/%E8%A1%8C%E7%A8%8B" target="_blank" rel="noopener">è¿›ç¨‹</a>çš†å¯ä»¥åŒæ­¥ï¼ˆå¾ªåºï¼‰æˆ–å¼‚æ­¥ï¼ˆå¹³è¡Œï¼‰çš„æ–¹å¼ç‹¬ç«‹è¿è¡Œã€‚</p><h4 id="2ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ"><a href="#2ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ"></a>2ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ</h4><p><a href="https://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B" target="_blank" rel="noopener">çº¿ç¨‹</a>æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ä¸€æ¡<a href="https://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B" target="_blank" rel="noopener">çº¿ç¨‹</a>æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ª<a href="https://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B" target="_blank" rel="noopener">çº¿ç¨‹</a>ï¼Œæ¯æ¡<a href="https://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B" target="_blank" rel="noopener">çº¿ç¨‹</a>å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚</p><p><strong>æ€»çš„æ¥è¯´è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯è®¡ç®—æœºç³»ç»Ÿè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹åŸºæœ¬ä¸Šä¸æ‹¥æœ‰èµ„æºï¼ˆä¹Ÿæœ‰ä¸€ç‚¹å¿…ä¸å¯å°‘çš„èµ„æºï¼‰å®ƒåªä¸“æ³¨äºè°ƒåº¦å’Œåˆ†æ´¾ï¼Œæé«˜ç³»ç»Ÿå¹¶å‘ç¨‹åº¦ï¼Œä½†æ˜¯å®ƒå¯ä»¥è®¿é—®å…¶éš¶å±è¿›ç¨‹çš„èµ„æºã€‚</strong></p><h3 id="2ã€æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹"><a href="#2ã€æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹" class="headerlink" title="2ã€æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹"></a>2ã€æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹</h3><p>ä¸Šå›¾æ¥é˜è¿°ï¼Œè¿›å…¥æµè§ˆå™¨ï¼ˆchromeç­‰ï¼‰æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨çš„ task managerã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/2018/11/11/Event-Loopæ€»ç»“/i7eo_6e8f969201c7cd42ae589fe20d2fd558.png" alt=""></p><p>ä»å›¾ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ä»¥ç¡®å®šçš„æ˜¯æˆ‘æ‰“å¼€çš„4ä¸ªé¡µé¢éƒ½æ˜¯è¿›ç¨‹ï¼Œå› ä¸ºå®ƒä»¬æœ‰ä¸åŒçš„ process idï¼ˆè¿›ç¨‹æ ‡è¯†ç¬¦ï¼‰ï¼Œè¿™ä¸ªæ˜¯å­˜åœ¨ PCB ä¸­çš„ï¼Œç³»ç»Ÿåˆ†é…ä¸”å”¯ä¸€çš„æ•°å­—æ ‡è¯†ç¬¦ã€‚PCB æ˜¯è¿›ç¨‹æ§åˆ¶å—ï¼Œå…·ä½“å¯æœç´¢è®¡ç®—æœºæ“ä½œç³»ç»Ÿ-è¿›ç¨‹ã€‚</p><p>æµè§ˆå™¨çš„ä¸»è¦è¿›ç¨‹æœ‰å››ä¸ªï¼Œåˆ†åˆ«ä¸ºï¼šä¸»è¿›ç¨‹ã€GPUè¿›ç¨‹ã€æµè§ˆå™¨æ¸²æŸ“ï¼ˆrenderï¼‰è¿›ç¨‹ï¼ˆæ¯ä¸ªæ ‡ç­¾é¡µéƒ½ä¼šä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼‰ã€ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ã€‚</p><p>ä¸»è¦æ¥è¯´è¯´è¿™å››ä¸ªè¿›ç¨‹çš„èŒè´£ï¼š</p><h4 id="1-ä¸»è¿›ç¨‹ï¼š"><a href="#1-ä¸»è¿›ç¨‹ï¼š" class="headerlink" title="1. ä¸»è¿›ç¨‹ï¼š"></a>1. ä¸»è¿›ç¨‹ï¼š</h4><ul><li>ç”¨æˆ·çš„å‰è¿›ã€åé€€æ“ä½œ</li><li>æ¯ä¸ªæ ‡ç­¾é¡µçš„åˆ›å»ºä¸é”€æ¯</li><li>å°†æ¸²æŸ“è¿›ç¨‹æ‰§è¡Œåç”Ÿæˆçš„ä½å›¾ï¼ˆbitmapï¼‰ç»˜åˆ¶åœ¨å¯¹åº”æ ‡ç­¾é¡µä¸Šï¼Œå‘ˆç°ç»™ç”¨æˆ·</li><li>ä¹¦ç­¾ã€ä¸‹è½½ç­‰åŠŸèƒ½çš„ç®¡ç†</li></ul><h4 id="2-æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹"><a href="#2-æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="2. æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹"></a>2. æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹</h4><ul><li>é¡µé¢æ¸²æŸ“</li><li>è„šæœ¬æ‰§è¡Œï¼ˆäº‹ä»¶ã€taskï¼‰</li></ul><h4 id="3-GPUè¿›ç¨‹ï¼šç”¨äº3Dç»˜åˆ¶ç­‰"><a href="#3-GPUè¿›ç¨‹ï¼šç”¨äº3Dç»˜åˆ¶ç­‰" class="headerlink" title="3. GPUè¿›ç¨‹ï¼šç”¨äº3Dç»˜åˆ¶ç­‰"></a>3. GPUè¿›ç¨‹ï¼šç”¨äº3Dç»˜åˆ¶ç­‰</h4><h4 id="4-ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šä½¿ç”¨æ’ä»¶æ—¶åˆ›å»º"><a href="#4-ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šä½¿ç”¨æ’ä»¶æ—¶åˆ›å»º" class="headerlink" title="4. ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šä½¿ç”¨æ’ä»¶æ—¶åˆ›å»º"></a>4. ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šä½¿ç”¨æ’ä»¶æ—¶åˆ›å»º</h4><p>ä¸»è¦æ¥è¯´ä¸‹æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯å½“å‰æ ‡ç­¾çš„æ§åˆ¶è€…ã€‚js ä»£ç çš„æ‰§è¡Œã€äº‹ä»¶çš„è§¦å‘ã€é¡µé¢çš„å±•ç¤ºç­‰éƒ½ç”±å®ƒè´Ÿè´£ã€‚é‚£ä¹ˆè¿™ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶å¹²è¿™ä¹ˆå¤šäº‹æƒ…å—ï¼Ÿå®ƒä¸€ä¸ªå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªäººæ¥åšå°±ä¼šæµªè´¹èµ„æºè€Œä¸”ä¸€æ—¦æ‰§è¡Œè„šæœ¬æ–‡ä»¶åä¼šä¸æ–­é˜»å¡é¡µé¢æ‰§è¡Œã€‚è‡³æ­¤ï¼Œå¼•å…¥äº†çº¿ç¨‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h3 id="3ã€Javascript-çš„å•çº¿ç¨‹"><a href="#3ã€Javascript-çš„å•çº¿ç¨‹" class="headerlink" title="3ã€Javascript çš„å•çº¿ç¨‹"></a>3ã€Javascript çš„å•çº¿ç¨‹</h3><p>åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­åˆ’åˆ†äº†å¾ˆå¤šä¸ªçº¿ç¨‹ï¼Œè¿™é‡Œä»‹ç»ä¸€äº›å¸¸é©»çº¿ç¨‹ï¼š</p><h5 id="1-JS-çº¿ç¨‹ï¼ˆå¼•æ“çº¿ç¨‹ï¼Œå³å¸¸è¯´çš„é‚£ä¸ªjså•çº¿ç¨‹ï¼‰"><a href="#1-JS-çº¿ç¨‹ï¼ˆå¼•æ“çº¿ç¨‹ï¼Œå³å¸¸è¯´çš„é‚£ä¸ªjså•çº¿ç¨‹ï¼‰" class="headerlink" title="1. JS çº¿ç¨‹ï¼ˆå¼•æ“çº¿ç¨‹ï¼Œå³å¸¸è¯´çš„é‚£ä¸ªjså•çº¿ç¨‹ï¼‰"></a>1. JS çº¿ç¨‹ï¼ˆå¼•æ“çº¿ç¨‹ï¼Œå³å¸¸è¯´çš„é‚£ä¸ªjså•çº¿ç¨‹ï¼‰</h5><ul><li>è¿è¡Œç¯å¢ƒï¼ˆv8ï¼‰ï¼Œè´Ÿè´£å¤„ç† js è„šæœ¬</li><li>æ¯ä¸ªæ ‡ç­¾é¡µåªæœ‰ä¸€ä¸ª js çº¿ç¨‹åœ¨æ‰§è¡Œä»£ç </li><li>js çº¿ç¨‹ä¸ Gui æ¸²æŸ“çº¿ç¨‹äº’æ–¥ï¼Œjs æ‰§è¡Œæ—¶é—´è¿‡é•¿ä¼šå¯¼è‡´é¡µé¢æ¸²æŸ“çš„é˜»å¡ï¼ˆäº’æ–¥åŸå› ä¸‹é¢é˜è¿°</li></ul><h5 id="2-GUI-æ¸²æŸ“çº¿ç¨‹"><a href="#2-GUI-æ¸²æŸ“çº¿ç¨‹" class="headerlink" title="2. GUI æ¸²æŸ“çº¿ç¨‹"></a>2. GUI æ¸²æŸ“çº¿ç¨‹</h5><ul><li>è´Ÿè´£æ¸²æŸ“é¡µé¢ï¼ˆæ„å»ºdom æ ‘ &amp; cssparser æ ‘ &amp; renderobject æ ‘ï¼‰</li><li>å½“é¡µé¢å‡ºç°é‡ç»˜æˆ–å›æµï¼ˆrepaint/reflowï¼‰æ—¶ï¼Œä¼šè°ƒç”¨è¯¥çº¿ç¨‹</li><li>ä¸ js çº¿ç¨‹äº’æ–¥</li></ul><h5 id="3-äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­ç­‰å¾…-js-çº¿ç¨‹å¤„ç†ã€‚ï¼ˆå¼‚æ­¥é˜Ÿåˆ—ä¸‹é¢ä¼šè§£é‡Šï¼‰"><a href="#3-äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­ç­‰å¾…-js-çº¿ç¨‹å¤„ç†ã€‚ï¼ˆå¼‚æ­¥é˜Ÿåˆ—ä¸‹é¢ä¼šè§£é‡Šï¼‰" class="headerlink" title="3. äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­ç­‰å¾… js çº¿ç¨‹å¤„ç†ã€‚ï¼ˆå¼‚æ­¥é˜Ÿåˆ—ä¸‹é¢ä¼šè§£é‡Šï¼‰"></a>3. äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­ç­‰å¾… js çº¿ç¨‹å¤„ç†ã€‚ï¼ˆå¼‚æ­¥é˜Ÿåˆ—ä¸‹é¢ä¼šè§£é‡Šï¼‰</h5><h5 id="4-å®šæ—¶å™¨è§¦å‘çº¿ç¨‹"><a href="#4-å®šæ—¶å™¨è§¦å‘çº¿ç¨‹" class="headerlink" title="4. å®šæ—¶å™¨è§¦å‘çº¿ç¨‹"></a>4. å®šæ—¶å™¨è§¦å‘çº¿ç¨‹</h5><ul><li>å®šæ—¶å™¨å¹¶ä¸æ˜¯åœ¨æŸæ®µæ—¶é—´åæ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æŸæ—¶é—´åè¢«æ·»åŠ è‡³å¼‚æ­¥é˜Ÿåˆ—ï¼Œç­‰ js çº¿ç¨‹ç©ºé—²åæ‰§è¡Œ</li><li>W3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚setTimeoutä¸­ä½äº4msçš„æ—¶é—´é—´éš”ç®—ä¸º4ms</li></ul><h5 id="5-http-è¯·æ±‚çº¿ç¨‹ï¼šè¯·æ±‚æˆåŠŸåä¼šæŠŠå›è°ƒæ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ä¸­ã€‚"><a href="#5-http-è¯·æ±‚çº¿ç¨‹ï¼šè¯·æ±‚æˆåŠŸåä¼šæŠŠå›è°ƒæ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ä¸­ã€‚" class="headerlink" title="5. http è¯·æ±‚çº¿ç¨‹ï¼šè¯·æ±‚æˆåŠŸåä¼šæŠŠå›è°ƒæ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ä¸­ã€‚"></a>5. http è¯·æ±‚çº¿ç¨‹ï¼šè¯·æ±‚æˆåŠŸåä¼šæŠŠå›è°ƒæ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ä¸­ã€‚</h5><h5 id="6-å¤‡æ³¨ï¼šä¸Šè¿°æ‰§è¡Œç¯å¢ƒæ˜¯åœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒæ¢ä¸º-node-çš„è¯ï¼Œè¿˜æœ‰-I-O-çº¿ç¨‹ä¸-setImmediate"><a href="#6-å¤‡æ³¨ï¼šä¸Šè¿°æ‰§è¡Œç¯å¢ƒæ˜¯åœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒæ¢ä¸º-node-çš„è¯ï¼Œè¿˜æœ‰-I-O-çº¿ç¨‹ä¸-setImmediate" class="headerlink" title="6. å¤‡æ³¨ï¼šä¸Šè¿°æ‰§è¡Œç¯å¢ƒæ˜¯åœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒæ¢ä¸º node çš„è¯ï¼Œè¿˜æœ‰ I/O çº¿ç¨‹ä¸ setImmediate"></a>6. å¤‡æ³¨ï¼šä¸Šè¿°æ‰§è¡Œç¯å¢ƒæ˜¯åœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒæ¢ä¸º node çš„è¯ï¼Œè¿˜æœ‰ I/O çº¿ç¨‹ä¸ setImmediate</h5><h3 id="3ã€ä¸ºä»€ä¹ˆè¯´-JS-çº¿ç¨‹ä¸-GUI-æ¸²æŸ“çº¿ç¨‹äº’æ–¥ï¼ˆjs-ä»£ç ä¼šé˜»å¡æ¸²æŸ“ï¼‰ï¼Ÿ"><a href="#3ã€ä¸ºä»€ä¹ˆè¯´-JS-çº¿ç¨‹ä¸-GUI-æ¸²æŸ“çº¿ç¨‹äº’æ–¥ï¼ˆjs-ä»£ç ä¼šé˜»å¡æ¸²æŸ“ï¼‰ï¼Ÿ" class="headerlink" title="3ã€ä¸ºä»€ä¹ˆè¯´ JS çº¿ç¨‹ä¸ GUI æ¸²æŸ“çº¿ç¨‹äº’æ–¥ï¼ˆjs ä»£ç ä¼šé˜»å¡æ¸²æŸ“ï¼‰ï¼Ÿ"></a>3ã€ä¸ºä»€ä¹ˆè¯´ JS çº¿ç¨‹ä¸ GUI æ¸²æŸ“çº¿ç¨‹äº’æ–¥ï¼ˆjs ä»£ç ä¼šé˜»å¡æ¸²æŸ“ï¼‰ï¼Ÿ</h3><p>GUI æ¸²æŸ“çº¿ç¨‹ç¬¬ä¸€ä¸ªæ„å»ºçš„æ˜¯ dom æ ‘ï¼Œjs ä»£ç ä¹Ÿæœ‰å¯èƒ½ä¼šä¿®æ”¹ dom ç»“æ„ï¼Œä¸€æ—¦ä¿®æ”¹å°±ä¼šå¼•èµ· é‡ç»˜æˆ–å›æµï¼Œè¿™å°±ä¼šå¯¼è‡´ GUI çº¿ç¨‹çš„å†æ¬¡ä»å¤´å¼€å§‹ã€‚ä¸ºäº†é¿å…è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿæ‰€ä»¥é‡‡ç”¨äº†è¿™ç§äº’æ–¥çš„ç­–ç•¥ã€‚ä¿©è€…å¹¶ä¸èƒ½åœ¨åŒä¸€æ—¶é—´è¿›è¡Œã€‚</p><h3 id="4ã€å¼‚æ­¥çš„å®ç°æ–¹æ¡ˆ-event-loop"><a href="#4ã€å¼‚æ­¥çš„å®ç°æ–¹æ¡ˆ-event-loop" class="headerlink" title="4ã€å¼‚æ­¥çš„å®ç°æ–¹æ¡ˆ - event loop"></a>4ã€å¼‚æ­¥çš„å®ç°æ–¹æ¡ˆ - event loop</h3><p>é’ˆå¯¹äº js å¼•æ“å•çº¿ç¨‹è¿™ç§æƒ…å†µï¼Œä¸ºäº†ä¸è®©ç¨‹åºï¼ˆè¢« http è¯·æ±‚ã€å®šæ—¶å™¨ç­‰ï¼‰é˜»å¡ï¼Œæ‰€ä»¥æœ‰äº†å¼‚æ­¥çš„æ¦‚å¿µã€‚ä½†æ˜¯åœ¨ç°ä»£ web ç¨‹åºå¼€å‘ä¸­ï¼Œä»£ç é‡è¶Šæ¥è¶Šå¤§ã€‚ä¸ºäº†èƒ½è®©è¶Šæ¥è¶Šå¤šçš„å®šæ—¶å™¨ã€äº‹ä»¶ã€è¯·æ±‚æœ‰åºä¸”è§„èŒƒçš„æ‰§è¡Œï¼Œevent loop æ–¹æ¡ˆå‡ºç°äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'3'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'4'</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'5'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'6'</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼š1 3 6 4 5 2</p><p>é¦–å…ˆä»‹ç» task &amp; microtaskï¼š</p><ul><li>task ä¸»è¦åŒ…æ‹¬ï¼šsetTimeoutã€setIntervalã€setImmediateã€I/Oã€UIäº¤äº’äº‹ä»¶</li><li>microtask ä¸»è¦åŒ…æ‹¬ï¼šPromiseã€<a href="https://nodejs.org/api/process.html" target="_blank" rel="noopener">process.nextTick</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe" target="_blank" rel="noopener">MutationObserver</a>ï¼ˆåœ¨nodeä¸­ process.nextTick çš„ä¼˜å…ˆçº§é«˜äº promiseï¼‰</li></ul><p>task &amp; microtask åœ¨å½“å‰æ ‡ç­¾é¡µä¸­æ‹¥æœ‰ä¿©ä¸ªé˜Ÿåˆ—æ¥åˆ†åˆ«å­˜å‚¨ task &amp; microtaské™¤äº† js &amp; gui çº¿ç¨‹ï¼Œå…¶ä»–æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶éƒ½ä¼šæŒ‰ç…§ taskéƒ½æœ‰ä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—æ¥æ§åˆ¶é¡ºåºã€‚å¦‚ä¸‹å›¾</p><p><img src="/2018/11/11/Event-Loopæ€»ç»“/i7eo_b879476dd053c59cfd42b8fe4cdfa137.png" alt="Event Loop"></p><p>Event Loop è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ•´ä¸ªscriptä»£ç ä½œä¸º task æ‰§è¡Œæ—¶å…ˆåˆ¤æ–­æ˜¯åŒæ­¥ä»»åŠ¡è¿˜æ˜¯å¼‚æ­¥ä»»åŠ¡</li><li>åŒæ­¥ä»»åŠ¡ä¾æ¬¡è¿›å…¥ js çº¿ç¨‹ï¼Œä¾æ¬¡æ‰§è¡Œ</li><li>å¼‚æ­¥ä»»åŠ¡<strong>å…ˆåœ¨ table ä¸­æ³¨å†Œ</strong>ï¼Œç„¶å<strong>å½“ä»»åŠ¡å®Œæˆæ—¶</strong>æŒ‰ç…§ task/microtask åŒºåˆ†å¼€æ¥ï¼Œä¾æ¬¡è¿›å…¥ä¸åŒçš„å¼‚æ­¥é˜Ÿåˆ—</li><li>js çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼ˆæ‰§è¡Œæ ˆä¸ºç©ºï¼‰å…ˆè¯»å– microtask çš„å¼‚æ­¥é˜Ÿåˆ—ï¼Œå…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼ˆé˜Ÿåˆ—ä¸ºç©ºåï¼‰ï¼Œå†å»è¯»å– task çš„å¼‚æ­¥é˜Ÿåˆ—ï¼Œ<strong>task å¼‚æ­¥é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡è‹¥åŒ…å« microtask åˆ™å†æ¬¡å»è¯»å– microtask å¼‚æ­¥é˜Ÿåˆ—</strong>ã€‚</li><li>ä¸Šè¿°è¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œç›´è‡³ task å¼‚æ­¥é˜Ÿåˆ—ä¸ºç©ºã€‚æ•´ä¸ªè¿‡ç¨‹å³ä¸º Event Loopã€‚</li></ol><p>è¿˜æ˜¯ç›´æ¥æ¥çœ‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'4'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'5'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'7'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'8'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'9'</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'11'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'12'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¯¦ç»†è¿‡ç¨‹è¯·å‚è€ƒï¼š</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/33087629" target="_blank" rel="noopener">Event Loopçš„è§„èŒƒå’Œå®ç°</a></p></blockquote><p>è¾“å‡ºï¼š1 7 8 2 4 5 9 11 12</p><p>é‚£å¦‚æœæ‰§è¡Œç¯å¢ƒåˆ‡æ¢ä¸º nodeï¼Œnode çš„ Event loopçš„å®ç°ä¸æµè§ˆå™¨ç¨æœ‰å·®å¼‚ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><p><img src="/2018/11/11/Event-Loopæ€»ç»“/i7eo_6474957a85872c82bdf475ba406ffe10.png" alt="node - event loop"></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li>expired timers and intervals queue è¿™ä¸ªå¼‚æ­¥é˜Ÿåˆ—ä¸“é—¨æ¥å­˜å‚¨æ‰€æœ‰çš„ setTimeout/setInterval</li><li>immediates queue è¿™ä¸ªå¼‚æ­¥é˜Ÿåˆ—ä¸“é—¨æ¥å­˜å‚¨æ‰€æœ‰çš„ setImmediate</li><li>next tick queue ä¸“é—¨æ¥å­˜å‚¨æ‰€æœ‰çš„ process.nextTick</li><li>node æ¸…ç©º queue æ—¶ä¼šæ‰§è¡Œæ‰€æœ‰ taskï¼ˆä¸è®ºæ—¶ task è¿˜æ˜¯ microtaskï¼‰</li></ul><p>é‚£ä¹ˆä»¥ä¸‹ä»£ç çš„ç»“æœå‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    process.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">8</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">process.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">6</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">9</span>)</span><br><span class="line">    process.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">10</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">11</span>)</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">12</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>js æ‰§è¡Œæ ˆä¸ºç©ºï¼Œmicrotask queue ä¸ºç©ºæ—¶ï¼Œå»æ£€æŸ¥ task queueï¼Œå‘ç°ä¿©ä¸ª settimeout è¿™æ—¶<strong>ä¾æ¬¡æ‰§è¡Œ</strong>ã€‚è¿™é‡Œä¸æµè§ˆå™¨ç¯å¢ƒä¸åŒï¼Œæµè§ˆå™¨ç¯å¢ƒæ˜¯ä» task queue è¯»å‡ºä¸€ä¸ª task å…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œåå»æ£€æŸ¥ microtask queueï¼Œè€Œ node ä¸­æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå®Œ task queueï¼Œå†å»æ£€æŸ¥ micrtask queueï¼ˆæ¯”å¦‚ process.nextTickã€promise ç­‰ï¼‰</p><p>è¾“å‡ºï¼š1 7 6 8 2 4 9 11 3 10 5 12</p><p>åˆ†æè¿‡ç¨‹è¯·å‚è€ƒï¼š</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/33087629" target="_blank" rel="noopener">Event Loopçš„è§„èŒƒå’Œå®ç°</a></p></blockquote><h3 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5.æ€»ç»“"></a>5.æ€»ç»“</h3><ul><li>js æ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€</li><li>event loop æ˜¯ js çš„æ‰§è¡Œæœºåˆ¶</li></ul><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/" target="_blank" rel="noopener">Tasks, microtasks, queues and schedules</a></li><li><a href="https://medium.com/the-node-js-collection/what-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c" target="_blank" rel="noopener">What you should know to really understand the Node.js Event Loop</a></li><li><a href="https://jsblog.insiderattack.net/timers-immediates-and-process-nexttick-nodejs-event-loop-part-2-2c53fd511bb3?gi=d90233a38d18" target="_blank" rel="noopener">Timers, Immediates and Process.nextTick</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EventLoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPç¬”è®°(ä¸‹)</title>
      <link href="/2018/11/06/HTTP1-02.html"/>
      <url>/2018/11/06/HTTP1-02.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>è·¨åŸŸã€ç¼“å­˜è¿™äº›éƒ½æ˜¯å¼€å‘ä¸­å¸¸å¸¸é‡åˆ°çš„ï¼Œåšäº›ç¬”è®°ä¾›æ—¥åæŸ¥é˜…ã€‚</p><h3 id="CORSï¼ˆCross-Origin-Resource-Sharingï¼‰è·¨æºèµ„æºåˆ†äº«"><a href="#CORSï¼ˆCross-Origin-Resource-Sharingï¼‰è·¨æºèµ„æºåˆ†äº«" class="headerlink" title="CORSï¼ˆCross-Origin Resource Sharingï¼‰è·¨æºèµ„æºåˆ†äº«"></a>CORSï¼ˆCross-Origin Resource Sharingï¼‰è·¨æºèµ„æºåˆ†äº«</h3><h4 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h4><p>åŒæºç­–ç•¥ï¼ˆ<a href="https://en.wikipedia.org/wiki/Same-origin_policy" target="_blank" rel="noopener">same-origin policy</a>ï¼‰æ˜¯æµè§ˆå™¨ä¿éšœå®‰å…¨çš„ä¸€ç§æ–¹æ³•ã€‚<br>ä¸»è¦æŒ‡çš„æ˜¯åœ¨åŒåè®®ï¼ŒåŒåŸŸåï¼ŒåŒç«¯å£ä¸‹æ‰èƒ½è®¿é—®èµ„æºã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·é™åˆ¶ï¼Ÿå‡è®¾æŸç”¨æˆ·ç™»é™†äº†è‡ªå·±çš„ç½‘ä¸Šç½‘ä¸Šé“¶è¡Œï¼Œæ¥ç€å»è®¿é—®äº†å…¶ä»–ç½‘ç«™ï¼Œå¦‚æœæ²¡æœ‰åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œé‚£ä¹ˆå…¶ä»–ç½‘ç«™å°±å¯ä»¥è®¿é—®é“¶è¡Œç½‘ç«™çš„cookieï¼Œè€Œcookieä¸€èˆ¬å­˜æ”¾ç€ä¸ç”¨æˆ·ç›¸å…³çš„æŸäº›ä¿¡æ¯ï¼Œè¿™æ ·ç”¨æˆ·çš„ä¿¡æ¯å°±ä¼šè¢«æ³„æ¼æˆ–è€…è¢«å†’åé¡¶æ›¿å»è®¿é—®ç½‘ä¸Šé“¶è¡Œã€‚</p><a id="more"></a><h4 id="CORS-amp-JSONP"><a href="#CORS-amp-JSONP" class="headerlink" title="CORS &amp; JSONP"></a>CORS &amp; JSONP</h4><p>æ­£æ˜¯æºäºä¸Šè¿°çš„ç­–ç•¥ï¼Œå¯¼è‡´åœ¨å¼€å‘ä¸­å‡ºç°è·¨åŸŸçš„é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•è·¨è¿‡è¿™ä¸ªé™åˆ¶å‘¢ï¼Ÿå¸¸è§çš„æœ‰ï¼š</p><ul><li>cors</li><li>jsonp</li><li>websocket</li><li>postMessage</li><li>iframe</li><li>â€¦</li></ul><p>å…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://segmentfault.com/a/1190000011145364" target="_blank" rel="noopener"><br>å‰ç«¯å¸¸è§è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼ˆå…¨ï¼‰</a><br>è¿™é‡Œä¸»è¦è¯´ä¸€è¯´å¸¸è§çš„ cors ä¸ jsonp</p><h5 id="CROS"><a href="#CROS" class="headerlink" title="CROS"></a>CROS</h5><p>CORS æŒ‡çš„æ˜¯è·¨æºèµ„æºåˆ†äº«ï¼Œå…·ä½“çš„å®ç°åˆ†ä¸ºä¿©ç±»ï¼š</p><ul><li>ç®€å•è¯·æ±‚ï¼ˆsimple requestï¼‰</li><li>é¢„è¯·æ±‚ï¼ˆpreflight requestï¼‰</li></ul><p>å¯¹äºèƒ½æ»¡è¶³ä»¥ä¸‹ä¿©å¤§æ¡ä»¶çš„å³ä¸ºç®€å•è¯·æ±‚ï¼š</p><ol><li>è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§ä¹‹ä¸€ï¼š</li></ol><ul><li>GET</li><li>HEAD</li><li>POST</li></ul><ol start="2"><li>http çš„å¤´ä¿¡æ¯ä¸èƒ½è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š</li></ol><ul><li>Accept</li><li>Accept - Language</li><li>Content - Language</li><li>Content - type<ul><li>text/plain</li><li>multipart/form-data</li><li>application/x-www-form-urlencoded</li></ul></li><li><a href="https://httpwg.org/http-extensions/client-hints.html#viewport-width" target="_blank" rel="noopener">Viewport-Width</a></li><li><a href="https://httpwg.org/http-extensions/client-hints.html#dpr" target="_blank" rel="noopener">DPR</a></li><li><a href="https://httpwg.org/http-extensions/client-hints.html#downlink" target="_blank" rel="noopener">Downlink</a></li><li><a href="https://httpwg.org/http-extensions/client-hints.html#save-data" target="_blank" rel="noopener">Save-Data</a></li><li><a href="https://httpwg.org/http-extensions/client-hints.html#width" target="_blank" rel="noopener">Width</a></li></ul><p>è€Œä¸æ»¡è¶³å¦‚ä¸Šæ¡ä»¶çš„å³ä¸ºé¢„è¯·æ±‚ã€‚</p><p>å‡è®¾ç°åœ¨å¼€å¯äº†ç«¯å£8888ã€8887 ä¿©ä¸ª node æœåŠ¡ï¼Œå½“8888ä¸Šçš„é¡µé¢è¯·æ±‚8887çš„æ—¶å€™ï¼Œè¯·æ±‚å…¶å®æ˜¯å·²ç»å‘é€åˆ°äº†8887ã€‚è¯·æ±‚å¤´ä¸­å¤šå‡ºäº† <code>origin</code> å­—æ®µï¼Œä½†æ˜¯æ­¤æ—¶æœåŠ¡å™¨ä¸­å¹¶æ²¡æœ‰è®¾ç½®ç›¸åº”çš„ <code>Access-Control-Allow-Origin</code> æ‰€ä»¥å½“è¯·æ±‚ä»8887è¿”å›ç»™æµè§ˆå™¨åï¼Œæµè§ˆå™¨é˜»æŒ¡äº†è¯¥è¯·æ±‚:</p><p><img src="/2018/11/06/HTTP1-02/i7eo_1c52b0af524198a362d4c1b1ae4571f7.png" alt=""></p><p>è§£å†³åŠæ³•å°±æ˜¯åœ¨8887ä¸Šçš„å“åº”å¤´ä¸­æ·»åŠ  <code>&#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;</code> è¿™é‡Œçš„ * è¡¨ç¤ºé€šé…ç¬¦ï¼Œå½“ç„¶ä½ è¿˜å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®æˆå•ä¸€çš„åœ°å€ï¼Œæ¯”å¦‚ï¼š<code>&#39;Access-Control-Allow-Origin&#39;: &#39;http://127.0.0.1:8888&#39;</code> ã€‚</p><p>å½“ä½ åœ¨è¯·æ±‚å¤´ä¸­è®¾ç½®äº† PUT æˆ–è€… è‡ªå®šä¹‰ä¿¡æ¯ï¼ˆtoken ç­‰ï¼‰è¿™ä¸ªæ—¶å€™éœ€è¦åœ¨å“åº”å¤´ä¸Šæ·»åŠ ï¼š<code>&#39;Access-Control-Allow-Methods&#39;: &#39;PUT, Delete&#39;, &#39;Access-Control-Allow-Headers&#39;: &#39;Token&#39;</code>,è¿™æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨æ”¯æŒå¯¹åº”çš„ä¿¡æ¯ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨8888å‘é€è¯·æ±‚å‰ä¼šå¤šå‘é€ä¸€æ¡æ–¹æ³•ä¸º <code>OPTIONS</code>çš„è¯·æ±‚æ¥è¿›è¡Œé¢„è¯·æ±‚ã€‚è¿˜å¯ä»¥è®¾ç½®æ—¶é—´ä½¿æ¥ä¸‹æ¥çš„è¯·æ±‚ä¸­ä¸å¸¦æœ‰è¿™æ¡é¢„è¯·æ±‚ï¼Œå³ï¼š<code>&#39;Access-Control-Max-Age&#39;: &#39;1000&#39;</code>ï¼ˆå•ä½ä¸ºç§’ï¼‰åœ¨ 1000s å†…ä¸ä¼šå†å‘é€é¢„è¯·æ±‚ã€‚</p><h5 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h5><p>æµè§ˆå™¨å…è®¸è·¨åŸŸèµ„æºçš„åµŒå…¥ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><code>&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;</code> æ ‡ç­¾åµŒå…¥è·¨åŸŸè„šæœ¬ã€‚è¯­æ³•é”™è¯¯ä¿¡æ¯åªèƒ½åœ¨åŒæºè„šæœ¬ä¸­æ•æ‰åˆ°ã€‚</li><li><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;...&quot;&gt;</code> æ ‡ç­¾åµŒå…¥CSSã€‚ç”±äºCSSçš„æ¾æ•£çš„è¯­æ³•è§„åˆ™ï¼ŒCSSçš„è·¨åŸŸéœ€è¦ä¸€ä¸ªè®¾ç½®æ­£ç¡®çš„Content-Type æ¶ˆæ¯å¤´</li><li><code>&lt;img&gt;</code>åµŒå…¥å›¾ç‰‡ã€‚æ”¯æŒçš„å›¾ç‰‡æ ¼å¼åŒ…æ‹¬PNG,JPEG,GIF,BMP,SVGâ€¦</li><li><code>&lt;video&gt;</code>å’Œ <code>&lt;audio&gt;</code>åµŒå…¥å¤šåª’ä½“èµ„æºã€‚</li><li><code>&lt;frame&gt;</code> å’Œ <code>&lt;iframe&gt;</code></li><li>@font-face å¼•å…¥çš„å­—ä½“ã€‚ä¸€äº›æµè§ˆå™¨å…è®¸è·¨åŸŸå­—ä½“ï¼ˆ cross-origin fontsï¼‰ï¼Œä¸€äº›éœ€è¦åŒæºå­—ä½“ï¼ˆsame-origin fontsï¼‰ã€‚</li><li><code>&lt;object&gt;</code>, <code>&lt;embed&gt;</code> å’Œ <code>&lt;applet&gt;</code> çš„æ’ä»¶ã€‚</li></ul><p>jsonp æ­£å¼è¿ç”¨äº†ç¬¬ä¸€æ¡è§„åˆ™,å°†æ•°æ®åˆ©ç”¨å¦‚ä¸‹å½¢å¼åŒ…è£…åœ¨è¯·æ±‚çš„jsæ–‡ä»¶ä¸­ï¼š<code>cors({})</code> ç„¶ååœ¨å‘å‡ºè¯·æ±‚çš„åœ°å€åé¢åŠ ä¸Š <code>callback=cors</code> å³å¯é€šè¿‡ <code>cors</code> è·å¾—æ•°æ®ã€‚</p><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><p>æµè§ˆå™¨çš„ç¼“å­˜æœ‰ä¿©ç§ï¼Œå³å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜ã€‚å…·ä½“é€‰ç”¨å“ªä¸€ç§ç”± header çš„è®¾ç½®æ¥å†³å®šã€‚</p><h4 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h4><p>å¼ºç¼“å­˜æœ‰æµè§ˆå™¨è®¾ç½®åœ¨å†…å­˜ä¸­ï¼Œç›´æ¥ä»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸å»æœåŠ¡å™¨æ‹‰å–æ•°æ®ã€‚</p><p>å¼ºç¼“å­˜çš„å…·ä½“è®¾ç½®æœ‰ä¿©ç§ï¼š</p><ol><li>http 1.0 ä¸­è®¾ç½® expiresã€‚å¦‚ï¼š<code>&#39;expires&#39;: &#39;Mon, 10 Jun 2015 21:31:12 GMT&#39;</code> å‘é€è¯·æ±‚çš„æ—¶é—´åœ¨æ­¤ä¹‹å‰ï¼Œç¼“å­˜å‡æœ‰æ•ˆã€‚</li><li>http 1.1 ä¸­è®¾ç½® cache-control ã€‚å¦‚ï¼š<code>&#39;cache-control&#39;: &#39;max-age=20&#39;</code>ï¼ˆå•ä½ä¸ºç§’ï¼‰<br>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€èˆ¬ä½¿ç”¨ cache-control ï¼ˆå®¢æˆ·ç«¯ç¼“å­˜ï¼‰æ—¶ï¼Œè®¾ç½®çš„æ—¶é—´éƒ½è¾ƒé•¿ã€‚æ­¤æ—¶å¦‚æœä¿®æ”¹jsæ–‡ä»¶çš„è¯ï¼Œæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚è§£å†³æ–¹æ³•å°±æ˜¯åœ¨é¡¹ç›®æ„å»ºæ–‡ä»¶ä¸­è·Ÿjsæ–‡ä»¶çš„å†…å®¹ç”Ÿæˆhashå€¼ï¼Œè¿™æ ·å¼ºç¼“å­˜å°±ä¼šåŠæ—¶æ›´æ–°ã€‚è¿˜å¯ä»¥è®¾ç½®å…¶ä»–å±æ€§ï¼Œå¦‚ä¸‹ï¼š</li></ol><ul><li>å¯ç¼“å­˜æ€§ï¼š<ul><li>public é™¤äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨ä¹Ÿå¯ä»¥ç¼“å­˜</li><li>private åªæœ‰å‘èµ·è¯·æ±‚çš„æµè§ˆå™¨æ‰å¯ä»¥ç¼“å­˜</li><li>no-cache éœ€è¦ä¸æœåŠ¡å™¨è¿›è¡Œåå•†ï¼Œæ˜¯å¦èƒ½ä½¿ç”¨æœ¬åœ°ç¼“å­˜</li><li>no-store æœ¬åœ°ä¸ç¼“å­˜æœåŠ¡å™¨å‡ä¸èƒ½ä½¿ç”¨ç¼“å­˜</li></ul></li><li>åˆ°æœŸ<ul><li>max-age</li><li>s-maxage åªæœ‰åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ç”Ÿæ•ˆ</li><li>max-stale æŒ‡å‘èµ·è¯·æ±‚æ–¹ç¼“å­˜è¿‡æœŸåè¿˜å¯ä»¥ä½¿ç”¨è¿‡æœŸç¼“å­˜çš„æ—¶é—´</li></ul></li><li>é‡æ–°éªŒè¯<ul><li>must-revalidate åœ¨max-ageè¿‡æœŸåï¼Œé‡æ–°å‘é€è¯·æ±‚éªŒè¯æ˜¯å¦çœŸæ­£è¿‡æœŸ</li><li>proxy-revalidate åœ¨max-ageè¿‡æœŸåï¼Œé‡æ–°å‘é€è¯·æ±‚è‡³ç¼“å­˜æœåŠ¡å™¨éªŒè¯æ˜¯å¦çœŸæ­£è¿‡æœŸ</li></ul></li><li>å…¶ä»–<ul><li>no-transform å‘Šè¯‰proxyä¸è¦å‹ç¼©ç¼“å­˜</li></ul></li></ul><p>ä¾‹å­ï¼š<code>&#39;cache-control&#39;: &#39;public, max-age=200, no-cache&#39;</code></p><h4 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h4><p>Last-Modified/Etag æ˜¯åå•†ç¼“å­˜çš„ä¿©ç§æ–¹å¼ï¼Œéƒ½æ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„å“åº”å¤´ä¸­è®¾ç½®ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼š</p><ol><li>ä¸€äº›æ–‡ä»¶å¯èƒ½ä¼šå®šæ—¶çš„æ›´æ–°ï¼Œä½†æ˜¯å†…å®¹æœªè¢«æ›´æ”¹ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœä½¿ç”¨ Last-Modified çš„è¯å°±ä¼šè¢«è®¤ä¸ºæ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œè€Œ etag åˆ™ä¸ä¼šï¼Œå› ä¸º etag æ˜¯æœåŠ¡å™¨ä¸Šæ¯ä¸ªèµ„æºçš„å”¯ä¸€æ ‡è¯†ã€‚å¯ä»¥æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆ hash æ¥è®¾ç½® etagã€‚</li><li>å¯¹äºæŸäº›ä¿®æ”¹é¢‘ç¹çš„æ–‡ä»¶æ¥è¯´ï¼Œé¢‘ç‡åœ¨ç§’ä»¥å†…ã€‚Last-Modified åªèƒ½ç²¾ç¡®åˆ°ç§’ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µæ— æ³•åˆ¤æ–­ã€‚</li></ol><p>è¿™ä¿©è€…çš„å€¼å¯ä»¥éšä¾¿è®¾ç½®ï¼Œæ²¡æœ‰å…·ä½“çš„è§„å®šã€‚</p><h5 id="Last-Modified-If-Modified-Since"><a href="#Last-Modified-If-Modified-Since" class="headerlink" title="Last-Modified/If-Modified-Since"></a>Last-Modified/If-Modified-Since</h5><p>å…·ä½“è¿‡ç¨‹ï¼š</p><ol><li>åœ¨æœåŠ¡ç«¯å“åº”å¤´ä¸Šè®¾ç½® <code>&#39;Last-Modified&#39;: &#39;&#39;</code></li><li>è¯·æ±‚å†æ¬¡å‘é€åˆ°æœåŠ¡å™¨åï¼Œè¯·æ±‚å¤´ä¸­ä¼šå‡ºç° <code>&#39;If-Modified-Since&#39;: &#39;&#39;</code> (è¿™ä¸ªå€¼ä¸ä¸Šè¿°è®¾ç½®çš„å€¼ç›¸åŒ)</li><li>å†æ¬¡å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨åä¼šåˆ¤æ–­ä¿©è€…çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–åˆ™è¿”å›304 Not Modifiedï¼Œä½†æ˜¯ä¸ä¼šè¿”å›èµ„æºå†…å®¹ï¼›å¦‚æœæœ‰å˜åŒ–ï¼Œå°±æ­£å¸¸è¿”å›èµ„æºå†…å®¹ã€‚å½“æœåŠ¡å™¨è¿”å›304 Not Modifiedçš„å“åº”æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šä»å†…å­˜ä¸­è¯»å–ç¼“å­˜ã€‚è¿™ä¸ªåŠ¨ä½œå°±æ˜¯åå•†åçš„ç»“æœã€‚</li><li>å¦‚æœç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œå°±ç›´æ¥ä»æœåŠ¡å™¨åŠ è½½æ•°æ®ã€‚æ­¤æ—¶ä¼šæ›´æ–°å“åº”å¤´ä¸­çš„ <code>Last-Modified</code>çš„ä¿¡æ¯ï¼Œä¾›ä¸‹æ¬¡å¯¹æ¯”ä½¿ç”¨ã€‚</li></ol><h5 id="Etag-If-None-Match"><a href="#Etag-If-None-Match" class="headerlink" title="Etag/If-None-Match"></a>Etag/If-None-Match</h5><p>etag å…·ä½“è¿‡ç¨‹ä¸ä¸Šç›¸åŒã€‚</p><h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><p>è™½è¯´æ²¡æœ‰å…·ä½“è§„å®šè¦è®¾ç½®çš„å€¼ï¼Œä½†æ˜¯ <code>Last-Modified</code> ä¸€èˆ¬è®¾ç½®ä¸ºæ—¶é—´ï¼Œå³æ–‡ä»¶æœ€åä¸€æ¬¡çš„æ›´æ–°æ—¶é—´ã€‚è€Œ <code>Etag</code> åˆ™è®¾ç½®ä¸ºæ ¹æ®å†…å®¹ç”Ÿæˆçš„ hash å€¼ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰</a></p></li><li><p><a href="https://fetch.spec.whatwg.org/#content-type-header" target="_blank" rel="noopener">Fetch Standard</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CORS </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPç¬”è®°(ä¸Š)</title>
      <link href="/2018/11/03/HTTP1-0.html"/>
      <url>/2018/11/03/HTTP1-0.html</url>
      
        <content type="html"><![CDATA[<h3 id="HTTP-åŸºç¡€"><a href="#HTTP-åŸºç¡€" class="headerlink" title="HTTP åŸºç¡€"></a>HTTP åŸºç¡€</h3><h4 id="ç½‘ç»œé—´é€šä¿¡çš„å¤§ä½“æµç¨‹"><a href="#ç½‘ç»œé—´é€šä¿¡çš„å¤§ä½“æµç¨‹" class="headerlink" title="ç½‘ç»œé—´é€šä¿¡çš„å¤§ä½“æµç¨‹"></a>ç½‘ç»œé—´é€šä¿¡çš„å¤§ä½“æµç¨‹</h4><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æ¦‚å¿µ</th><th style="text-align:left">å¸¸ç”¨åè®®</th></tr></thead><tbody><tr><td style="text-align:left">åº”ç”¨å±‚</td><td style="text-align:left">ä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡</td><td style="text-align:left">HTTP/FTP/SMTP</td></tr><tr><td style="text-align:left">è¡¨ç¤ºå±‚</td><td style="text-align:left">å®šä¹‰æ•°æ®æ ¼å¼åŠåŠ å¯†</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">ä¼šè¯å±‚</td><td style="text-align:left">å®šä¹‰äº†å¦‚ä½•å¼€å§‹ã€æ§åˆ¶å’Œç»“æŸä¸€ä¸ªä¼šè¯</td><td style="text-align:left">SSL</td></tr><tr><td style="text-align:left">ä¼ è¾“å±‚</td><td style="text-align:left">å‘ç”¨æˆ·æä¾›ç«¯åˆ°ç«¯çš„æœåŠ¡</td><td style="text-align:left">TCP/UDP</td></tr><tr><td style="text-align:left">ç½‘ç»œå±‚</td><td style="text-align:left">æ•°æ®åœ¨ä¿©ä¸ªæœºå™¨é—´åˆ›å»ºé€»è¾‘é“¾è·¯</td><td style="text-align:left">IP(IPV4/IPV6)ã€ARP</td></tr><tr><td style="text-align:left">æ•°æ®é“¾è·¯å±‚</td><td style="text-align:left">é€šä¿¡å®ä½“é—´å»ºç«‹æ•°æ®é“¾è·¯è¿æ¥</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">ç‰©ç†å±‚</td><td style="text-align:left">å®šä¹‰ç‰©ç†è®¾å¤‡é—´å¦‚ä½•ä¼ è¾“æ¯”ç‰¹æµçš„è§„èŒƒï¼ˆç½‘çº¿ã€å…‰ç¼†ç­‰ç¡¬ä»¶ï¼‰</td></tr></tbody></table><p>osi æ¨¡å‹è¾ƒä¸ºå¤æ‚ï¼Œä¸€èˆ¬å¸¸è¯´çš„æ˜¯äº”å±‚æ¨¡å‹ï¼š</p><p>ç‰©ç†å±‚ -&gt; æ•°æ®é“¾è·¯å±‚ -&gt; ç½‘ç»œå±‚ -&gt; ä¼ è¾“å±‚ -&gt; åº”ç”¨å±‚</p><a id="more"></a><p>ä¸‹é¢è¿™å¼ å›¾ç”¨æ¥ç®€å•æè¿°ä¿©å°é€šè¿‡è·¯ç”±å™¨è”ç³»èµ·æ¥çš„ä¸»æœºçš„æ•°æ®æ˜¯å¦‚ä½•ä¼ è¾“çš„ã€‚</p><p><img src="/2018/11/03/HTTP1-0/i7eo_519e65e5e25f00ef5a81add83a0c3d79.png" alt=""></p><p>å‡è®¾ä¸»æœº1çš„ç¨‹åºap1å‘ä¸»æœº2çš„ç¨‹åºap2ä¼ é€æ•°æ®ã€‚ap1å…ˆå°†æ•°æ®äº¤ç»™ç¬¬5å±‚ï¼ˆåº”ç”¨å±‚ï¼‰ã€‚ç¬¬5å±‚<strong>åŠ ä¸Šå¿…è¦çš„æ§åˆ¶ä¿¡æ¯h5ä¼ é€’ç»™ä¸‹ä¸€å±‚</strong>ï¼Œä»¥æ­¤ç±»æ¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æ•°æ®åˆ°è¾¾ç¬¬2å±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰åï¼Œæ§åˆ¶ä¿¡æ¯åˆ†æˆä¿©éƒ¨åˆ†ï¼Œåˆ†åˆ«åŠ åˆ°æœ¬å±‚æ•°æ®å•å…ƒçš„é¦–éƒ¨ï¼ˆh2ï¼‰å’Œå°¾éƒ¨ï¼ˆt2ï¼‰ï¼›è€Œç¬¬1å±‚ç”±äºæ˜¯æ¯”ç‰¹æµä¼ é€å³0101â€¦æ‰€ä»¥ä¸å¿…åŠ ä¸Šæ§åˆ¶ä¿¡æ¯ï¼Œä½†æ˜¯ç‰©ç†å±‚æ˜¯ä»é¦–éƒ¨å¼€å§‹ä¼ é€’æ•°æ®ã€‚</p><p>è¿™ä¸€ä¸²æ¯”ç‰¹æµç¦»å¼€ä¸»æœº1åé€šè¿‡ç‰©ç†åª’ä»‹ä¼ é€’åˆ°è·¯ç”±å™¨ï¼Œä»è·¯ç”±å™¨çš„ç¬¬1å±‚ï¼ˆç‰©ç†å±‚ï¼‰ä¾æ¬¡ä¸Šå‡è‡³ç¬¬3å±‚ï¼ˆç½‘ç»œå±‚ï¼‰æ¯ä¸€å±‚éƒ½ä¼šå¯¹æ§åˆ¶ä¿¡æ¯è¿›è¡Œæ“ä½œï¼Œæ“ä½œåå°†æ§åˆ¶ä¿¡æ¯å‰¥å»å°†å‰©ä¸‹çš„æ•°æ®å‘ä¸Šä¼ é€ï¼Œå½“åˆ°è¾¾ç¬¬3å±‚åå°±ä¼š<strong>æ ¹æ®é¦–éƒ¨çš„ç›®çš„åœ°å€æŸ¥æ‰¾è·¯ç”±å™¨ä¸­çš„è·¯ç”±è¡¨ï¼Œæ‰¾å‡ºè½¬å‘åˆ†ç»„çš„æ¥å£</strong>ï¼Œç„¶åä»ç¬¬3å±‚å‘ä¸‹ä¼ é€’è‡³ç¬¬1å±‚ï¼Œè½¬ä¸ºæ¯”ç‰¹æµä¹‹åä¼ é€’ç»™ä¸»æœº2ï¼Œä¸»æœº2çš„è¿‡ç¨‹ä¸ä¸Šç±»ä¼¼ï¼Œæœ€ç»ˆç¨‹åºap2æ”¶åˆ°ä¼ è¾“çš„æ•°æ®ã€‚</p><p>åœ¨æˆ‘ä»¬å¹³æ—¶ä¸Šç½‘æµè§ˆç½‘é¡µæ—¶ï¼Œé€šå¸¸éƒ½æ˜¯æˆ‘ä»¬çš„ç”µè„‘ä¸æœåŠ¡å™¨çš„æ•°æ®äº¤äº’ï¼Œä¸­é—´è¿‡ç¨‹ä¸æ˜¯åƒä¸Šè¿°æè¿°çš„åªç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨è¿™ä¹ˆç®€å•ï¼ŒæœŸé—´ä¼šç»è¿‡dnsæœåŠ¡å™¨ã€cdnæœåŠ¡å™¨ç­‰ç­‰ã€‚è¿™é‡Œç€é‡è®°å½•å…³äº http éƒ¨åˆ†çš„çŸ¥è¯†ã€‚</p><h4 id="HTTP-ä¸åŒç‰ˆæœ¬ç‰¹ç‚¹å¯¹æ¯”"><a href="#HTTP-ä¸åŒç‰ˆæœ¬ç‰¹ç‚¹å¯¹æ¯”" class="headerlink" title="HTTP ä¸åŒç‰ˆæœ¬ç‰¹ç‚¹å¯¹æ¯”"></a>HTTP ä¸åŒç‰ˆæœ¬ç‰¹ç‚¹å¯¹æ¯”</h4><p>HTTP/0.9 ï¼š</p><ul><li>åªæœ‰ä¸€ä¸ª GET å‘½ä»¤</li><li>æ²¡æœ‰ header ç­‰æè¿°ä¿¡æ¯</li><li>æœåŠ¡å™¨å‘é€å®Œæ¯•ï¼Œtcpè¿æ¥è¢«å…³é—­</li></ul><p>HTTP/1.0</p><ul><li>å¢åŠ  POST/PUT ç­‰å‘½ä»¤</li><li>å¢åŠ  header &amp; status code ä¿¡æ¯</li><li>æ”¯æŒå¤šå­—ç¬¦é›†ã€å¤šéƒ¨åˆ†å‘é€ï¼Œç¼“å­˜ç­‰</li></ul><p>HTTP/1.1</p><ul><li>ä½¿tcpè¿æ¥æŒä¹…åŒ–</li><li>pipelineï¼ˆå®¢æˆ·ç«¯å¯ä»¥å‘é€å¤šä¸ªhttpè¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡ç«¯å¿…é¡»æŒ‰é¡ºåºè¿”å›ï¼‰</li><li>å¢åŠ hostä¸å…¶ä»–å‘½ä»¤ï¼ˆåˆ©ç”¨hostä¸­çš„ç«¯å£åˆ¤æ–­å…·ä½“å±äºnodeè¿˜æ˜¯javaç­‰ï¼‰</li></ul><p>HTTP/2.0</p><ul><li>æ•°æ®ä»¥äºŒè¿›åˆ¶ä¼ è¾“ï¼ˆ2.0ä¹‹å‰æ•°æ®ä¼ è¾“æ˜¯å·²å­—ç¬¦ä¸²ä¼ è¾“ï¼‰</li><li>å¯¹äºå®¢æˆ·ç«¯å‘é€çš„å¤šä¸ªhttpè¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›æ—¶ä¸ç”¨æŒ‰ç…§é¡ºåºè¿”å›ï¼Œå¯ä»¥å¹¶è¡Œè¿”å›</li><li>å¤´ä¿¡æ¯å‹ç¼©ï¼Œå¢åŠ äº†æ¨é€ç­‰æé«˜æ•ˆç‡çš„åŠŸèƒ½</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li>ç†è®ºä¸Šæ¥è¯´ä¸€ä¸ªtcpè¿æ¥ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªhttpè¯·æ±‚ï¼Œä½†æ˜¯ç›®å‰çš„åšæ³•æ˜¯http1.1ä¸­ä¸€ä¸ªtcpé“¾æ¥ä¸ŠåŒæ—¶æœ€å¤šåªæœ‰ä¸€ä¸ªhttpè¯·æ±‚</li><li>å¹¶å‘é‡ä¸€èˆ¬æŒ‡çš„æ˜¯tcpè¿æ¥çš„å¹¶å‘é‡</li></ul><p>å„ä¸ªæµè§ˆå™¨å¯¹åº”çš„tcpå¹¶å‘æ•°é‡è¯¦æƒ…å¯æŸ¥çœ‹ï¼š<br><a href="https://blog.csdn.net/jueshengtianya/article/details/38271081" target="_blank" rel="noopener">ä¸»æµæµè§ˆå™¨çš„HTTPæœ€å¤§å¹¶å‘è¿æ¥æ•°</a></p><h4 id="HTTP-çš„ä¸‰æ¬¡æ¡æ‰‹"><a href="#HTTP-çš„ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="HTTP çš„ä¸‰æ¬¡æ¡æ‰‹"></a>HTTP çš„ä¸‰æ¬¡æ¡æ‰‹</h4><p><img src="/2018/11/03/HTTP1-0/i7eo_2aa7ba936cdaf5772435de872d3f18d2.png" alt=""></p><p>å…·ä½“æƒ…å†µå¦‚ä¸Šå›¾ï¼Œè¿™é‡Œçš„ syn ä»£è¡¨åŒæ­¥ä½ï¼Œseq ä»£è¡¨åºå·ï¼Œack ä»£è¡¨ç¡®è®¤å·ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å½“é¦–æ¬¡æ¡æ‰‹å‘ç”Ÿæ—¶ï¼Œå³å®¢æˆ·ç«¯è¿›å…¥ SYN-SENTçŠ¶æ€å‰ï¼Œä¸èƒ½æºå¸¦æ•°æ®ï¼Œå½“å‘ç”ŸäºŒæ¬¡æ¡æ‰‹æ—¶ï¼Œå³æœåŠ¡å™¨è¿›å…¥SYN-RECVçŠ¶æ€å‰ï¼Œä¹Ÿæ˜¯ä¸èƒ½æºå¸¦æ•°æ®çš„ï¼Œå½“å‘ç”Ÿç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶å³å®¢æˆ·ç«¯è¿›å…¥ESTAB-LISHEDçŠ¶æ€å‰ï¼Œ<strong>å¯ä»¥æºå¸¦æ•°æ®ã€‚</strong></p><p>ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ<br>å› ä¸ºtcpè¦ä¿è¯ä¼ è¾“çš„æ•°æ®å¯é æ€§ï¼Œä½†æ˜¯ä¿¡é“ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰ä¼ è¾“æ˜¯ä¸å¯é çš„ã€‚å¦‚ä½•ä¿è¯tcpä¼ è¾“çš„æ•°æ®æ˜¯å¯é çš„ï¼Ÿåªèƒ½åœ¨tcpè¿æ¥å»ºç«‹å‰ä¿è¯é€šé“ç•…é€šã€‚å› ä¸ºåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ä¸­æœ‰ç½‘ç»œå»¶è¿Ÿã€åŒ…ä¸¢å¤±ç­‰åŸå› ï¼Œæ‰€ä»¥æ‰æœ‰äº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸‰æ¬¡æ¡æ‰‹æ˜¯ç†è®ºä¸Šçš„æœ€å°å€¼ã€‚å…·ä½“åˆ†æè¯·å‚è€ƒï¼š<a href="https://www.zhihu.com/question/24853633" target="_blank" rel="noopener">TCP ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–å››æ¬¡ï¼Ÿ</a> ã€<a href="https://www.jianshu.com/p/e7f45779008a" target="_blank" rel="noopener">tcpå»ºç«‹è¿æ¥ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹</a></p><h4 id="è¡¥å……ï¼šå¥—æ¥å­—ï¼ˆsocketï¼‰"><a href="#è¡¥å……ï¼šå¥—æ¥å­—ï¼ˆsocketï¼‰" class="headerlink" title="è¡¥å……ï¼šå¥—æ¥å­—ï¼ˆsocketï¼‰"></a>è¡¥å……ï¼šå¥—æ¥å­—ï¼ˆsocketï¼‰</h4><p>å¹³å¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨è‡ªå·±ç”µè„‘æµ‹è¯•ç§»åŠ¨ç«¯é¡µé¢æˆ–è€…æ˜¯è‡ªå·±åœ¨å†™ç¨‹åºè¿æ¥æŸé¡¹æœåŠ¡æ—¶éƒ½ä¼šä½¿ç”¨ ip + ç«¯å£å· æ¥è¿æ¥ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å› ä¸ºè¿™äº›åšæ³•éƒ½ä½¿ç”¨äº†tcpè¿æ¥ï¼Œè€ŒtcpæŠŠè¿æ¥ä½œä¸ºæœ€åŸºæœ¬çš„æŠ½è±¡ã€‚åœ¨tcpçš„ä¿©ç«¯åˆ†åˆ«æœ‰ä¿©ä¸ªç«¯ç‚¹ï¼Œç«¯ç‚¹å«åšå¥—æ¥å­—ã€‚rfc 793 å®šä¹‰ï¼šç«¯å£å·æ‹¼æ¥åˆ° ip åœ°å€æ„æˆäº†å¥—æ¥å­—ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/2018/11/03/HTTP1-0/i7eo_c3ad664d8759aeed097490aee8830038.png" alt=""></p><p>åŒä¸€ä¸ªipåœ°å€å¯ä»¥æœ‰å¤šä¸ªtcpè¿æ¥ï¼Œè€ŒåŒä¸€ä¸ªç«¯å£å·ä¹Ÿå¯ä»¥å‡ºç°åœ¨å¤šä¸ªä¸åŒçš„tcpè¿æ¥ä¸­ã€‚</p><h4 id="HTTP-æŠ¥æ–‡æ ¼å¼"><a href="#HTTP-æŠ¥æ–‡æ ¼å¼" class="headerlink" title="HTTP æŠ¥æ–‡æ ¼å¼"></a>HTTP æŠ¥æ–‡æ ¼å¼</h4><p><img src="/2018/11/03/HTTP1-0/i7eo_2635b93238bf4d0760e51199dca77949.png" alt=""></p><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„è¯·æ±‚ä¸å“åº”æŠ¥æ–‡æ ¼å¼å›¾ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å“åº”æŠ¥æ–‡çš„é¦–éƒ¨ç»“å°¾æ˜¯ç©ºè¡Œã€‚å“åº”æŠ¥æ–‡ä¸­å…·ä½“çš„status code è¯·å‚è€ƒï¼š<a href="https://blog.csdn.net/l_mloveforever/article/details/82892292" target="_blank" rel="noopener">å¸¸è§çš„HTTPRequestçŠ¶æ€ç è¯´æ˜</a></p>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CSSå…ƒç´ åµŒå¥—é—®é¢˜</title>
      <link href="/2018/09/05/CSS%E5%85%83%E7%B4%A0%E5%B5%8C%E5%A5%97%E9%97%AE%E9%A2%98.html"/>
      <url>/2018/09/05/CSS%E5%85%83%E7%B4%A0%E5%B5%8C%E5%A5%97%E9%97%AE%E9%A2%98.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å›é¡¾äº†ä¸€ä¸‹ä¹‹å‰çš„ä»£ç ï¼Œå‘ç°ä¸€ä¸ªcssä¸­çš„å‘å³å±‚å é¡ºåºã€‚ä»€ä¹ˆå«å±‚å é¡ºåºï¼Ÿç®€å•æ¥è¯´å°±æ˜¯åœ¨å±å¹•ä¸ŠæŸä¸€ä¸ªä½ç½®å †ç§¯äº†å¾ˆå¤š <code>div</code> è¿™äº›å—å“ªä¸ªåœ¨ä¸Šå“ªä¸ªåœ¨ä¸‹çš„å…³ç³»å°±æ˜¯å±‚å é¡ºåºã€‚ï¼ˆä¸‹é¢ä»£ç æ¼”ç¤ºäº†ä¸‰å±‚å †å ï¼‰</p><a id="more"></a><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test2</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">260px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">130px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test3</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test4</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„htmlç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test2"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2018/09/05/CSSå…ƒç´ åµŒå¥—é—®é¢˜/i7eo_a3e3f0589b44e1eb85a387e0b8fa7d38.png" alt=""></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œéƒ½æ˜¯æ°´å¹³å‚ç›´å±…ä¸­çš„ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨å±‚å é¡ºåºã€‚æ­¤æ—¶ä¸‰è€…å‡ä¸ºç»å¯¹å®šä½ï¼Œç”±test2å¼€å§‹ä»ä¸‹åˆ°ä¸Šä¾æ¬¡æ˜¯ test2 -&gt; test3 -&gt; test4 è¿™æ ·çš„é¡ºåºã€‚test4ä½äºæœ€ä¸Šæ–¹ï¼Œæ­¤æ—¶æƒ³è®©test3ä¸test4ä½ç½®é¢ å€’ä¸”test2ä½ç½®ä¸å˜ï¼ˆç”±ä¸‹åˆ°ä¸Šçš„é¡ºåºä¸ºtest2 -&gt; test4 -&gt; test3ï¼‰ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ<br>è‚¯å®šé¦–å…ˆæƒ³åˆ°ä½¿ç”¨ z-indexï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test3</span> &#123;</span><br><span class="line">  //...</span><br><span class="line">  <span class="selector-tag">z-index</span>: 3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test4</span> &#123;</span><br><span class="line">  //..</span><br><span class="line">  <span class="selector-tag">z-index</span>: 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¿®æ”¹ç»“æœå¹¶ä¸ä¼šæ”¹å˜ã€‚ä¸ºä»€ä¹ˆï¼Ÿæ—¢ç„¶ z-index ä¸ç”Ÿæ•ˆé‚£æˆ‘ä»¬è‚¯å®šå…ˆå»æŸ¥ z-index ã€‚</p><blockquote><p>å¯¹äºä¸€ä¸ªå·²ç»å®šä½çš„å…ƒç´ ï¼ˆå³positionå±æ€§å€¼æ˜¯éstaticçš„å…ƒç´ ï¼‰ï¼Œz-index å±æ€§æŒ‡å®šï¼š<br>å…ƒç´ åœ¨å½“å‰å †å ä¸Šä¸‹æ–‡ä¸­çš„å †å å±‚çº§ã€‚<br>å…ƒç´ æ˜¯å¦åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°å±‚å ä¸Šä¸‹æ–‡ã€‚</p></blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/z-index" target="_blank" rel="noopener">MDN : z-index</a></p><p>æ ¹æ®mdnçš„ä»‹ç»æ¥çœ‹ï¼Œæˆ‘ä»¬è®¾å®šäº†å †å å±‚çº§ï¼Œè¿™æ ·æ¥è¯´æ˜¯åº”è¯¥å¯ä»¥çš„ã€‚ä½†æ˜¯ç»“æœå´ä¸å°½äººæ„ã€‚ç•™æ„ä¸€ä¸‹å±‚å ä¸Šä¸‹æ–‡ï¼Œæ˜¯å¦è·Ÿåˆ›å»ºçš„å±‚å ä¸Šä¸‹æ–‡æœ‰å…³å‘¢ï¼Ÿ<br>å¸¸è§çš„åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contextï¼‰çš„æ–¹å¼æœ‰ï¼š</p><ul><li><p>z-index å€¼ä¸ä¸º â€œautoâ€çš„ ç»å¯¹/ç›¸å¯¹å®šä½</p></li><li><p>ä¸€ä¸ª z-index å€¼ä¸ä¸º â€œautoâ€çš„ flex é¡¹ç›® (flex item)ï¼Œå³ï¼šçˆ¶å…ƒç´  display: flex|inline-flex</p></li></ul><p>å¯èƒ½ä½ å¹¶æ²¡æœ‰æ„è¯†ï¼Œä½†ä½ ç¡®å®ä¼šå¸¸å¸¸è¿™æ ·ä¸ºhtmlæ ‡ç­¾åˆ›å»ºæ ·å¼å¹¶ä¸ºå®ƒåˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ã€‚</p><p>å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹ï¼š(mdn)</p><ol><li>ç»™ä¸€ä¸ª HTML å…ƒç´ å®šä½å’Œ z-index èµ‹å€¼åˆ›å»ºä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ï¼Œï¼ˆopacity å€¼ä¸ä¸º 1 çš„ä¹Ÿæ˜¯ç›¸åŒï¼‰ã€‚</li><li>å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åŒ…å«åœ¨å…¶ä»–å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶ä¸”ä¸€èµ·åˆ›å»ºä¸€ä¸ªæœ‰å±‚çº§çš„å±‚å ä¸Šä¸‹æ–‡ã€‚</li><li>æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å®Œå…¨ç‹¬ç«‹äºå®ƒçš„å…„å¼Ÿå…ƒç´ ï¼šå½“å¤„ç†å±‚å æ—¶åªè€ƒè™‘å­å…ƒç´ ã€‚</li><li>æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªåŒ…å«çš„ï¼šå½“å…ƒç´ çš„å†…å®¹å‘ç”Ÿå±‚å åï¼Œæ•´ä¸ªè¯¥å…ƒç´ å°†ä¼š åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¸­ æŒ‰é¡ºåºè¿›è¡Œå±‚å ã€‚</li></ol><p>å…·ä½“çš„å±‚å å…³ç³»å¦‚ä¸‹å›¾ï¼š</p><p><img src="/2018/09/05/CSSå…ƒç´ åµŒå¥—é—®é¢˜/i7eo_5a1d655846a04a4367b22766f24cf0a0.png" alt=""></p><p><a href="https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/" target="_blank" rel="noopener">æ·±å…¥ç†è§£CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº</a></p><p>å¯¹äºå½“å‰ä»£ç æ¥è¯´ï¼Œæˆ‘åˆ›å»ºäº†ä¸‰ä¸ªå±‚å ä¸Šä¸‹æ–‡å…ƒç´ å¹¶ä¸”ä¸€ä¸€åµŒå¥—ã€‚å½“æˆ‘ä»¬è®¾ç½®test3çš„z-indexæ—¶ï¼Œtest4æ˜¯test3çš„å­å…ƒç´ ï¼ˆå±‚å ä¸Šä¸‹æ–‡ç‰¹ç‚¹3ï¼‰ï¼Œä¼šå½±å“åˆ°test4ã€‚æ­¤æ—¶test3ä¸test4ä¸€åŒæ¥åˆ°äº†test2ä¸Šæ–¹ï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ä¿æŒäº†åŸä½ç½®ï¼Œå› ä¸ºtest2æ²¡æœ‰è®¾ç½®zindexæ‰€ä»¥æ²¡æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼‰ã€‚<br>è¿™ä¸ªæ—¶å€™å†è®¾ç½®test4çš„z-indexï¼Œç›¸å½“äºä¿©ä¸ªå±‚å ä¸Šä¸‹æ–‡å…ƒç´ åœ¨æ¯”è¾ƒz-indexï¼Œé‚£æŒ‰ç…§ä¸Šå›¾æ‰€ç¤ºçš„æ¯”è¾ƒè§„åˆ™ï¼Œtest3çš„z-indexåªè¦å¤§äºtest4å°±èƒ½åœ¨ä¸Šé¢äº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸å˜å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹å¤§ç¥çš„è§£é‡Šï¼š</p><p>å±‚å ä¸Šä¸‹æ–‡å…ƒç´ æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼šï¼ˆ<a href="https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/" target="_blank" rel="noopener">ç†è§£å…ƒç´ å±‚å ä¸Šä¸‹æ–‡-å¼ é‘«æ—­</a>ï¼‰</p><blockquote><p>1ã€å±‚å ä¸Šä¸‹æ–‡çš„å±‚å æ°´å¹³è¦æ¯”æ™®é€šå…ƒç´ é«˜ï¼ˆåŸå› åé¢ä¼šè¯´æ˜ï¼‰ï¼›</p></blockquote><blockquote><p>2ã€å±‚å ä¸Šä¸‹æ–‡å¯ä»¥é˜»æ–­å…ƒç´ çš„æ··åˆæ¨¡å¼ï¼›</p></blockquote><blockquote><p>3ã€å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åµŒå¥—ï¼Œå†…éƒ¨å±‚å ä¸Šä¸‹æ–‡åŠå…¶æ‰€æœ‰å­å…ƒç´ å‡å—åˆ¶äºå¤–éƒ¨çš„å±‚å ä¸Šä¸‹æ–‡ã€‚</p></blockquote><blockquote><p>4ã€æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å’Œå…„å¼Ÿå…ƒç´ ç‹¬ç«‹ï¼Œä¹Ÿå°±æ˜¯å½“è¿›è¡Œå±‚å å˜åŒ–æˆ–æ¸²æŸ“çš„æ—¶å€™ï¼Œåªéœ€è¦è€ƒè™‘åä»£å…ƒç´ ã€‚</p></blockquote><blockquote><p>5ã€æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªæˆä½“ç³»çš„ï¼Œå½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œæ•´ä¸ªå…ƒç´ è¢«è®¤ä¸ºæ˜¯åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡çš„å±‚å é¡ºåºä¸­ã€‚</p></blockquote><p>æ ¹æ®ä¸Šé¢ç¬¬3ç‚¹æˆ‘ä»¬çŸ¥é“äº†å†…éƒ¨å±‚å å—åˆ¶äºå¤–éƒ¨å±‚å ï¼Œç»“åˆä»£ç ä¹Ÿå°±æ˜¯è¯´åªè¦test3è®¾ç½®äº†z-indexï¼Œé‚£å®ƒå°±ä¼šå¸¦ç€test4ä¸€èµ·èµ°ã€‚å½“test4è®¾ç½®z-indexæ—¶ï¼Œ<strong>é¦–å…ˆè¦åˆ¤æ–­è®¾ç½®çš„å€¼å’Œtest3çš„z-indexæ­£è´Ÿæ˜¯å¦ç›¸åŒï¼Œå¦‚æœéƒ½ä¸ºæ­£ï¼ˆåŒä¸ºè´Ÿï¼‰ï¼Œæ— è®ºå¤§å°test3ä¸test4çš„ä½ç½®æ°¸ä¸ä¼šå˜</strong>ã€‚æ—¢ç„¶è®¾ç½®ä¿©ä¸ªæ­£å€¼ä½œä¸ºz-indexè¡Œä¸é€šï¼Œé‚£æˆ‘ä»¬è¯•è¯•ä¸€æ­£ä¸€è´Ÿè¡Œå¾—é€šå—ï¼Ÿ</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é¦–å…ˆè®¾ç½®test4çš„z-indexä¸º-1ï¼Œæ­¤æ—¶åªæœ‰ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡test4ï¼Œå¹¶ä¸”å±‚å é¡ºåºä¸ºï¼šç”±test4å¼€å§‹ä»ä¸‹åˆ°ä¸Šä¾æ¬¡æ˜¯ test4 -&gt; test2 -&gt; test3 è¿™æ ·çš„é¡ºåºã€‚test3ä½äºæœ€ä¸Šæ–¹ï¼Œæ­¤æ—¶å¦‚æœç»™test3çš„z-indexèµ‹æ­£å€¼ä¼šå¯¼è‡´test4é‡å›åŸä½ç½®ï¼ˆtest3ä¸Šæ–¹ï¼‰ï¼Œèµ‹è´Ÿå€¼ä¼šå¯¼è‡´test3æ¥åˆ°äº†test2ä¹‹ä¸‹ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚æ—¢ç„¶çˆ¶çº§å…ƒç´ æ²¡æœ‰æ“ä½œç©ºé—´äº†ï¼Œè¯•è¯•çˆ¶çˆ¶çº§å…ƒç´ test2ï¼Œæ ¹æ®ç‰¹ç‚¹3æˆ‘ä»¬çŒœæƒ³å¦‚æœtest2çš„z-indexè®¾ç½®æ­£å€¼é‚£ä¹ˆä¼šæŠŠtest3ï¼ˆåŒ…æ‹¬test4ï¼‰è¿™ä¸ªæ•´ä½“å…±åŒå¸¦åˆ°test2ä¹‹ä¸Šçš„ä½ç½®ã€‚å¦‚ä¸‹ï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/2763803-ae96de8a5feb15ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="test.png"></p><p>åœ¨æ”¹å˜test4çš„z-indexä¹‹åï¼ˆä¸ºäº†çœ‹å¾—æ›´æ¸…æ™°æˆ‘æ‰‹åŠ¨æ”¹å˜äº†é•¿å®½ï¼‰æˆ‘ä»¬å‘ç°è¾¾åˆ°äº†æ•ˆæœã€‚è®¾ç½®çˆ¶çˆ¶çº§ï¼ˆtest2ï¼‰çš„z-indexä¸º1ä¹‹åæ‹¥æœ‰äº†å±‚å ä¸Šä¸‹æ–‡ï¼Œtest4è®¾ç½®z-indexä¸º-1ä¹Ÿæ‹¥æœ‰äº†å±‚å ä¸Šä¸‹æ–‡ã€‚<strong>æ­¤æ—¶test3ä½œä¸ºæ™®é€šçš„ç»å¯¹å®šä½å…ƒç´ ä¿ç•™åœ¨åŸä½ç½®ï¼ˆä¸ºäº†æ–¹ä¾¿ç†è§£æ‰€ä»¥è¿™æ ·æè¿°ï¼Œè¿™é‡Œtest3å…¶å®æ˜¯bfcå‘æŒ¥äº†ä½œç”¨ï¼‰ï¼Œå› ä¸ºtest2æ˜¯çˆ¶çˆ¶çº§ç¬¦åˆç‰¹ç‚¹3ï¼Œæ‰€ä»¥å°†ä½äºåº•ä¸‹çš„test4å¸¦äº†ä¸Šæ¥ï¼Œä½†æ˜¯test4å±äºtest3çš„å­å…ƒç´ ï¼Œä¸Šæ¥åå°±å»å’Œtest3æ¯”è¾ƒï¼Œå› ä¸ºtest3ä¸æ‹¥æœ‰å±‚å ä¸Šä¸‹æ–‡ä¿ç•™åœ¨åŸä½ç½®ï¼Œè€Œæ­¤æ—¶test4çš„z-indexä¸ºè´Ÿå€¼ï¼Œæ‰€ä»¥åœ¨test3ä¹‹ä¸‹ï¼Œtest2ä¹‹ä¸Šæ˜¾ç¤º</strong>ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™é‡Œè¯´äº†ä¸‰ä¸ªå—çº§å…ƒç´ ï¼Œå¤§å®¶è¿˜å¯ä»¥è¯•è¯•åµŒå¥—è¡Œå†…å…ƒç´ æ˜¯ä»€ä¹ˆæ•ˆæœã€‚éœ€è¦æ³¨æ„çš„æ˜¯ä¼ªå…ƒç´ åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„è¡¨ç°æ˜¯å¦å’Œä¸Šé¢ä¸€æ ·å‘¢ï¼Ÿ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">260px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">130px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test1</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test1</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gray;</span><br><span class="line">  <span class="attribute">animation</span>: breathe infinite ease-in-out <span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> breathe&#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">transform</span>:<span class="built_in">scale</span>(.5);</span><br><span class="line">        <span class="attribute">opacity</span>:.<span class="number">9</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    95% &#123;</span><br><span class="line">      <span class="attribute">transform</span>:<span class="built_in">scale</span>(1.5);</span><br><span class="line">      <span class="attribute">opacity</span>:<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">transform</span>:<span class="built_in">scale</span>(.9);</span><br><span class="line">        <span class="attribute">opacity</span>:<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>htmlå¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå…¶å®å°±æ˜¯æˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œç”¨ä¼ªå…ƒç´ åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œæˆ‘æƒ³è®©ä¼ªå…ƒç´ åŠ¨ç”»å‡ºç°åœ¨test1çš„ä¸‹æ–¹testçš„ä¸Šæ–¹ã€‚å’Œä¸Šé¢ä¸€æ ·åˆ†åˆ«è®¾ç½®z-indexä¸º-1å’Œ1å³å¯è¾¾åˆ°æ•ˆæœã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><p><a href="https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/" target="_blank" rel="noopener">æ·±å…¥ç†è§£CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº</a></p></li><li><p><a href="https://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/" target="_blank" rel="noopener">CSSæ·±å…¥ç†è§£æµä½“ç‰¹æ€§å’ŒBFCç‰¹æ€§ä¸‹å¤šæ è‡ªé€‚åº”å¸ƒå±€</a></p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context" target="_blank" rel="noopener">å±‚å ä¸Šä¸‹æ–‡</a></p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/Stacking_context_example_2" target="_blank" rel="noopener">Stacking_context_example_2</a></p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/Stacking_context_example_3" target="_blank" rel="noopener">Stacking_context_example_3</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> HTML&amp;CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å±‚å ä¸Šä¸‹æ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nuxt.jsè¸©å‘å®å½•</title>
      <link href="/2018/07/04/Nuxt.js%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95.html"/>
      <url>/2018/07/04/Nuxt.js%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å‰ä¸€é˜µå­æ¥è§¦ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œç”¨äº†vueä¸­çš„ssrè§£å†³æ–¹æ¡ˆ â€” Nuxt.jsã€‚ä¹Ÿç®—æ˜¯å°æœ‰æ„Ÿå—ï¼Œè®°å½•ä¸€äº›ç»éªŒç•™åå¤‡ç”¨ã€‚</p><h3 id="CSR-amp-SSR"><a href="#CSR-amp-SSR" class="headerlink" title="CSR &amp; SSR"></a>CSR &amp; SSR</h3><h4 id="ä»€ä¹ˆæ˜¯-CSR"><a href="#ä»€ä¹ˆæ˜¯-CSR" class="headerlink" title="ä»€ä¹ˆæ˜¯ CSR ?"></a>ä»€ä¹ˆæ˜¯ CSR ?</h4><p>CSR =&gt; client-side-rederï¼Œå³å®¢æˆ·ç«¯æ¸²æŸ“ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç”¨æˆ·è¯·æ±‚é¡µé¢ï¼Œè¿”å›é¡µé¢ã€‚æ­¤æ—¶é¡µé¢åªæ˜¯æ¨¡ç‰ˆé¡µé¢</li><li>æµè§ˆå™¨è§£æé¡µé¢ä»£ç ï¼Œè¯»åˆ°jsä»£ç æ—¶ï¼Œä¼šæ ¹æ®æˆ‘ä»¬æ‰€å†™çš„æ¥å£å»è¯·æ±‚æ•°æ®</li><li>å¾—åˆ°è¿”å›æ•°æ®åä½¿ç”¨æ¨¡ç‰ˆï¼ˆvue/react/ng/art-templateï¼‰è¿›è¡Œæ¸²æŸ“<h4 id="ä»€ä¹ˆæ˜¯-SSR"><a href="#ä»€ä¹ˆæ˜¯-SSR" class="headerlink" title="ä»€ä¹ˆæ˜¯ SSR ?"></a>ä»€ä¹ˆæ˜¯ SSR ?</h4></li></ul><a id="more"></a><p>SSR =&gt; server-side-renderï¼Œå³æœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç”¨æˆ·è¯·æ±‚é¡µé¢</li><li>åç«¯å–åˆ°å‡†å¤‡å¥½çš„æ•°æ®ï¼Œæ¸²æŸ“åˆ°æˆ‘ä»¬è‡ªå·±å†™çš„æœåŠ¡å™¨æ¨¡ç‰ˆï¼ˆnext/nuxt/ejsï¼‰ä¸­ï¼Œå‡†å¤‡å¥½htmlç»“æ„ä¸ç›¸åº”æ•°æ®åè¿”å›ç»™æµè§ˆå™¨</li></ul><h4 id="CSR-amp-SSR-ä¼˜ç¼ºç‚¹å¯¹æ¯”"><a href="#CSR-amp-SSR-ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="headerlink" title="CSR &amp; SSR ä¼˜ç¼ºç‚¹å¯¹æ¯”"></a>CSR &amp; SSR ä¼˜ç¼ºç‚¹å¯¹æ¯”</h4><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">ä¼˜ç‚¹</th><th style="text-align:left">ç¼ºç‚¹</th></tr></thead><tbody><tr><td style="text-align:left">CSR</td><td style="text-align:left">å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼Œå‰åç«¯åˆ†ç¦»</td><td style="text-align:left">å¯¹seoä¸å‹ï¼ˆä¸åˆ©äºçˆ¬è™«çˆ¬å–ï¼‰ï¼Œé¦–é¡µæ¸²æŸ“å­˜åœ¨ç™½å±é—®é¢˜</td></tr><tr><td style="text-align:left">SSR</td><td style="text-align:left">å¯¹seoå‹å¥½ï¼Œé¦–é¡µæ¸²æŸ“å®Œç¾æ— ç™½å±é—®é¢˜</td><td style="text-align:left">å¯¹æœåŠ¡å™¨æ€§èƒ½æœ‰ä¸€å®šè¦æ±‚ï¼Œä¸åˆ©äºå‰åç«¯åˆ†ç¦»</td></tr></tbody></table><p>å…¶å®åœ¨çœŸæ­£å¼€å‘ä¸­é€šå¸¸æ˜¯ csr ä¸ ssr ç›¸ç»“åˆä½¿ç”¨ï¼Œå‰ç«¯ä½¿ç”¨cdnç¼“å­˜ï¼Œåç«¯ä½¿ç”¨nginxç¼“å­˜ã€‚è¿™æ ·æ˜¯æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¸Šä¸¤å¼ å›¾å¤§å®¶å¯¹æ¯”ç†è§£ï¼š</p><p><img src="/2018/07/04/Nuxt.jsè¸©å‘å®å½•/i7eo_1687e50bff1dbae80b0211d67d9dbde4.png" alt="csr"></p><p><img src="/2018/07/04/Nuxt.jsè¸©å‘å®å½•/i7eo_910d2d75c2c87a237bfa316a4ed5ea26.png" alt="ssr"></p><h3 id="Nuxt-js"><a href="#Nuxt-js" class="headerlink" title="Nuxt.js"></a>Nuxt.js</h3><h4 id="ä»€ä¹ˆæ˜¯-Nuxt"><a href="#ä»€ä¹ˆæ˜¯-Nuxt" class="headerlink" title="ä»€ä¹ˆæ˜¯ Nuxt ?"></a>ä»€ä¹ˆæ˜¯ Nuxt ?</h4><p>Nuxt.js æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„é€šç”¨åº”ç”¨æ¡†æ¶ã€‚é€šè¿‡å¯¹å®¢æˆ·ç«¯/æœåŠ¡ç«¯åŸºç¡€æ¶æ„çš„æŠ½è±¡ç»„ç»‡ï¼ŒNuxt.js ä¸»è¦å…³æ³¨çš„æ˜¯åº”ç”¨çš„ UIæ¸²æŸ“ã€‚</p><h4 id="Nuxt-æµç¨‹"><a href="#Nuxt-æµç¨‹" class="headerlink" title="Nuxt æµç¨‹"></a>Nuxt æµç¨‹</h4><p><img src="/2018/07/04/Nuxt.jsè¸©å‘å®å½•/i7eo_0667f547016c7ce4a49e09b07b9b68fa.png" alt="Nuxtæµç¨‹å›¾"></p><h5 id="nuxtServerInit"><a href="#nuxtServerInit" class="headerlink" title="nuxtServerInit"></a>nuxtServerInit</h5><p>è¯·æ±‚å…ˆåˆ°è¾¾ nuxtServerInit æ–¹æ³•ï¼Œå›¾ä¸­ä¹Ÿè¡¨æ˜äº†é€‚ç”¨åœºæ™¯æ˜¯å¯¹ store çš„ action æ“ä½œå³ï¼ˆvuexï¼‰ï¼š</p><p><img src="/2018/07/04/Nuxt.jsè¸©å‘å®å½•/i7eo_702484477e28e35d0d7057ad05916493.png" alt=""></p><h5 id="middleware"><a href="#middleware" class="headerlink" title="middleware"></a>middleware</h5><p>ä¸‹æ¥è¯·æ±‚åˆ°è¾¾ middleware å±æ€§ï¼Œè™½ç„¶è¿™é‡Œå«åšä¸­é—´ä»¶å±æ€§ï¼Œä½†è¿˜æ˜¯åšç€åŒä¸­é—´ä»¶ä¸€æ ·çš„äº‹ã€‚å®˜æ–¹ç»™å‡ºçš„å®šä¹‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸­é—´ä»¶å…è®¸æ‚¨å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°è¿è¡Œåœ¨ä¸€ä¸ªé¡µé¢æˆ–ä¸€ç»„é¡µé¢æ¸²æŸ“ä¹‹å‰ã€‚</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®šä¹‰ middleware å±æ€§åä½ å¯ä»¥åœ¨ åŒ¹é…å¸ƒå±€ï¼ˆlayout ç»„ä»¶ï¼‰å‰æ‰§è¡ŒæŸç§æ“ä½œï¼Œä¹Ÿå¯ä»¥åœ¨è§£æå®Œ layout ä¹‹åï¼Œè§£æ page ç»„ä»¶å‰ æ‰§è¡ŒæŸç§æ“ä½œã€‚</p><h5 id="validate"><a href="#validate" class="headerlink" title="validate"></a>validate</h5><p>ä¸‹æ¥è¯·æ±‚åˆ°è¾¾ validate æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå¯ä»¥å¯¹ page ç»„ä»¶æˆ–è€… page ä¸­çš„å­ç»„ä»¶ component è¿›è¡ŒåŠ¨æ€è·¯ç”±å¯¹åº”çš„é¡µé¢ç»„ä»¶ä¸­åŠ¨æ€è·¯ç”±å‚æ•°çš„æœ‰æ•ˆæ€§ã€‚</p><h5 id="asyncData-amp-fetch"><a href="#asyncData-amp-fetch" class="headerlink" title="asyncData &amp; fetch"></a>asyncData &amp; fetch</h5><p>æ¥ä¸‹æ¥è¾¾åˆ° asyncData &amp; fetch æ–¹æ³•ï¼ŒasyncData() é€‚ç”¨äºåœ¨æ¸²æŸ“ç»„ä»¶å‰è·å–å¼‚æ­¥æ•°æ®ï¼Œfetch() é€‚ç”¨äºåœ¨æ¸²æŸ“é¡µé¢å‰å¡«å…… vuex ä¸­ç»´æŠ¤çš„æ•°æ®ã€‚</p><h5 id="render"><a href="#render" class="headerlink" title="render"></a>render</h5><p>æœ€åè¿›è¡Œæ¸²æŸ“ã€‚å°†æ¸²æŸ“åçš„é¡µé¢è¿”å›ç»™æµè§ˆå™¨ï¼Œç”¨æˆ·åœ¨é¡µé¢è¿›è¡Œæ“ä½œï¼Œ<strong>å¦‚æœå†æ¬¡è¯·æ±‚æ–°çš„é¡µé¢ï¼Œæ­¤æ—¶åªä¼šå›åˆ°ç”Ÿå‘½å‘¨æœŸä¸­çš„ middlerware ä¸­ï¼Œè€Œé nuxtServerInit ï¼Œæ‰€ä»¥å¦‚æœä¸åŒé¡µé¢é—´éœ€è¦æ“ä½œç›¸åŒçš„æ•°æ®è¯·ç”¨ vuex æ¥ç»´æŠ¤</strong>ã€‚</p><h3 id="Nuxt-ç¬”è®°"><a href="#Nuxt-ç¬”è®°" class="headerlink" title="Nuxt ç¬”è®°"></a>Nuxt ç¬”è®°</h3><h4 id="Nuxt-é¡¹ç›®ç»“æ„"><a href="#Nuxt-é¡¹ç›®ç»“æ„" class="headerlink" title="Nuxt é¡¹ç›®ç»“æ„"></a>Nuxt é¡¹ç›®ç»“æ„</h4><p><img src="/2018/07/04/Nuxt.jsè¸©å‘å®å½•/i7eo_2b5a004471f261f8a5a2b7af246c6c39.png" alt=""></p><p>é€šè¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install npx</span><br><span class="line">npx create-nuxt-app xxx</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå¦‚ä¸Šç»“æ„ï¼Œå¸ƒå±€ç»„ä»¶ï¼ˆlayoutï¼‰ç”¨æ¥å­˜æ”¾é¡µé¢æ•´ä½“å¸ƒå±€ï¼Œåœ¨ layout ä¸­æˆ‘ä»¬å¯ä»¥æ”¾å…¥ä¸€äº›æ¯ä¸ªé¡µé¢éƒ½ä¼šä»¥ç”¨åˆ°çš„ç»„ä»¶ï¼Œæ¯”å¦‚ header &amp; footerã€‚å½“ç„¶å¦‚æœä½ ä¸æƒ³ä½¿ç”¨å·²ç”Ÿæˆçš„ layout ç»„ä»¶ï¼Œä½ å¯ä»¥é‡æ–°åˆ›å»ºä¸€ä¸ªï¼Œæ¯”å¦‚ blank.vue ä¸€èˆ¬ä¸éœ€è¦å¼•å…¥ header&amp;footer çš„é¡µé¢å¯ä»¥ä½¿ç”¨ blank.vue è¿™ä¸ª layout ç»„ä»¶ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">layout: &apos;blank&apos;</span><br></pre></td></tr></table></figure><p><strong>åœ¨ nuxt ä¸­å¼•å…¥ layout ä¸ç”¨å†™è·¯å¾„ï¼Œnuxt å·²ç»å¸®æˆ‘ä»¬åšäº†æ˜ å°„ï¼ŒåŒç†åœ¨ nuxt ä¸­ä¸ç”¨å†™è·¯ç”±ï¼Œpages ä¸­æ–‡ä»¶åæ˜ å°„ä¸ºäº†è·¯ç”±</strong>ã€‚</p><h4 id="nuxt-ä¸­çš„é’©å­å‡½æ•°"><a href="#nuxt-ä¸­çš„é’©å­å‡½æ•°" class="headerlink" title="nuxt ä¸­çš„é’©å­å‡½æ•°"></a>nuxt ä¸­çš„é’©å­å‡½æ•°</h4><p>nuxt ä¸­æä¾›å¾ˆå¤šé’©å­å‡½æ•°ï¼Œå‚è€ƒæ–‡æ¡£ï¼š<a href="https://zh.nuxtjs.org/api/internals/" target="_blank" rel="noopener">nuxt hooks</a></p><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ¥çœ‹ vue ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­é’©å­å‡½æ•°ï¼ŒæœåŠ¡å™¨ç«¯çš„ vue ç»„ä»¶ä¹Ÿæ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œåªä¸è¿‡åªæœ‰ beforeCreate å’Œ created ä¿©ä¸ªã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æŠŠæœåŠ¡å™¨ç«¯åˆ›å»ºçš„ .vue æ–‡ä»¶å…¨éƒ¨ç†è§£æˆç»„ä»¶ï¼Œåœ¨æœåŠ¡å™¨ç«¯ç¯å¢ƒï¼ˆnodeï¼‰é€šè¿‡ beforeCreate å’Œ created è¿™ä¿©ä¸ªç”Ÿå‘½å‘¨æœŸèŠ‚ç‚¹åæœåŠ¡å™¨ç«¯ vue ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚è¿”å›é¡µé¢ç»™æµè§ˆå™¨ï¼Œåœ¨å®¢æˆ·ç«¯ç¯å¢ƒï¼ˆv8ï¼‰ä¸­è¿™ä¸ª vue ç»„ä»¶å®ä¾‹åˆ›å»ºåä¼šåœ¨å®¢æˆ·ç«¯å†æ¬¡æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ­¤æ—¶ç”Ÿå‘½å‘¨æœŸä¸­æœ‰ mounted ç­‰é’©å­å‡½æ•°</strong>ã€‚</p><p><strong>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ nuxt ä¸­æ²¡æœ‰ mounted é’©å­å‡½æ•°ä¹Ÿæ²¡æœ‰ç»„ä»¶å®ä¾‹ï¼Œåªæœ‰ beforeCreate/created é’©å­ä¸ context å¯¹è±¡</strong>ã€‚</p><h4 id="asyncData-ä¼ é€’æœåŠ¡å™¨æ•°æ®è‡³å®¢æˆ·ç«¯"><a href="#asyncData-ä¼ é€’æœåŠ¡å™¨æ•°æ®è‡³å®¢æˆ·ç«¯" class="headerlink" title="asyncData() ä¼ é€’æœåŠ¡å™¨æ•°æ®è‡³å®¢æˆ·ç«¯"></a>asyncData() ä¼ é€’æœåŠ¡å™¨æ•°æ®è‡³å®¢æˆ·ç«¯</h4><p><strong>åœ¨ asyncData() ä¸­å¯ä»¥å¤„ç†è¯·æ±‚å¾—æ¥çš„æ•°æ®ï¼Œé€šè¿‡ return å°†å¤„ç†åçš„æ•°æ®è¿”å›ç»™å½“å‰ vue ç»„ä»¶çš„ data ã€‚å†æ¬¡å¼ºè°ƒè¿™é‡Œä¸èƒ½ä½¿ç”¨ this ï¼Œå› ä¸ºæ²¡æœ‰ç»„ä»¶å®ä¾‹ï¼ŒasyncData() é»˜è®¤çš„å‚æ•°æ˜¯ ctx å³ content å¯¹è±¡</strong>ã€‚</p><p>å¯¹äºæ‰“å¼€ç½‘é¡µè¦ç«‹å³æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦‚é¦–é¡µä¸­çš„ geo ç»„ä»¶ï¼ˆæ˜¾ç¤ºå½“å‰ä½ç½®ï¼‰æ¥è¯´æœ‰ä¿©ç§æ–¹å¼å®ç°ï¼Œå¦‚ä¸‹ï¼š</p><ul><li>ssr<ul><li>nuxtServerInit æ–¹æ³•</li><li>middleware å±æ€§</li></ul></li><li>vue ç»„ä»¶ mounted å‡½æ•°å‘é€è¯·æ±‚</li></ul><p>no-ssr å³ mounted å‡½æ•°æ–¹å¼å®ç°ç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ã€‚ä¸»è¦æ¥è¯´è¯´ ssr å¯¹åº”çš„ä¿©ç§å®ç°æ–¹å¼ã€‚</p><p>nuxtServerInit() å‰é¢ä¹Ÿè¯´è¿‡ï¼Œæ­é… vuex ä½¿ç”¨ï¼Œæ‰€ä»¥é¡¾åæ€ä¹‰ï¼Œåœ¨ nuxtServerInit å‡½æ•°ä¸­å‡†å¤‡å¥½é¦–é¡µ geo ç»„ä»¶éœ€è¦çš„æ•°æ®å­˜å…¥ vuexï¼Œ<strong>è¿™æ · vuex å®ä¾‹åŒ–åçš„ store ä¼šè´¯ç©¿æ•´ä¸ªæœåŠ¡å™¨ç«¯ä¸å®¢æˆ·ç«¯çš„ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚å¯èƒ½æœ‰çš„åŒå­¦ä¼šé—®è¿™æ˜¯æ€ä¹ˆä¼ è¿‡å»çš„ï¼Ÿæ–‡æœ«ä¼šæˆªå›¾è¯´æ˜ã€‚æ‰€ä»¥åœ¨é¦–é¡µè¿”å›å®¢æˆ·ç«¯æ—¶æ•°æ®å­˜åœ¨ store å®ä¾‹ä¸­å¯ç›´æ¥è·å–å³å¯ã€‚è·å–æ–¹å¼å¦‚ä¸‹ï¼š</p><ul><li>æœåŠ¡å™¨ç«¯ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.store.state.xxx.xxx.xxx</span><br><span class="line"><span class="comment">// eg: ctx.store.state.home.position.city</span></span><br></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.state.xxx.xxx.xxx</span><br><span class="line"><span class="comment">// eg: this.$store.state.home.position.city</span></span><br></pre></td></tr></table></figure><p>middleware å±æ€§æ˜¯åœ¨ vue ç»„ä»¶ä¸­ç›´æ¥å®šä¹‰å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">middleware: async (ctx) =&gt; &#123;</span><br><span class="line">    let &#123;status, data: &#123;province, city&#125;&#125; = await ctx.$axios.get(&apos;/geo/getPosition&apos;)</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†è·å–çš„ data èµ‹å€¼ç»™ç»„ä»¶ä¸­çš„ data å‘¢ï¼Ÿä¸Šé¢åœ¨ nuxtæµç¨‹å›¾ éƒ¨åˆ†æˆ‘ä»¬åˆ†æè¿‡ï¼Œæ¸²æŸ“å‰çš„æœ€åä¸€æ­¥æ˜¯ asyncData&amp;fetch ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ç”¨ asyncData æ–¹æ³•æŠŠ data ç»™ç»„ä»¶ return å³å¯ã€‚å…·ä½“åšæ³•è§å®˜æ–¹ç»™å‡ºçš„ issue &amp; ä¾‹å­ï¼š</p><p><a href="https://github.com/nuxt/nuxt.js/issues/1738" target="_blank" rel="noopener">issueï¼š#1738</a></p><p><a href="https://github.com/nuxt/nuxt.js/blob/dev/test/fixtures/basic/pages/fn-midd.vue" target="_blank" rel="noopener">nuxt/fn-midd.vue</a></p><p>è§£ç­”ä¸Šé¢é—ç•™çš„é—®é¢˜ï¼Œssr ç”Ÿæˆçš„é¡µé¢å¦‚ä½•æŠŠ vuex å®ä¾‹åçš„ store ä¼ ç»™å®¢æˆ·ç«¯ï¼Ÿ</p><p>å…¶å®åœ¨æœåŠ¡å™¨è¿”å›é¡µé¢ç»™æµè§ˆå™¨æ—¶ä¼šä¼ ä¸€ä¸ªåä¸º __NUXT__ çš„å¯¹è±¡æŒ‚è½½åœ¨ window ä¸Šï¼Œè¿™é‡Œé¢å­˜å‚¨äº† store ã€‚å¦‚ä¸‹ï¼š</p><p><img src="/2018/07/04/Nuxt.jsè¸©å‘å®å½•/i7eo_728311f61451d0611502442c08197ff6.png" alt=""></p><p>å¦‚å›¾å¯ä»¥æ‰¾åˆ° $store.state.home.position.city è¿™ä¸ªæ•°æ®ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://w3ctech.com/topic/2005" target="_blank" rel="noopener">The Benefits of Server Side Rendering Over Client Side Rendering</a></p><p><a href="https://nuxtjs.org/" target="_blank" rel="noopener">NUXT-Universal Vue.js Applications</a></p>]]></content>
      
      
      <categories>
          
          <category> Vuejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nuxt.js </tag>
            
            <tag> SSR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascripté¢å‘å¯¹è±¡ç¬”è®°</title>
      <link href="/2018/03/25/Javascript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%AC%94%E8%AE%B0.html"/>
      <url>/2018/03/25/Javascript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%AC%94%E8%AE%B0.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¯´åˆ°é¢å‘å¯¹è±¡ï¼Œå¤§å¤šæ•°äººéƒ½æƒ³åˆ°çš„æ˜¯é«˜çº§è¯­è¨€ï¼šc++ã€javaï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºå¯¹äºä¸€åcoderæ¥è¯´ä¸è®ºä»€ä¹ˆè¯­è¨€ï¼Œä¸€å®šè¦æœ‰é¢å‘å¯¹è±¡è¿™ç§æ€æƒ³ï¼ˆå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨è¯­è¨€è¿™ä¸ªå·¥å…·æŠŠæ€æƒ³è¡¨è¾¾å‡ºæ¥å³å¯ã€‚æœ¬æ–‡åªè®¨è®ºç»§æ‰¿ã€‚</p><h3 id="Javascript-ä¸­åˆ›å»ºå¯¹è±¡"><a href="#Javascript-ä¸­åˆ›å»ºå¯¹è±¡" class="headerlink" title="Javascript ä¸­åˆ›å»ºå¯¹è±¡"></a>Javascript ä¸­åˆ›å»ºå¯¹è±¡</h3><h4 id="new-å…³é”®å­—åšäº†ä»€ä¹ˆï¼Ÿ"><a href="#new-å…³é”®å­—åšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="new å…³é”®å­—åšäº†ä»€ä¹ˆï¼Ÿ"></a>new å…³é”®å­—åšäº†ä»€ä¹ˆï¼Ÿ</h4><p>åˆ©ç”¨ new &amp; æ„é€ å‡½æ•° åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚è¿™ä¸ªåˆ›å»ºæ–°å¯¹è±¡çš„è¿‡ç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ul><li>å£°æ˜æ–°çš„å˜é‡ basketball</li></ul><a id="more"></a><ul><li>new å°†æ–°å˜é‡çš„ _proto_ å±æ€§æŒ‡å‘äº†æ„é€ å‡½æ•°ï¼ˆBallï¼‰çš„ prototype å±æ€§ï¼Œè¿™æ—¶å†…å­˜ä¸º basketball åˆ†é…äº†å†…å­˜ï¼Œå…¶æˆä¸ºäº†å¯¹è±¡ã€‚<code>basketball._proto_ = ball.prototype</code></li><li>åˆ©ç”¨ call å‡½æ•°å°†æ–°äº§ç”Ÿçš„å¯¹è±¡ basketball çš„ this æŒ‡å‘ ballã€‚å³ç»‘å®š thisã€‚</li></ul><h4 id="prototype-proto-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#prototype-proto-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="prototype/_proto_ æ˜¯ä»€ä¹ˆï¼Ÿ"></a>prototype/_proto_ æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>æœ‰çš„ä¹¦ä¸Šåˆ«åˆ«ç”¨æ˜¾ç¤ºåŸå‹/éšç¤ºåŸå‹æ¥åˆ†åˆ«ä»£ prototype/_proto_ è¿˜æœ‰çš„ç”¨åŸå‹å¯¹è±¡/å¯¹è±¡åŸå‹ã€‚å…¶å®ä¸è®ºå“ªä¸€ç§è¯´æ³•ï¼Œä»£è¡¨çš„ä¸œè¥¿éƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒç§è¯´æ³•ã€‚ä¿©è€…åŒºåˆ«å¦‚ä¸‹è¡¨ï¼š</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">è§£é‡Š</th><th style="text-align:left">å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:left">prototype</td><td style="text-align:left">æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆåŒ…æ‹¬æ‹¥æœ‰çš„å˜é‡ä¸æ–¹æ³•ï¼Œconstructor ï¼Œ_proto_ï¼‰</td><td style="text-align:left">åªæœ‰å‡½æ•°æ‹¥æœ‰æ­¤å±æ€§</td></tr><tr><td style="text-align:left">_proto_</td><td style="text-align:left">æŒ‡å‘æ„é€ å™¨çš„åŸå‹å¯¹è±¡</td><td style="text-align:left">ä¸è®ºå¯¹è±¡æˆ–è€…å‡½æ•°éƒ½æœ‰æ­¤å±æ€§</td></tr></tbody></table><p>æ¥çœ‹ä¸‹é¢ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ball</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">ã€€ã€€<span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> basketball = <span class="keyword">new</span> Ball(<span class="string">'basketball'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(basketball.__proto__);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  è¾“å‡º</span></span><br><span class="line"><span class="comment">    constructor: Æ’ ball(name)</span></span><br><span class="line"><span class="comment">    arguments: null</span></span><br><span class="line"><span class="comment">    caller: null</span></span><br><span class="line"><span class="comment">    length: 1</span></span><br><span class="line"><span class="comment">    name: "ball"</span></span><br><span class="line"><span class="comment">    prototype: &#123;constructor: Æ’&#125;</span></span><br><span class="line"><span class="comment">    __proto__: Æ’ ()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ball.prototype)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  è¾“å‡º</span></span><br><span class="line"><span class="comment">    constructor: Æ’ ball(name)</span></span><br><span class="line"><span class="comment">    arguments: null</span></span><br><span class="line"><span class="comment">    caller: null</span></span><br><span class="line"><span class="comment">    length: 1</span></span><br><span class="line"><span class="comment">    name: "ball"</span></span><br><span class="line"><span class="comment">    prototype: &#123;constructor: Æ’&#125;</span></span><br><span class="line"><span class="comment">    __proto__: Æ’ ()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(basketball.__proto__ === ball.prototype)</span><br><span class="line"></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä»ç»“æœæ¥çœ‹ç¡®å®è·Ÿæˆ‘ä»¬ä¸Šè¿°çš„ new åˆ›å»ºå¯¹è±¡è¿‡ç¨‹ä¸€è‡´ã€‚</p><h3 id="é¢å‘å¯¹è±¡-â€”-ç»§æ‰¿"><a href="#é¢å‘å¯¹è±¡-â€”-ç»§æ‰¿" class="headerlink" title="é¢å‘å¯¹è±¡ â€” ç»§æ‰¿"></a>é¢å‘å¯¹è±¡ â€” ç»§æ‰¿</h3><h4 id="1ã€call-apply"><a href="#1ã€call-apply" class="headerlink" title="1ã€call/apply"></a>1ã€call/apply</h4><p>è¯¥æ–¹å¼é‡‡å–çš„åŠæ³•æ˜¯å°†çˆ¶å¯¹è±¡çš„æ„é€ å‡½æ•°ç»‘å®šåœ¨å­å¯¹è±¡ä¸Šã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ball</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.general = <span class="string">"çƒç±»è¿åŠ¨"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Basketball</span>(<span class="params">name, space</span>) </span>&#123;</span><br><span class="line">    Ball.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.space = space;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bb = <span class="keyword">new</span> Basketball(<span class="string">'è€å…‹7å·çƒ'</span>, <span class="string">'å®¤å†…'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bb.general)</span><br><span class="line"><span class="comment">// çƒç±»è¿åŠ¨</span></span><br></pre></td></tr></table></figure><h4 id="2ã€åŸå‹é“¾ç»§æ‰¿"><a href="#2ã€åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="2ã€åŸå‹é“¾ç»§æ‰¿"></a>2ã€åŸå‹é“¾ç»§æ‰¿</h4><p>ä½¿å­ç±»åŸå‹å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ä»¥å®ç°ç»§æ‰¿ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ball</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.general = <span class="string">"çƒç±»è¿åŠ¨"</span>;</span><br><span class="line">    <span class="keyword">this</span>.ballprint = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ball'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Basketball</span>(<span class="params">name, space</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.space = space;</span><br><span class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'basketball'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Basketball.prototype = <span class="keyword">new</span> Ball();</span><br><span class="line"><span class="keyword">let</span> bb = <span class="keyword">new</span> Basketball(<span class="string">'è€å…‹7å·çƒ'</span>, <span class="string">'å®¤å†…'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bb.general) <span class="comment">// 1ã€çƒç±»è¿åŠ¨</span></span><br><span class="line"><span class="built_in">console</span>.log(bb.ballprint()) <span class="comment">// 2ã€ball</span></span><br><span class="line"><span class="built_in">console</span>.log(bb.name) <span class="comment">// 3ã€è€å…‹7å·çƒ</span></span><br><span class="line"><span class="built_in">console</span>.log(bb.print()) <span class="comment">// 4ã€basketball</span></span><br><span class="line"><span class="built_in">console</span>.log(Basketball.prototype == Ball.prototype) <span class="comment">// 5ã€true</span></span><br><span class="line"><span class="built_in">console</span>.log(Basketball.prototype.__proto__ == Ball.prototype) <span class="comment">// 6ã€true</span></span><br></pre></td></tr></table></figure><p>è°ƒè¯•è¯­å¥5æ›´æ·±å±‚æ¬¡çš„æ„æ€æ˜¯è¯´:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Basketball.prototype.constuctor = Ball.prototype.constuctor</span><br></pre></td></tr></table></figure></p><p>å› ä¸ºå‰é¢è¯´è¿‡æ¯ä¸ªå‡½æ•°ç‰¹æœ‰ prototype è¿™ä¸ªåŸå‹å¯¹è±¡å±æ€§ï¼Œè€Œåœ¨è¿™ä¸ªåŸå‹å¯¹è±¡ä¸­å­˜æœ‰ constuctor ï¼Œæ‰€ä»¥<strong>è¦ä½¿ä¿©å‡½æ•°çš„ prototype ç›¸ç­‰ï¼Œé‚£ä¹ˆå…¶ä¸­çš„ constuctor å¿…å®šä¹Ÿæƒ³ç­‰</strong>ã€‚æ‰€ä»¥ bb ä½œä¸ºå­ç±»æ‰å¯ä»¥è®¿é—®åˆ° ball ä¸­çš„å±æ€§ä¸æ–¹æ³•ã€‚è¯­å¥1&amp;2è¯æ˜äº†è¿™ä¸€ç‚¹ã€‚</p><p>è¯­å¥6ç»“æœç¬¦åˆ new æ“ä½œç¬¦çš„æ“ä½œã€‚</p><p>å¦‚æœå­ç±»ä¸çˆ¶ç±»ä¸­çš„å±æ€§ã€æ–¹æ³•åŒåé‚£ä¹ˆç»“æœæ€æ ·å‘¢ï¼Ÿç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ball</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"çƒç±»è¿åŠ¨"</span>;</span><br><span class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ball'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Basketball</span>(<span class="params">name, space</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.space = space;</span><br><span class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'basketball'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Basketball.prototype = <span class="keyword">new</span> Ball();</span><br><span class="line"><span class="keyword">let</span> bb = <span class="keyword">new</span> Basketball(<span class="string">'è€å…‹7å·çƒ'</span>, <span class="string">'å®¤å†…'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bb.name) <span class="comment">// 1ã€è€å…‹7å·çƒ</span></span><br><span class="line"><span class="built_in">console</span>.log(bb.print()) <span class="comment">// 2ã€basketball</span></span><br><span class="line"><span class="built_in">console</span>.log(Basketball.prototype == Ball.prototype) <span class="comment">// 3ã€true</span></span><br><span class="line"><span class="built_in">console</span>.log(Basketball.prototype.__proto__ == Ball.prototype) <span class="comment">// 4ã€true</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è™½ç„¶ <code>bb._proto_ = Basketball.prototype = Ball.prototype</code> ä½†æ˜¯åŒåé‡‡å–çš„<strong>å°±è¿‘è®¿é—®çš„åŸåˆ™</strong>ï¼Œæ‰€ä»¥æ‰§è¡Œ Basketball ä¸­çš„è¯­å¥ã€‚<strong>è€Œä¸ä¼šé€šè¿‡ _proto_ åŸå‹é“¾å»å»ä¸Šçº§çˆ¶ç±»å¯»æ‰¾å˜é‡ä¸æ–¹æ³•</strong>ã€‚</p><h4 id="3ã€æ”¹è¿›åçš„åŸå‹ç»§æ‰¿"><a href="#3ã€æ”¹è¿›åçš„åŸå‹ç»§æ‰¿" class="headerlink" title="3ã€æ”¹è¿›åçš„åŸå‹ç»§æ‰¿"></a>3ã€æ”¹è¿›åçš„åŸå‹ç»§æ‰¿</h4><p>å› ä¸ºä¸Šè¿°2ä¸­çš„æ–¹æ³•ä¼šä¿®æ”¹æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥æ‰‹åŠ¨ç½®å›ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ball</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"çƒç±»è¿åŠ¨"</span>;</span><br><span class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ball'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Basketball</span>(<span class="params">name, space</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.space = space;</span><br><span class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'basketball'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Basketball.prototype = <span class="keyword">new</span> Ball();</span><br><span class="line">Basketball.prototype.constructor = Basketball;</span><br><span class="line"><span class="keyword">let</span> bb = <span class="keyword">new</span> Basketball(<span class="string">'è€å…‹7å·çƒ'</span>, <span class="string">'å®¤å†…'</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ ·å³å¯ã€‚å½“ç„¶è¿™æ ·çš„ç»§æ‰¿æ–¹å¼æ˜¯å¤šå ç”¨äº†äº›å†…å­˜ï¼Œ<code>Basketball.prototype = new Ball();</code> ï¼Œ<strong>å½“ç„¶è¿˜æœ‰ä¸å å†…å­˜çš„æ–¹å¼ï¼Œæ¯”å¦‚åˆ©ç”¨ç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹çš„æ–¹å¼</strong>ã€‚åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶çš„å¯¹è±¡ï¼Œç†è§£èµ·æ¥ä¸éš¾ã€‚å…·ä½“è¯·å‚è€ƒï¼š</p><p><a href="http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html" target="_blank" rel="noopener">Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼šæ„é€ å‡½æ•°çš„ç»§æ‰¿</a></p><p>é˜®è€å¸ˆè¿™é‡Œä»‹ç»çš„ç©ºå¯¹è±¡æ–¹æ³•ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯æˆ‘è§‰å¾—æ²¡æœ‰æŠŠä¸´æ—¶å¯¹è±¡ä½¿ç”¨å®Œåæ‰‹åŠ¨ç½®ç©ºçš„æ“ä½œï¼Œè‡ªå·±åŠ ä¸Šå³å¯ã€‚</p><h4 id="4ã€class-extends-å…³é”®å­—å®ç°ç»§æ‰¿"><a href="#4ã€class-extends-å…³é”®å­—å®ç°ç»§æ‰¿" class="headerlink" title="4ã€class/extends å…³é”®å­—å®ç°ç»§æ‰¿"></a>4ã€class/extends å…³é”®å­—å®ç°ç»§æ‰¿</h4><p>es6ä¸­å¼•å…¥äº†ç±»çš„æ¦‚å¿µï¼Œç”¨ class å…³é”®å­—å£°æ˜çš„å‡½æ•°ä½œä¸ºå¯¹è±¡æ¨¡ç‰ˆã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ball</span></span>&#123;</span><br><span class="line"><span class="keyword">constructor</span>(name) &#123;</span><br><span class="line"><span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line">play() &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Ball is: '</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Basketball</span> <span class="keyword">extends</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line"><span class="keyword">constructor</span>(name) &#123;</span><br><span class="line"><span class="keyword">super</span>(name)</span><br><span class="line"><span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line">playb() &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Basketball is: '</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bb = <span class="keyword">new</span> Basketball(<span class="string">'nikeball'</span>)</span><br><span class="line">bb.play(); <span class="comment">// Ball is: nikeball</span></span><br><span class="line">bb.playb(); <span class="comment">// Basketball is: nikeball</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Ball) <span class="comment">// 1ã€function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Basketball) <span class="comment">// 2ã€function</span></span><br><span class="line"><span class="built_in">console</span>.log(bb.__proto__ == Basketball.prototype) <span class="comment">// 3ã€true</span></span><br><span class="line"><span class="built_in">console</span>.log(Basketball.prototype)</span><br><span class="line"><span class="comment">/* 4ã€</span></span><br><span class="line"><span class="comment">constructor: class Basketball</span></span><br><span class="line"><span class="comment">playb: Æ’ playb()</span></span><br><span class="line"><span class="comment">__proto__: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>ç”±æ‰“å°å‡ºçš„ç»“æœ1&amp;2æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œclass å¥½åƒæ˜¯åŒ…åœ¨ function ä¸Šçš„è¯­æ³•ç³–ï¼›ç”±3æ…¢æ…¢ç¡®å®šäº†è¿™ä¸€ç‚¹ï¼›ç”±4æˆ‘ä»¬æ›´åŠ ç¡®å®šäº†è¿™ä¸€ç‚¹ï¼Œè€Œä¸”<strong>ç»“åˆå‰é¢è¯´çš„æ”¹è¿›åŸå‹ç»§æ‰¿çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥å°è¯•åˆ†æ class ç»§æ‰¿çš„å…³é”®æ­¥éª¤</strong>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Basketball.prototype = <span class="keyword">new</span> Ball()</span><br><span class="line"></span><br><span class="line">Basketball.prototype.constructor = Basketball</span><br><span class="line"></span><br><span class="line"><span class="comment">// playb() &#123;...&#125; ç›¸å½“äº:</span></span><br><span class="line">Basketball.prototype.playb = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;...&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ class æ—¶ä¸€å®šè¦æ³¨æ„åœ¨ä½¿ç”¨ this æˆ–è€…å­ç±»æ„é€ å‡½æ•°è¿”å›å‰ï¼Œä¸€å®šè¦åœ¨å­ç±»ä¸­ä½¿ç”¨ super å…³é”®å­—è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¯´ç™½äº†å°±æ˜¯åœ¨å­ç±»ä¸­ä¸€å®šè¦ä½¿ç”¨ super ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="http://www.cnblogs.com/cshi/p/5476416.html" target="_blank" rel="noopener">JSå½“ä¸­çš„newå…³é”®å­—éƒ½å¹²äº†äº›ä»€ä¹ˆï¼Ÿ</a></p><p><a href="http://www.cnblogs.com/pssp/p/5204324.html" target="_blank" rel="noopener">ä½œç”¨åŸŸé“¾ä¸åŸå‹é“¾</a></p><p><a href="http://louiszhai.github.io/2015/12/17/prototype/" target="_blank" rel="noopener">è¯¦è§£prototypeä¸_proto_</a></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»§æ‰¿ </tag>
            
            <tag> prototype/_proto_ </tag>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ</title>
      <link href="/2018/01/13/Mac%E4%B8%8B%E5%88%A9%E7%94%A8Alfred%E4%B8%8E%E4%B8%83%E7%89%9B%E6%90%AD%E5%BB%BAmarkdown%E5%9B%BE%E5%BA%8A.html"/>
      <url>/2018/01/13/Mac%E4%B8%8B%E5%88%A9%E7%94%A8Alfred%E4%B8%8E%E4%B8%83%E7%89%9B%E6%90%AD%E5%BB%BAmarkdown%E5%9B%BE%E5%BA%8A.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ä½¿ç”¨hexoä¸gitpageå®Œæˆä¸ªäººåšå®¢æ­å»ºåï¼Œåœ¨å†™åšå®¢æ—¶æƒ³æ’å…¥å›¾ç‰‡æ€»æ˜¯éœ€è¦å¤–é“¾ï¼Œæ„Ÿè§‰å¾ˆç¹çã€‚åˆšå¥½åœ¨åˆ©ç”¨alfredçš„workflowåè§‰å¾—èƒ½ä¸èƒ½æŠŠæ•´å¥—æ‰‹åŠ¨è·å–å›¾ç‰‡å¤–é“¾çš„åŠ¨ä½œå˜æˆè‡ªåŠ¨åŒ–çš„åŠ¨ä½œï¼Œæ¥ç”¨çƒ­é”®è§¦å‘ã€‚æœäº†ä¸‹ç›¸å…³çš„æ–‡ç« è‡ªå·±è¸©äº†ä¸å°‘å‘æœ€ç»ˆè¿˜æ˜¯å®Œæˆäº†ï¼Œæ€»ç»“å‡ºæ¥é¿å…å¤§å®¶åé¢è¸©å‘ã€‚</p><h3 id="å‰æœŸå‡†å¤‡ï¼š"><a href="#å‰æœŸå‡†å¤‡ï¼š" class="headerlink" title="å‰æœŸå‡†å¤‡ï¼š"></a>å‰æœŸå‡†å¤‡ï¼š</h3><ul><li>å¯ä»¥ä½¿ç”¨workflowçš„alfredï¼ˆèƒ½æ”¯æŒæ­£ç‰ˆæœ€å¥½ä¸è¿‡æˆ‘è¿˜æ˜¯å‡†å¤‡äº†é“¾æ¥ï¼Œä½ç½®åœ¨æ–‡ç« æœ€åï¼‰</li></ul><a id="more"></a><ul><li>ä¸ƒç‰›è´¦å·&amp;ä¸ƒç‰›è‡ªåŠ¨åŒ–å·¥å…·qshell</li><li>æˆªå›¾å·¥å…·ï¼ˆè¿™ä¸ªä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¯ä»¥åˆ©ç”¨ç”µè„‘è‡ªå¸¦çš„æˆªå›¾åŠŸèƒ½ï¼Œåªè¦ä¿è¯æˆªå›¾åŠ¨ä½œåçš„ç»“æœå¤„äºå‰ªåˆ‡æ¿ä¸­å³å¯ï¼‰</li></ul><h3 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šï¼ˆä¸ƒç‰›æ“ä½œï¼‰"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šï¼ˆä¸ƒç‰›æ“ä½œï¼‰" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šï¼ˆä¸ƒç‰›æ“ä½œï¼‰"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šï¼ˆä¸ƒç‰›æ“ä½œï¼‰</h3><h4 id="ç¬¬ä¸€æ­¥ï¼š"><a href="#ç¬¬ä¸€æ­¥ï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼š"></a>ç¬¬ä¸€æ­¥ï¼š</h4><p>æ³¨å†ŒæˆåŠŸç™»é™†åï¼Œå•å‡» ç®¡ç†æ§åˆ¶å° -&gt; å¯¹è±¡å­˜å‚¨ -&gt; å†…å®¹ç®¡ç† æ‰¾åˆ°å¤–é“¾é»˜è®¤åŸŸåï¼Œå¤åˆ¶å¹¶ä¿å­˜ã€‚</p><h4 id="ç¬¬äºŒæ­¥ï¼š"><a href="#ç¬¬äºŒæ­¥ï¼š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼š"></a>ç¬¬äºŒæ­¥ï¼š</h4><p>è¿”å›é¦–é¡µï¼Œå•å‡» æœåŠ¡ä¸æ”¯æŒ -&gt; å¼€å‘è€…ä¸­å¿ƒ -&gt; sdkä¸å·¥å…· -&gt; å¼€å‘è€…å·¥å…· -&gt; qshell è¿›å…¥åæŒ‰ç…§æç¤ºä¸‹è½½å¹¶å®‰è£…ã€‚</p><h4 id="ç¬¬ä¸‰æ­¥ï¼š"><a href="#ç¬¬ä¸‰æ­¥ï¼š" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼š"></a>ç¬¬ä¸‰æ­¥ï¼š</h4><p>åˆ›å»ºè´¦æˆ·æ—¶ï¼Œé™¤äº†ak&amp;sk ç°åœ¨è¿˜éœ€è¦è¾“å…¥ä¸ƒç‰›è´¦æˆ·åï¼›é…ç½®upload.confæ–‡ä»¶æ—¶éœ€è¦æ³¨æ„å¦‚æœæœ¬åœ°æ–°å¢æ–‡ä»¶ä¸ƒç‰›é»˜è®¤ä¸ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼Œä½ éœ€è¦è®¾ç½® rescan_local: true ;å¦‚æœä½ åœ¨ä¸ƒç‰›ç©ºé—´ï¼ˆwebé¡µï¼‰ä¸­æ‰‹åŠ¨åˆ é™¤æŸä¸ªæ–‡ä»¶ï¼Œå†æ¬¡ä¸Šä¼ è¯¥æ–‡ä»¶çš„æ—¶å€™ä¸ƒç‰›é»˜è®¤è¯¥æ–‡ä»¶å·²ç»å­˜åœ¨ç©ºé—´ä¸­ï¼Œä¸ä¼šå†ä¸Šä¼ è¯¥æ–‡ä»¶ï¼Œä½ éœ€è¦é…ç½® check_exists: true ã€‚</p><h3 id="ç¬¬äºŒéƒ¨åˆ†ï¼šï¼ˆalfred-workflowæ“ä½œï¼‰"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šï¼ˆalfred-workflowæ“ä½œï¼‰" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šï¼ˆalfred workflowæ“ä½œï¼‰"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šï¼ˆalfred workflowæ“ä½œï¼‰</h3><h4 id="ç¬¬ä¸€æ­¥ï¼š-1"><a href="#ç¬¬ä¸€æ­¥ï¼š-1" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼š"></a>ç¬¬ä¸€æ­¥ï¼š</h4><p><img src="/2018/01/13/Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ/i7eo_6ae05412c45cd93d76aee7dfc829ee6d.png" alt=""></p><p>ç‚¹å‡» + ï¼Œåˆ›å»ºblank workflowå³å¯ï¼Œæ³¨æ„bundle idå¿…å¡«ä¸€ä¸ªå”¯ä¸€å€¼ï¼Œèƒ½å¤Ÿåœ¨alfredä¸­æ ‡ç¤ºä½ è¿™ä¸ªworkflowå³å¯ï¼Œå…¶ä½™é€‰é¡¹æ­£å¸¸å¡«å†™ï¼Œcategoryé»˜è®¤é€‰é¡¹å³å¯ã€‚</p><h4 id="ç¬¬äºŒæ­¥ï¼š-1"><a href="#ç¬¬äºŒæ­¥ï¼š-1" class="headerlink" title="ç¬¬äºŒæ­¥ï¼š"></a>ç¬¬äºŒæ­¥ï¼š</h4><p><img src="/2018/01/13/Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ/i7eo_67ef692bcaa2e05863e0aed092834efd.png" alt=""></p><p>åˆ›å»ºçƒ­é”®hotkeyï¼Œå…¶ä½™é»˜è®¤é€‰é¡¹ä¸å˜ï¼Œå®Œæˆåsaveã€‚</p><p><img src="/2018/01/13/Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ/i7eo_959e803647132d100867bf95fd3f2b97.png" alt=""></p><p>åˆ›å»ºçƒ­é”®è§¦å‘åéœ€è¦æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå½“ç„¶run scriptåˆ›å»ºçš„è„šæœ¬æ˜¯åå°è¿è¡Œä¸éœ€è¦å…ˆè°ƒå‡ºterminalï¼ˆæ§åˆ¶å°ï¼‰ï¼Œå¦‚æœéœ€è¦è°ƒå‡ºterminalï¼ˆæ§åˆ¶å°ï¼‰ï¼Œé€‰æ‹©terminal commandã€‚<br>æ ¹æ®è„šæœ¬è¯­è¨€å¯¹åº”é€‰æ‹©languageï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªasç‰ˆæœ¬ä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">property fileTypes : &#123;Â¬</span><br><span class="line">    &#123;Â«class PNGfÂ», ".png"&#125;, Â¬</span><br><span class="line">    &#123;JPEG picture, <span class="string">".jpg"</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">on getType() --åˆ¤æ–­å‰ªè´´æ¿ä¸­çš„æ•°æ®ç±»å‹ï¼Œæš‚æ—¶åªæ”¯æŒpngå’Œjpgï¼Œä¼˜å…ˆç”¨png</span><br><span class="line">    repeat <span class="keyword">with</span> aType <span class="keyword">in</span> fileTypes</span><br><span class="line">        repeat <span class="keyword">with</span> theInfo <span class="keyword">in</span> (clipboard info)</span><br><span class="line">            <span class="keyword">if</span> (first item <span class="keyword">of</span> theInfo) is equal to (first item <span class="keyword">of</span> aType) then <span class="keyword">return</span> aType</span><br><span class="line">        end repeat</span><br><span class="line">    end repeat</span><br><span class="line">    <span class="keyword">return</span> missing value</span><br><span class="line">end getType</span><br><span class="line"></span><br><span class="line">set theType to getType()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> theType is not missing value then</span><br><span class="line">    set filePath to <span class="string">"/Users/xxx/Documents/screenCaptures/"</span> --è¿™é‡Œæ¢æˆä½ è‡ªå·±æ”¾ç½®å›¾ç‰‡çš„è·¯å¾„</span><br><span class="line">    set fileName to <span class="keyword">do</span> shell script <span class="string">"date \"+%Y%m%d%H%M%S\" | md5"</span> --ç”¨å½“å‰æ—¶é—´çš„md5å€¼åšæ–‡ä»¶å</span><br><span class="line">set prefix to <span class="string">"i7eo_"</span> -- æ”¹æˆè‡ªå·±çš„å‰ç¼€</span><br><span class="line">    <span class="keyword">if</span> fileName does not end <span class="keyword">with</span> (second item <span class="keyword">of</span> theType) then set fileName to (fileName &amp; second item <span class="keyword">of</span> theType <span class="keyword">as</span> text)</span><br><span class="line">    set markdownUrl to <span class="string">"![æˆªå›¾](http://xxx.com/i7eo_"</span> &amp; fileName &amp; <span class="string">")"</span> --è¿™é‡Œå¦‚æœæ²¡æœ‰ç”¨åˆ°å›¾åºŠï¼Œå°±æŠŠå‰é¢å‰ç¼€å»æ‰ï¼Œç”¨åˆ°çš„è¯æ¢æˆä½ è‡ªå·±å›¾åºŠçš„url</span><br><span class="line">    set filePath to filePath &amp; prefix &amp; fileName</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">        set imageFile to (open <span class="keyword">for</span> access filePath <span class="keyword">with</span> write permission)</span><br><span class="line">        set eof imageFile to <span class="number">0</span></span><br><span class="line">        write (the clipboard <span class="keyword">as</span> (first item <span class="keyword">of</span> theType)) to imageFile -- <span class="keyword">as</span> whatever</span><br><span class="line">        close access imageFile</span><br><span class="line">        set the clipboard to markdownUrl</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">            tell application <span class="string">"System Events"</span></span><br><span class="line">                keystroke <span class="string">"v"</span> using command down</span><br><span class="line">            end tell</span><br><span class="line">        end <span class="keyword">try</span></span><br><span class="line">    on error</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">            close access imageFile</span><br><span class="line">        end <span class="keyword">try</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    end <span class="keyword">try</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">end <span class="keyword">if</span></span><br></pre></td></tr></table></figure></p><p>æŠŠ <code>http://xxx.com/</code><br>æ”¹ä¸ºä¹‹å‰ä»ä¸ƒç‰›é»˜è®¤å¤–é“¾å¤„å¤åˆ¶å‡ºæ¥çš„åœ°å€ã€‚</p><h4 id="ç¬¬ä¸‰æ­¥ï¼š-1"><a href="#ç¬¬ä¸‰æ­¥ï¼š-1" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼š"></a>ç¬¬ä¸‰æ­¥ï¼š</h4><p>å†æ¬¡åˆ›å»ºä¸€ä¸ªblank workflowï¼Œçƒ­é”®è‡ªå·±è®¾ç½®ï¼›å†æ¬¡åˆ›å»ºä¸€ä¸ªasè„šæœ¬ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> shell script <span class="string">"/usr/local/bin/qshell qupload ~/.qshell/upload.conf"</span></span><br></pre></td></tr></table></figure></p><p>æŠŠquploadå‰çš„è·¯å¾„æ¢æˆè‡ªå·±å­˜æ”¾ä¸ƒç‰›qshellæ–‡ä»¶çš„ä½ç½®ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¸ªæ–¹æ³•é€‚åˆå†™åšå®¢æ—¶ï¼ŒæŠŠè¯¥ç¯‡åšå®¢éœ€è¦çš„å›¾ç‰‡éƒ½å­˜æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œå†™å®Œåä¸€æ¬¡æ€§ä¸Šä¼ è‡³ä¸ƒç‰›ç©ºé—´ã€‚ç„¶ååœ¨æŠŠåšå®¢æ¨è‡³gitpageå³å¯ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœæƒ³æ¯æ¬¡æ’å…¥ä¸€å¼ å›¾ç‰‡å°±ä¸Šä¼ ï¼Œå¯ä»¥ä½¿ç”¨æ’ä»¶ <a href="https://github.com/jiwenxing/qimage-mac" target="_blank" rel="noopener">Mac ç‰ˆæœ¬çš„ Markdown ä¸€é”®è´´å›¾å·¥å…·</a></p><p><a href="https://www.jianshu.com/p/5b3f98b1f7b6" target="_blank" rel="noopener">alfred3 Powerpack</a></p>]]></content>
      
      
      <categories>
          
          <category> è‡ªåŠ¨åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Alfred3 workflow </tag>
            
            <tag> å›¾åºŠ </tag>
            
            <tag> qshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºgit pageå¼€é€šhttpsè¸©å‘å®å½•</title>
      <link href="/2017/10/01/%E4%B8%BAgitPages%E5%BC%80%E9%80%9Ahttps%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95.html"/>
      <url>/2017/10/01/%E4%B8%BAgitPages%E5%BC%80%E9%80%9Ahttps%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95.html</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ©ç”¨hexoä¸gitpageå¼€é€šåšå®¢åï¼Œæ— è®ºæ˜¯pc&amp;mobileç™»é™†æ—¶æ€»ä¼šå‘ç°åœ°å€æ å‰æœ‰ä¸ªæ„Ÿå¹å·ã€‚å¼ºè¿«ç—‡è¡¨ç¤ºçœŸçš„çœ‹ä¸ä¸‹å»ï¼Œæ‰€ä»¥å°±å»äº†è§£äº†ä¸‹httpsã€‚</p><h3 id="HTTPSçš„ä¼˜ç‚¹"><a href="#HTTPSçš„ä¼˜ç‚¹" class="headerlink" title="HTTPSçš„ä¼˜ç‚¹"></a>HTTPSçš„ä¼˜ç‚¹</h3><ul><li>äº†è§£åˆ°httpsæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚</li><li>æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œhttpså¯ä»¥é¿å…dnsæŒŸæŒï¼Œå°±æ˜¯å¯ä»¥é¿å…åœ¨æµè§ˆç½‘é¡µæ—¶å‡ºç°ä¸€äº›å°å¹¿å‘Šå¼¹çª—ï¼</li></ul><a id="more"></a><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç»“åˆè‡ªå·±çš„ä»£ç å‘ç°å¼•ç”¨çš„å›¾ç‰‡å…¨æ˜¯httpåè®®ä¸‹çš„ï¼Œè€Œä¸”åœ¨inputï¼ˆå³ä½¿typeâ‰ keywordï¼‰è¾“å…¥å†…å®¹æ—¶æ„Ÿå¹å·å˜æˆäº†çº¢å­—å‰ã€‚æˆ‘æ‰€ç”¨çš„æ˜¯é˜¿é‡Œçš„åŸŸåæ‰€ä»¥å»ç½‘ç«™æŸ¥è¯¢httpsçš„ä¿¡æ¯ï¼Œå‘ç°æœ‰å…è´¹çš„èµ›é—¨é“å…‹ï¼ˆSymantecï¼‰è¯ä¹¦è¯•ç”¨ã€‚æœæ–­ç”³è¯·åï¼Œå‘ç°ï¼š</p><h3 id="gitPagesæ³¨æ„äº‹é¡¹"><a href="#gitPagesæ³¨æ„äº‹é¡¹" class="headerlink" title="gitPagesæ³¨æ„äº‹é¡¹"></a>gitPagesæ³¨æ„äº‹é¡¹</h3><ul><li>git pageè‡ªå¸¦httpsï¼Œåœ¨å¯¹åº”repçš„è®¾ç½®ä¸­ï¼Œç‚¹å‡» Enforce HTTPS å³å¯ã€‚</li><li>git pageç»‘å®šè‡ªå®šä¹‰åŸŸååæ— æ³•æ·»åŠ sslè¯ä¹¦ã€‚<br>è¿™ä¸ªæ—¶å€™æœ‰ç‚¹æ‡µäº†ï¼Œä¸è¿‡æ£€ç´¢å¤šæ¬¡ç›¸å…³å…³é”®å­—åï¼Œå‘ç°äº†cloudflareè¿™ä¸ªå¥½ä¸œè¥¿ã€‚å¤§æ¦‚äº†è§£äº†ä¸‹åå°±ç¡®å®šç”¨å®ƒäº†ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š</li></ul><h3 id="å®‰åˆ©cloudflareçš„åŸå› "><a href="#å®‰åˆ©cloudflareçš„åŸå› " class="headerlink" title="å®‰åˆ©cloudflareçš„åŸå› "></a>å®‰åˆ©cloudflareçš„åŸå› </h3><ul><li>æœ‰å…è´¹å¥—</li><li>cloudflareçš„dnsæœåŠ¡å™¨é£è¯„è¿˜æ˜¯ä¸é”™çš„<br>-cloudflareæä¾› Universal SSL æœåŠ¡ï¼Œç®€å•æ¥è¯´å°±æ˜¯è®©ä»»æ„httpç«™ç‚¹æ”¯æŒhttpsã€‚<br>  ï¼ˆå…·ä½“åŸç†æŒ‡çš„æ˜¯ï¼Œç”¨cloudflareçš„dnsæœåŠ¡å™¨ï¼Œå½“ä½ è®¿é—®ç½‘é¡µæ—¶ï¼Œç½‘é¡µ -&gt; cloudflare è¿™ä¸ªè¿‡ç¨‹æ˜¯åŠ å¯†çš„ï¼Œè€Œ cloudflare -&gt; git pageè¿™ä¸ªè¿‡ç¨‹æ˜¯éåŠ å¯†ï¼ˆhttpï¼‰ï¼‰</li></ul><p>å…·ä½“å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://support.cloudflare.com/hc/en-us/articles/200170416" target="_blank" rel="noopener"> how Cloudflareâ€™s servers connect to your origin for HTTPS requests</a></p><h3 id="cloudflareé…ç½®çš„å…·ä½“æ­¥éª¤"><a href="#cloudflareé…ç½®çš„å…·ä½“æ­¥éª¤" class="headerlink" title="cloudflareé…ç½®çš„å…·ä½“æ­¥éª¤"></a>cloudflareé…ç½®çš„å…·ä½“æ­¥éª¤</h3><h4 id="ç¬¬ä¸€æ­¥ï¼šè®¾ç½®dns"><a href="#ç¬¬ä¸€æ­¥ï¼šè®¾ç½®dns" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šè®¾ç½®dns"></a>ç¬¬ä¸€æ­¥ï¼šè®¾ç½®dns</h4><p>æŠŠè‡ªå·±å¯¹åº”çš„dnsæœåŠ¡å™¨æ”¹ä¸ºcloudflareçš„ï¼Œä¸‹é¢ä»¥é˜¿é‡Œæ¥ä¸¾ä¾‹ã€‚é˜¿é‡Œäº‘ -&gt; åŸŸå -&gt; ç®¡ç† -&gt; ä¿®æ”¹dnsï¼Œå‡ºç°ä¸€ä¸‹ç•Œé¢ï¼š</p><p><img src="ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•/i7eo_4436910aa5b1e131037aa2f6007f7d23.png" alt=""></p><p>è¿™æ˜¯æˆ‘å·²ç»ä¿®æ”¹åçš„ï¼Œå•å‡»å³è¾¹çš„ä¿®æ”¹dnsæœåŠ¡å™¨å³å¯ï¼ŒæŠŠcloudflareç»™å‡ºçš„ä¿©ä¸ªdnsåœ°å€æ¢ä¸Šæ¥å°±å¥½ã€‚cloudflareç»™å‡ºçš„dnsåœ°å€ä½äºï¼šcloudflare -&gt; dns -&gt; Cloudflare Nameserversã€‚</p><p>å¦‚ä½•åˆ¤æ–­æ›´æ¢dnsæˆåŠŸï¼Ÿ<br>å›åˆ°cloudflareåï¼Œå•å‡»overviewï¼Œå¦‚æœæˆåŠŸä¼šå‡ºç°ï¼š</p><p><img src="ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•/i7eo_be5528c7b4f28ce887136746b5de2d03.png" alt=""></p><h4 id="ç¬¬äºŒæ­¥ï¼šè®¾ç½®dnsä¿¡æ¯"><a href="#ç¬¬äºŒæ­¥ï¼šè®¾ç½®dnsä¿¡æ¯" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè®¾ç½®dnsä¿¡æ¯"></a>ç¬¬äºŒæ­¥ï¼šè®¾ç½®dnsä¿¡æ¯</h4><p>cloudflare -&gt; dns -&gt; DNS Records å¦‚æœè¿™é‡Œæ²¡è®¾ç½®æ—¶æœ‰è®°å½•å…ˆåˆ é™¤ï¼Œæ–°å¢ä¸€æ¡è®°å½•:</p><p><img src="ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•/i7eo_a726bae253f790060294d739a7ea706f.png" alt=""></p><h4 id="ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ssl-amp-å¼ºåˆ¶è·³è½¬"><a href="#ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ssl-amp-å¼ºåˆ¶è·³è½¬" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ssl&amp;å¼ºåˆ¶è·³è½¬"></a>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ssl&amp;å¼ºåˆ¶è·³è½¬</h4><p>cloudflare -&gt; crypto -&gt; SSL å‹¾é€‰flexible</p><p>cloudflare -&gt; crypto -&gt; Always Use HTTPS å‹¾é€‰on</p><h4 id="ç¬¬å››æ­¥ï¼šåç­‰-amp-æ’é”™"><a href="#ç¬¬å››æ­¥ï¼šåç­‰-amp-æ’é”™" class="headerlink" title="ç¬¬å››æ­¥ï¼šåç­‰&amp;æ’é”™"></a>ç¬¬å››æ­¥ï¼šåç­‰&amp;æ’é”™</h4><p>å¤§æ¦‚10mins - 30minså·¦å³å°±ä¼šç”Ÿæ•ˆï¼Œå¯ä»¥åœ¨ç­‰å¾…çš„æ—¶å€™ä½¿ç”¨pingå‘½ä»¤æ¥pingä¸ªäººçš„åŸŸåæŸ¥çœ‹ipã€‚</p><p>å¦‚æœä½ çš„åšå®¢å‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</p><p><img src="ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•/i7eo_65772c9053e1e9b5a941fa515bc3c3f5.png" alt=""></p><p>æ£€æŸ¥gitpageçš„è®¾ç½®ï¼Œå–æ¶ˆæ‰å‹¾é€‰çš„Enforce HTTPSé€‰é¡¹ï¼Œè¿™ä¸ªè®¾ç½®æ˜¯æœ‰ç¼“å­˜çš„</p><p><img src="ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•/i7eo_ee6b38aa59be590bd6736c90911683a4.png" alt=""></p><p>å¯ä»¥åˆ‡æ¢sourceæˆ–è€…theme chooserè¿™æ ·å¯ä»¥æ¸…ç†æ‰ç¼“å­˜çš„Enforce HTTPSé€‰é¡¹ä¿¡æ¯ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://steffan.cn/2017/03/22/use-cloudflare-to-implement-HTTPS-for-GithubPages-with-custom-domain-names/" target="_blank" rel="noopener">ä½¿ç”¨Cloudflareä¸ºè‡ªå®šä¹‰åŸŸåçš„GithubPageså®ç°HTTPSåŒ–</a></p><p><a href="https://www.heartnn.com/2018/11/17/resolve-err-too-many-redirects-on-cloudflare/" target="_blank" rel="noopener">è§£å†³Cloudflareäº§ç”Ÿçš„â€œERR_TOO_MANY_REDIRECTSâ€é”™è¯¯</a></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloudflare </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æ’•å€¼ä¼ é€’&amp;å¯¹è±¡æ·±æµ…æ‹·è´</title>
      <link href="/2017/05/20/%E6%89%8B%E6%92%95%E5%80%BC%E4%BC%A0%E9%80%92.html"/>
      <url>/2017/05/20/%E6%89%8B%E6%92%95%E5%80%BC%E4%BC%A0%E9%80%92.html</url>
      
        <content type="html"><![CDATA[<h3 id="å€¼ä¼ é€’"><a href="#å€¼ä¼ é€’" class="headerlink" title="å€¼ä¼ é€’"></a>å€¼ä¼ é€’</h3><blockquote><ol><li>JS ä¸­çš„åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹å¦‚ä½•å­˜å‚¨ï¼Ÿ</li><li>å€¼ä¼ é€’çš„ç”±æ¥&amp;ä¸¾ä¾‹è¯´æ˜å€¼ä¼ é€’çš„è¿‡ç¨‹</li><li>æ‰©å±•é˜…è¯»ï¼ˆcall-by-sharingï¼‰</li></ol></blockquote><h4 id="JS-ä¸­çš„åŸºæœ¬ç±»å‹"><a href="#JS-ä¸­çš„åŸºæœ¬ç±»å‹" class="headerlink" title="JS ä¸­çš„åŸºæœ¬ç±»å‹"></a>JS ä¸­çš„åŸºæœ¬ç±»å‹</h4><p>JS ä¸­çš„åŸºæœ¬ç±»å‹åˆ†åˆ«æ˜¯ï¼šNumberã€Stringã€Booleanã€undefinedã€nullï¼›å¼•ç”¨ç±»å‹åˆ†åˆ«æ˜¯ï¼šFunctionã€Objectã€Array ç­‰ã€‚</p><h4 id="åŸºæœ¬ç±»å‹-amp-å¼•ç”¨ç±»å‹å­˜å‚¨"><a href="#åŸºæœ¬ç±»å‹-amp-å¼•ç”¨ç±»å‹å­˜å‚¨" class="headerlink" title="åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹å­˜å‚¨"></a>åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹å­˜å‚¨</h4><p>åŸºæœ¬ç±»å‹å‡å­˜å‚¨åœ¨æ ˆä¸­è€Œä¸”</p><a id="more"></a><p>åœ¨æ ˆä¸­çš„å¤§å°æ˜¯åœ¨å¼•æ“ä¸­å›ºå®šçš„ï¼Œæ‰€ä»¥åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹ï¼ˆNumber&amp;String&amp;Booleanï¼‰çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œå› ä¸ºä¸€æ—¦åŒ…è£…ç±»å‹çš„ç”Ÿå‘½å‘¨æœŸå˜é•¿ï¼Œå¯¹åº”çš„æ ˆä¸­å†…å­˜ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´å†…å­˜å‡ºç°é—®é¢˜ã€‚è€Œå¼•ç”¨ç±»å‹çš„å­˜å‚¨åˆ†ä¸ºä¿©éƒ¨åˆ†ï¼Œåœ¨æ ˆä¸­å­˜å‚¨å¯¹åº”å˜é‡çš„å¼•ç”¨ï¼ˆç†è§£ä¸ºåœ°å€å¥½ä¸€ç‚¹ï¼‰ï¼Œå †ä¸­å­˜æ”¾çœŸæ­£çš„æ•°æ®ã€‚æ¯æ¬¡éƒ½æ˜¯æ ¹æ®æ ˆä¸­çš„åœ°å€è€Œæ‰¾åˆ°å¯¹åº”çš„å †ä¸­å­˜æ”¾çš„ä½ç½®ï¼Œè¿›è¡Œè¯»å†™ã€‚ä»£ç å’Œå›¾ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pen = <span class="string">'hero'</span>;</span><br><span class="line"><span class="keyword">var</span> pencil = <span class="string">'zhonghua'</span>;</span><br><span class="line"><span class="keyword">var</span> pencil_box = &#123; <span class="attr">eraser</span>: <span class="string">'xiaoxiao'</span> &#125;;</span><br></pre></td></tr></table></figure><p><img src="/2017/05/20/æ‰‹æ’•å€¼ä¼ é€’/i7eo_13671635cc8398be0b9a302604ab2140.png" alt=""></p><p>è¿™é‡Œè¡¥å……ä¸€ä¸ªå…³äºåŒ…è£…å¯¹è±¡çš„é—®é¢˜ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="string">'test'</span>;</span><br><span class="line">test.color = <span class="string">'red'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(test.color); <span class="comment">// test.color è¾“å‡ºä»€ä¹ˆï¼Ÿ</span></span><br></pre></td></tr></table></figure><p>è¾“å‡º undefinedï¼Œå¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„ä¸»è¦åŒºåˆ«å°±æ˜¯å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåœ¨ä¸Šè¿°å·²ç»è¯´æ˜ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ä¼šå‘ç”Ÿä»€ä¹ˆï¼‰ã€‚è‡ªåŠ¨åˆ›å»ºçš„åŸºæœ¬åŒ…è£…ç±»å‹çš„å¯¹è±¡åªå­˜åœ¨äºæ‰§è¡Œä»£ç åçš„ç¬é—´ï¼Œç„¶åè¢«é”€æ¯ã€‚</p><h4 id="å€¼ä¼ é€’çš„è¿‡ç¨‹"><a href="#å€¼ä¼ é€’çš„è¿‡ç¨‹" class="headerlink" title="å€¼ä¼ é€’çš„è¿‡ç¨‹"></a>å€¼ä¼ é€’çš„è¿‡ç¨‹</h4><p><strong>ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚åŸºæœ¬ç±»å‹å€¼çš„ä¼ é€’å¦‚åŒåŸºæœ¬ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼Œè€Œå¼•ç”¨ç±»å‹å€¼çš„ä¼ é€’ï¼Œåˆ™å¦‚åŒå¼•ç”¨ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ã€‚è®¿é—®å˜é‡æœ‰æŒ‰å€¼å’ŒæŒ‰å¼•ç”¨ä¿©ç§æ–¹å¼ï¼Œè€Œå‚æ•°åªèƒ½æŒ‰å€¼ä¼ é€’ã€‚å€¼ä¼ é€’ä»£ç å’Œå›¾ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTen</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">num += <span class="number">10</span>;</span><br><span class="line"><span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> count = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> result = addTen(count);</span><br><span class="line"><span class="built_in">console</span>.log(count); <span class="comment">// 20</span></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 30</span></span><br></pre></td></tr></table></figure><p><img src="/2017/05/20/æ‰‹æ’•å€¼ä¼ é€’/i7eo_a75f9f1c713dcb5407001d3399033f27.png" alt=""></p><p>æ”¹ä¸ºå¯¹è±¡å†è¯•è¯•çœ‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">obj.name = <span class="string">'Nicholas'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line">setName(person);</span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// "Nicholas"</span></span><br></pre></td></tr></table></figure><p>å› ä¸º person æŒ‡å‘çš„å¯¹è±¡åœ¨å †å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªï¼Œè€Œä¸”æ˜¯å…¨å±€çš„ã€‚æœ‰å¾ˆå¤šäººé”™è¯¯åœ°è®¤ä¸ºï¼šåœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­ï¼ˆsetName ä¸­ï¼‰ä¿®æ”¹çš„å¯¹è±¡ä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼ˆ<code>console.log( person.name )</code>ï¼‰åæ˜ å‡ºæ¥å°±è¯´æ˜å‚æ•°æŒ‰å¼•ç”¨ä¼ é€’ã€‚ä¸ºäº†è¯æ˜å¯¹è±¡æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå†æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">obj.name = <span class="string">'Nicholas'</span>;</span><br><span class="line">obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">obj.name = <span class="string">'Greg'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">setName(person);</span><br><span class="line"><span class="built_in">console</span>.log(person.name);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™è¾“å‡ºçš„ä¼šæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ â€œNicholasâ€ï¼Ÿè¿˜æ˜¯ â€œGregâ€ï¼Ÿå¥½å§ï¼Œå…ˆæ¥ä¸€ä¸ªé”™è¯¯ç­”æ¡ˆ</p><p>â€œGregâ€ï¼ˆå³å¼•ç”¨ä¼ é€’ï¼‰ çš„å›¾ç¤ºï¼š</p><p><img src="/2017/05/20/æ‰‹æ’•å€¼ä¼ é€’/i7eo_810dcfce80fafb90c2bddbf0e69fcb31.png" alt=""></p><p>è°ƒç”¨ setName æ‰§è¡Œåˆ° <code>obj = new Object();</code> æ—¶ä¼šæ–­å¼€ person åŸå…ˆæŒ‡å‘å †ä¸­çš„è¿æ¥ï¼ˆå›¾ä¸­çº¢å‰å¤„ï¼‰ä»è€ŒæŒ‡å‘æ–°å¼€è¾Ÿçš„å†…å­˜ç©ºé—´ï¼ˆnew Object()ï¼‰ï¼Œç„¶åè®¾ç½® obj çš„ name å±æ€§ã€‚æ­£ç¡®çš„ç»“æœåº”è¯¥æ˜¯ â€œNicholasâ€ å›¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="/2017/05/20/æ‰‹æ’•å€¼ä¼ é€’/i7eo_249d6356d297448af0ba9f77d8f90c12.png" alt=""></p><p>ä¼ å…¥çš„ obj åªæ˜¯å¯¹ person å¯¹è±¡çš„å¼•ç”¨è¿›è¡Œäº†å¤åˆ¶ï¼Œæ‰§è¡Œ obj = new Object(); æ—¶åªæ˜¯è®©å¤åˆ¶åçš„ person å¯¹è±¡çš„å¼•ç”¨æŒ‡å‘äº† æ–°å¼€è¾Ÿçš„ç©ºé—´ï¼ˆnew Object()ï¼‰ã€‚</p><h3 id="å¼•ç”¨ç±»å‹çš„æ·±æµ…æ‹·è´"><a href="#å¼•ç”¨ç±»å‹çš„æ·±æµ…æ‹·è´" class="headerlink" title="å¼•ç”¨ç±»å‹çš„æ·±æµ…æ‹·è´"></a>å¼•ç”¨ç±»å‹çš„æ·±æµ…æ‹·è´</h3><p>æµ…æ‹·è´æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥åˆ©ç”¨ <code>=</code> èµ‹å€¼ï¼Œè¿™æ ·çš„è¯æ”¹å˜ä¸€ä¸ªå€¼ï¼Œå¦ä¸€ä¸ªä¹Ÿè·Ÿç€å˜åŒ–ã€‚åŸç†å°±æ˜¯å› ä¸ºè¿™æ ·ç®€å•åœ°èµ‹å€¼ç»“æœå…±ç”¨çš„æ˜¯åŒä¸€å—å†…å­˜ã€‚è¿™ä¸ªä¸ç®¡æ˜¯ Array è¿˜æ˜¯ Objectéƒ½å¾ˆç®€å•å°±ä¸ä¸¾ä¾‹äº†ã€‚åœ¨è¿™é‡Œæƒ³ç€é‡è¯´çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯å…³äº Array çš„ slice&amp;concat æ–¹æ³•ï¼Œå¾ˆå¤šå¾ˆå¤šç½‘æ–‡éƒ½æŠŠè¿™ä¿©ä¸ªæ–¹æ³•è¯´æˆäº† Array çš„æ·±æ‹·è´æ–¹æ³•ï¼Œå…¶å®è¿™æ˜¯é”™çš„ã€‚ä¸ºä»€ä¹ˆï¼Ÿè¯·çœ‹ä¸‹ä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>] ];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.slice(); <span class="comment">// æ¢æˆ var arr2 = arr1.concat(); ç»“æœä¸å˜</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1,arr2);</span><br><span class="line">arr1[<span class="number">2</span>][<span class="number">0</span>] = <span class="string">'ss'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr1,arr2); <span class="comment">// arr1[2][0] = 'ss' , arr2[2][0] = 'ss'</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯äºŒç»´æ•°ç»„ï¼Œå¦‚ä¸Šä»£ç ã€‚é€šè¿‡æŸ¥çœ‹ <code>arr1[2][0]&amp;arr2[2][0]</code> çš„ç»“æœæˆ‘ä»¬å¯ä»¥å‘ç°è¿™å¹¶ä¸æ˜¯æ·±æ‹·è´ï¼Œå› ä¸ºæ”¹å˜äº† <code>arr1[2][0]</code> å <code>arr2[2][0]</code> ä¹Ÿé¡ºåŠ¿æ”¹å˜ã€‚ä½†å¦‚æœæ˜¯ä¸€ç»´æ•°ç»„ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.slice();</span><br><span class="line"><span class="built_in">console</span>.log(arr1,arr2);</span><br><span class="line">arr1[<span class="number">0</span>] = <span class="string">'ss'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr1,arr2); <span class="comment">// arr1 = ['ss', 2, 3] , arr2 = [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>éš¾é“åªæ˜¯å› ä¸ºæ•°ç»„çš„ç»´æ•°ä¸åŒå—ï¼Ÿä¸æ˜¯çš„ï¼Œåº”è¯¥è¯´æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰æ·±å±‚æ¬¡åœ°æ˜ç™½ä»€ä¹ˆå«æµ…æ‹·è´ï¼Ÿä»€ä¹ˆå«æ·±æ‹·è´ï¼Ÿ</p><p>æµ…æ‹·è´åªå¤åˆ¶ä¸€å±‚å¼•ç”¨ç±»å‹å¯¹è±¡çš„å±æ€§ã€‚æ·±æ‹·è´ä¸ä»…å°†åŸå¯¹è±¡çš„å„ä¸ªå±æ€§é€ä¸ªå¤åˆ¶å‡ºå»ï¼Œè€Œä¸”å°†åŸå¯¹è±¡å„ä¸ªå±æ€§æ‰€åŒ…å«çš„å¯¹è±¡ä¹Ÿä¾æ¬¡é‡‡ç”¨æ·±å¤åˆ¶çš„æ–¹æ³•é€’å½’å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸Šã€‚ä»£ç å’Œå›¾ç¤ºï¼Œè¯·æŸ¥çœ‹çŸ¥ä¹ä¸Šå…³äºè¿™ä¸ªé—®é¢˜çš„å›ç­” <a href="https://www.zhihu.com/question/23031215" target="_blank" rel="noopener">javascriptä¸­çš„æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Ÿ</a><br>é€šåƒæ•°ç»„ä¸å¯¹è±¡çš„æ·±æ‹·è´ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cloneObj = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> str, newobj = obj.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> obj !== <span class="string">'object'</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">window</span>.JSON)&#123;</span><br><span class="line">    str = <span class="built_in">JSON</span>.stringify(obj), <span class="comment">//ç³»åˆ—åŒ–å¯¹è±¡</span></span><br><span class="line">    newobj = <span class="built_in">JSON</span>.parse(str); <span class="comment">//è¿˜åŸ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj)&#123;</span><br><span class="line">        newobj[i] = <span class="keyword">typeof</span> obj[i] === <span class="string">'object'</span> ?</span><br><span class="line">        cloneObj(obj[i]) : obj[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> newobj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>JSON.stringify()&amp;JSON.parse()å¯ä»¥è¿›è¡Œå¼•ç”¨å¯¹è±¡çš„æ‹·è´ï¼Œä½†æ˜¯å¯¹å¤è€æµè§ˆå™¨ï¼ˆIE6â€”IE8ï¼‰çš„å…¼å®¹æ€§é—®é¢˜å³ä½ å¾—å…ˆæŸ¥çœ‹ï¼ˆwindow.JSONï¼‰æµè§ˆå™¨æ˜¯å¦æœ‰ JSON å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰å¯ä»¥å¼•ç”¨ <a href="https://github.com/douglascrockford/JSON-js/blob/master/json2.js" target="_blank" rel="noopener">json2.js</a> æ–‡ä»¶ã€‚å¦‚æœæ•°ç»„å€¼ä¸ºå‡½æ•°ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚</p><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><p>ã€€ã€€<br>ã€€ã€€å°½ç®¡ pass-by-referenceï¼ˆå¼•ç”¨ä¼ é€’ï¼‰ä¸ pass-by-value ï¼ˆå€¼ä¼ é€’ï¼‰å­˜åœ¨äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯å¤–å›½å°å“¥æå‡ºäº†ä¸€ç§ pass-by-sharing çš„è¯´æ³•ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ã€‚<a href="http://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language" target="_blank" rel="noopener">Is JavaScript a pass-by-reference or pass-by-value language?</a></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å€¼ä¼ é€’ </tag>
            
            <tag> æ·±æ‹·è´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æ’•é—­åŒ…</title>
      <link href="/2017/05/12/%E6%89%8B%E6%92%95%E9%97%AD%E5%8C%85.html"/>
      <url>/2017/05/12/%E6%89%8B%E6%92%95%E9%97%AD%E5%8C%85.html</url>
      
        <content type="html"><![CDATA[<p>æ—¢ç„¶è¯´åˆ°äº†æ‰‹æ’•é‚£ä¹ˆæˆ‘ä»¬å°±æŒ‰ç…§ä¸‹åˆ—é¡ºåºä¸€æ­¥æ­¥æ¥çœ‹ã€‚</p><blockquote><ol><li>é—­åŒ…æ˜¯ä»€ä¹ˆ?</li><li>é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£</li><li>é—­åŒ…å¸¸ç”¨åœºæ™¯ç¤ºä¾‹</li></ol></blockquote><h3 id="é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ"></a>é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote><ol><li>é«˜ç¨‹ä¸‰ï¼šé—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚</li><li>Javasript Ninjaï¼šé—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°åœ¨åˆ›å»ºæ—¶å…è®¸è¯¥è‡ªèº«å‡½æ•°è®¿é—®å¹¶æ“ä½œè¯¥è‡ªèº«å‡½æ•°ä¹‹å¤–çš„å˜é‡æ—¶æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸã€‚</li><li>â€¦<br>æ€»ç»“ä¸€ä¸‹ï¼Œé—­åŒ…æ˜¯<strong>æœ‰æƒæ“ä½œ</strong>é™¤è‡ªå·±å¤–å‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚</li></ol></blockquote><a id="more"></a><p>è¿™é‡Œå¯¹äºä¸Šé¢çš„æ€»ç»“æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æœ‰ä¸‰ç‚¹ï¼Œä¹Ÿå°±æ˜¯é—­åŒ…çš„ä¸‰ä¸ªç‰¹ç‚¹ã€‚é¦–å…ˆé—­åŒ…æ˜¯ä¸€ä¸ª <strong>å‡½æ•°</strong>ï¼Œå…¶æ¬¡é—­åŒ…å…·æœ‰æ“ä½œï¼ˆè¯»å†™ï¼‰<strong>é™¤è‡ªå·±å¤–å‡½æ•°ä½œç”¨åŸŸ</strong>çš„èƒ½åŠ›ï¼Œæœ€åé—­åŒ…å¯ä»¥æ“ä½œï¼ˆè¯»å†™ï¼‰çš„æ˜¯ <strong>å˜é‡</strong>ã€‚</p><h3 id="é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£"><a href="#é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£" class="headerlink" title="é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£"></a>é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£</h3><p>è¿™é‡Œè¿˜æ˜¯å–å¤§å®¶å¸¸çœ‹çš„é«˜ç¨‹ä¸‰ä¸Šçš„ä¾‹å­æ¥ä¸¾ä¾‹è¯´æ˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createComparisonFunction</span> (<span class="params">propertyName</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">obj1, obj2</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> val1 = obj1[propertyName];</span><br><span class="line"><span class="keyword">var</span> val2 = obj2[propertyName];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (val1 &lt; val2) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (val1 &gt; val2) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> compareNames = createComparisonFunction(<span class="string">"name"</span>);</span><br><span class="line"><span class="keyword">var</span> result = compareName(&#123; <span class="attr">name</span>: <span class="string">"Nicholas"</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">"Greg"</span> &#125;);</span><br></pre></td></tr></table></figure><p>ä¸‹åˆ— AOï¼Œä»£è¡¨æ‰§è¡Œç¯å¢ƒä¸­åˆ›å»ºçš„ activity objectï¼Œå¯ä»¥å¯¹åº” variable objectï¼ˆVOï¼‰ æ¥è®°å¿†ã€‚æ­¤æ—¶ js å¼•æ“ä¸­çš„å¤„ç†é¡ºåºå¦‚ä¸‹å›¾ï¼š</p><p><img src="/2017/05/12/æ‰‹æ’•é—­åŒ…/i7eo_c35262cc6520474fdd31c7c3a782e043.png" alt=""></p><p> <strong>æ­¤æ—¶åŒ¿åå‡½æ•°ä¸­çš„val1/val2 è·å¾—äº† propertyName ï¼Œæ‹¥æœ‰äº†è¯»çš„èƒ½åŠ›ï¼Œæ‰€ä»¥å½¢æˆäº†é—­åŒ…ã€‚è€Œä¸”åœ¨åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒä¸­ä¸ä»…åŒ…æ‹¬äº†è‡ªå·±çš„ AO è¿˜åŒ…æ‹¬äº† createComparsonFunction æ‰§è¡Œç¯å¢ƒçš„ AOï¼ˆåˆ†åˆ«æœ‰ createComparson AO&amp;Global AOï¼‰</strong>ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/2017/05/12/æ‰‹æ’•é—­åŒ…/i7eo_eaa71c1098d03e0eb1d93ad4614d94ef.png" alt=""></p><p>ä»€ä¹ˆæ˜¯ VO? ä»€ä¹ˆæ˜¯æ‰§è¡Œç¯å¢ƒï¼Ÿå¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://i7eo.com/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡.html">æ‰‹æ’•ä½œç”¨åŸŸ&amp;ä¸Šä¸‹æ–‡</a><br>ç”±ä¸Šæˆ‘ä»¬çŸ¥é“äº† <strong>é—­åŒ…å…¶å®åœ¨å½¢æˆçš„è¿‡ç¨‹ä¸­æºå¸¦äº†åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸ</strong>ï¼Œæ­£å› ä¸ºå¦‚æ­¤ï¼Œæ‰€ä»¥é—­åŒ…æ‰æœ‰è¯»å†™é™¤è‡ªå·±å¤–å‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„èƒ½åŠ›ã€‚ä½†è¿™æ ·<strong>æ‹¥æœ‰è¿‡å¤šä½œç”¨åŸŸä¼šå ç”¨å¤§é‡å†…å­˜ </strong>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>compareNames = null;</code>æ¥æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ã€‚å¦‚æœå¤§é‡ä½¿ç”¨é—­åŒ…çš„è¯ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸ªä¸ªæ‰‹åŠ¨å»é‡Šæ”¾å†…å­˜ï¼Œæ‰€ä»¥è¿˜æ˜¯è¯·å¤§å®¶æ…ç”¨é—­åŒ…ã€‚</p><h3 id="é—­åŒ…åº”ç”¨åœºæ™¯"><a href="#é—­åŒ…åº”ç”¨åœºæ™¯" class="headerlink" title="é—­åŒ…åº”ç”¨åœºæ™¯"></a>é—­åŒ…åº”ç”¨åœºæ™¯</h3><h4 id="ç§æœ‰å˜é‡-â€”â€”-é™åˆ¶å˜é‡ä½œç”¨åŸŸ"><a href="#ç§æœ‰å˜é‡-â€”â€”-é™åˆ¶å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="ç§æœ‰å˜é‡ â€”â€” é™åˆ¶å˜é‡ä½œç”¨åŸŸ"></a>ç§æœ‰å˜é‡ â€”â€” é™åˆ¶å˜é‡ä½œç”¨åŸŸ</h4><p>è¯´å¾—ç®€å•ç‚¹å°±æ˜¯æ¨¡æ‹Ÿå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„å˜é‡ä¿®é¥°ç¬¦ privateï¼Œç»™å˜é‡å¢åŠ æƒé™æ§åˆ¶ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ninja</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> feints = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.getFeints = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> feints;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">this</span>.feint = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">feints++;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ninja = <span class="keyword">new</span> Ninja();</span><br><span class="line">ninja.feint();</span><br><span class="line"><span class="built_in">console</span>.log(ninja.getFeints() == <span class="number">1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä½¿å˜é‡ feints ç§æœ‰ï¼Œè®©å¤–éƒ¨ä¸èƒ½ç›´æ¥è®¿é—®ã€‚å¦‚æœæƒ³è®¿é—®åªèƒ½é€šè¿‡ getFeints æ–¹æ³•è®¿é—®ï¼Œè¿™é‡Œçš„ getFeints æ–¹æ³•å³å½¢æˆäº†é—­åŒ…ï¼Œå› ä¸ºåœ¨è¿™ä¸ªå‡½æ•°ä¸­æ‹¥æœ‰è®¿é—® feints å˜é‡çš„èƒ½åŠ›ã€‚è¿™é‡Œå¦‚æœå°†  <code>var feints = 0;</code> æ”¹ä¸º <code>this.feints = 0;</code> å¤–éƒ¨å³å¯è®¿é—® =ã€‚= èªæ˜çš„ä½ ä¸€å®šä¸€çœ¼å°±çœ‹å‡ºäº†ä¸ºä»€ä¹ˆå§ï¼Ÿå°±æ˜¯å› ä¸ºä¸Šä¸‹æ–‡ï¼å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç«  <a href="https://i7eo.com/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡.html">æ‰‹æ’•ä½œç”¨åŸŸ&amp;ä¸Šä¸‹æ–‡</a></p><h4 id="å›è°ƒï¼ˆcallbackï¼‰ä¸è®¡æ—¶å™¨ï¼ˆtimerï¼‰"><a href="#å›è°ƒï¼ˆcallbackï¼‰ä¸è®¡æ—¶å™¨ï¼ˆtimerï¼‰" class="headerlink" title="å›è°ƒï¼ˆcallbackï¼‰ä¸è®¡æ—¶å™¨ï¼ˆtimerï¼‰"></a>å›è°ƒï¼ˆcallbackï¼‰ä¸è®¡æ—¶å™¨ï¼ˆtimerï¼‰</h4><p>æ¥çœ‹ä¸€ä¸ªå›è°ƒçš„ä¾‹å­ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> elem = $(<span class="string">'btnObject'</span>);</span><br><span class="line">elem.html(<span class="string">"Loading ..."</span>);</span><br><span class="line"></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">url: <span class="string">'test.html'</span>,</span><br><span class="line">success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">elem.html(data);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ success å›è°ƒä¸­æœ‰èƒ½åŠ›æ“ä½œ elem ï¼Œå³å½¢æˆäº†é—­åŒ…ã€‚è®¡æ—¶å™¨ç±»ä¼¼ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»å†™å†™ç±»ä¼¼çš„ã€‚</p><h4 id="å³æ—¶å‡½æ•°ä¸é—­åŒ…çš„ç»„åˆ"><a href="#å³æ—¶å‡½æ•°ä¸é—­åŒ…çš„ç»„åˆ" class="headerlink" title="å³æ—¶å‡½æ•°ä¸é—­åŒ…çš„ç»„åˆ"></a>å³æ—¶å‡½æ•°ä¸é—­åŒ…çš„ç»„åˆ</h4><p>ã€€ã€€ç”±äºå³æ—¶å‡½æ•°æ˜¯ç«‹å³æ‰§è¡Œï¼Œ<strong>å…¶å†…éƒ¨æ‰€æœ‰çš„å‡½æ•°ã€æ‰€æœ‰çš„å˜é‡éƒ½å±€é™äºå…¶å†…éƒ¨ä½œç”¨åŸŸ&gt;ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å³æ—¶å‡½æ•°åˆ›å»ºä¸€ä¸ªä¸´æ—¶ä½œç”¨åŸŸï¼Œç”¨äºå­˜å‚¨æ•°æ®çŠ¶æ€</strong><br>ã€‚æƒ³èµ·ä¸€åˆ°ç»å…¸çš„ JSé¢˜ç›®ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFuntcions</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">result[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆ result æ€»æ˜¯10ï¼Ÿå› ä¸ºæ¯ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­éƒ½ä¿å­˜ç€createFunction çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥ä»–ä»¬å¼•ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå˜é‡ i ã€‚å½“ createFunction è¿”å›å i çš„å€¼ä¸º 10 ï¼Œæ­¤æ—¶æ¯ä¸ªå‡½æ•°éƒ½å¼•ç”¨ç€ä¿å­˜å˜é‡ i çš„åŒä¸€ä¸ªå˜é‡å¯¹è±¡ï¼Œæ‰€ä»¥æ¯ä¸ªå‡½æ•°å†…éƒ¨ i çš„å€¼éƒ½æ˜¯10ã€‚(æ‰€æœ‰å‡½æ•°éƒ½æ‹¥æœ‰çš„æ˜¯åŒä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸï¼Œè¦æƒ³ä½¿æ¯ä¸€ä¸ªé—­åŒ…ä¿ç•™å½“æ—¶çš„å¯¹içš„å¼•ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸€ä¸ªé—­åŒ…æ–°å»ºä¸€ä¸ªä½œç”¨åŸŸã€‚)å¯ä»¥ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°&amp;letåˆ›å»ºå‡½æ•°ä½œç”¨åŸŸ&amp;å—çº§ä½œç”¨åŸŸæ”¹è¿›ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFuntcions</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">result[i] = (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">result[i] = <span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—­åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡</title>
      <link href="/2017/05/10/%E6%89%8B%E6%92%95%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E4%B8%8A%E4%B8%8B%E6%96%87.html"/>
      <url>/2017/05/10/%E6%89%8B%E6%92%95%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E4%B8%8A%E4%B8%8B%E6%96%87.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã€€å…ˆæ¥æŠ›å‡ºç»“è®ºï¼š</p><ol><li>ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡è‚¯å®š<strong>ä¸æ˜¯ä¸€å›äº‹</strong>ã€‚</li><li>ä½œç”¨åŸŸæ˜¯<strong>ç”± function è¿›è¡Œå£°æ˜çš„</strong>è€Œéä»£ç å—ï¼ˆ{ }ï¼‰ã€‚</li><li>é™¤äº†å…¨å±€ä½œç”¨åŸŸï¼Œå‡½æ•°åªè¦è¢«å£°æ˜ï¼ˆåˆ›å»ºäº†ï¼‰ï¼Œå®ƒå°±æœ‰äº†ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚</li><li>æˆ‘ä»¬<strong>å¸¸è¯´çš„ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯ this</strong>ï¼Œè¿™é‡Œå…¶å®å¯¹ this æ›´å‡†ç¡®çš„è¯´æ³•åº”è¯¥è¢«ç§°ä¸º<strong>å‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆfunction contextï¼‰</strong>ã€‚</li><li>å„å¤§ç½‘æ–‡ä¸éƒ¨åˆ†ä¹¦ç±ä¸­æ‰€è®²è§£çš„ä¸Šä¸‹æ–‡ï¼Œå…¶å®æ˜¯<strong>æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰æœ‰çš„åœ°æ–¹ä¹Ÿç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒ</strong>ã€‚è¿™ä¸ªæ‰§è¡Œç¯å¢ƒ<strong>ä¸ä»…ç¡®å®šäº† this ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰ï¼Œè¿˜ç¡®å®šäº†å°†å„ä¸ªä½œç”¨åŸŸè”ç³»èµ·æ¥çš„ä½œç”¨åŸŸé“¾</strong>ã€‚</li><li><strong>æ‰§è¡Œç¯å¢ƒå¹¶ä¸æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡</strong>ï¼Œè€Œæ˜¯ç”¨æ¥ç¡®å®šå®ƒçš„æŒ‡å‘ã€‚</li><li>æœ¬æ–‡ä¸­å°†é‡‡ç”¨é«˜ç¨‹3çš„è¯´æ³• â€” æ‰§è¡Œç¯å¢ƒã€‚</li></ol></blockquote><h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p>åœ¨ Javascript ä¸­ï¼Œä½œç”¨åŸŸæ˜¯ç”± function å£°æ˜çš„ï¼Œè€Œä¸æ˜¯ä»£ç å—ã€‚å£°æ˜çš„ä½œç”¨åŸŸåˆ›å»ºäºä»£ç å—ï¼Œä½†ä¸ç»ˆäºä»£ç å—ï¼ˆå…¶ä»–è¯­è¨€ç»ˆäºä»£ç å—ï¼‰ã€‚æŸ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>) &#123;</span><br><span class="line"> ã€€<span class="keyword">var</span> x = <span class="string">'123'</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> alert(x);</span><br></pre></td></tr></table></figure><p>åœ¨å…¶å®ƒè¯­è¨€ä¸­ï¼Œx ç»ˆç»“äºå¤§æ‹¬å·å…³é—­å¤„ï¼Œalert å¼¹å‡º undefinedã€‚</p><a id="more"></a><p>ä½†æ˜¯è¿™é‡Œè¿˜æ˜¯ä¼šå‡ºç° 123ï¼Œè¿™æ˜¯å› ä¸º<strong>Javascript ä¸­å¹¶æ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„æ¦‚å¿µ</strong>ã€‚è¿™æ ·çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯å…¶ä¸­è¿˜æ˜¯æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ã€‚å¦‚ä¸‹ï¼š</p><blockquote><ol><li>å˜é‡å£°æ˜çš„ä½œç”¨åŸŸå¼€å§‹äºå£°æ˜å¼€å§‹çš„åœ°æ–¹ï¼Œç»“æŸäºæ‰€åœ¨å‡½æ•°çš„ç»“å°¾ã€‚</li><li>å‡½æ•°å¯ä»¥åœ¨å…¶ä½œç”¨åŸŸèŒƒå›´å†…è¢«æå‰å¼•ç”¨ï¼ˆè¢«æå‡ï¼‰ï¼Œä½†å˜é‡ä¸è¡Œã€‚</li><li>å¯¹äºä½œç”¨åŸŸå£°æ˜ï¼Œå…¨å±€ä½œç”¨åŸŸå°±åƒä¸€ä¸ªåŒ…å«é¡µé¢æ‰€æœ‰ä»£ç çš„è¶…å¤§å‹å‡½æ•°ã€‚</li></ol></blockquote><p><strong>å‡½æ•°æå‡çš„è¯¦ç»†åŸå› å‚ç…§ä¸‹è¿°çš„ </strong>ä¸‰ã€æ‰§è¡Œç¯å¢ƒ<strong> ä¸­çš„å†…å®¹</strong>ã€‚</p><p>æ¥çœ‹ä¸‹é¢ä»£ç ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_8f9183aeaa7a8ac5b3d706776260afc3.png" alt=""></p><p>å¯¹äºè¿™æ®µä»£ç ï¼Œæ‰§è¡Œè°ƒç”¨ outer() æ—¶ï¼Œouter å‡½æ•°ä¸­æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œä»£ç ï¼Œ<strong>å½“è¿›å…¥ç¬¬2è¡Œæ—¶ï¼ˆåœ¨ outer ä¸­ï¼Œå˜é‡ a å£°æ˜å‰ï¼‰ï¼Œinner å·²ç»åœ¨ä½œç”¨åŸŸï¼ˆscopeï¼‰ä¸­ï¼Œæ­¤æ—¶ä½œç”¨åŸŸä¸­æœ‰ outer () ä¸ inner()</strong>ã€‚ä¹‹åæ‰§è¡Œç¬¬ 2 è¡Œï¼Œç°åœ¨ a ä¹Ÿåœ¨ scope ä¸­ã€‚å½“è¿›å…¥ç¬¬ 4 è¡Œæ—¶ï¼ˆåœ¨ outer ä¸­ï¼Œinner() ä¸ a ä¹‹åï¼‰ï¼Œç”±äºå‡½æ•°å£°æ˜æå‰è¿™é‡Œç¬¬ 3 è¡Œç›¸å½“äºå·²ç»æå‰æ‰§è¡Œï¼Œæ‰€ä»¥è¶Šè¿‡ç¬¬ 3 è¡Œï¼Œç›´æ¥æ‰§è¡Œç¬¬ 4 è¡Œã€‚åé¢è¿‡ç¨‹ä»¥æ­¤ç±»æ¨ã€‚</p><h3 id="ä¸Šä¸‹æ–‡ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„-thisï¼‰"><a href="#ä¸Šä¸‹æ–‡ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„-thisï¼‰" class="headerlink" title="ä¸Šä¸‹æ–‡ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„ thisï¼‰"></a>ä¸Šä¸‹æ–‡ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„ thisï¼‰</h3><p>åœ¨å¼€å§‹ä¸Šä¸‹æ–‡ä¹‹å‰æˆ‘ä»¬éœ€è¦æ˜ç™½æˆ‘ä»¬ç ”ç©¶çš„ <strong>this æ˜¯ä»å“ªé‡Œæ¥çš„</strong>ã€‚å…¶å®è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œåœ¨æˆ‘ä»¬<strong>è°ƒç”¨å‡½æ•°çš„æ—¶å€™å…³æ³¨ç‚¹æ€»æ˜¯åœ¨å¯ä»¥çœ‹åˆ°çš„å‡½æ•°å‚æ•°ä¸Šé¢</strong>ï¼Œè€Œæ²¡æœ‰æ³¨æ„åˆ°ä¿©ä¸ªéšå¼ï¼ˆimplicitï¼‰å‚æ•°â€”â€” arguments ä¸ thisã€‚arguments å‚æ•°æ˜¯ä¼ é€’ç»™å‡½æ•°çš„ä¸€ä¸ªæ‰€æœ‰å‚æ•°çš„é›†åˆï¼Œå®ƒæœ¬è´¨ä¸æ˜¯æ•°ç»„ä½†æ˜¯æœ‰ length å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å–œæ¬¢å«å®ƒç±»æ•°ç»„ã€‚<strong>this å‚æ•°å¼•ç”¨äº†ä¸è¯¥å‡½æ•°è°ƒç”¨è¿›è¡Œéšå¼å…³è”çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ï¼‰ï¼Œè¢«ç§°ä¸ºå‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆfunction contextï¼‰</strong>ã€‚</p><p><strong>ä¸åŒçš„æ–¹æ³•è¿›è¡Œå‡½æ•°è°ƒç”¨å†³å®šäº†å‡½æ•°ä¸Šä¸‹æ–‡çš„ä¸åŒ</strong>ã€‚æ€»ç»“å¦‚ä¸‹ï¼š</p><blockquote><ol><li>ä½œä¸ºæ™®é€šå‡½æ•°è¿›è¡Œè°ƒç”¨æ—¶ï¼Œå…¶ä¸Šä¸‹æ–‡æ˜¯å…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰ã€‚</li><li>ä½œä¸ºæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œå…¶ä¸Šä¸‹æ–‡æ˜¯æ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡ã€‚</li><li>ä½œä¸ºæ„é€ å™¨è¿›è¡Œè°ƒç”¨æ—¶ï¼Œå…¶ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªæ–°åˆ†é…çš„å¯¹è±¡ã€‚</li><li>é€šè¿‡å‡½æ•°çš„ apply/call æ–¹æ³•è¿›è¡Œè°ƒç”¨æ—¶ï¼Œä¸Šä¸‹æ–‡å¯ä»¥è®¾ç½®æˆä»»æ„å€¼ã€‚</li></ol></blockquote><p>å¯¹äºä¸Šè¿°çš„ 1ã€2 ç‚¹æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_ca9ce4132a8ca343821d2a3e65aac5d5.png" alt=""></p><p>1-4 è¡Œä»£ç ï¼Œéƒ½æ˜¯<strong>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œä¸Šä¸‹æ–‡ä¸ºwindow</strong>ã€‚6-12 è¡Œä»£ç ï¼Œéƒ½æ˜¯<strong>åšä¸ºæ–¹æ³•è°ƒç”¨ï¼Œä¸Šä¸‹æ–‡æ˜¯æ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡ï¼ˆninja1ã€ninja2ï¼‰</strong>ã€‚å¯¹äºç¬¬<br> 3 ç‚¹æˆ‘ä»¬æ¥çœ‹ä¸‹åˆ—ä»£ç ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_6e653440daf608d20a7651f8b5b26327.png" alt=""></p><p>è¿™æ—¶çš„<strong>ä¸Šä¸‹æ–‡æŒ‡æ–°åˆ›å»ºçš„ ninja </strong>ï¼Œé€šè¿‡ç¬¬ 8 è¡Œä»£ç æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç° skulk æ–¹æ³•è¿”å›çš„æ˜¯æ„é€ å™¨å¯¹è±¡æœ¬èº«ã€‚å¯¹äºç¬¬ 4 ç‚¹æˆ‘ä»¬æ¥çœ‹ä¸‹åˆ—ä»£ç ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_522ab435a82632051edcfa0d3b2f341e.png" alt=""></p><p><strong>é€šè¿‡ apply&amp;call æˆ‘ä»¬å¯ä»¥åˆ†åˆ«å°†ä¸Šä¸‹æ–‡ä» juggle åˆ‡æ¢è‡³ ninja1&amp;ninja2</strong>ã€‚</p><p>å¯¹äº apply&amp;call æˆ‘ä»¬å¾ˆå¸¸ç”¨ï¼Œæ‰€ä»¥æ‰©å±•ä¹Ÿå¾ˆå¤šã€‚ä¸‹é¢åˆ—å‡ºä¸€ä¸ªè‡ªå®šä¹‰ forEach å‡½æ•°ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_7c74ee279add6ac0b6ebfaf081005452.png" alt=""></p><p>è¿™ä¸ªä¾‹å­ï¼Œåˆ—å‡ºäº†<strong>å¦‚ä½•åœ¨å›è°ƒä¸­æŒ‡å®šä¸Šä¸‹æ–‡</strong>ï¼Œè€Œåœ¨è¿™é‡Œçš„9-12è¡Œæˆ‘ä»¬ä¹ŸéªŒè¯äº†å¦‚ä¸Šæ‰€è¯´çš„ï¼Œthis ï¼ˆä¸Šä¸‹æ–‡ï¼‰æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å› ä¸ºåœ¨ç¬¬ 3 è¡Œä»£ç å¤„ï¼Œæˆ‘ä»¬ä¼ å…¥çš„ <code>List[i]</code> çš„ç±»å‹æ˜¯ stringï¼Œä½†æ˜¯ç»è¿‡ call å°†å…¶æŒ‡å®šæˆä¸Šä¸‹æ–‡å¯¹è±¡ååœ¨ç¬¬ 10 è¡Œæˆ‘ä»¬æ¯”è¾ƒæ—¶å‘ç° <code>this === heroList[index]</code> ç»“æœä¸º falseï¼Œç¬¬ 11 è¡ŒéªŒè¯äº†ä¸Šä¸‹æ–‡ç¡®å®æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ª String å¯¹è±¡å…·ä½“ä¿¡æ¯å°±ä¸å†æ·±ç©¶äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æ‰“å° this å‡ºæ¥çœ‹çœ‹ã€‚</p><h3 id="æ‰§è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡-æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰"><a href="#æ‰§è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡-æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰" class="headerlink" title="æ‰§è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰"></a>æ‰§è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰</h3><p>ã€€ã€€è¿™é‡Œå†æ¬¡é‡æ–°å£°æ˜ï¼Œæ‰§è¡Œç¯å¢ƒå¹¶ä¸æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯ thisï¼ˆå‡½æ•°ä¸Šä¸‹æ–‡ï¼‰ã€‚è¯¥æ‰§è¡Œç¯å¢ƒç¡®å®šäº†ä½œç”¨åŸŸé“¾ï¼ˆscope chainï¼‰ä¸ this ã€‚æ¥ä¸€æ®µé«˜ç¨‹ä¸‰ä¸­å¯¹äºæ‰§è¡Œç¯å¢ƒçš„ä»‹ç»å¦‚ä¸‹ï¼š</p><blockquote><ol><li>æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼Œä¸ºç®€å•èµ·è§ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºâ€œç¯å¢ƒâ€ï¼‰æ˜¯Javascriptä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡å’Œå‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œå†³å®šäº†å®ƒä»¬å„è‡ªçš„è¡Œä¸ºã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œä½†è§£æå™¨åœ¨å¤„ç†æ•°æ®æ—¶ä¼šåœ¨åå°ä½¿ç”¨å®ƒã€‚</li><li>å…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å›´çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒã€‚æ ¹æ®ECMAScript å®ç°æ‰€åœ¨å®¿ä¸»ç¯å¢ƒä¸åŒï¼Œè¡¨ç¤ºæ‰§è¡Œç¯å¢ƒçš„å¯¹è±¡ä¹Ÿä¸ä¸€æ ·ã€‚åœ¨Webæµè§ˆå™¨ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒè¢«è®¤ä¸ºæ˜¯ window å¯¹è±¡ï¼Œå› æ­¤æ‰€æœ‰å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½æ˜¯ä½œä¸º window å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•åˆ›å»ºçš„ã€‚æŸä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥ç¯å¢ƒè¢«é”€æ¯ï¼Œä¿å­˜åœ¨å…¶ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å®šä¹‰ä¹Ÿéšä¹‹é”€æ¯ï¼ˆå…¨å±€æ‰§è¡Œç¯å¢ƒç›´åˆ°åº”ç”¨ç¨‹åºé€€å‡ºâ€”â€”ä¾‹å¦‚å…³é—­ç½‘é¡µæˆ–æµè§ˆå™¨â€”â€”æ—¶æ‰ä¼šè¢«é”€æ¯ï¼‰ã€‚</li><li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒã€‚å½“æ‰§è¡Œç¯å¢ƒæµå…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ã€‚è€Œåœ¨å‡½æ•°æ‰§è¡Œä¹‹åï¼Œæ ˆå°†å…¶ç¯å¢ƒå¼¹å‡ºï¼ŒæŠŠæ§åˆ¶æƒè¿”å›ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚ECMAScript ç¨‹åºä¸­çš„æ‰§è¡Œæµæ­£åœ¨ç”±è¿™ä¸ªæ–¹ä¾¿çš„æœºåˆ¶æ§åˆ¶ç€ã€‚</li></ol></blockquote><p>ç®€æ´æ˜äº†ï¼Œè¿™é‡Œå¯¹äºçº¯æ–‡å­—çœ‹ç€å¯èƒ½æ¯”è¾ƒè‹¦æ¶©ã€‚æ¥ä¸ªå›¾ç‰‡ä»¥åŠä¾‹å­ï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€æ¶ˆåŒ–ã€‚ä¸‹é¢å…ˆç»™å‡º js å¼•æ“æ‰§è¡Œå‡½æ•°æ—¶çš„è¿›å‡ºæ ˆå›¾ã€‚</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_61842777393ab2c3694af41d4b8c35ad.png" alt=""></p><p>æ ¹æ®è¿™å¹…å›¾ï¼Œå¤§å®¶ç»“åˆä¸‹é¢ä»£ç ä¸ executionContextAction.gif å¯ä»¥å¾ˆæ¸…æ¥šçš„ç†è§£jsçº¿ç¨‹å·¥ä½œçš„æ–¹å¼ã€‚ä»£ç ç‰‡æ®µï¼š<br>ã€€ã€€<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (i === <span class="number">3</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span> &#123;</span><br><span class="line">       foo(++i);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;(<span class="number">0</span>));</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªä»£ç å¯¹åº”å¼•æ“å¤„ç†å‡½æ•°çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/excstack.gif" alt="executionContextAction.gif"></p><p>ã€€ã€€<br>åœ¨ææ¸…æ¥šäº†å¼•æ“å·¥ä½œçš„æ–¹å¼åï¼Œæˆ‘ä»¬è¿˜å¾—çŸ¥é“æ‰§è¡Œç¯å¢ƒåœ¨å»ºç«‹çš„æ—¶å€™å‘ç”Ÿçš„è¯¦ç»†è¿‡ç¨‹ã€‚<strong>å»ºç«‹é˜¶æ®µä»¥åŠä»£ç æ‰§è¡Œé˜¶æ®µçš„è¯¦ç»†åˆ†æå¦‚ä¸‹</strong>ï¼š</p><p>ç¡®åˆ‡åœ°è¯´ï¼Œ<strong>æ‰§è¡Œç¯å¢ƒæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“è¢«çœŸæ­£æ‰§è¡Œä»¥å‰æ‰€åˆ›å»ºçš„</strong>ã€‚å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå°±å¤„äºç¬¬ä¸€ä¸ªé˜¶æ®µâ€”â€”å»ºç«‹é˜¶æ®µã€‚è¿™ä¸ªæ—¶åˆ»ï¼Œå¼•æ“ä¼šæ£€æŸ¥å‡½æ•°ä¸­çš„å‚æ•°ï¼Œå£°æ˜çš„å˜é‡ä»¥åŠå†…éƒ¨å‡½æ•°ï¼Œç„¶ååŸºäºè¿™äº›ä¿¡æ¯å»ºç«‹æ‰§è¡Œç¯å¢ƒä¸­ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒvariableObject å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ï¼Œä»¥åŠ this æ‰€æŒ‡å‘çš„å¯¹è±¡éƒ½ä¼šè¢«ç¡®å®šã€‚</p><p>å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ‰¾åˆ°å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„è°ƒç”¨å‡½æ•°çš„ä»£ç </li><li>åœ¨æ‰§è¡Œè¢«è°ƒç”¨çš„å‡½æ•°ä½“ä¸­çš„ä»£ç ä»¥å‰ï¼ˆç¼–è¯‘é˜¶æ®µï¼‰ï¼Œå¼€å§‹åˆ›å»ºæ‰§è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰</li><li>è¿›å…¥ç¬¬ä¸€ä¸ªé˜¶æ®µ-å»ºç«‹é˜¶æ®µ:</li></ol><ul><li><p>å»ºç«‹variableObjectå¯¹è±¡:</p><ul><li><p>å»ºç«‹argumentså¯¹è±¡ï¼Œæ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ï¼Œå»ºç«‹è¯¥å¯¹è±¡ä¸‹çš„å±æ€§ä»¥åŠå±æ€§å€¼</p></li><li><p>ç¡®å®šå‚æ•°å˜é‡ï¼Œè‹¥æœ‰é‡åï¼Œä»¥å·²æœ‰çš„å˜é‡ä¸ºå‡†ã€‚ç”¨å·²æœ‰çš„å˜é‡å»è¦†ç›–å‚æ•°å˜é‡</p></li><li><p>æ£€æŸ¥å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å‡½æ•°å£°æ˜ï¼š</p><ol><li>æ¯æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œå°±åœ¨variableObjectä¸‹é¢ç”¨å‡½æ•°åå»ºç«‹ä¸€ä¸ªå±æ€§ï¼Œå±æ€§å€¼å°±æ˜¯æŒ‡å‘è¯¥å‡½æ•°åœ¨å†…å­˜ä¸­çš„åœ°å€çš„ä¸€ä¸ªå¼•ç”¨ã€‚</li><li>å¦‚æœä¸Šè¿°å‡½æ•°åå·²ç»å­˜åœ¨äºvariableObjectä¸‹ï¼Œé‚£ä¹ˆå¯¹åº”çš„å±æ€§å€¼ä¼šè¢«æ–°çš„å¼•ç”¨æ‰€è¦†ç›–ã€‚</li></ol></li><li><p>æ£€æŸ¥å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡å£°æ˜ï¼š</p><ol><li>æ¯æ‰¾åˆ°ä¸€ä¸ªå˜é‡çš„å£°æ˜ï¼Œå°±åœ¨variableObjectä¸‹ï¼Œç”¨å˜é‡åå»ºç«‹ä¸€ä¸ªå±æ€§ï¼Œå±æ€§å€¼ä¸ºundefinedã€‚</li><li>å¦‚æœè¯¥å˜é‡åå·²ç»å­˜åœ¨äºvariableObjectå±æ€§ä¸­ï¼Œç›´æ¥è·³è¿‡ï¼ˆé˜²æ­¢æŒ‡å‘å‡½æ•°çš„å±æ€§çš„å€¼è¢«å˜é‡å±æ€§è¦†ç›–ä¸ºundefinedï¼‰ï¼ŒåŸå±æ€§å€¼ä¸ä¼šè¢«ä¿®æ”¹ã€‚</li></ol></li></ul></li><li><p>åˆå§‹åŒ–ä½œç”¨åŸŸé“¾</p></li><li>ç¡®å®šä¸Šä¸‹æ–‡ â€” thisï¼ˆç¡®å®šæŒ‡å‘ï¼‰</li></ul><ol start="4"><li>ä»£ç æ‰§è¡Œé˜¶æ®µ: æ‰§è¡Œå‡½æ•°ä½“ä¸­çš„ä»£ç ï¼Œä¸€è¡Œä¸€è¡Œåœ°è¿è¡Œä»£ç ï¼Œç»™variableObjectä¸­çš„å˜é‡å±æ€§èµ‹å€¼ã€‚</li></ol><p>æ¥ä¸ªä¾‹å­æ¥æ¨¡æ‹Ÿå¼•æ“çš„æ‰§è¡Œè¿‡ç¨‹ã€‚å¦‚ä¸‹ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_67e7e6b9af04efbd55c44c864ef37a5c.png" alt=""></p><p>åœ¨è°ƒç”¨ testEC(11) æ—¶ï¼ŒçœŸæ­£æ‰§è¡Œ testEC(11) ä¹‹å‰ï¼Œå»ºç«‹ä»¥ä¸‹é˜¶æ®µï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_827811b5802a812ea11c7cd06053b9a1.png" alt=""></p><p>ç”±æ­¤å¯è§ï¼Œåœ¨å»ºç«‹é˜¶æ®µï¼Œé™¤äº†argumentsï¼Œå‡½æ•°çš„å£°æ˜ï¼Œä»¥åŠå‚æ•°è¢«èµ‹äºˆäº†å…·ä½“çš„å±æ€§å€¼ï¼Œå…¶å®ƒçš„å˜é‡å±æ€§é»˜è®¤çš„éƒ½æ˜¯undefinedã€‚ä¸€æ—¦ä¸Šè¿°å»ºç«‹é˜¶æ®µç»“æŸï¼Œå¼•æ“å°±ä¼šè¿›å…¥ä»£ç æ‰§è¡Œé˜¶æ®µã€‚å¦‚ä¸‹ï¼š</p><p><img src="/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡/i7eo_e83d63e89160791e2682a63a27f83b3f.png" alt=""></p><p>é‚£ä¹ˆé€šè¿‡ä¸Šé¢ä¾‹å­ä¸­çš„ä¸‰å¼ å›¾ç‰‡æˆ‘ä»¬èƒ½å¦å‘ç°åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­å…³äºæå‡çš„ä¸€äº›ç§˜å¯†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼åœ¨ testEC-prev.png ä¸­ c å‡½æ•° æ˜¯è¢«æå‡çš„ï¼å› ä¸ºåœ¨å»ºç«‹é˜¶æ®µ<code>c: pointer to function c ()</code>ï¼Œè€Œ b ä¸ a å‡æ˜¯ undefinedï¼Œç”±å›¾ä¸Šæ˜¾è€Œæ˜“è§ã€‚</p><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><h4 id="æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸçš„å…³ç³»"><a href="#æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸçš„å…³ç³»" class="headerlink" title="æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸçš„å…³ç³»"></a>æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸçš„å…³ç³»</h4><ul><li>åœ¨æ‰§è¡Œç¯å¢ƒä¸­é¦–å…ˆæˆ‘ä»¬å°†å‚æ•°ã€å˜é‡ç­‰éƒ½å­˜åœ¨ VO<br>ï¼ˆå˜é‡å¯¹è±¡ä¸­ï¼‰ï¼Œè¿™æ˜¯ç¡®ç¡®å®å®å­˜åœ¨çš„ï¼Œåªèƒ½ä¾›å†…éƒ¨ä½¿ç”¨ã€‚</li><li>æ‰§è¡Œç¯å¢ƒåªåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»º</li><li>æ‰§è¡Œå‡½æ•°æ—¶ VO -&gt; AOï¼ˆæ´»åŠ¨å¯¹è±¡ï¼‰ è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨äº†</li><li>ä¸€ä¸ªä½œç”¨åŸŸä¸‹å¯ä»¥æ²¡æœ‰æ‰§è¡Œç¯å¢ƒï¼ˆæœªè¢«è°ƒç”¨ï¼‰ï¼›å¯ä»¥æœ‰1ä¸ªï¼›è¿˜å¯ä»¥æœ‰è‹¥å¹²ä¸ªï¼ˆå­˜åœ¨é—­åŒ…ï¼‰</li></ul><h4 id="å¦‚ä½•åœ¨-callback-ä¸­ç»‘å®šthis"><a href="#å¦‚ä½•åœ¨-callback-ä¸­ç»‘å®šthis" class="headerlink" title="å¦‚ä½•åœ¨ callback ä¸­ç»‘å®šthis"></a>å¦‚ä½•åœ¨ callback ä¸­ç»‘å®šthis</h4><p>åœ¨ div èŠ‚ç‚¹äº‹ä»¶å‡½æ•°å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªå±€éƒ¨çš„ callback æ–¹æ³•ï¼Œcallback è¢«ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨æ—¶ï¼Œcallback å†…éƒ¨çš„ this æŒ‡å‘äº† windowï¼Œä½†æˆ‘ä»¬å¾€å¾€æƒ³è®©å®ƒæŒ‡å‘è¯¥ div èŠ‚ç‚¹ã€‚å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span>I am a div!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.id = <span class="string">'window'</span>;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'test'</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="keyword">this</span>.id); <span class="comment">// test</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="keyword">this</span>.id); <span class="comment">// window</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">    callback();</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡ä¿å­˜ div èŠ‚ç‚¹çš„å¼•ç”¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'test'</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// ä¿å­˜ div èŠ‚ç‚¹å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(that.id); <span class="comment">// test</span></span><br><span class="line">    &#125;;</span><br><span class="line">    callback();</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">utf-8</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Events in JavaScript: Removing event listeners<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"element"</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://code.jquery.com/jquery-1.10.2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">//var element = document.getElementById('element');</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> element = $(<span class="string">'#element'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> user = &#123;</span></span><br><span class="line"><span class="javascript"> firstname: <span class="string">'Bob'</span>,</span></span><br><span class="line"><span class="javascript"> greeting: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">   alert(<span class="string">'My name is '</span> + <span class="keyword">this</span>.firstname);</span></span><br><span class="line"><span class="undefined"> &#125;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">bind</span> (<span class="params">obj, name</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">return</span> obj[name].apply(obj);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript"><span class="comment">// Attach user.greeting as a callback</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//element.addEventListener('click', bind(user, 'greeting'));</span></span></span><br><span class="line"><span class="javascript">element.on(<span class="string">'click'</span>, user.greeting.bind(user))</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­æ˜¯å‘Šè¯‰æˆ‘ä»¬æ— è®ºåŸç”Ÿjsè¿˜æ˜¯jqueryåœ¨ä½¿ç”¨äº‹ä»¶å‡½æ•°è°ƒç”¨æ‰§è¡Œæ–¹æ³•æ—¶å‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆthisï¼‰é»˜è®¤æŒ‡å½“å‰è·å–çš„domå…ƒç´ ï¼ˆjqå¯¹è±¡ï¼‰æ‰€ä»¥å½“æˆ‘ä»¬å¸Œæœ›å½“å‰å‡½æ•°ä¸Šä¸‹æ–‡æŒ‡å‘useræ—¶æˆ‘ä»¬åº”è¯¥æ”¹å˜å‡½æ•°ä¸Šä¸‹æ–‡å³æ”¹å˜thisçš„æŒ‡å‘ã€‚æ”¹å˜çš„æ–¹æ³•æœ‰ä¸‰ç§apply/call/bindã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>Javascripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬3ç‰ˆï¼‰</li><li>Javascript Ninja</li><li><a href="http://blogread.cn/it/article/6178" target="_blank" rel="noopener">æ·±å…¥ç†è§£Javascriptä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡(Execution Context)</a></li><li><a href="http://www.cnblogs.com/wangfupeng1988/p/4000798.html" target="_blank" rel="noopener">æ·±å…¥ç†è§£javascriptåŸå‹å’Œé—­åŒ…ï¼ˆ18ï¼‰â€”â€”è¡¥å……ï¼šä¸Šä¸‹æ–‡ç¯å¢ƒå’Œä½œç”¨åŸŸçš„å…³ç³»</a></li><li><a href="http://www.igooda.cn/jzjl/20150322837.html" target="_blank" rel="noopener">æœ€è¯¦ç»†çš„JavaScriptå’Œäº‹ä»¶è§£è¯»</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½œç”¨åŸŸ </tag>
            
            <tag> ä¸Šä¸‹æ–‡ </tag>
            
            <tag> æ‰§è¡Œç¯å¢ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssæ°´å¹³å‚ç›´å±…ä¸­</title>
      <link href="/2017/04/01/css%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD.html"/>
      <url>/2017/04/01/css%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ°´å¹³å‚ç›´å±…ä¸­"><a href="#æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="æ°´å¹³å‚ç›´å±…ä¸­"></a>æ°´å¹³å‚ç›´å±…ä¸­</h3><p>æ°´å¹³å‚ç›´å±…ä¸­æ˜¯è€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œä¹Ÿæ˜¯é¢è¯•å®˜æ¯”è¾ƒå–œæ¬¢é—®çš„é—®é¢˜ã€‚ä¸‹é¢æˆ‘å¯¹åœ¨å®é™…ä¸­å¸¸å¸¸è¿ç”¨çš„å‡ ç§æ–¹å¼åšæ€»ç»“ã€‚HTMLç»“æ„å¦‚ä¸‹(è¿™é‡Œæˆ‘é»˜è®¤wrapperæ°´å¹³å‚ç›´å±…ä¸­)ï¼š<br>ã€€ã€€<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"goal"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    ã€€<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><a id="more"></a><h4 id="æœ‰ç¡®å®šçš„å®½é«˜"><a href="#æœ‰ç¡®å®šçš„å®½é«˜" class="headerlink" title="æœ‰ç¡®å®šçš„å®½é«˜"></a>æœ‰ç¡®å®šçš„å®½é«˜</h4><p>ä¸€èˆ¬å¸¸ç”¨åœ¨åŒ…å«ä¼—å¤šdivçš„å®¹å™¨å±‚(å¸¸ç§°ä¸ºwrapperï¼Œè¿™é‡Œä¸€èˆ¬ç¾å·¥éƒ½ä¼šæ ‡æ³¨å¥½å®½é«˜)ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="selector-class">.wrapper</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin</span>: -<span class="number">100px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.goal</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin</span>: -<span class="number">50px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">50px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">background-color</span>: deeppink;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†goalæ°´å¹³å‚ç›´å±…ä¸­ã€‚</p><h4 id="å®½é«˜ä¸ç¡®å®š"><a href="#å®½é«˜ä¸ç¡®å®š" class="headerlink" title="å®½é«˜ä¸ç¡®å®š"></a>å®½é«˜ä¸ç¡®å®š</h4><p>å¯èƒ½æ›´å¤šåœ°æ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“divçš„å®½é«˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ç°æ°´å¹³å‚ç›´å±…ä¸­ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="selector-class">.wrapper</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin</span>: -<span class="number">100px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.goal</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">background-color</span>: deeppink;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>è€Œå¯¹äºæ‰‹æœºç«¯æ¥è¯´æˆ‘ä»¬æ›´å¤šçš„æ˜¯é‡‡ç”¨flexå¸ƒå±€çš„æ–¹å¼æ¥å®ç°æ°´å¹³å‚ç›´å±…ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: -<span class="number">100px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">100px</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">-webkit-align-items</span>: center;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">align-items</span>: center;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">-webkit-justify-content</span>: center;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.goal</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">background-color</span>: deeppink;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯ä¸º.wrapperè¿™ä¸ªå®¹å™¨divè®¾ç½®æ°´å¹³/å‚ç›´(justify-content/align-items)çš„å¯¹é½æ–¹å¼ï¼Œå‡è®¾ç½®ä¸ºå±…ä¸­åå®¹å™¨ä¸­çš„.goalé¡¹ç›®divè‡ªç„¶æ°´å¹³å‚ç›´å±…ä¸­ã€‚(åœ¨flexå¸ƒå±€ä¸­å¸¸æŠŠå¤–å±‚ç§°ä¸ºå®¹å™¨ï¼Œå†…å±‚divç§°ä¸ºé¡¹ç›®ã€‚)</p><h4 id="åˆ©ç”¨ä¼ªå…ƒç´ æ¥å®ç°"><a href="#åˆ©ç”¨ä¼ªå…ƒç´ æ¥å®ç°" class="headerlink" title="åˆ©ç”¨ä¼ªå…ƒç´ æ¥å®ç°"></a>åˆ©ç”¨ä¼ªå…ƒç´ æ¥å®ç°</h4><p>åˆ©ç”¨ä¼ªå…ƒç´ å¯ä»¥é¿å…ä½¿ç”¨marginæ—¶åœ¨IEä¸­çš„bugé—®é¢˜ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="selector-class">.wrapper</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€  <span class="attribute">text-align</span>: center;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.goal</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: inline-block;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">vertical-align</span>: middle;</span><br><span class="line"><span class="attribute">background-color</span>: deeppink;</span><br><span class="line"> &#125;</span><br><span class="line">ã€€ã€€ <span class="selector-class">.wrapper</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line"><span class="attribute">display</span>: inline-block;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">vertical-align</span>: middle;</span><br><span class="line"><span class="attribute">background-color</span>: deeppink;</span><br><span class="line">ã€€ã€€ &#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•çš„é‡ç‚¹åœ¨äºåˆ©ç”¨ä¼ªå…ƒç´ ç»™goalè¿™ä¸ªdivæä¾›vertical-alignæ‰€éœ€çš„å¯¹é½ä¸­å¿ƒç‚¹ã€‚è¯¦æƒ…å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡å¾®ç ”ç©¶ï¼š<a href="http://www.jianshu.com/p/b45f4d8ca372" target="_blank" rel="noopener">CSSï¼šä½¿ç”¨ä¼ªå…ƒç´ åšæ°´å¹³å‚ç›´å±…ä¸­çš„å¾®æ·±å…¥ç ”ç©¶</a></p><h3 id="å¸¸ç”¨æŠ€å·§"><a href="#å¸¸ç”¨æŠ€å·§" class="headerlink" title="å¸¸ç”¨æŠ€å·§"></a>å¸¸ç”¨æŠ€å·§</h3><h4 id="å·¦è¾¹æ "><a href="#å·¦è¾¹æ " class="headerlink" title="å·¦è¾¹æ "></a>å·¦è¾¹æ </h4><p>ã€€ã€€ã€€ã€€ã€€   å·¦è¾¹æ çš„å¸¸ç”¨å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»å‡ ç§å¸¸ç”¨æ–¹å¼ï¼š</p><ul><li>è¾¹æ¡†æ³•ï¼š<br><code>border-left: 5px solid blue;</code></li><li>ä¼ªå…ƒç´ æ³•ï¼š</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€ã€€<span class="selector-tag">div</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€<span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€<span class="attribute">position</span>: absolute;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€<span class="attribute">width</span>: <span class="number">5px</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€<span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€<span class="attribute">background-color</span>: blue;</span><br><span class="line">ã€€ã€€ã€€&#125;</span><br></pre></td></tr></table></figure><h4 id="å†…-å¤–-å››å‘¨é˜´å½±æ³•ï¼š"><a href="#å†…-å¤–-å››å‘¨é˜´å½±æ³•ï¼š" class="headerlink" title="å†…/å¤–/å››å‘¨é˜´å½±æ³•ï¼š"></a>å†…/å¤–/å››å‘¨é˜´å½±æ³•ï¼š</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box-shadow:-5px 0px 0 0 blue;/box-shadow:inset 5px 0px 0 0 blue;/ box-shadow: 0 0 5px blue</span><br><span class="line">(<span class="selector-tag">box-shaow</span> ä¸å ç”¨å…ƒç´ çš„å®½é«˜å“¦)</span><br></pre></td></tr></table></figure><h4 id="å•è¡Œå±…ä¸­ï¼Œä¿©è¡Œå±…å·¦ï¼Œè¶…è¿‡ä¿©è¡Œçœç•¥ã€‚"><a href="#å•è¡Œå±…ä¸­ï¼Œä¿©è¡Œå±…å·¦ï¼Œè¶…è¿‡ä¿©è¡Œçœç•¥ã€‚" class="headerlink" title="å•è¡Œå±…ä¸­ï¼Œä¿©è¡Œå±…å·¦ï¼Œè¶…è¿‡ä¿©è¡Œçœç•¥ã€‚"></a>å•è¡Œå±…ä¸­ï¼Œä¿©è¡Œå±…å·¦ï¼Œè¶…è¿‡ä¿©è¡Œçœç•¥ã€‚</h4><p>ã€€ã€€ã€€<br>ä¸»è¦å®ç°ä¾é ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">display: -webkit-box; // è®¾ç½®displayï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º</span><br><span class="line">    ã€€ã€€ã€€-webkit-line-clamp: 2; // é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°</span><br><span class="line">   ã€€ã€€ã€€ -webkit-box-orient: vertical; // è§„å®šæ¡†çš„å­å…ƒç´ åº”è¯¥è¢«æ°´å¹³æˆ–å‚ç›´æ’åˆ—</span><br></pre></td></tr></table></figure><p>å…·ä½“å®ç°å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="http://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&amp;mid=2651551367&amp;idx=2&amp;sn=8a158fcb2a983acd48f71423db76e4a0&amp;chksm=8025a146b7522850d6cccb959e8a9f32e9866379d2b75b1dad0625c752d57611400d85fa80e1&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">å•è¡Œå±…ä¸­ï¼Œä¸¤è¡Œå±…å·¦ï¼Œè¶…è¿‡ä¸¤è¡Œçœç•¥</a></p><h4 id="çŸ­å°æ ‡é¢˜çš„å¿«é€Ÿæ°´å¹³å‚ç›´å±…ä¸­æ³•"><a href="#çŸ­å°æ ‡é¢˜çš„å¿«é€Ÿæ°´å¹³å‚ç›´å±…ä¸­æ³•" class="headerlink" title="çŸ­å°æ ‡é¢˜çš„å¿«é€Ÿæ°´å¹³å‚ç›´å±…ä¸­æ³•"></a>çŸ­å°æ ‡é¢˜çš„å¿«é€Ÿæ°´å¹³å‚ç›´å±…ä¸­æ³•</h4><p>ç»ƒæ‰‹çš„é¡¹ç›®ä¸­è¦å®ç°ä¸€åˆ—èœå•ï¼Œèœå•ä¸­çš„å°æ ‡é¢˜éœ€è¦æ°´å¹³å‚ç›´å±…ä¸­ï¼š</p><p><img src="/2017/04/01/cssæ°´å¹³å‚ç›´å±…ä¸­/i7eo_0b0cbaa6b2efd538e476ecdf19514322.png" alt=""></p><p>å¯¹äºè¿™ç§æƒ…å†µå¸¸ç”¨tableå¸ƒå±€ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="selector-class">.menu-item</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: table;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">56px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">49px</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span>;</span><br><span class="line"><span class="attribute">text-align</span>: center;</span><br><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: table-cell;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">56px</span>;</span><br><span class="line"><span class="attribute">vertical-align</span>: middle;</span><br><span class="line"><span class="selector-class">.border_1px</span>(rgba(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, .<span class="number">1</span>));</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªéœ€è¦åœ¨çˆ¶å…ƒç´ .menu-itemä¸­æ·»åŠ display:tableï¼Œåœ¨å­å…ƒç´ (éœ€è¦æ°´å¹³å‚ç›´å±…ä¸­çš„å…ƒç´ )ä¸­æ·»åŠ display:table-cell;vertical-align:middleå³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> HTML&amp;CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ°´å¹³å‚ç›´å±…ä¸­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackç¬”è®°</title>
      <link href="/2017/03/05/webpack%E7%AC%94%E8%AE%B0.html"/>
      <url>/2017/03/05/webpack%E7%AC%94%E8%AE%B0.html</url>
      
        <content type="html"><![CDATA[<p>ã€€ã€€<br>webpack 2.0 ç”¨äº†å°ä¸€ä¸ªæœˆäº†ï¼Œä¸€ç›´éƒ½æ˜¯ç…§çŒ«ç”»è™ã€‚è¿™ä¿©å¤©å¼€å§‹ç»†è¯»å®˜ç½‘çš„éƒ¨åˆ†æ–‡ç« ç»“åˆä¸€äº›è®²è§£è§†é¢‘ï¼Œæ·±å…¥å­¦ä¹ ä¸€ä¸‹ã€‚å°ç»“ä¸€å‘æ¥æ±‡æ€»çŸ¥è¯†ç‚¹ã€‚ã€€ã€€</p><ol><li><strong>webpack çš„ç”±æ¥?</strong></li></ol><p>å·²å­˜åœ¨çš„æ¨¡å—æ‰“åŒ…å™¨å¯¹äºå¤§å‹åº”ç”¨ï¼ˆå¤§å‹çš„SPAï¼‰æ¥è¯´å¹¶ä¸é€‚åˆã€‚å‘å±•å¦ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨æœ€è¿«åˆ‡çš„åŸå› é‚£å°±æ˜¯ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰å¹¶ä¸”å¯ä»¥è®©é™æ€èµ„æºèƒ½å¤Ÿæ— ç¼çš„é€‚ç”¨äºæ¨¡å—åŒ–ã€‚</p><ol start="2"><li><strong>webpack å¯ä»¥åšçš„äº‹æƒ…ï¼Ÿ</strong></li></ol><ul><li>å°†é¡¹ç›®é—´çš„ä¾èµ–åˆ†å‰²æˆä»£ç å—å¹¶æŒ‰éœ€åŠ è½½</li></ul><a id="more"></a><ul><li>å°†åˆå§‹åŒ–è½½å…¥æ—¶é—´ä¿æŒåœ¨æœ€ä½</li><li>æ¯ä¸€ä¸ªé™æ€èµ„æºéƒ½åº”è¢«ä½œä¸ºä¸€ä¸ªæ¨¡å—</li><li>æœ‰å°†ç¬¬ä¸‰æ–¹çš„åº“æ•´åˆä¸ºæ¨¡å—çš„èƒ½åŠ›</li><li>æœ‰å®šåˆ¶æ¨¡å—çš„èƒ½åŠ›</li><li>é€‚åˆå¤§å‹çš„å•é¡µåº”ç”¨<br>-</li></ul><ol start="3"><li><strong>webpack çš„ç‰¹ç‚¹æœ‰ï¼Ÿ</strong></li></ol><ul><li>ä»£ç åˆ†å‰²ï¼šwebapck åœ¨å®ƒçš„ä¾èµ–æ ‘ä¸­æœ‰ä¿©ç§ä¾èµ–å…³ç³»ï¼ŒåŒæ­¥ä¸å¼‚æ­¥ï¼å¼‚æ­¥ä¾èµ–å¯ä»¥åˆ†å‰²æˆè®¸å¤šä¸åŒçš„ç‚¹ï¼ˆéƒ¨åˆ†ï¼‰å¹¶ä¸”è¿™äº›ä¾èµ–æ¥è‡ªäºæ–°çš„ä»£ç å—ã€‚åœ¨å—çº§æ ‘ç”Ÿæ•ˆåï¼Œä¸€ä¸ªæ–‡ä»¶ä¼šè¢«ä¼ é€’ç»™æ¯ä¸€ä¸ªä»£ç å—ã€‚</li><li>åŠ è½½å™¨ï¼šwebpack æ˜¯å”¯ä¸€çš„ä¸ç”Ÿä¿±æ¥å°±å…·æœ‰å¤„ç† JS ä»£ç çš„èƒ½åŠ›ï¼Œä½†æ˜¯åŠ è½½å™¨è¢«ç”¨æ¥å°†å…¶ä»–æºæ–‡ä»¶è½¬æ¢ä¸º JS æ–‡ä»¶ã€‚è¿™æ ·æ¥åšæˆ‘ä»¬å°±å¯ä»¥å¤„ç†æ¥è‡ªä¸åŒæ¨¡å—çš„æºæ–‡ä»¶ã€‚</li><li>æ™ºèƒ½è§£æï¼šwebpack å¯ä»¥æ™ºèƒ½è§£æç¬¬ä¸‰æ–¹åº“æ–‡ä»¶ã€‚å®ƒç”šè‡³å…è®¸åœ¨ä¾èµ–ä¸­å‡ºç°è§£é‡Šæ€§çš„æè¿°ä¾‹å¦‚ï¼š<code>require(&quot;./templates/&quot; + name + &quot;.jade&quot;)</code>ã€‚å…·æœ‰ CMD&amp;AMD&amp;es6 ä¸‰ç§å¤„ç†æ¨¡å¼ã€‚</li><li>æ’ä»¶ç³»ç»Ÿï¼šwebpack æœ€æœ‰ç‰¹ç‚¹çš„å°±æ˜¯å®ƒç”Ÿæ€ä¸°å¯Œçš„æ’ä»¶ç³»ç»Ÿã€‚è®¸å¤šå†…éƒ¨çš„ç‰¹æ€§éƒ½å»ºç«‹åœ¨è¿™ä¸ªæ’ä»¶ç³»ç»Ÿä¹‹ä¸Šã€‚å®ƒå…è®¸ä½ å®šåˆ¶ä½ è‡ªå·±çš„éœ€æ±‚å¹¶ä¸”å¯ä»¥å°†å…¶å¼€æºã€‚</li></ul><p>ä»¥ä¸Šæ˜¯æˆ‘å¯¹ <a href="http://webpack.github.io/docs/what-is-webpack.html" target="_blank" rel="noopener">what-is-webpack</a> çš„éƒ¨åˆ†ç¿»è¯‘ï¼Œè¿™äº›å¯¹äºå¿«é€Ÿäº†è§£ webpack æ¥è¯´è¶³å¤Ÿäº†ã€‚</p><p>æ€»æ‰€å‘¨çŸ¥å¯¹äºè‡ªåŠ¨åŒ–æ„å»ºè¿™éƒ¨åˆ†æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„å·¥å…·å¾ˆå¤šï¼Œæ¯”å¦‚ï¼šgrunt ã€gulp ç­‰ï¼Œé‚£ä¹ˆè¿™ä¿©è€…ä¸ webpack æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>Grunt&amp;Gulp æ˜¯æµç¨‹å·¥å…·ï¼Œå…¶å·¥ä½œæ–¹å¼æ˜¯åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡æ˜å¯¹æŸäº›æ–‡ä»¶è¿›è¡Œçš„æ“ä½œï¼ˆè¯¸å¦‚ç¼–è¯‘ï¼Œç»„åˆï¼Œå‹ç¼©ç­‰ä»»åŠ¡ï¼‰çš„å…·ä½“æ­¥éª¤ï¼Œä¹‹åå¯ä»¥è‡ªåŠ¨å®Œæˆè¿™äº›ä»»åŠ¡ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/2017/03/05/webpackç¬”è®°/i7eo_867ffbc27c7b3db65a925867724d7c40.png" alt=""></p><p>WebPackåˆ™æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ï¼Œå…¶å·¥ä½œæ–¹å¼é€šè¿‡ä¸»æ–‡ä»¶ï¼ˆindex.jsï¼‰æ‰¾åˆ°å…¨éƒ¨ä¾èµ–ï¼ˆè‡ªå·±è®¾ç½®çš„ä»£ç å—ã€ç¬¬ä¸‰æ–¹åº“ç­‰ï¼‰ä½¿ç”¨loaders å¤„ç†ï¼Œæœ€ç»ˆæ‰“åŒ…ä¸ºå¯æ‰§è¡Œçš„<br> Javascript æ–‡ä»¶ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/2017/03/05/webpackç¬”è®°/i7eo_fa0ea7513b96c261794900a46ffb0d63.png" alt=""></p><p>ä¸‹é¢é€šè¿‡å®ä¾‹æ¥çœ‹çœ‹ webpack çš„å¨åŠ›ã€‚</p><p>1&gt;  ç®€å•ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir webpack-1</span><br><span class="line">cd webpack-1</span><br><span class="line">npm init</span><br><span class="line">npm install -d webpack --save-dev</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œ webpack 2.0 åï¼Œæ–°å»º js&amp;html&amp;css æ–‡ä»¶æˆ‘çš„ç›®å½•å¦‚ä¸‹ï¼š</p><p><img src="/2017/03/05/webpackç¬”è®°/i7eo_904c91a6b30eb4c70866f1e6e1b01ea8.png" alt=""></p><p>hello.js ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'./world.js'</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./style.css'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'test!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hello();</span><br></pre></td></tr></table></figure><p>style.css ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> , <span class="selector-tag">body</span>&#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"><span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ webpack èƒ½åšçš„äº‹æƒ…ä¸­æˆ‘ä»¬äº†è§£åˆ° webpack å…·æœ‰è¯†åˆ« js çš„èƒ½åŠ›ï¼Œé‚£<br> css å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½ï¼é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿåˆ©ç”¨ loaders æ¥å¤„ç†ã€‚å¯¹äº css æ–‡ä»¶æˆ‘ä»¬ä½¿ç”¨ css-loader&amp;style-loader  å…ˆåˆ©ç”¨ npm åˆ†åˆ«å®‰è£…ã€‚ä¹‹ååœ¨å½“å‰ç›®å½•ä¸‹æ‰“å¼€ cmd é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<code>webpack hello.js hello.bundle.js --module-bind css=style-loader!css-loader --watch</code> module-bind å‘½ä»¤ç”¨äºå¯ç”¨ loader å¤„ç†ä¸»æ–‡ä»¶ï¼Œwatch ç”¨æ¥ç›‘è§† hello.js æ–‡ä»¶çš„å˜åŒ–ï¼Œè‹¥å˜åŒ–åˆ™è‡ªåŠ¨æ›´æ–° hello.bundle.js æ–‡ä»¶ã€‚</p><p>ã€€ã€€åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬å¦‚æœæ¯æ¬¡éƒ½è¦æ•²ä¸€é•¿ä¸²å‘½ä»¤çš„è¯å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨package.json çš„ script ä¸­é…ä¸Š webpack å‘½ä»¤ã€‚æˆ‘å¾—é…ç½®å¦‚ä¸‹ï¼š <code>&quot;webpack&quot;: &quot;webpack --config webpack.config.js --progress --display-modules --colors --display-reasons&quot;</code> å…¶ä¸­ progress&amp;modules&amp;reasonsåˆ†åˆ«ä»£è¡¨è¿‡ç¨‹ç™¾åˆ†æ¯” / å„æ¨¡å— / æ‰“åŒ…åŸå› ã€‚</p><p>ã€€ã€€æˆ‘ä»¬å¯ä»¥å°†webpackçš„é…ç½®å•ç‹¬æ”¾åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆwebpack.config.jsï¼‰ä¸­ä¼šè‡ªåŠ¨è¯»å–è¯¥æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…åç§°ä¸ä¸€è‡´åˆ™éœ€è¦é€šè¿‡å‘½ä»¤è¡Œæ¥è¿è¡Œï¼ˆä¸å­˜åœ¨çš„è¯é€šè¿‡ webpack å‘½ä»¤ï¼Œåç§°ä¸ä¸€è‡´é€šè¿‡â€“config æ¥æŒ‡å®šæ–‡ä»¶ï¼‰ã€‚</p><p>ã€€ã€€å¯¹äº webpack æ¥è¯´å…¥å£ä¸å‡ºå£è‚¯å®šæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œé‚£ä¹ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æˆ‘ä»¬è¿™æ ·å†™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">entry: <span class="string">'./src/index.js'</span>,   <span class="comment">// entry: ['./src/index-1.js' , './src/index-2.js'] å¤šå…¥å£</span></span><br><span class="line">output: &#123;                        <span class="comment">//é…ç½®æ–‡ä»¶è¾“å‡ºä½ç½®</span></span><br><span class="line">  filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">  path: <span class="string">'./dist/js'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ entry ä¼ å…¥å¯¹è±¡çš„å½¢å¼å…¥å£ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">entry:&#123;</span><br><span class="line">main1: <span class="string">'./src/index1.js'</span>,</span><br><span class="line">main2: <span class="string">'./src/index2.js'</span></span><br><span class="line">&#125;,</span><br><span class="line">output: &#123;                        <span class="comment">//é…ç½®æ–‡ä»¶è¾“å‡ºä½ç½®</span></span><br><span class="line">filename: <span class="string">'[name]-[chunkhash].js'</span>,  <span class="comment">// è¿™é‡Œå¦‚æœè¿˜è¿™æ ·å†™filename: 'bundle.js'çš„ç»“æœæ˜¯index2ä¼šæŠŠindex1è¦†ç›–ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨å†…ç½®çš„å ä½ç¬¦ name &amp; chunkhash æ¥å‘½å</span></span><br><span class="line">path: <span class="string">'./dist/js'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯åœ¨ index.htmlä¸­å¼•å…¥çš„ js æ–‡ä»¶åæˆ‘ä»¬ä¸å¯èƒ½æ¯æ¬¡æ‰“åŒ…å®Œéƒ½è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œè¿™æ ·å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ’ä»¶æ¥è‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®ã€‚<code>npm install html-webpack-plugin</code> å®‰è£…åä¿®æ”¹é…ç½®æ–‡ä»¶ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">entry: &#123;</span><br><span class="line">main: <span class="string">'./src/scripts/main.js'</span>,</span><br><span class="line">mainA: <span class="string">'./src/scripts/mainA.js'</span></span><br><span class="line">&#125;,</span><br><span class="line">output: &#123;                        <span class="comment">//é…ç½®æ–‡ä»¶è¾“å‡ºä½ç½®</span></span><br><span class="line">filename: <span class="string">'[name]-[chunkhash]-bundle.js'</span>        <span class="comment">//æ‰“åŒ…çš„æ–‡ä»¶åç§°*/</span></span><br><span class="line">path : <span class="string">'./dist'</span>,</span><br><span class="line">filename: <span class="string">'js/[name]-[chunkhash].js'</span>,            <span class="comment">//æŠŠhtmlä¸jsåˆ†å¼€å­˜æ”¾</span></span><br><span class="line">publicPath: <span class="string">'http://bluespace/'</span>                  <span class="comment">//ä¸Šçº¿åœ°å€çš„ç»å¯¹è·¯å¾„ï¼Œè‡ªåŠ¨æ›¿æ¢å½“å‰é¡¹ç›®ä¸­ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line"><span class="keyword">new</span> htmlWebpackPlugin(&#123;</span><br><span class="line"><span class="comment">//filename: '[hash].index.html',              //åç§°</span></span><br><span class="line">template: <span class="string">'index.html'</span>,<span class="comment">//ä»¥ä»€ä¹ˆä¸ºæ¨¡æ¿ï¼Œä¸€èˆ¬ä»¥é…ç½®æ–‡ä»¶ä¸‹çš„index.htmlä¸ºæ¨¡æ¿</span></span><br><span class="line"><span class="comment">//inject: 'head'//scriptså­˜æ”¾çš„ä½ç½®</span></span><br><span class="line">title: <span class="string">'webpack is good!'</span>,</span><br><span class="line">inject: <span class="literal">false</span>,</span><br><span class="line">date: <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">minify: &#123;                                    <span class="comment">//å‹ç¼©htmlæ–‡ä»¶ï¼Œå»é™¤ç©ºæ ¼ï¼Œå»é™¤æ³¨é‡Š</span></span><br><span class="line">collapseWhitespace: <span class="literal">true</span>,</span><br><span class="line">removeComments: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è€Œ index.html æ¨¡æ¿çš„ä»£ç å¦‚ä¸‹ï¼ˆhtml-webpack-pluginæ”¯æŒejså†™æ³•ï¼‰ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span>%&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"&lt;%= htmlWebpackPlugin.files.chunks.main.entry%&gt;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  <span class="comment">&lt;!-- æŠŠè„šæœ¬åˆ†å¼€æ”¾ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- htmlWebpackPlugin.options.date --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.date</span>%&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"&lt;%= htmlWebpackPlugin.files.chunks.mainA.entry%&gt;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="comment">&lt;!--å¦‚æœæƒ³æ›´åŠ ä¼˜åŒ–çš„è¯ä¸ºäº†å‡å°‘ä¸€æ¬¡postè¯·æ±‚ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥æŠŠscriptä»£ç æ”¾è¿›æ¥ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">&lt;script&gt;</span></span><br><span class="line"><span class="comment">&lt;%=</span></span><br><span class="line"><span class="comment">compilation.assets[htmlWebpackPlugin.files.chunks.mainA.entry.substr(htmlWebpackPlugin.files.publicPath.length)].source()%&gt;</span></span><br><span class="line"><span class="comment">&lt;/script&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2&gt;  åˆ©ç”¨ htmlwebpackplugin æ„å»ºå¤šé¡µåº”ç”¨ ï¼ˆå·²ä¸Šä¼ è‡³ <a href="https://github.com/i7eo/WebCodeHodgepodge/tree/master/webpack" target="_blank" rel="noopener">i7eo-github</a>ï¼‰<br>3&gt;  é…ç½®å¸¸è§çš„ loader</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line">    <span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">entry: <span class="string">'./src/app.js'</span>,</span><br><span class="line">output: &#123;</span><br><span class="line">path: <span class="string">'./dist'</span>,</span><br><span class="line">filename: <span class="string">'js/[name].bundle.js'</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">use: [&#123;</span><br><span class="line">loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">presets: [<span class="string">'es2015'</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;],</span><br><span class="line">include: path.resolve(__dirname , <span class="string">'./src'</span>),</span><br><span class="line">exclude: path.resolve(__dirname , <span class="string">'./node_modules'</span>)                           <span class="comment">//å°½é‡ä½¿ç”¨ç»å¯¹è·¯å¾„ä¼šæé«˜æ‰“åŒ…é€Ÿåº¦åœ¨configruationé‡Œé¢é€šè¿‡excludeå’Œincludeæ¥æé«˜æ‰“åŒ…é€Ÿåº¦</span></span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">use: [</span><br><span class="line"><span class="string">'style-loader'</span>,</span><br><span class="line">&#123;</span><br><span class="line">            loader: <span class="string">'css-loader'</span>,</span><br><span class="line">            options: &#123; <span class="attr">importLoaders</span>: <span class="number">1</span> &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">&#123;</span><br><span class="line">loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">plugins: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)</span><br><span class="line">];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/.\.less$/</span>,</span><br><span class="line">use: [</span><br><span class="line"><span class="string">'style-loader'</span>,</span><br><span class="line"><span class="string">'css-loader'</span>,</span><br><span class="line">&#123;</span><br><span class="line">loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">plugins: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)         <span class="comment">// postcssä¸‹çš„è‡ªåŠ¨è¡¥å…¨æµè§ˆå™¨å‰ç¼€çš„æ’ä»¶</span></span><br><span class="line">];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">'less-loader'</span>      <span class="comment">//ä½¿ç”¨lessæˆ–è€…sassæ—¶ä¸ç”¨ä¸º@importçš„less/sassæ·»åŠ importLoaders:1å› ä¸ºè‡ªåŠ¨æ·»åŠ ã€‚å› ä¸ºless/sassæ”¯æŒimport</span></span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">use: <span class="string">'html-loader'</span>      <span class="comment">// å°†htmlå½“åšå­—ç¬¦ä¸²å¤„ç†ï¼Œå¯¹åº”innerhtmlã€‚åå¤„æ˜¯ä¸èƒ½ä½¿ç”¨forç­‰æ¨¡æ¿è¯­æ³•</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.ejs$/</span>,</span><br><span class="line">use: <span class="string">'ejs-loader'</span>       <span class="comment">// æŠŠhtmlå½“åšæ¨¡æ¿å¤„ç†</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.(png|jpg|gif|svg)$/i</span>,            <span class="comment">//ç”¨åŒ…ç®¡ç†å·¥å…·é™¤äº†æ¨¡æ¿å¤–çš„æ–‡ä»¶æ”¾ç½®ç›¸å¯¹è·¯å¾„æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­åº”è¯¥![]($&#123;require('../../assets/George.jpg')&#125;)</span></span><br><span class="line">use: [</span><br><span class="line">&#123;</span><br><span class="line">loader: <span class="string">'url-loader'</span>,                       <span class="comment">//url-loaderå¯ä»¥è®¾ç½®limitè‹¥å›¾ç‰‡ä½“ç§¯å°äºlimitçš„è¯åˆ™é€šè¿‡url-loaderè½¬åŒ–ä¸ºbase64ä»£ç ï¼Œè‹¥å¤§äºåˆ™è°ƒç”¨file-loader</span></span><br><span class="line">options: &#123;</span><br><span class="line">name: <span class="string">'assets/[name]-[hash:5].[ext]'</span>,</span><br><span class="line">limit: <span class="number">4000</span>                                         <span class="comment">//ç»å¸¸éœ€è¦åŠ è½½çš„å›¾ç‰‡åˆ©ç”¨httpè¯·æ±‚è¾ƒå¥½ï¼Œå› ä¸ºå¯ä»¥äº«å—åˆ°ç¼“å­˜ï¼Œè€Œbase64åˆ™éœ€æ¯æ¬¡è¯»å–</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">'image-webpack-loader'</span>                                      <span class="comment">//å‹ç¼©å›¾ç‰‡ä½“ç§¯</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line"><span class="keyword">new</span> htmlWebpackPlugin(&#123;</span><br><span class="line">filename: <span class="string">'index.html'</span>,</span><br><span class="line">template: <span class="string">'index.html'</span>,</span><br><span class="line">inject: <span class="string">'body'</span></span><br><span class="line">&#125;)</span><br><span class="line">]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="http://webpack.github.io" target="_blank" rel="noopener">webpack</a></p><p><a href="http://www.jianshu.com/p/42e11515c10f" target="_blank" rel="noopener">å…¥é—¨webpackï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†</a></p><p><a href="https://www.npmjs.com/package/html-webpack-plugin" target="_blank" rel="noopener">html-webpack-plugin</a></p>]]></content>
      
      
      <categories>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆå“åº”å¼å¸ƒå±€&amp;è‡ªé€‚åº”å¸ƒå±€</title>
      <link href="/2017/02/15/%E6%B5%85%E8%B0%88%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80-%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80.html"/>
      <url>/2017/02/15/%E6%B5%85%E8%B0%88%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80-%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€å“åº”å¼å¸ƒå±€"><a href="#ä¸€ã€å“åº”å¼å¸ƒå±€" class="headerlink" title="ä¸€ã€å“åº”å¼å¸ƒå±€"></a>ä¸€ã€å“åº”å¼å¸ƒå±€</h3><p>1ã€ä»€ä¹ˆæ˜¯å“åº”å¼é¡µé¢ï¼Ÿå“åº”å¼å¸ƒå±€å¯ä»¥ä¸€ç»Ÿpc&amp;mobileå—ï¼Ÿå“åº”å¼ä¸è‡ªé€‚åº”å¼å¸ƒå±€çš„åŒºåˆ«ï¼Ÿ</p><ul><li>å“åº”å¼ç®€å•æ¥è¯´æ˜¯ä¸€ä¸ªç½‘ç«™çš„å¸ƒå±€ <strong>èƒ½å¤Ÿå…¼å®¹å¤šä¸ªä¸åŒç»ˆç«¯</strong>ï¼Œ  è€Œå¹¶ä¸æ˜¯ä¼ ç»Ÿçš„pcç«¯ä¸€å¥—é¡µé¢ï¼Œç§»åŠ¨ç«¯ä¸€å¥—é¡µé¢ã€‚</li><li>å½“åˆEthan Marcotteåœ¨2010å¹´5æœˆä»½æå‡ºçš„è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™æ˜¯å¸Œæœ›å“åº”å¼å¯ä»¥ä¸€ç»Ÿpc&amp;mobileé¡µé¢ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿåšåˆ°äº†ã€‚ä½†æ˜¯è¿™æ ·å¸¦æ¥çš„é—®é¢˜ä¹Ÿè¶Šå‘è®©å¼€å‘è€…å¿ƒçƒ¦æ„ä¹±ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯å…¼å®¹å„ç§è®¾å¤‡ä¼šå¯¼è‡´ <strong>å¤§é‡ç´¯èµ˜çš„ä»£ç </strong>ï¼Œç»´æŠ¤ä¸é‡æ„è¾ƒéº»çƒ¦ã€‚</li><li>å“åº”å¼å¸ƒå±€è®²ç©¶çš„æ˜¯ä½¿ç”¨ä¸€å¥—å¸ƒå±€ä»£ç æ¥åœ¨ä¸åŒç»ˆç«¯å±•ç¤ºï¼Œ<strong>æ ¹æ®å±å¹•å°ºå¯¸çš„å¤§å°å¯¹é¡µé¢çš„å¸ƒå±€è¿›è¡Œæ”¹é€ </strong>ï¼ˆå³å½“å±å¹•å˜å°æ—¶ï¼Œå¼€å‘è€…å¯èƒ½ä¼šè®©æ ‡é¢˜æ ä¸­åŸæœ¬æ˜¾ç¤º10ä¸ªå­æ ‡é¢˜ç°åœ¨åªæ˜¾ç¤º5ä¸ªï¼Œéšè—å‰©ä¸‹çš„5ä¸ªæˆ–è€…è®©å…¶åœ¨ç¬¬äºŒè¡Œå‡ºç°ï¼‰ï¼Œè€Œ</li></ul><a id="more"></a><p>è‡ªé€‚åº”å¸ƒå±€åˆ™ç›¸åï¼Œå®ƒä½¿ç”¨ä¸€å¥—å¸ƒå±€ä»£ç ä¸ä¼šæ ¹æ®å±å¹•å¤§å°æ”¹å˜è¿˜æ”¹å˜å¸ƒå±€ç»“æ„ï¼Œå®ƒåªæ˜¯ä¼š<strong>ç­‰æ¯”ç¼©å°æˆ–è€…æ”¾å¤§å¯¹åº”å†…å®¹çš„å°ºå¯¸</strong>ã€‚</p><p>ï¼’ã€å“åº”å¼å¸ƒå±€é‡‡ç”¨çš„æŠ€æœ¯</p><ul><li>æ§åˆ¶è§†å£ï¼ˆviewportï¼‰</li></ul><p><strong>æ§åˆ¶è§†å£</strong>è¿™ä¸€ç‚¹ä¸è®ºæ˜¯å“åº”å¼ã€è‡ªé€‚åº”è¿˜æ˜¯ç§»åŠ¨ç«¯å¸ƒå±€éƒ½æ˜¯æœ€é‡è¦çš„ã€‚æˆ‘ä»¬å¸¸å¸¸ä¼šä½¿ç”¨è¿™ä¸€å¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"</span>"&gt;</span></span><br></pre></td></tr></table></figure><p>è§†å£å®½åº¦ç­‰äºè®¾å¤‡å®½åº¦ï¼Œåˆå§‹ç¼©æ”¾æ¯”æœ€å¤§ç¼©æ”¾æ¯”ä¸æœ€å°ç¼©æ”¾æ¯”å‡ä¸º1ï¼Œç¦æ­¢ç”¨æˆ·ç¼©æ”¾ã€‚è¯¦ç»†æè¿°å¯æŸ¥çœ‹ <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta" target="_blank" rel="noopener">MDN-meta</a>ã€‚åœ¨è¿™é‡Œå¯èƒ½æœ‰çš„æœ‹å‹ä¼šè§åˆ°è®¾å¤‡åƒç´ æ¯”ï¼ˆdpr å³ deivcePixelRatioï¼‰ä¹Ÿå°±æ˜¯ç‰©ç†åƒç´ ä¸è®¾å¤‡ç‹¬ç«‹åƒç´ çš„æ¯”å€¼ï¼Œå¸¸è§çš„æœ‰retinaå±ç­‰ã€‚è¯¦æƒ…å¯ä»¥å‚è€ƒå¼ é‘«æ—­è€å¸ˆçš„è¿™ç¯‡ <a href="http://www.zhangxinxu.com/wordpress/2012/08/window-devicepixelratio/" target="_blank" rel="noopener">è®¾å¤‡åƒç´ æ¯”devicePixelRatioç®€å•ä»‹ç»</a> æ–‡ç« ã€‚</p><ul><li>CSSçš„åª’ä½“æŸ¥è¯¢ï¼ˆmedia queryï¼‰</li></ul><p>ä½¿ç”¨@media æŸ¥è¯¢ï¼Œä½ å¯ä»¥<strong>é’ˆå¯¹ä¸åŒçš„åª’ä½“ç±»å‹å®šä¹‰ä¸åŒçš„æ ·å¼</strong>ã€‚è¯·çœ‹ä¸‹ä¾‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> only screen and (max-width: <span class="number">480px</span>)&#123;</span><br><span class="line">    <span class="selector-tag">header</span> <span class="selector-class">.top</span> <span class="selector-class">.tel</span>,</span><br><span class="line">    <span class="selector-tag">header</span> <span class="selector-class">.top</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(3)</span>,</span><br><span class="line">    <span class="selector-tag">header</span> <span class="selector-class">.top</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(4)</span>&#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä»£ç ç‰‡æ„æ€æ˜¯å½“è®¾å¤‡è§†å£å®½åº¦è¾¾åˆ°480pxæ—¶å¯¹ li äº.tel è¿›è¡Œå¤„ç†ã€‚media queryçš„è¯¦æƒ…å¯ä»¥æŸ¥çœ‹ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media" target="_blank" rel="noopener">MDN-media</a> ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯å¾ˆå¤šäººç¼–å†™å“åº”å¼å¸ƒå±€æ—¶éƒ½å–œæ¬¢ç”±pcå¤§å±å¼€å§‹ï¼Œæ…¢æ…¢åˆ°padå†åˆ°mobileï¼Œ<strong>è¿™é‡Œæˆ‘å»ºè®®è®¾è®¡çš„æ—¶å€™å¯ä»¥ä»å°å±çš„mobileå¼€å§‹ï¼Œå…ˆç¡®å®šå†…å®¹ç„¶åé€çº§å‘å¤§å±è®¾è®¡ã€‚</strong>å¯¹äºIE9ä»¥ä¸‹æµè§ˆå™¨æˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªå…³äºmedia query çš„ polyfillï¼ˆå¯ä»¥ç†è§£ä¸ºè¡¥ä¸åŒ…ï¼‰ï¼Œ <em>css3-mediaqueries.js</em> æˆ–è€… <em>respond.js</em>ã€‚</p><ul><li>è‡ªé€‚åº”å›¾ç‰‡ç­‰ç´ æ</li></ul><p>è¿™é‡Œæˆ‘ä»¬å¸¸å¯¹å›¾ç‰‡åšå¤„ç†ï¼Œå¤„ç†çš„æ–¹æ³•æœ‰å¾ˆå¤šæˆ‘ä»¬<strong>å¯ä»¥é‡‡ç”¨HTML5 picture æ ‡ç­¾</strong>ï¼Œåˆ©ç”¨è¯¥æ ‡ç­¾å¯ä»¥åœ¨ä¸åŒè®¾å¤‡ä¸­æ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡ã€‚å¦‚ä¸‹ä»£ç ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span> <span class="attr">media</span>=<span class="string">"(max-width: 36rem)"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">srcset</span>=<span class="string">"img/ad001-l-480w.png"</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">srcset</span>=<span class="string">"img/ad001-l-1600w.png"</span>/&gt;</span></span><br><span class="line">          ![](img/ad001-l.png)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>source ä»£è¡¨ä½ è¦æ˜¾ç¤ºå›¾ç‰‡çš„æºï¼Œmediaä»£è¡¨ä½ éœ€è¦ä»€ä¹ˆæ¡ä»¶ä¸‹æ˜¾ç¤ºè¯¥å›¾ç‰‡ï¼Œsrcset é¡»å¡«å†™å›¾ç‰‡è·¯å¾„d sä»£ç ç‰‡æ„æ€æ˜¯å½“è®¾å¤‡è§†å£å®½åº¦å¤§äº36rem æ—¶æ˜¾ç¤º ad001-l-480w.png è¿™å¼ å›¾ç‰‡ï¼Œè‹¥å°äº 36rem åˆ™ä½¿ç”¨ad001-l-1600w.png è¿™å¼ å›¾ç‰‡ï¼Œè¦æ˜¯æµè§ˆå™¨ä¸æ”¯æŒ picture åˆ™ä½¿ç”¨ img æ ‡ç­¾ä¸­çš„å›¾ç‰‡ã€‚picture è¯¦ç»†ä¿¡æ¯å¯æŸ¥çœ‹ <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/source" target="_blank" rel="noopener">MDN-picture</a> åŒæ ·çš„è¿™é‡Œéœ€è¦æ³¨æ„åœ¨ IE9&amp;IE9ä»¥ä¸‹ æµè§ˆå™¨æƒ³ä½¿ç”¨ picture é¡»å¯¼å…¥ polyfill ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ <em>html5shiv.js</em> ã€‚</p><h3 id="äºŒã€è‡ªé€‚åº”å¸ƒå±€"><a href="#äºŒã€è‡ªé€‚åº”å¸ƒå±€" class="headerlink" title="äºŒã€è‡ªé€‚åº”å¸ƒå±€"></a>äºŒã€è‡ªé€‚åº”å¸ƒå±€</h3><p>ï¼‘ã€è‡ªé€‚åº”çš„å¸ƒå±€çš„å‰ä¸–ä»Šç”Ÿ</p><p>å¾ˆå¤šäººè¿˜æ˜¯å–œæ¬¢æŠŠè‡ªé€‚åº”ç§°ä¸ºç™¾åˆ†æ¯”å¸ƒå±€ï¼Œè€Œæˆ‘è®¤ä¸ºè‡ªé€‚åº”æ˜¯ç™¾åˆ†æ¯”çš„å¢å¼ºç‰ˆï¼Œè¿™ä¸ªæ¦‚å¿µåŒ…æ‹¬äº†å¾ˆå¤šæ–°æŠ€æœ¯ä¸å°æŠ€å·§è€Œå¹¶éå•çº¯çš„ä½¿ç”¨ç™¾åˆ†æ¯”å®ç°é¡µé¢å¸ƒå±€ã€‚è¯·çœ‹ä¸‹å›¾ï¼š</p><p><img src="/2017/02/15/æµ…è°ˆå“åº”å¼å¸ƒå±€-è‡ªé€‚åº”å¸ƒå±€/i7eo_c36de4bcf866dcb8292128829f0c8625.png" alt=""></p><p>è¿™ä¸ªç»“æ„å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main about"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"aboutUs"</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainText"</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"aboutUs"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„æ ·å¼ä¸ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.main</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.main</span> <span class="selector-class">.title</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1.425rem</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.25rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(13,76,187);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.main</span> <span class="selector-class">.title</span> <span class="selector-class">.icon</span>&#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.main</span> <span class="selector-class">.icon</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: .<span class="number">25rem</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.3rem</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(../img/indexPage/mainBtn.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.main</span> <span class="selector-class">.mainText</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.main</span> <span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1.2rem</span> <span class="number">0</span> <span class="number">1.425rem</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">1.7rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: .<span class="number">9rem</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.35rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#3d3d3d</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®ä¸­æ›´å¤šçš„ä½¿ç”¨çš„éƒ½æ˜¯ç»„åˆè®¡ï¼Œç™¾åˆ†æ¯”æ§åˆ¶å„ä¸ªå®¹å™¨çš„å®½å’Œå°‘é‡çš„é«˜åº¦ï¼Œç”¨ rem æ¥æ§åˆ¶ padding/margin/font/height ç­‰ã€‚è‡³æ­¤ï¼Œåˆ©ç”¨ç™¾åˆ†æ¯”å¸ƒå±€çš„æ–¹å¼å³â€œå‰ä¸–â€ï¼Œè€Œâ€œä»Šç”Ÿâ€åˆ™æ˜¯åœ¨ä¸æ–­çš„æ··åˆæ–°çš„æŠ€æœ¯ä¸æ–­å¢å¼ºã€‚å¯¹äºä»Šç”Ÿï¼Œæ˜¾ç„¶æˆ‘ä»¬è¿˜æœ‰ web App æ²¡æœ‰è¯´ï¼Œé‚£æˆ‘ä»¬å°±æ¥çœ‹çœ‹ç§»åŠ¨ç«¯çš„ web é¡µé¢ã€‚</p><p>2ã€rem</p><p>ä¸Šé¢å‡ºç°äº†ä¸€ä¸ªå•ä½remï¼Œé‚£ä¹ˆremåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>remï¼ˆfont size of the root elementï¼‰æ˜¯æŒ‡ç›¸å¯¹äºæ ¹å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½ã€‚ç®€å•çš„è¯´å®ƒå°±æ˜¯ä¸€ä¸ªç›¸å¯¹å•ä½ã€‚çœ‹åˆ°remå¤§å®¶ä¸€å®šä¼šæƒ³èµ·emå•ä½ï¼Œemï¼ˆfont size of the elementï¼‰æ˜¯æŒ‡ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½ã€‚å®ƒä»¬ä¹‹é—´å…¶å®å¾ˆç›¸ä¼¼ï¼Œåªä¸è¿‡ä¸€ä¸ªè®¡ç®—çš„è§„åˆ™æ˜¯ä¾èµ–æ ¹å…ƒç´ ä¸€ä¸ªæ˜¯ä¾èµ–çˆ¶å…ƒç´ è®¡ç®—ã€‚</p><p>å¯¹äºä¸€ä¸ªç½‘é¡µæ¥è¯´ï¼Œremçš„åˆå§‹å€¼ä¸º 16pxï¼Œå½“ç„¶è¿™ä¸ªå€¼æ˜¯å¯ä»¥æ ¹æ®å½“å‰é¡¹ç›®ä¸­çš„éœ€è¦æ¥æ”¹å˜çš„ï¼Œè®¾ç½®htmlçš„font-sizeå³å¯ã€‚æ¯”å¦‚è¯´ï¼šæ‹¿åˆ°äº†ä¸€ä»½å®½åº¦ä¸º680pxï¼Œremä¸º20pxçš„è®¾è®¡ç¨¿å…¶ä¸­æŸå…ƒç´ å®½åº¦ä¸º200pxï¼Œä½†æ˜¯å¦‚æœè¦åœ¨å®½åº¦ä¸º375ä¸414çš„å±å¹•ä¸Šæ˜¾ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥è®¾ç½®ä¸ºå¤šå°‘å‘¢ï¼Ÿ</p><table><thead><tr><th style="text-align:left">å®½åº¦</th><th style="text-align:left">å®½åº¦æ¯”</th><th style="text-align:left">html(font-size)</th><th style="text-align:left">æŸå…ƒç´ å®½åº¦(px)</th><th style="text-align:left">æŸå…ƒç´ å®½åº¦(rem)</th></tr></thead><tbody><tr><td style="text-align:left">384</td><td style="text-align:left">384/640=0.6</td><td style="text-align:left">12px</td><td style="text-align:left">120px</td><td style="text-align:left">10rem</td></tr><tr><td style="text-align:left">480</td><td style="text-align:left">480/640=0.75</td><td style="text-align:left">15px</td><td style="text-align:left">150px</td><td style="text-align:left">10rem</td></tr></tbody></table><p>é‡ç‚¹æ˜¯è¦è®¡ç®—å‡ºhtmlçš„font-sizeï¼Œå¦‚æœæ˜¯retinaå±è¿˜éœ€æ³¨æ„dprã€‚å¦‚æœæˆ‘ä»¬æƒ³å¿«é€Ÿä¸Šæ‰‹ä¸æƒ³è®¡ç®—çš„è¯å¯ä»¥å¼•å…¥flexible.jsï¼Œè¿™ä¸ªè„šæœ¬ä¸»è¦æ˜¯æ ¹æ®åª’ä½“æŸ¥è¯¢æ¥åŠ¨æ€è®¾ç½®html font-sizeï¼Œå…¼å®¹æ€§è¿˜ä¸é”™ã€‚</p><p>3ã€webApp ä¸­çš„è‡ªé€‚åº”åˆ©å™¨ - flexå¼¹æ€§å¸ƒå±€</p><p>ç”±äº media queryçš„å‡ºç°å½±å“äº†å¾ˆå¤§ä¸€éƒ¨åˆ†å¼€å‘äººå‘˜ï¼Œæ‰€ä»¥åœ¨æ—©äº›æ—¶å€™çš„ webApp é¡µé¢ä¸­è¿˜æ˜¯ä¼šå‡ºç°ä¼—å¤šçš„ media query ã€‚ç›´åˆ° flex æµè¡Œå¼€æ¥åæˆ‘ä»¬é€æ­¥è®¤è¯†åˆ° flex çš„å¼ºå¤§ï¼Œå› ä¸º flex ä¸Šæ‰‹ç®€å•ï¼Œä»£ç ç²¾ç®€ï¼Œä¸€å°æ®µå°±å¯ä»¥å®Œæˆæˆ‘ä»¬å¸¸è¯´çš„â€œåœ£æ¯å¸ƒå±€â€ç­‰ï¼Œä¹Ÿå¯ä»¥å®Œæˆå¸¸è€ƒçš„æ°´å¹³å‚ç›´é—®é¢˜ã€‚å…³äº flex å¤§å®¶å¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„æ•™ç¨‹ï¼Œè®²è§£çš„ååˆ†è¯¦ç»†ã€‚<a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool" target="_blank" rel="noopener">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a>ã€‚è¯·çœ‹ä¸‹ä¾‹ï¼š</p><p><img src="/2017/02/15/æµ…è°ˆå“åº”å¼å¸ƒå±€-è‡ªé€‚åº”å¸ƒå±€/i7eo_2f5ab409ffc3f0d227e9d1b2b31bc25f.png" alt=""></p><p><img src="/2017/02/15/æµ…è°ˆå“åº”å¼å¸ƒå±€-è‡ªé€‚åº”å¸ƒå±€/i7eo_bbdf296b4420ab30dbee2be7dc078519.png" alt=""></p><p>é¡ºæ‰‹æ‹‰æ¥è‡ªå·±ç»ƒæ‰‹çš„ vue2 ä¸­ç”¨ flex å¸ƒå±€åçš„é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ° pc&amp;mobile å®Œç¾é©¾é©­ã€‚å› ä¸ºç›®å‰å„å¤§æµè§ˆå™¨å¯¹ flex çš„æ”¯æŒåº¦åœ¨å¢åŠ æ‰€ä»¥ pc&amp;mobile å‡å¯ä½¿ç”¨å°±åœ¨ä¸ä¹…çš„å°†æ¥ ï¼Œä¸è¿‡ä¸€èˆ¬è¿˜æ˜¯æ›´å¤šçš„ç”¨åœ¨ç§»åŠ¨ç«¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> HTML&amp;CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flex </tag>
            
            <tag> rem </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åº•éƒ¨å›ºå®š(sticky footer)</title>
      <link href="/2017/01/03/sticky-footer.html"/>
      <url>/2017/01/03/sticky-footer.html</url>
      
        <content type="html"><![CDATA[<p>ã€€ã€€æ»šåŠ¨æ¡çš„å‡ºç°æ€»æ˜¯åœ¨æµè§ˆå™¨çš„æœ€å³è¾¹å’Œæœ€ä¸‹æ–¹ï¼Œç‰¢ç‰¢çš„ fixedåœ¨é¡µé¢ä¸Šã€‚å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯è¿™æ ·çš„</p><a id="more"></a><p>ã€€ã€€<br><img src="/2017/01/03/sticky-footer/i7eo_be73ca4281babf1adf5e0dd4640a609f.png" alt=""></p><p>è¿™æ ·å­å¾ˆæ˜æ˜¾ç™»å½•çš„å°äººæŒ‰é’®è¢«æŒ¡ä½äº†ï¼Œè€Œä¸”çœŸçš„ä¸å¤ªç¾è§‚ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¸Œæœ›å¤´éƒ¨å¸é¡¶ï¼Œæ»šåŠ¨æ¡å‡ºç°åœ¨ä¸‹æ–¹çš„divå†…ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/2017/01/03/sticky-footer/i7eo_093d0bc28bd34ad0c7d2a3780af969ed.png" alt=""></p><p>å…¶å®å®ç°å¾ˆç®€å•ï¼Œåœ¨å¤´éƒ¨ï¼ˆheaderï¼‰å’Œå†…å®¹ï¼ˆsectionï¼‰å¤–é¢å†åŒ…è£¹ä¸€å±‚ï¼ˆ.wrapperï¼‰ï¼Œç»™ .wrapper å±‚é«˜åº¦ 100%ï¼›ç„¶åè®©å†…å±‚ section ç»å¯¹å®šä½ï¼Œè®¾ç½® top/overflow-y å³å¯ã€‚HTML ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  ã€€ã€€<span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">ã€€ã€€ã€€ã€€<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>This is header!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">ã€€ã€€ã€€ã€€è¿™é‡Œæ·»åŠ è¶…è¿‡é¡µé¢é«˜åº¦çš„å†…å®¹</span><br><span class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ·å¼ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">90px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#efeff0</span>;</span><br><span class="line">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="selector-tag">section</span> &#123;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">48px</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·æ˜¾ç¤ºsectionä¸­çš„å†…å®¹æ˜¯æ˜¾ç¤ºä¸å‡ºæ¥çš„ã€‚å¦‚ä¸‹ï¼š</p><p><img src="/2017/01/03/sticky-footer/i7eo_8ae5b0de96a63d6da75c98af0c69148a.png" alt=""></p><p>è¿™é‡Œçš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ .wrapper ä¸­è®¾ç½® height: 100%ï¼Œè€Œè®¾ç½®é«˜åº¦ç™¾åˆ†æ¯”æ—¶è¿™ä¸ªç™¾åˆ†æ¯”æ—¶æ ¹æ®çˆ¶å…ƒç´ çš„é«˜åº¦æ¥è®¡ç®—çš„ï¼Œè¿™é‡Œçš„çˆ¶å…ƒç´ æ˜¯ body&amp;htmlï¼Œæ²¡æœ‰è®¾ç½® height æ—¶çˆ¶å…ƒç´  body&amp;html çš„ height: autoï¼Œè¿™æ—¶è¦æ±‚æµè§ˆå™¨æ ¹æ®è¿™æ ·ä¸€ä¸ªç¼ºçœå€¼æ¥è®¡ç®—ç™¾åˆ†æ¯”é«˜åº¦æ—¶ï¼Œåªèƒ½å¾—åˆ° undefined çš„ç»“æœã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ª null å€¼ï¼Œæµè§ˆå™¨ä¸ä¼šå¯¹è¿™ä¸ªå€¼æœ‰ä»»ä½•çš„ååº”ï¼ˆè¯¦æƒ…è§ä¸‹é¢é“¾æ¥ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å°†æ ·å¼ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span> &#123;</span><br><span class="line">ã€€ã€€<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">90px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#efeff0</span>;</span><br><span class="line">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="selector-tag">section</span> &#123;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">48px</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2017/01/03/sticky-footer/i7eo_8a0c59f7626496da0256f90cbe1a466a.png" alt=""></p><p>ã€€ã€€åº•éƒ¨å›ºå®šåˆå« css sticky footerï¼Œç½‘ä¸Šçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šã€‚ä¸‹æ¥ä»‹ç»ä¸€ä¸ªç®€å•å®ç”¨çš„æ–¹å¼ï¼Œå¯¹åº”çš„ HTML ç»“æ„å¦‚ä¸‹ï¼š<br>ã€€ã€€<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content-wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>This is header!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">        Ã—</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>CSS ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.content-wrapper</span> &#123;</span><br><span class="line">            <span class="attribute">position</span>: fixed;</span><br><span class="line">            <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">overflow</span>: auto;</span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">rgba</span>(7, 17, 27, .8);</span><br><span class="line">            <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">header</span> &#123;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#efeff0</span>;</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.content</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">            <span class="attribute">padding-bottom</span>: <span class="number">64px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.close</span> &#123;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">64px</span>;</span><br><span class="line">            <span class="attribute">margin</span>: -<span class="number">64px</span> auto <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">padding-top</span>: <span class="number">16px</span>;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">32px</span>;</span><br><span class="line">            <span class="attribute">clear</span>: both;</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2017/01/03/sticky-footer/i7eo_31a0b8b3dcd05308cbdf02335ffea2ee.png" alt=""></p><p><img src="/2017/01/03/sticky-footer/i7eo_058f4f302688d0234b4191f8af842e00.png" alt=""></p><p>æˆ‘ä»¬çš„å…³é—­ icon å‡åœ¨æ–‡å­—çš„æœ€ä¸‹æ–¹ï¼Œæ ¹æ®å†…å®¹çš„é«˜åº¦å˜åŒ–è€Œæ”¹å˜ã€‚æ˜¾ç„¶è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯ä¸è®ºå†…å®¹æ˜¯å¦æ’‘æ»¡å±å¹•é«˜åº¦è¿™ä¸ªå…³é—­çš„ icon éƒ½è¦å›ºå®šåœ¨æœ€ä¸‹æ–¹ï¼Œè€Œ exhibition-1.png ä¸­çš„ç°è±¡æ˜¯å‡ºç°åœ¨äº†å†…å®¹çš„åº•éƒ¨è€Œä¸æ˜¯å±å¹•çš„åº•éƒ¨ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å¯¹ä¸ºè¿™ä¸ªæ•´ä½“å†åŒ…è£¹ä¸€å±‚ï¼Œç„¶åæŠŠ .close è¿™ä¸ª div æ”¾å‡ºå»ä¸ content-wrapper åŒçº§å³å¯ã€‚ä¿®æ”¹åçš„ HTML/CSS ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content-wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>This is header!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">            Ã—</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">            <span class="attribute">position</span>: fixed;</span><br><span class="line">            <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">overflow</span>: hidden;</span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">rgba</span>(7, 17, 27, .8);</span><br><span class="line">            <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.content-wrapper</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">header</span> &#123;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#efeff0</span>;</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.content</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">            <span class="attribute">padding-bottom</span>: <span class="number">64px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.close</span> &#123;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">64px</span>;</span><br><span class="line">            <span class="attribute">margin</span>: -<span class="number">64px</span> auto <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">padding-top</span>: <span class="number">16px</span>;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">32px</span>;</span><br><span class="line">            <span class="attribute">clear</span>: both;</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2017/01/03/sticky-footer/i7eo_6e64eb748af948e4fb5f1e01424952d8.png" alt=""></p><p>å®Œæˆæ•ˆæœã€‚<br>ã€€ã€€æœ€åæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ css sticky footer çš„æ­¥éª¤ã€‚ç¬¬ä¸€æ­¥éœ€è¦ä¸€ä¸ªå¤§å®¹å™¨ï¼ˆ.content-wrapperï¼‰è®¾ç½® min-height ä¸º100%ï¼Œæ’‘æ»¡æ•´ä¸ªå¯è§†åŒºåŸŸï¼Œä¸ç„¶ä½ éœ€è¦ sticky çš„ footer å°±ä¸ä¼šå‡ºç°åœ¨ä½ çš„è§†çº¿é‡Œ;ç¬¬äºŒæ­¥åœ¨ content-wrapper ä¸­åˆ›å»ºä½ çš„å†…å®¹åŒºåŸŸï¼Œåœ¨å†…å®¹åŒºå†…å»ºç«‹äº†ä¸€ä¸ª content ï¼Œè¿™æ—¶çš„å†…å®¹åŒºåŸŸï¼ˆcontentï¼‰ä¸€å®šè¦è®¾ç½® padding-bottom æ¥ä¸ºä½ çš„ footerï¼ˆ.closeï¼‰ å ä½;ç¬¬ä¸‰æ­¥åœ¨ content-wrapper åŒçº§ä¸‹åˆ›å»ºä½ çš„ footerï¼ˆ.closeï¼‰ï¼Œç„¶åç›¸å¯¹å®šä½ï¼ˆç›¸å¯¹äºcontent-wrapperï¼‰ç„¶åè¿™é‡Œçš„ margin-top å¿…é¡»ä¸ºè´Ÿï¼ˆå¡«å……ä½ åœ¨ç¬¬äºŒæ­¥ä¸­æ‰€å çš„ç©ºé—´è¿™é‡Œçš„è´Ÿå€¼å¿…é¡»ä¸ç¬¬äºŒæ­¥ä¸­è®¾ç½®çš„å€¼ç›¸åŒï¼Œé”æ­» footer çš„ä½ç½®ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> HTML&amp;CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sticky footer </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
