{"meta":{"title":"Solitude is freedom","subtitle":"Articles on front-end development by George Tan","description":"A man who dreams of being a full stack engineer","author":"George Tan","url":"https://i7eo.com"},"pages":[{"title":"å…³äºæˆ‘","date":"2019-09-28T00:09:53.000Z","updated":"2020-03-25T08:36:48.674Z","comments":true,"path":"about/index.html","permalink":"https://i7eo.com/about/index.html","excerpt":"","text":"ä¸€ä¸ªæ¢¦æƒ³æˆä¸ºå…¨æ ˆçš„å‰ç«¯å·¥ç¨‹å¸ˆã€‚å–œæ¬¢ï¼š Javascript NodeJs Java å¸¸ç”¨æŠ€æœ¯ï¼š Vue&amp;Nuxt React JQuery Mongodb/redis koa&amp;express è”ç³»æˆ‘ï¼š GitHub: GeorgeTan Gmail: george704t@gmail.com"}],"posts":[{"title":"react hooks ç¬”è®°","slug":"react-hooks-ç¬”è®°","date":"2020-11-07T06:34:23.000Z","updated":"2021-06-24T12:38:59.387Z","comments":true,"path":"2020/11/07/react-hooks-ç¬”è®°.html","link":"","permalink":"https://i7eo.com/2020/11/07/react-hooks-ç¬”è®°.html","excerpt":"","text":"ä¸ºä»€ä¹ˆå­¦ä¹ hookï¼Ÿ é«˜æ•ˆå¼€å‘ æé«˜ç»„ä»¶å¤ç”¨æ€§ æé«˜é€»è¾‘å¤ç”¨æ€§ æå‡æ€§èƒ½ å°†å¤æ‚åŠŸèƒ½æ¨¡å—åŒ–æ›´æ¸…æ™°ã€æ›´å½»åº• hooks å‡ºç°çš„æ„ä¹‰ hooksä¹‹é—´çš„çŠ¶æ€ç‹¬ç«‹ï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ï¼Œä¸å›å‡ºç°çŠ¶æ€æ··æ·†çš„æƒ…å†µ è®©å‡½æ•°ç»„ä»¶æœ‰äº†çŠ¶æ€ç®¡ç† è§£å†³äº†å¤æ‚ç»„ä»¶ä¸ç›´è§‚ã€ç±»ç»„ä»¶éš¾ç»´æŠ¤ã€é€»è¾‘ä¸æ˜“å¤ç”¨çš„é—®é¢˜ hooks åº”ç”¨åœºæ™¯ åˆ©ç”¨hookså–ä»£ç”Ÿå‘½å‘¨æœŸå‡½æ•° ç»™å‡½æ•°ç»„ä»¶åŠ ä¸ŠçŠ¶æ€ ç»„ä»¶è¾…åŠ©å‡½æ•°ï¼ˆè‡ªå®šä¹‰hookï¼‰ å¤„ç†å‘é€è¯·æ±‚ å­˜å–æ•°æ® åšå¥½æ€§èƒ½ä¼˜åŒ– hooks ä½¿ç”¨æ‰€æœ‰çš„hook(é™¤state)éƒ½ä¼šåœ¨ç»„ä»¶æ›´æ–°åé‡æ–°æ‰§è¡Œå¦‚ä½•é¿å…æ›´æ–°ï¼Ÿå¦‚ä½•æ‹¿åˆ°ä¸Šä¸€æ¬¡çš„å€¼ï¼Ÿhooks faq useStateç±»æ¯” class ä¸­çš„ stateåˆå§‹åŒ–æ‰§è¡Œä¸€æ¬¡ï¼Œå‡½æ•°ç»„ä»¶æ›´æ–°ä¹Ÿä¼šæ‰§è¡Œ useEffectæ˜¯componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmount è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆï¼Œéƒ½æ˜¯åœ¨renderåæ‰§è¡Œçš„ã€‚å› ä¸ºhookä¼šåœ¨ç»„ä»¶æ›´æ–°ï¼ˆstateã€propæ›´æ–°ï¼‰åé‡æ–°æ‰§è¡Œæ‰€ä»¥effectä¸­ä¸€äº›ç»‘å®šçš„äº‹ä»¶ã€è®¢é˜…ä¹Ÿéœ€è¦returnå‡ºå»ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚å› ä¸ºç¬¬ä¸€æ¬¡è§¦å‘ didmount:: render =&gt; ç»„ä»¶æ›´æ–° =&gt; remove&amp;render =&gt; ç»„ä»¶æ›´æ–° =&gt; remove&amp;render =&gt; é¡µé¢å…³é—­æˆ–è€…å¤ç»„ä»¶é€šè¿‡åˆ¤æ–­é€»è¾‘ä¸¢å¼ƒå­ç»„ä»¶è§¦å‘ unmount =&gt; remove ã€‚æ¯ä¸€ä¸ªrender éƒ½å¯¹åº”ä¸‹ä¸€ä¸ªremoveï¼Œè¿™æ˜¯effectçš„è®¾è®¡é€»è¾‘ã€‚ effect è¢«ç§°ä½œå‰¯ä½œç”¨å‡½æ•°ï¼šæ•°æ®è·å–ï¼Œè®¾ç½®è®¢é˜…ä»¥åŠæ‰‹åŠ¨æ›´æ”¹ React ç»„ä»¶ä¸­çš„ DOM éƒ½å±äºå‰¯ä½œç”¨ useLayoutEffectä¸ componentDidMountã€componentDidUpdate çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡å§‹ç»ˆåœ¨ effectä¹‹å‰æ‰§è¡Œï¼Œæ˜¯åœ¨æ¨¡ç‰ˆæŒ‚è½½ååˆ°componentDidMountä¹‹é—´ï¼ˆæµè§ˆå™¨æ¸²æŸ“jsxï¼‰æ‰§è¡Œã€‚ä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectï¼Œè¯»å– dom å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ–°æ¸²æŸ“ã€‚éœ€è¦æ³¨æ„åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffect å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ï¼›å»ºè®®å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†çš„ useEffect ä»¥é¿å…é˜»å¡è§†è§‰æ›´æ–°ã€‚ useMemoä¸»è¦çš„ç”¨é€”æ˜¯é¿å…ä¸å¿…è¦çš„å‡½æ•°æ‰§è¡Œï¼ˆç»„ä»¶æ›´æ–°ï¼‰ï¼Œä¸€èˆ¬ä½œç”¨äºä¸ä¸»é€»è¾‘æ— å…³çš„åŠŸèƒ½å‡½æ•° useCallbackä¸»è¦åœºæ™¯æ˜¯åœ¨å¤ç»„ä»¶ä¸­ç¼“å­˜ä¼ ç»™å­ç»„ä»¶çš„propå‡½æ•°ï¼Œå­ç»„ä»¶å¯ä»¥é€šè¿‡effectæ¥ç›‘å¬å˜åŒ–: 12345678910111213141516const Parent = () =&gt; &#123; const [num, setNum] = useState(1) const getDoubleNum = useCallback(() =&gt; &#123; return num * 2 &#125;, []) return ( &lt;div onClick=&#123;() =&gt; &#123;setNum(num + 1)&#125;&#125;&gt;num: &#123;num&#125;&lt;/div&gt; &lt;Child getDoubleNum=&#123;getDoubleNum&#125;/&gt; )&#125;const Children = (props) =&gt; &#123; useEffect(() =&gt; &#123; console.log('prop test update...') &#125;, [props.getDoubleNum]) // ...&#125; å¦‚æœ getDoubleNum æ— ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…æ•°ç»„ä¸­æœ‰å€¼è·Ÿéšä¾èµ–é¡¹ä¸æ–­çš„å˜åŒ–ç¼“å­˜æ–°å‡½æ•°é‚£ä¹ˆå°±ä¼šä¸æ–­å‡ºå‘å­ç»„ä»¶æ›´æ–°æ¥ï¼›å¦‚æœæ•°ç»„ä¸ºç©ºæˆ–è€…ä¾èµ–é¡¹ä¸å˜åªæ‰§è¡Œä¸€æ¬¡ï¼Œåªä¼šå¼•èµ·å­ç»„ä»¶é¦–æ¬¡æ›´æ–°ï¼ˆåˆå§‹åŒ–ï¼‰ useRefæ˜¯ä¸€ä¸ªjså¯¹è±¡ ä½œç”¨ï¼šé•¿ä¹…ä¿æŒæ•°æ®ï¼ˆå®ä¾‹å˜é‡ï¼‰ï¼Œä¸ä»…å¯ä»¥ç”¨äº DOM refsï¼›ã€Œrefã€ å¯¹è±¡æ˜¯ä¸€ä¸ª current å±æ€§å¯å˜ä¸”å¯ä»¥å®¹çº³ä»»æ„å€¼çš„é€šç”¨å®¹å™¨ï¼Œç±»ä¼¼äºä¸€ä¸ª class çš„å®ä¾‹å±æ€§, è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜å³æ—¶ç»„ä»¶é‡æ–°æ¸²æŸ“è¯¥å¯¹è±¡ä¹Ÿä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ æ³¨æ„ï¼šè¿”å›ä¸€ä¸ªå­å…ƒç´ ç´¢å¼•ï¼Œæ­¤ç´¢å¼•åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸å˜ï¼›refå¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¸é€šçŸ¥å˜åŒ–ã€‚å±æ€§å˜æ›´ä¸ä¼šé‡æ–°æ¸²æŸ“ useContextä½œç”¨ï¼šè®©å­ç»„ä»¶ä¸ç”¨é€šè¿‡ä¼ é€’propå°±å¯ä»¥ç›´æ¥å–åˆ°å€¼æ³¨æ„ï¼šä¸Šå±‚æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå¿…ç„¶ä¼šè§¦å‘é‡æ–°æ¸²æŸ“\bä¸€èˆ¬ç”¨äºå¤šå±‚ç»„ä»¶ä¼ å€¼ useReducerä½œç”¨ï¼šå»ä»“åº“æ‹¿æ•°æ®æ³¨æ„ï¼šå‡½æ•°ç»„ä»¶çš„reduxæ“ä½œ ç‰¹åˆ«æ³¨æ„Hook å°±æ˜¯ JavaScript å‡½æ•°ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒä»¬ä¼šæœ‰ä¸¤ä¸ªé¢å¤–çš„è§„åˆ™ï¼š åªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨ã€‚ åªèƒ½åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å…¶ä»– JavaScript å‡½æ•°ä¸­è°ƒç”¨ã€‚ï¼ˆè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹å¯ä»¥è°ƒç”¨ Hook â€”â€” å°±æ˜¯è‡ªå®šä¹‰çš„ Hook ä¸­ï¼‰","categories":[{"name":"React","slug":"React","permalink":"https://i7eo.com/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"https://i7eo.com/tags/React/"},{"name":"Hooks","slug":"Hooks","permalink":"https://i7eo.com/tags/Hooks/"}]},{"title":"ç»„ä»¶è®¾è®¡ç¬”è®°","slug":"ç»„ä»¶è®¾è®¡ç¬”è®°","date":"2020-09-21T12:42:29.000Z","updated":"2021-06-24T12:53:43.153Z","comments":true,"path":"2020/09/21/ç»„ä»¶è®¾è®¡ç¬”è®°.html","link":"","permalink":"https://i7eo.com/2020/09/21/ç»„ä»¶è®¾è®¡ç¬”è®°.html","excerpt":"","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚ä½•æ›´å¿«æ›´å¥½çš„å®Œæˆç»„ä»¶éœ€è¦æ€»ç»“ä¸æ€è€ƒã€‚ç®€å•æ€»ç»“ä¸‹ï¼š é¦–å…ˆæŒ‰ç…§ç»„ä»¶å¤ç”¨åº¦è¿›è¡Œåˆ’åˆ†/ç»„ä»¶æŠ½è±¡ å…¶æ¬¡æŒ‰ç…§å…±äº«çš„æ•°æ®/æ•°æ®çš„ä¼ é€’è°ƒæ•´ç»„ä»¶çš„åˆ’åˆ† å…±äº«çš„æ•°æ®æ”¾å…¥redux/vuex å¯å°†è¯¥ç»„ä»¶çš„æ“ä½œæ”¾å…¥redux/vuexï¼Œä½œä¸ºä¸€ä¸ªæ—¢æœ‰æ•°æ®åˆæœ‰æ“ä½œçš„èªæ˜ç»„ä»¶åªä¸è¿‡æ•°æ®ä¸æ“ä½œéƒ½æ”¾åœ¨äº†redux/vuexä¸­ æ•°æ®ä¸å…±äº«çš„çš„ç»„ä»¶éµå¾ªæ•°æ®/æ“ä½œç”±çˆ¶åˆ°å­çš„æµå‘å°†çˆ¶ç»„ä»¶å½“ä½œèªæ˜ç»„ä»¶è¿›è¡Œæ•°æ®/äº‹ä»¶çš„æ“ä½œå³å¯ å…¶ä»–ç»„ä»¶å‡ä¸ºç¬¨è›‹ç»„ä»¶æ¥æ”¶åˆ°æ•°æ®ç»“æ„ç›¸åŒçš„æ•°æ®å³å¯æŒç»­å¤ç”¨","categories":[{"name":"Vuejs","slug":"Vuejs","permalink":"https://i7eo.com/categories/Vuejs/"},{"name":"React","slug":"Vuejs/React","permalink":"https://i7eo.com/categories/Vuejs/React/"}],"tags":[{"name":"ç»„ä»¶","slug":"ç»„ä»¶","permalink":"https://i7eo.com/tags/ç»„ä»¶/"}]},{"title":"Webpack4.0 å­¦ä¹ ç¬”è®°ï¼ˆä¸‹ï¼‰","slug":"Webpack4-0-å­¦ä¹ ç¬”è®°-ä¸‹","date":"2020-03-10T13:04:45.000Z","updated":"2021-06-24T12:28:42.635Z","comments":true,"path":"2020/03/10/Webpack4-0-å­¦ä¹ ç¬”è®°-ä¸‹.html","link":"","permalink":"https://i7eo.com/2020/03/10/Webpack4-0-å­¦ä¹ ç¬”è®°-ä¸‹.html","excerpt":"Webpack4.0 å­¦ä¹ ç¬”è®°æµè§ˆå™¨ Cachingå½“æˆ‘ä»¬åœ¨æ‰“åŒ…èµ„æºçš„æ—¶å€™èµ„æºåä»¥æ–‡ä»¶åå‘½åï¼Œä¿®æ”¹èµ„æºï¼Œæ¥ç€æ™®é€šåˆ·æ–°èµ„æºæ˜¯ä¸ä¼šæ”¹å˜çš„ï¼ˆå…¶å®æ˜¯æµè§ˆå™¨å°†ä¸Šä¸€æ¬¡çš„èµ„æºç¼“å­˜äº†ï¼‰ã€‚è§£å†³æ–¹æ³•å°±æ˜¯åœ¨èµ„æºå‘½åå¤„åŠ ä¸Š [contenthash] æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…ˆæ¥çœ‹å‡ ä¸ªæ¦‚å¿µ: runtime:åœ¨æµè§ˆå™¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œwebpack ç”¨æ¥è¿æ¥æ¨¡å—åŒ–åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä»£ç ã€‚å®ƒåŒ…å«ï¼šåœ¨æ¨¡å—äº¤äº’æ—¶ï¼Œè¿æ¥æ¨¡å—æ‰€éœ€çš„åŠ è½½å’Œè§£æé€»è¾‘ã€‚åŒ…æ‹¬ï¼šå·²ç»åŠ è½½åˆ°æµè§ˆå™¨ä¸­çš„è¿æ¥æ¨¡å—é€»è¾‘ï¼Œä»¥åŠå°šæœªåŠ è½½æ¨¡å—çš„å»¶è¿ŸåŠ è½½é€»è¾‘ã€‚åœ¨æœªä½¿ç”¨ optimization: { runtimeChunk: { name: &#39;runtime&#39; } } æ—¶ï¼Œruntime è¢«å­˜æ”¾åœ¨å…¥å£çš„ main.js ä¸­ï¼Œåªæœ‰ä½¿ç”¨åæ‰ä¼šè¢«å•ç‹¬æ‰“åŒ…å‡ºæ¥ã€‚ manifest:å­˜åœ¨äº runtime ä¸­ï¼Œå½“ webpack compiler å¼€å§‹æ‰§è¡Œã€è§£æå’Œæ˜ å°„åº”ç”¨ç¨‹åºæ—¶ï¼Œmanifest ä¼šä¿ç•™å½¢å¦‚ index.html æ–‡ä»¶ã€å„ä¸ª bundle å’Œå„ç§èµ„æºæ¨¡å—çš„è¯¦ç»†è¦ç‚¹ï¼Œè¿™ä¸ªæ•°æ®é›†åˆç§°ä¸º â€œmanifestâ€ï¼Œå½“å®Œæˆæ‰“åŒ…å¹¶å‘é€åˆ°æµè§ˆå™¨æ—¶ï¼Œruntime ä¼šé€šè¿‡ manifest æ¥è§£æå’ŒåŠ è½½æ¨¡å—ã€‚æ— è®ºä½ é€‰æ‹©å“ªç§ æ¨¡å—è¯­æ³•ï¼Œé‚£äº› import æˆ– require è¯­å¥ç°åœ¨éƒ½å·²ç»è½¬æ¢ä¸º __webpack_require__ æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æŒ‡å‘æ¨¡å—æ ‡è¯†ç¬¦(module identifier)ã€‚é€šè¿‡ä½¿ç”¨ manifest ä¸­çš„æ•°æ®ï¼Œruntime å°†èƒ½å¤Ÿæ£€ç´¢è¿™äº›æ ‡è¯†ç¬¦ï¼Œæ‰¾å‡ºæ¯ä¸ªæ ‡è¯†ç¬¦èƒŒåå¯¹åº”çš„æ¨¡å—ã€‚ åœ¨ç¨ä½ç‰ˆæœ¬çš„ webpack ä¸­åŠ ä¸Šäº† contenthash å³ä½¿å†…å®¹æ²¡å˜åŒ–ï¼Œcontenthash ä¹Ÿä¼šæ”¹å˜ã€‚é‚£è¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼ŸåŸå› æ˜¯å› ä¸ºåœ¨ webpack ä¸­æ¯ä¸ªèµ„æºéƒ½æ˜¯ chunkï¼Œæ¯ä¸ª chunk éƒ½ä¼šæœ‰å¯¹åº”çš„ chunk id(æ¨¡å—æ ‡è¯†ç¬¦ module identifier)ï¼Œchunk id çš„é¡ºåºæ˜¯æ’åˆ—å¥½çš„ï¼Œæ–°åˆ›å»ºä¸€ä¸ª js èµ„æºç„¶ååœ¨ index.js ä¸­å¼•ç”¨éƒ½ä¼šå¼•èµ· chunk id çš„é¡ºåºå˜åŒ–ï¼Œé¡ºåºå˜åŒ–äº†å°±ä¼šå¯¼è‡´ manifest æ–‡ä»¶çš„å˜åŒ–ï¼Œåˆå› ä¸º runtime åŒ…å« manifestï¼Œæ‰€ä»¥ runtime å˜åŒ–ã€‚ å…·ä½“äº‹ä¾‹è¯·å‚è€ƒ: https://webpack.docschina.org/guides/caching åªéœ€è¦å°† runtime æå‡ºå³å¯è§£å†³è¯¥é—®é¢˜ï¼šoptimization: { runtimeChunk: { name: &#39;runtime&#39; } }","text":"Webpack4.0 å­¦ä¹ ç¬”è®°æµè§ˆå™¨ Cachingå½“æˆ‘ä»¬åœ¨æ‰“åŒ…èµ„æºçš„æ—¶å€™èµ„æºåä»¥æ–‡ä»¶åå‘½åï¼Œä¿®æ”¹èµ„æºï¼Œæ¥ç€æ™®é€šåˆ·æ–°èµ„æºæ˜¯ä¸ä¼šæ”¹å˜çš„ï¼ˆå…¶å®æ˜¯æµè§ˆå™¨å°†ä¸Šä¸€æ¬¡çš„èµ„æºç¼“å­˜äº†ï¼‰ã€‚è§£å†³æ–¹æ³•å°±æ˜¯åœ¨èµ„æºå‘½åå¤„åŠ ä¸Š [contenthash] æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…ˆæ¥çœ‹å‡ ä¸ªæ¦‚å¿µ: runtime:åœ¨æµè§ˆå™¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œwebpack ç”¨æ¥è¿æ¥æ¨¡å—åŒ–åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä»£ç ã€‚å®ƒåŒ…å«ï¼šåœ¨æ¨¡å—äº¤äº’æ—¶ï¼Œè¿æ¥æ¨¡å—æ‰€éœ€çš„åŠ è½½å’Œè§£æé€»è¾‘ã€‚åŒ…æ‹¬ï¼šå·²ç»åŠ è½½åˆ°æµè§ˆå™¨ä¸­çš„è¿æ¥æ¨¡å—é€»è¾‘ï¼Œä»¥åŠå°šæœªåŠ è½½æ¨¡å—çš„å»¶è¿ŸåŠ è½½é€»è¾‘ã€‚åœ¨æœªä½¿ç”¨ optimization: { runtimeChunk: { name: &#39;runtime&#39; } } æ—¶ï¼Œruntime è¢«å­˜æ”¾åœ¨å…¥å£çš„ main.js ä¸­ï¼Œåªæœ‰ä½¿ç”¨åæ‰ä¼šè¢«å•ç‹¬æ‰“åŒ…å‡ºæ¥ã€‚ manifest:å­˜åœ¨äº runtime ä¸­ï¼Œå½“ webpack compiler å¼€å§‹æ‰§è¡Œã€è§£æå’Œæ˜ å°„åº”ç”¨ç¨‹åºæ—¶ï¼Œmanifest ä¼šä¿ç•™å½¢å¦‚ index.html æ–‡ä»¶ã€å„ä¸ª bundle å’Œå„ç§èµ„æºæ¨¡å—çš„è¯¦ç»†è¦ç‚¹ï¼Œè¿™ä¸ªæ•°æ®é›†åˆç§°ä¸º â€œmanifestâ€ï¼Œå½“å®Œæˆæ‰“åŒ…å¹¶å‘é€åˆ°æµè§ˆå™¨æ—¶ï¼Œruntime ä¼šé€šè¿‡ manifest æ¥è§£æå’ŒåŠ è½½æ¨¡å—ã€‚æ— è®ºä½ é€‰æ‹©å“ªç§ æ¨¡å—è¯­æ³•ï¼Œé‚£äº› import æˆ– require è¯­å¥ç°åœ¨éƒ½å·²ç»è½¬æ¢ä¸º __webpack_require__ æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æŒ‡å‘æ¨¡å—æ ‡è¯†ç¬¦(module identifier)ã€‚é€šè¿‡ä½¿ç”¨ manifest ä¸­çš„æ•°æ®ï¼Œruntime å°†èƒ½å¤Ÿæ£€ç´¢è¿™äº›æ ‡è¯†ç¬¦ï¼Œæ‰¾å‡ºæ¯ä¸ªæ ‡è¯†ç¬¦èƒŒåå¯¹åº”çš„æ¨¡å—ã€‚ åœ¨ç¨ä½ç‰ˆæœ¬çš„ webpack ä¸­åŠ ä¸Šäº† contenthash å³ä½¿å†…å®¹æ²¡å˜åŒ–ï¼Œcontenthash ä¹Ÿä¼šæ”¹å˜ã€‚é‚£è¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼ŸåŸå› æ˜¯å› ä¸ºåœ¨ webpack ä¸­æ¯ä¸ªèµ„æºéƒ½æ˜¯ chunkï¼Œæ¯ä¸ª chunk éƒ½ä¼šæœ‰å¯¹åº”çš„ chunk id(æ¨¡å—æ ‡è¯†ç¬¦ module identifier)ï¼Œchunk id çš„é¡ºåºæ˜¯æ’åˆ—å¥½çš„ï¼Œæ–°åˆ›å»ºä¸€ä¸ª js èµ„æºç„¶ååœ¨ index.js ä¸­å¼•ç”¨éƒ½ä¼šå¼•èµ· chunk id çš„é¡ºåºå˜åŒ–ï¼Œé¡ºåºå˜åŒ–äº†å°±ä¼šå¯¼è‡´ manifest æ–‡ä»¶çš„å˜åŒ–ï¼Œåˆå› ä¸º runtime åŒ…å« manifestï¼Œæ‰€ä»¥ runtime å˜åŒ–ã€‚ å…·ä½“äº‹ä¾‹è¯·å‚è€ƒ: https://webpack.docschina.org/guides/caching åªéœ€è¦å°† runtime æå‡ºå³å¯è§£å†³è¯¥é—®é¢˜ï¼šoptimization: { runtimeChunk: { name: &#39;runtime&#39; } } Tree Shakingæè¿°ç§»é™¤ JavaScript ä¸Šä¸‹æ–‡ä¸­çš„æœªå¼•ç”¨ä»£ç (dead-code)ã€‚å®ƒä¾èµ–äº ES2015 æ¨¡å—è¯­æ³•çš„ é™æ€ç»“æ„ ç‰¹æ€§ï¼Œä¾‹å¦‚ import å’Œ exportã€‚ è¿™é‡Œæ³¨æ„åªæ”¯æŒ es module çš„è¯­æ³•ï¼Œcommonjs ä¸æ”¯æŒã€‚å…·ä½“åŸå› è¯·å‚è€ƒï¼šæ·±å…¥ CommonJs ä¸ ES6 Module 12345678910111213141516// webpack.config.jsmodule.exports = &#123; mode: 'development', devtools: 'cheap-module-eval-source-map', // ... optimization: &#123; usedExports: true &#125;&#125;// package.json&#123; // ... sideEffects: false // è¿™é‡ŒæŒ‡å…¨éƒ¨æ–‡ä»¶éƒ½è¦è¿›è¡Œ tree-shaking // sideEffects: [\"@babel/polyfill\", \"*.css\"] // æŒ‡é™¤äº† polyfill cssæ–‡ä»¶å…¶ä»–éƒ½è¿›è¡Œ tree-shaking&#125; å¼€å‘ç¯å¢ƒä¸­å³ä½¿é…ç½®äº† optimization ä½†æ˜¯åœ¨æ‰“åŒ…åçš„ js ä¸­ä»£ç è¿˜æ˜¯ä¿æŒåŸçŠ¶ï¼Œå› ä¸ºåœ¨å¼€å‘ç¯å¢ƒä¸­æˆ‘ä»¬éœ€è¦ç»å¸¸è°ƒè¯•ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ tree-shaking ä¼šå¯¼è‡´ä¸€äº›éš¾ä»¥è¿½è¸ªçš„é—®é¢˜ï¼Œæ‰€ä»¥ webpack ä¸­åœ¨ç”Ÿäº§ç¯å¢ƒå³ä½¿ä¸é…ç½® optimization ä¹Ÿä¼šè‡ªåŠ¨å¼€å¯ tree-shakingï¼Œé»˜è®¤çš„ sideEffects: false , å¦‚ä¸‹ï¼š 123456789101112// webpack.config.jsmodule.exports = &#123; mode: 'production', devtools: 'cheap-module-source-map', // ...&#125;// package.json&#123; // ... sideEffects: false // è¿™é‡ŒæŒ‡å…¨éƒ¨æ–‡ä»¶éƒ½è¦è¿›è¡Œ tree-shaking&#125; Code Splittingä»£ç åˆ†å‰²è¿™ä¸ªæ¦‚å¿µå¾ˆæ—©å°±å‡ºç°äº†ï¼Œåªä¸è¿‡éƒ½æ˜¯æˆ‘ä»¬äººä¸ºçš„æ‹†åˆ†ã€åˆ†ç¦»ä»£ç ã€‚è¿™å¹¶ä¸æ˜¯ webpack ç‹¬æœ‰çš„ã€‚ å¸¸ç”¨çš„ä»£ç åˆ†ç¦»æ–¹æ³•æœ‰ä¸‰ç§ï¼š å…¥å£èµ·ç‚¹ï¼šä½¿ç”¨ entry é…ç½®æ‰‹åŠ¨åœ°åˆ†ç¦»ä»£ç ã€‚ é™æ€å¯¼å…¥ï¼šä½¿ç”¨ SplitChunksPlugin å»é‡å’Œåˆ†ç¦» chunkã€‚ åŠ¨æ€å¯¼å…¥ï¼šé€šè¿‡æ¨¡å—ä¸­çš„å†…è”å‡½æ•°è°ƒç”¨æ¥åˆ†ç¦»ä»£ç ã€‚ é…ç½®å¤šå…¥å£ï¼Œä¼šå°†å…¥å£å¤„çš„æ–‡ä»¶ä¾æ¬¡æ”¾å…¥ index.html ä¸­é€šè¿‡åœ¨æ–‡ä»¶å¤´éƒ¨ import _ from &#39;lodash&#39; æˆ‘ä»¬å¯ä»¥åœ¨ webpack é…ç½®ä¸­æ·»åŠ  optimization: {splitChunks: { chunks: &#39;all&#39; }} å³å¯å¼‚æ­¥ä»£ç ï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰æ–‡ä»¶æ— éœ€é…ç½® webpack æ–‡ä»¶ï¼Œwebpack ä¼šè‡ªåŠ¨è¿›è¡Œä»£ç åˆ†ç¦»split chunkså½“æˆ‘ä»¬åœ¨ optimization: { splitChunks: {} } æ²¡æœ‰é…ç½®ä»»ä½•å‚æ•°çš„æ—¶å€™è¿™é‡Œå…¶å®æ‰§è¡Œäº† webpack çš„é»˜è®¤é…ç½®ï¼Œé…ç½®å¦‚ä¸‹ï¼šï¼ˆå…·ä½“è¯·å‚è€ƒ SplitChunksPluginï¼‰ 123456789101112131415161718192021222324252627// webpack é»˜è®¤é…ç½®module.exports = &#123; //... optimization: &#123; splitChunks: &#123; chunks: 'async', minSize: 30000, maxSize: 0, minChunks: 1, maxAsyncRequests: 5, maxInitialRequests: 3, automaticNameDelimiter: '~', name: true, cacheGroups: &#123; vendors: &#123; test: /[\\\\/]node_modules[\\\\/]/, priority: -10 &#125;, default: &#123; minChunks: 2, priority: -20, reuseExistingChunk: true &#125; &#125; &#125; &#125;&#125;; 1 chunks: all | async | initial , å½“ä¸º async æ—¶åªæ”¯æŒå¼‚æ­¥å¼•å…¥çš„èµ„æºæ‰“åŒ…ï¼Œå½“ä¸º all æ—¶å¼‚æ­¥ã€åŒæ­¥èµ„æºå‡å¯è¢«æ‰“åŒ…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å½“ä¸º all æ—¶ cacheGroups å¿…é¡»é…ç½®ï¼Œä¸è®¾ç½®å…¶ä¸­çš„å±æ€§ filename çš„è¯æ‰“åŒ…å‡ºæ¥çš„èµ„æºåä¸º vendors~main.js æ„æ€æ˜¯åœ¨ vendors ç»„ä¸‹ï¼Œèµ„æºå…¥å£ä¸º main.js æˆ‘ä»¬å¯ä»¥è®¾ç½® filename: â€˜vendors.jsâ€™ 2 minSize æ˜¯æŒ‡å½“èµ„æºå¤§äºè¯¥å€¼æ‰å‘ä¸‹æ‰§è¡Œï¼Œå°äºåˆ™ä¸æ‰§è¡Œ 3 maxSize æ˜¯æŒ‡å½“èµ„æºå¤§äºè¯¥å€¼æ—¶ webpack å°è¯•å°†èµ„æºç”¨è¯¥å€¼æ¥åˆ†å‰²ä¸ºå¤šä»½ï¼Œä¸€èˆ¬ä¸é…ç½®æˆ–ä¸º0å³å¯ 4 minChunks æ˜¯æŒ‡å½“ä¸€ä¸ªèµ„æº(jquery lodashâ€¦)è¢«ç”¨äº†è‡³å°‘å‡ æ¬¡åæ‰åˆ†å‰² 5 maxAsyncRequests æ˜¯æŒ‡åŒæ—¶åŠ è½½èµ„æºçš„ä¸ªæ•°ï¼Œå‡å¦‚è¿™é‡Œè®¾ç½®5ï¼Œå½“ webpack åˆ†å‰²ç¬¬5å—èµ„æºå®Œæ¯•åå‰©ä¸‹çš„èµ„æºä¸ä¼šå†åˆ†å‰² 6 maxInitialRequests æŒ‡ç½‘ç«™é¦–é¡µï¼ˆå…¥å£æ–‡ä»¶ï¼‰æœ€å¤šåˆ†å‰²æ¨¡å—æ•° 7 automaticNameDelimiter æŒ‡çš„æ˜¯å½“æ²¡é…ç½® filename æ—¶æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶ vendors~lodash.js ä¸­çš„ï½è¿æ¥ç¬¦ 8 name æŒ‡çš„æ˜¯æ˜¯å¦è®© cacheGroups ä¸­é…ç½®çš„ filename ç”Ÿæ•ˆ 9 cacheGroups é¡¾åæ€ä¹‰æ˜¯ç¼“å­˜ç»„çš„æ„æ€ï¼Œå‡è®¾æ­¤æ—¶æˆ‘åŒæ­¥å¯¼å…¥12import _ from 'lodash'import $ from 'jquery' å¦‚æœæ²¡æœ‰è¿™ä¸€é¡¹åˆ™ä¼šæ‰“åŒ…å‡ºæ¥ä¿©ä¸ª vendor æ–‡ä»¶ï¼Œæœ‰äº†è¯¥é¡¹åå…ˆæ‰“åŒ… lodash æ”¾å…¥ vendros ç»„ä¸­ï¼Œåœ¨æ‰“åŒ… jquery å‘ç°æ»¡è¶³é…ç½®ï¼Œå†æ”¾å…¥ vendors ä¸­ï¼Œç”Ÿæˆä¸€ä¸ª vendors æ–‡ä»¶ã€‚é‚£ä¹ˆ default æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿ 123import _ from 'lodash'import $ from 'jquery'import Header from './Header.js' lodash ä¸ jquery å‡æ”¾å…¥ vendors ç»„ä¸­ï¼Œè€Œ Header å¹¶ä¸åœ¨ node_modules ä¸­æ‰€ä»¥æ”¾å…¥ default ç»„ä¸­ã€‚å¦‚æœæ­¤æ—¶æ²¡æœ‰ default é€‰é¡¹é‚£ä¹ˆ Header å¹¶ä¸ä¼šè¢«åˆ†å‰²å‡ºæ¥ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ vendors ä¸­çš„ test å¹¶ä¸æ˜¯åªèƒ½åŒ¹é… node_modulesï¼Œdefault åŒç†ã€‚ 10 priority æŒ‡æ‰“åŒ…ä¼˜å…ˆçº§ï¼Œåœ¨ä¸Šé¢çš„é»˜è®¤é…ç½®ä»£ç ä¸­ default å¹¶æ²¡æœ‰é…ç½® testï¼Œæ‰€ä»¥æ­¤æ—¶å¦‚æœæˆ‘ä»¬å¼•å…¥ import _ from &#39;lodash&#39; æ˜¯æ—¢æ»¡è¶³ vendors ç»„åˆæ»¡è¶³ default ç»„ï¼Œé‚£ä¹ˆ lodash è¯¥å»å“ªå‘¢ï¼Ÿæ­¤æ—¶æ¯”è¾ƒ priority çš„å¤§å°ï¼Œæ”¾å…¥æ•°å€¼å¤§çš„ç»„ä¸­ã€‚ 11 reuseExistingChunk æŒ‡çš„æ˜¯å¦‚æœå‡ºç°èµ„æºäº’ç›¸çš„æƒ…å†µé‚£ä¹ˆå¦‚æœè¢«å¼•ç”¨èµ„æºå·²ç»è¢«æ‰“åŒ…è¿‡å°±ç›´æ¥ä½¿ç”¨ï¼Œé¿å…é‡å¤æ‰“åŒ… tips1 åœ¨è¿›è¡Œä»£ç åˆ†å‰²åæ‰“åŒ…æ–‡ä»¶ä¼šå‡ºç° vendors~lodash.js è¿™æ ·çš„ vendor å‰ç¼€ï¼Œå¦‚æœæƒ³è¦å»æ‰çš„è¯éœ€è¦é…ç½® vendors: false, default: false 2 âš ï¸ å¤„ç†åŒæ­¥å¼•å…¥èµ„æºæ‰“åŒ…ï¼ˆå³ chunks ä¸º all æˆ–è€… innitalï¼‰æ—¶ä¸é…ç½® cacheGroups æ˜¯ä¸ä¼šå°†ç¬¦åˆ cacheGroups ä¹‹å‰æ¡ä»¶çš„èµ„æºåˆ†å‰²æ‰“åŒ…å‡ºæ¥ lazy loadinngå…ˆçœ‹ä¿©æ®µä»£ç ï¼š 1234567891011121314151617import $ from 'jquery'const el = $('&lt;div&gt;i7eo&lt;/div&gt;')$('body').append(el)``` ```javascriptconst getJquery = () =&gt; import(/* webpackChunkName: \"jquery\" */ 'jquery').then((&#123; default: $ &#125;) =&gt; &#123; return $&#125;)document.addEventListener('click', () =&gt; &#123; getJquery().then($ =&gt; &#123; const el = $('&lt;div&gt;i7eo&lt;/div&gt;') $('body').append(el) &#125;)&#125;) ç¬¬ä¸€æ®µä»£ç æ˜¯åŒæ­¥æ‰§è¡Œï¼Œè€Œç¬¬äºŒæ®µæˆ‘ä»¬ä½¿ç”¨äº†å¼‚æ­¥åŠ è½½çš„æ–¹å¼ï¼Œè™½ç„¶æ‰“åŒ…çš„æ—¶å€™ jquery ä¹Ÿè¢«æ‰“åŒ…äº†å‡ºæ¥ä½†æ˜¯è¿›å…¥é¡µé¢ç¬¬ä¸€æ—¶é—´å¹¶ä¸ä¼šåŠ è½½ï¼Œåªæœ‰å½“å•å‡»é¡µé¢æ—¶æ‰ä¼šåŠ è½½ï¼Œè¿™å°±æ˜¯å¼‚æ­¥åŠ è½½ï¼ˆlazy loadingï¼‰çš„å¥½å¤„ã€‚ä¸‰å¤§æ¡†æ¶ä¸­åŠ¨æ€è·¯ç”±ä¹Ÿæ˜¯è¿ç”¨äº†è¿™æ ·çš„æŠ€å·§ã€‚ç¬¬äºŒæ®µä»£ç å¯ä»¥ä½¿ç”¨ async await æ”¹å†™å…·ä½“å¦‚ä¸‹ï¼š1234567891011async function getJquery() &#123; const &#123; default: $ &#125; = await import(/* webpackChunkName: \"jquery\" */ 'jquery') return $&#125;document.addEventListener('click', () =&gt; &#123; getJquery().then($ =&gt; &#123; const el = $('&lt;div&gt;i7eo&lt;/div&gt;') $('body').append(el) &#125;)&#125;) pre-fetch/pre-loadingé™¤äº†åˆ©ç”¨ç¼“å­˜æ¥æé«˜é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•åœ¨ä»£ç å±‚é¢è¿˜æé«˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨ chrome æŸ¥çœ‹ coverageï¼ˆcommande+shift+pï¼‰ï¼Œè§‚å¯Ÿä»£ç ä½¿ç”¨ç‡çš„æƒ…å†µä»è€Œæ‰¾å‡ºæœªä½¿ç”¨çš„ä»£ç åšæˆå¼‚æ­¥åŠ è½½æ¥å®ç°ã€‚ æ€è€ƒè¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæœ‰ä¸€ä¸ªç®¡ç†åå°ï¼Œå³ä¸Šè§’æœ‰ä¸€ä¸ªç™»é™†æŒ‰é’®ï¼Œå•å‡»åå‡ºç°ä¸€ä¸ªå¼¹çª—ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠå•å‡»äº‹ä»¶ä¸­çš„å¼¹çª—é€»è¾‘ä½¿ç”¨ import æ”¹ä¸ºå¼‚æ­¥ä»£ç ï¼Œé¦–æ¬¡è¿›å…¥é¡µé¢ä¸åŠ è½½ï¼Œå•å‡»æ—¶å†åŠ è½½ã€‚ä½†æ˜¯å¦‚æœé€»è¾‘è¾ƒå¤šæˆ–ç½‘ç»œä¸ç¨³å®šå°±ä¼šå‡ºç°å•å‡»åå¼¹çª—å»¶è¿Ÿå‡ºç°çš„å¯èƒ½ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ pre-fetch/pre-loading æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ç°æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ import(/* webpackPrefetch:true */ &#39;./Popup.js&#39;) æ”¹å†™é­”æ³•æ³¨é‡Šå°±å¯ä»¥å®ç°ã€‚pre-fetch/pre-loading çš„åŒºåˆ«åœ¨äº fetch æ˜¯åœ¨é¡µé¢åŠ è½½å®Œæ¯•ååŠ è½½ï¼Œloading æ˜¯ä¸é¡µé¢çš„ä¸»é€»è¾‘èµ„æºä¸€åŒåŠ è½½ã€‚ï¼ˆæ³¨æ„æµè§ˆå™¨å¯¹è¿™äºŒè€…çš„å…¼å®¹æ€§ï¼‰ shimmingæ ¹æ®å®˜ç½‘çš„è§£é‡Šæ¥çœ‹ shimming æ˜¯ä¾èµ–é¢„ç½®çš„æ„æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼š è¯•æƒ³ç°åœ¨æœ‰ä¸€ä¸ªè€é¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸Šåƒä¸ªé¡µé¢ï¼Œæ¯ä¸ªé¡µé¢éƒ½å¾—ç”¨åˆ° juqeryï¼Œç°åœ¨æˆ‘ä»¬è¦å¯¹è¯¥é¡¹ç›®åˆ©ç”¨ webpack æ”¹é€ ï¼Œé‚£ä¹ˆ juqery çš„ä¾èµ–åº”è¯¥æ€ä¹ˆå¤„ç†?æ–¹æ³•1: åœ¨å…¥å£æ–‡ä»¶å¤„å°† jquery æŒ‚è½½åˆ° window ä¸Šã€‚window.$ = $æ–¹æ³•2: é…ç½® shimmingï¼Œå…·ä½“å¦‚ä¸‹ï¼š12345678module.exports = &#123; // ... plugins: [ new webpack.ProvidePlugin(&#123; $: 'jquery' &#125;) ]&#125; å®˜æ–¹æ¨èçš„æ–¹å¼æ˜¯æ–¹æ³•å2ï¼Œå…·ä½“å¯å‚è€ƒ https://webpack.docschina.org/guides/shimming/æ–¹æ³•2ä¸­å¯¹ webpack é…ç½®åå…¶å®ä¹Ÿæ˜¯åœ¨éœ€è¦ä½¿ç”¨ $ çš„æ–‡ä»¶å¤´éƒ¨è‡ªåŠ¨æ³¨å…¥ import $ from &#39;jquery&#39;ã€‚é…åˆ split code ä½¿ç”¨æ•ˆæœæ›´ä½³ åœ¨ es module æ–‡ä»¶ä¸­ this æ˜¯æŒ‡å‘å½“å‰æ–‡ä»¶ï¼ˆmoduleï¼‰çš„ï¼Œå¦‚ä½•ä½¿ this æŒ‡å‘ window ï¼Ÿ1 å®‰è£… npm i imports-loader -D 2 é…ç½® loader12345678910111213141516module.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\\.js$/, exclude: /node_modules/, use: [ &#123;loader: 'babel-loader'&#125;, &#123;loader: 'imports-loader?this=&gt;window'&#125; ], // loader: 'babel-loader' &#125; ] &#125;&#125; tips1. import ä¸­æ³¨é‡Šçš„å†™æ³•ç§°ä½œ magic commentï¼Œå…·ä½“è¯·å‚è€ƒ [magic comment](https://webpack.docschina.org/api/module-methods/#magic-comments)ï¼Œè¿™é‡Œæƒ³ä½¿æ³¨é‡Šç”Ÿæ•ˆçš„è¯è¯·å®‰è£… `@babel/plugin-syntax-dynamic-import` 2. chunk å°±æ˜¯æŒ‡çš„å°±æ˜¯ dist ä¸‹çš„ js èµ„æº 3. å‰ç«¯æ€§èƒ½çš„æå‡ä»ç¼“å­˜è§’åº¦æ¥çœ‹æå‡æ˜¯å¾ˆæœ‰é™çš„ï¼Œç€é‡è¿˜æ˜¯è¦ä»ä»£ç è§’åº¦æ¥è€ƒè™‘ã€‚æä¸€ä¸ªç‚¹ï¼Œå¯¹èµ„æºç¼“å­˜åªæ˜¯é’ˆå¯¹éé¦–æ¬¡è®¿é—®æé€Ÿï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡æ”¾è®¿é—®åº”è¯¥æ€ä¹ˆåŠï¼Ÿè¿˜æ˜¯è¦ä»ä»£ç çš„è§’åº¦å¤šè€ƒè™‘","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://i7eo.com/tags/webpack/"},{"name":"webpack4.0","slug":"webpack4-0","permalink":"https://i7eo.com/tags/webpack4-0/"}]},{"title":"Webpack4.0 å­¦ä¹ ç¬”è®°ï¼ˆä¸Šï¼‰","slug":"Webpack4-0-å­¦ä¹ ç¬”è®°-ä¸Š","date":"2020-03-03T15:04:45.000Z","updated":"2021-06-24T12:28:34.886Z","comments":true,"path":"2020/03/03/Webpack4-0-å­¦ä¹ ç¬”è®°-ä¸Š.html","link":"","permalink":"https://i7eo.com/2020/03/03/Webpack4-0-å­¦ä¹ ç¬”è®°-ä¸Š.html","excerpt":"Webpack4.0 å­¦ä¹ ç¬”è®°webpackæ˜¯ä»€ä¹ˆï¼Ÿwebpack æ˜¯æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œåº•å±‚çš„æ–‡ä»¶å¤„ç†é€»è¾‘å…¨éƒ¨ç”± node å®Œæˆ æ”¯æŒçš„æ¨¡å—çš„è§„èŒƒwebpack æ”¯æŒå¤šç§æ¨¡å—è§„èŒƒï¼Œes6: import/export default | common.js: reuqire/moudle.export | AMD: define/require | styles file: @import | resource file: &lt;img src=...&gt;ã€‚åœ¨ webpack å‘å±•åˆæœŸåªæ˜¯æ‰“åŒ… jsï¼Œä½†éšç€å‘å±•åç°åœ¨å¯ä»¥æ‰“åŒ… js/css ç­‰æ–‡ç« ","text":"Webpack4.0 å­¦ä¹ ç¬”è®°webpackæ˜¯ä»€ä¹ˆï¼Ÿwebpack æ˜¯æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œåº•å±‚çš„æ–‡ä»¶å¤„ç†é€»è¾‘å…¨éƒ¨ç”± node å®Œæˆ æ”¯æŒçš„æ¨¡å—çš„è§„èŒƒwebpack æ”¯æŒå¤šç§æ¨¡å—è§„èŒƒï¼Œes6: import/export default | common.js: reuqire/moudle.export | AMD: define/require | styles file: @import | resource file: &lt;img src=...&gt;ã€‚åœ¨ webpack å‘å±•åˆæœŸåªæ˜¯æ‰“åŒ… jsï¼Œä½†éšç€å‘å±•åç°åœ¨å¯ä»¥æ‰“åŒ… js/css ç­‰æ–‡ç«  loaderloader å°±æ˜¯ webpack é™¤ js æ–‡ä»¶å¤–å¸®åŠ©å…¶è¯†åˆ«ã€å¤„ç†å¯¹åº”èµ„æºçš„ js æ–‡ä»¶1. file-loader å°±æ˜¯å°†å›¾ç‰‡èµ„æºå¤åˆ¶ç²˜è´´è¿›ä½ é…ç½®çš„æ‰“åŒ…æ–‡ä»¶è·¯å¾„ä¸­ï¼Œå¹¶å°†æœ€æ–°çš„ç¬¦åˆä½ é…ç½®è§„åˆ™çš„å›¾ç‰‡åç§°ï¼ˆè·¯å¾„ï¼‰è¿”å›ï¼Œä¾›ä»£ç ä½¿ç”¨ 2. [&apos;style-loader&apos;, &apos;css-loader&apos;] å…ˆæ‰§è¡Œ css-loader åˆ†ææ¸…æ¥š css é—´çš„å…³ç³»ï¼Œå¹¶å°†å…¶æ•´åˆä¸ºä¸€ä¸ª css æ–‡ä»¶ï¼›style-loader åˆ™å°†è¿™ä¸ª css æ–‡ä»¶æŒ‚è½½åˆ° html çš„ head åº•éƒ¨ã€‚ 3. css-loader çš„ options ä¸­è®¾ç½® `importLoaders: 2` æŒ‡çš„æ˜¯ index.scss ä¸­ @import äº† a.scssï¼Œa.scss ä¸­ @import äº† b.scssï¼Œå¦‚æœä¸åŠ è¿™ä¸€é¡¹å°±ä¼šå¯¼è‡´ b.scss æ— æ³•èµ° scss-loader è®¾ç½®è¿™ä¸ªçš„ç›®çš„å°±æ˜¯ä¸ºäº†ç¡®ä¿ b.scss å…ˆèµ° postcss-loader =ã€‹scss-loader å†èµ° css-loader =ã€‹style-loader 4. css moudle çš„é…ç½®éœ€è¦åœ¨ css-loader çš„ option ä¸­è®¾ç½® `modules: true` å³å¯ä½¿ç”¨ `style.xxx` pluginplugin æ˜¯ webpack çš„æ’ä»¶æ¥å£ï¼Œè¿™ä¸ªæ’ä»¶æ¥å£ä½¿ webpack å˜å¾—æå…¶çµæ´»ã€‚åŸç†å°±æ˜¯å¯ä»¥åœ¨ webpack è¿è¡Œåˆ°æŸä¸€æ—¶åˆ»çš„æ—¶å€™ï¼Œå¸®ä½ åšä¸€äº›äº‹æƒ…ã€‚ï¼ˆç±»æ¯”ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ï¼‰1. html-webpack-plugin: è¯¥æ’ä»¶å°†ä¸ºä½ ç”Ÿæˆä¸€ä¸ª HTML5 æ–‡ä»¶ï¼Œ å¹¶å°†æ‰“åŒ…ç”Ÿæˆçš„ js è‡ªåŠ¨æ’å…¥åˆ°è¿™ä¸ª html ä¸­ã€‚å½“ webpack æ‰“åŒ…èµ„æºç»“æŸè¿™ä¸ªæ—¶åˆ»å¼€å§‹å·¥ä½œ 2. clean-webpack-plugin: è¯¥æ’ä»¶å½“ webpack æ‰“åŒ…å‰è¿™ä¸ªæ—¶åˆ»å…ˆåˆ é™¤ä¹‹å‰çš„æ‰“åŒ…æ–‡ä»¶ï¼ˆdistï¼‰ 3. webpack.HotMoudleReplacementPlugin() HMR æŒ‡çš„æ˜¯åœ¨ä¸åˆ·æ–° .html æ–‡ä»¶ä¸‹åªæ›´æ–°ï¼ˆä¿ç•™å½“å‰é¡µé¢çš„çŠ¶æ€åŒ…æ‹¬jsç»“æœï¼‰å˜åŠ¨çš„ä»£ç ï¼ˆæ ·å¼ç­‰ï¼‰å¯¹åº”çš„åœ¨ devserver ä¸­éœ€è¦å¼€å¯ hot/hotOnly devServerdevServer æ˜¯ webpack åœ¨æœ¬åœ°çš„å¼€å‘ç¯å¢ƒä¸‹åˆ©ç”¨ http-proxy-middleware &amp; node å¼€å¯çš„ä¸€ä¸ªæœåŠ¡å™¨è¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹ proxy çš„é…ç½®ï¼Œå¦‚ä¸‹ï¼š1234567891011121314151617181920212223module.exports = &#123; // ... devServer: &#123; contentBase: './dist', open: true, port: 8080, hot: true, hotOnly: true, proxy: &#123; '/api': &#123; target: 'https://www.xxx.com', secure: false, pathRewrite: &#123; 'info.json': 'demo.json' &#125;, changeOrigin: true, headers: &#123; cookie: 'xxx' &#125; &#125; &#125; &#125;&#125; target æŒ‡æ¥å£è½¬å‘çš„ç›®æ ‡åœ°å€ï¼Œå¦‚æœç›®æ ‡ä½¿ç”¨äº† https åè®®ï¼Œé‚£ä¹ˆå¿…é¡»å¸¦ä¸Š secure: falseï¼Œå¦‚æœæ˜¯ httpï¼Œåˆ™å¯ä»¥ä¸é…ç½® secure æˆ–è€…ä½¿å…¶ä¸º true pathRewrite å¸¸ç”¨åº”ç”¨åœºæ™¯æ˜¯åå°æ­£åœ¨å¼€å‘æ¥å£ï¼Œä½†æ˜¯ä½ è¿™è¾¹éœ€è¦æ•°æ®ï¼Œåç«¯ç»™äº†ä¸€ä¸ª mock æ•°æ®çš„æ¥å£ï¼Œä½†æ˜¯åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½ åˆä¸æƒ³ä¿®æ”¹ info.json ä¸º demo.jsonï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè¿›è¡Œé…ç½®åæœŸæ³¨é‡Šæ‰å³å¯ changeOrigin æ˜¯ä¿®æ”¹å‘èµ·è¯·æ±‚çš„å¤´ä¿¡æ¯ï¼Œä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢è½¬å‘çš„ç›®æ ‡åœ°å€ä¼šå¯¹å¤´ä¿¡æ¯åšé™åˆ¶ï¼Œå¯¼è‡´æ‹¿ä¸åˆ°æ•°æ® headers ä¸­è®¾ç½®ä¸€äº›å¤´ä¿¡æ¯ã€cookie ä¸»è¦ç”¨æ¥æ¨¡æ‹Ÿç™»é™†çŠ¶æ€ webpack æ‰§è¡Œæ–¹å¼ å‘½ä»¤è¡Œæ‰§è¡Œï¼šhttps://webpack.docschina.org/api/cli/ node ä¸­æ‰§è¡Œï¼šhttps://webpack.docschina.org/api/node/ tips1 npx æƒ³è¦è§£å†³çš„ä¸»è¦é—®é¢˜ï¼Œå°±æ˜¯è°ƒç”¨é¡¹ç›®å†…éƒ¨å®‰è£…çš„æ¨¡å— 2 npx create-react-app my-react-app é¿å…å…¨å±€å®‰è£…æ¨¡å— 3 url-loader ä¸­åŒ…å« file-loader è¿™ä¿©è€…éƒ½èƒ½å¤„ç†èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰ä½†æ˜¯ url-loader çš„å¥½å¤„å°±æ˜¯å¯ä»¥è½¬æ¢å°†å›¾ç‰‡è‡ªåŠ¨è½¬ä¸º base64 4 output ä¸­é…ç½® cdn/oss åœ°å€éœ€è¦é…ç½® publicPath å¯ä»¥ä½¿ç”¨ç›¸å…³çš„ plugin è¿›è¡Œä¸Šä¼  5 sourcemap æ˜¯ä¸€ä¸ªæ˜ å°„ src åˆ° dist ä¸­ä»£ç çš„æ˜ å°„å…³ç³» 6 éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ babel:1234567891011121314151617181920212223242526272829303132333435363738// è¯¥æ–¹æ¡ˆåªé’ˆå¯¹äºä¸šåŠ¡ä»£ç // npm install --save-dev babel-loader @babel/core&#123; test: /\\.js$/, exclude: /node_modules/, loader: 'babel-loader', options: &#123; presets: ['@babel/preset-env'] &#125; &#125;// æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯è¿™æ ·é…ç½® babel çš„ï¼Œä½†å¦‚æœåœ¨ä»£ç ä¸­ä½¿ç”¨äº†ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸å…¼å®¹çš„ promiseã€map ç­‰æ–¹æ³•è¯¥æ€ä¹ˆåŠï¼Ÿ// npm install --save @babel/polyfill&#123; test: /\\.js$/, exclude: /node_modules/, loader: 'babel-loader', options: &#123; presets: [['@babel/preset-env', &#123; targets: &#123; chrome: '67' &#125;, useBuiltIns: 'usage' &#125;]] &#125; &#125;// è¿™æ ·é…ç½®ååªéœ€è¦åœ¨ä½¿ç”¨ es6 è¯­æ³•çš„åœ°æ–¹ import \"@babel/polyfill\" å³å¯ï¼Œä½†è¿™// æ ·çš„é—®é¢˜æ˜¯åŸæœ¬å¯èƒ½åªæœ‰10å¤škå¤§å°çš„æ–‡ä»¶å¼•å…¥polyfillåå˜æˆä¸Šç™¾kï¼Œä½†å…¶å®ä»£ç é‡Œåªç”¨// åˆ°äº† promiseï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é…ç½® useBuiltIns: 'usage' è¿™æ ·å°±åªä¼šå¼•å…¥ // promise ç›¸å…³çš„ polyfillï¼Œtargets çš„ä½œç”¨æ˜¯å½“æµè§ˆå™¨å°äºæŸä¸ªç‰ˆæœ¬æ—¶æ‰è¿›è¡Œ // babel çš„è½¬æ¢// webpack4 ä¸­ä¸ç”¨åœ¨æ–‡ä»¶ä¸­ import \"@babel/polyfill\" é…ç½® useBuiltIns: 'usage' å babel è‡ªåŠ¨åŠ ä¸Š polyfill è¯¦æƒ…è¯·å‚è€ƒï¼šhttps://babeljs.io/docs/en/babel-preset-env#usebuiltins 1234567891011121314151617181920212223// è¯¥æ–¹æ¡ˆåªé’ˆå¯¹äºä¸ä¸šåŠ¡æ— å…³çš„æ’ä»¶ã€ç±»åº“ç­‰ä¸‰æ–¹ä»£ç // ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿå› ä¸º polyfill ä¼šå°†æ–¹æ³•æ³¨å…¥è‡³å…¨å±€ï¼Œæ±¡æŸ“å…¨å±€ç¯å¢ƒ// npm install --save-dev babel-loader @babel/core// npm install --save-dev @babel/plugin-transform-runtime// npm install --save @babel/runtime-corejs&#123; test: /\\.js$/, exclude: /node_modules/, loader: 'babel-loader', options: &#123; plugins: [['@babel/plugin-transform-runtime', &#123; corejs: 2, helper: true, regenerator: true, useESModules: false &#125;]] &#125; &#125;// å»æ‰ä»£ç ä¸­çš„ import \"@babel/polyfill\" ç„¶åæ‰§è¡Œå³å¯// å¦‚æœ options ä¸­é…ç½®å‚æ•°è¾ƒå¤šå¯ä»¥å°† options å¯¹è±¡ç›´æ¥æå‡ºæ”¾è‡³é¡¹ç›®æ ¹ç›®å½•çš„ .babelrc ä¸­å³å¯ è¯¦æƒ…è¯·å‚è€ƒï¼šhttps://babeljs.io/docs/en/babel-plugin-transform-runtime 7 æ‰€æœ‰ loader æˆ–è€… loader ä¸­çš„ options é…ç½®æ‰§è¡Œé¡ºåºéƒ½æ˜¯ä»ä¸‹å¾€ä¸Šã€ä»å³å¾€å·¦ 8 å¼€å¯äº† hotOnly: true åå±€éƒ¨æ›´æ–°åé¡µé¢ä¸ä¼šè‡ªåŠ¨åˆ·æ–° 9 å¼€å¯ devserver åæ‰“åŒ…æ–‡ä»¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œæƒ³æŸ¥çœ‹çš„è¯å¯ä»¥é€š npx webpack --config webpack.dev.config æ¥é¿å¼€ webpack-dev-server --config webpack.dev.config 10 å‰ç«¯spaè·¯ç”±éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹æ˜¯è¦é…ç½® historyApiFallback: true è¿™æ ·æ‰èƒ½ä¿è¯åœ¨åœ°å€æ è¾“å…¥è·¯å¾„åä¸è¢« devServer çš„ä»£ç†å½“ä½œæ¥å£è½¬å‘èµ° 11 resolve çš„é…ç½®ï¼š12345678910111213module.exports = &#123; // ... resolve: &#123; // é…ç½® extensions å¯ä»¥å…å»å†™æ–‡ä»¶åç¼€åï¼Œä½†æ˜¯å°½é‡ä¸è¦ä¹Ÿå°†èµ„æºç±»æ–‡ä»¶çš„åç¼€é…è¿›æ¥ï¼ˆå› ä¸ºæ¯æ¬¡æŸ¥æ‰¾æ–‡ä»¶ä¼šä½¿ç”¨nodeçš„fsæ¨¡å—ï¼Œæ€§èƒ½ä¼šå—å½±å“ï¼‰ extensions: ['.js', '.jsx'], // é…ç½® mainFiles å¯ä»¥åœ¨å¼•å…¥æ—¶åªå†™ç›®å½• eg: `import Child from './src/child'`ï¼Œè¿™æ · webpack ä¼šå…ˆæ‰¾ child ç›®å½•ä¸‹çš„ indexjs æ²¡æœ‰çš„è¯ä¼šæ‰¾ childjs mainFiles: ['index', 'child'], // é…ç½® alias å°±å¯ä»¥ä½¿ç”¨åˆ«å alias: &#123; i7eo: path.resolve(__dirname, './src/child') &#125; &#125;&#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://i7eo.com/tags/webpack/"},{"name":"webpack4.0","slug":"webpack4-0","permalink":"https://i7eo.com/tags/webpack4-0/"}]},{"title":"é¡µé¢å¸ƒå±€æ€»ç»“ç¬”è®°","slug":"é¡µé¢å¸ƒå±€ç¬”è®°","date":"2019-12-28T12:42:29.000Z","updated":"2021-06-24T12:50:57.080Z","comments":true,"path":"2019/12/28/é¡µé¢å¸ƒå±€ç¬”è®°.html","link":"","permalink":"https://i7eo.com/2019/12/28/é¡µé¢å¸ƒå±€ç¬”è®°.html","excerpt":"","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å†™é¡µé¢å’Œæ ·å¼æ˜¯åŸºç¡€ï¼Œå¦‚ä½•æ›´å¿«æ›´å¥½çš„å®Œæˆç¡®å®éœ€è¦æ€»ç»“ä¸æ€è€ƒã€‚ç®€å•æ€»ç»“ä¸‹ï¼š æ‹¿åˆ°å›¾å…ˆåˆ†ææ•´ä½“ç»“æ„ æ˜¯å¦è¦åšå“åº”å¼ï¼Œç¡®å®šå“åº”å¼çš„ç»“æ„ ç¡®å®šé¡µé¢å­—ä½“ã€è¡Œé«˜ç­‰ï¼ˆå¤§æ ‡é¢˜/æ ‡é¢˜/å°æ ‡é¢˜/æ­£æ–‡ï¼‰ ç¡®å®šæ•´ä½“çš„ç©ºéš™ï¼šæ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„ç©ºéš™ã€å›¾ç‰‡ä¸æ–‡å­—çš„ç©ºéš™ æå–pc/mç»“æ„ç›¸åŒçš„éƒ¨åˆ†å°½é‡å¤ç”¨ å¯¹å“åº”å¼çš„å­—ä½“ä¸é—´éš™åšç­‰æ¯”ç¼©å° ç¡®å®šcontainerçš„å®½åº¦ï¼Œå¦‚æœæœ‰å¤§èƒŒæ™¯è‰²å°±div+div.containerçš„ç»“æ„ å›¾ç‰‡ä¸Šå¸¦å­—çš„ç»“æ„éœ€è¦ç¡®è®¤æ˜¯ç›´æ¥è£å‰ªè¿˜æ˜¯å†™æˆhtmlå› ä¸ºåœ¨å“åº”å¼ä¸‹ä½ç½®ä¼šå¤šå˜","categories":[{"name":"HTML&CSS","slug":"HTML-CSS","permalink":"https://i7eo.com/categories/HTML-CSS/"}],"tags":[]},{"title":"è¯‘æ–‡: Virtual DOM is pure overhead","slug":"è¯‘æ–‡-Virtual-DOM-is-pure-overhead","date":"2019-08-10T08:29:09.000Z","updated":"2021-02-27T04:27:36.912Z","comments":true,"path":"2019/08/10/è¯‘æ–‡-Virtual-DOM-is-pure-overhead.html","link":"","permalink":"https://i7eo.com/2019/08/10/è¯‘æ–‡-Virtual-DOM-is-pure-overhead.html","excerpt":"æœ¬æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŸæ–‡åœ°å€ï¼š Virtual DOM is pure overhead &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœæ‚¨åœ¨æœ€è¿‘å‡ å¹´ä¸­ä½¿ç”¨è¿‡JavaScriptæ¡†æ¶ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å·²ç»å¬è¯´è¿‡â€œè™šæ‹ŸDOMå¾ˆå¿«â€è¿™ä¸€çŸ­è¯­ï¼Œé€šå¸¸è¢«è¯´æ¥æ„å‘³ç€å®ƒæ¯”çœŸå®DOMå¿«ã€‚è¿™æ˜¯ä¸€ä¸ªä»¤äººæƒŠè®¶çš„å‰ç«¯æŠ€æœ¯æ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œäººä»¬é—®Svelteåœ¨ä¸ä½¿ç”¨è™šæ‹ŸDOMæ—¶å¦‚ä½•æ›´å¿«ã€‚ï¼ˆä½œè€…åœ¨åè®½ğŸ¤”ï¼‰ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ˜¯æ—¶å€™è®©æˆ‘ä»¬ä»”ç»†æ£æ‘©æ£æ‘©äº†ã€‚ ä»€ä¹ˆæ˜¯è™šæ‹Ÿ dom ï¼Ÿ","text":"æœ¬æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŸæ–‡åœ°å€ï¼š Virtual DOM is pure overhead &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœæ‚¨åœ¨æœ€è¿‘å‡ å¹´ä¸­ä½¿ç”¨è¿‡JavaScriptæ¡†æ¶ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å·²ç»å¬è¯´è¿‡â€œè™šæ‹ŸDOMå¾ˆå¿«â€è¿™ä¸€çŸ­è¯­ï¼Œé€šå¸¸è¢«è¯´æ¥æ„å‘³ç€å®ƒæ¯”çœŸå®DOMå¿«ã€‚è¿™æ˜¯ä¸€ä¸ªä»¤äººæƒŠè®¶çš„å‰ç«¯æŠ€æœ¯æ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œäººä»¬é—®Svelteåœ¨ä¸ä½¿ç”¨è™šæ‹ŸDOMæ—¶å¦‚ä½•æ›´å¿«ã€‚ï¼ˆä½œè€…åœ¨åè®½ğŸ¤”ï¼‰ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ˜¯æ—¶å€™è®©æˆ‘ä»¬ä»”ç»†æ£æ‘©æ£æ‘©äº†ã€‚ ä»€ä¹ˆæ˜¯è™šæ‹Ÿ dom ï¼Ÿ åœ¨è®¸å¤šæ¡†æ¶ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ render æ¥æ„å»ºä¸€ä¸ªåº”ç”¨ï¼Œä¸‹é¢ç”¨ react æ¥å½“ä½œç¤ºä¾‹ 1234567function HelloMessage(props) &#123; return ( &lt;div className=\"greeting\"&gt; Hello &#123;props.name&#125; &lt;/div&gt; );&#125; ä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ jsx æ¥å®Œæˆï¼š 12345678function HelloMessage(props) &#123; return React.createElement( 'div', &#123; className: 'greeting' &#125;, 'Hello ', props.name );&#125; ç»“æœæ˜¯ç›¸åŒçš„ï¼Œåœ¨è¿™å…¶ä¸­æœ‰ä¸€ä¸ªå¯¹è±¡ä¼šå‘æˆ‘ä»¬å±•ç¤ºå½“å‰çš„é¡µé¢é•¿ä»€ä¹ˆæ ·ï¼Œè€Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯è™šæ‹ŸDOMã€‚æ¯ä¸€æ¬¡ä½ çš„åº”ç”¨ä¸­çš„çŠ¶æ€æ›´æ–°ï¼ˆä¾‹å¦‚ï¼šnameï¼‰ï¼Œæ¡†æ¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚æ¡†æ¶çš„ä»»åŠ¡å°±æ˜¯å°†æ–°çŠ¶æ€ä¸æ—§çŠ¶æ€ä»”ç»†å¯¹æ¯”ï¼Œæ‰¾åˆ°å˜åŒ–å¹¶å°†ä»–ä»¬è¾“å‡ºä¸ºçœŸå®çš„DOMã€‚ è™šæ‹Ÿ dom æ›´å¿«è¿™ä¸ªæ¦‚å¿µæ˜¯æ€ä¹ˆå¼€å§‹çš„ ï¼Ÿå…³äºè™šæ‹ŸDOMæ€§èƒ½çš„è¯¯è§£å¯è¿½æº¯åˆ°Reactçš„å‘å¸ƒã€‚åœ¨åæ€æœ€ä½³å®è·µå¼€åˆ›æ€§çš„2013é€šè¯ç”±åŸé˜µè¥çš„æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜çš®ç‰¹Â·äº¨ç‰¹ï¼Œæˆ‘ä»¬å­¦åˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š è¿™å®é™…ä¸Šæ˜¯éå¸¸å¿«çš„ï¼Œä¸»è¦æ˜¯å› ä¸ºå¤§å¤šæ•°DOMæ“ä½œå¾€å¾€å¾ˆæ…¢ã€‚DOMä¸Šæœ‰å¾ˆå¤šæ€§èƒ½å·¥ä½œï¼Œä½†æ˜¯å¤§å¤šæ•°DOMæ“ä½œå¾€å¾€ä¼šä¸¢å¸§ã€‚ ä½†æ˜¯ç­‰ä¸€ä¸‹ï¼å¦‚æœå°†å…¶ä¸æ•ˆç‡è¾ƒä½çš„æ¡†æ¶æ¯”è¾ƒé‚£è‚¯å®šæ˜¯å¿«çš„ã€‚ä¸å…¶å¦‚æ­¤ï¼Œä¸å¦‚è¿™æ ·ï¼š 123onEveryStateChange(() =&gt; &#123; document.body.innerHTML = renderMyApp();&#125;); ï¼ˆç–¯ç‹‚åæ§½ ğŸ¤” ï¼Œæ€»ç»“ä¸€ä¸‹ä½œè€…è®¤ä¸ºè™šæ‹ŸDOMçš„å¿«å¯ä»¥ç”¨ä¸Šè¿°ä»£ç æ¦‚æ‹¬ï¼Œé‚£å°±æ˜¯çŠ¶æ€å˜åŒ–ï¼Œå°†é‡æ–°ç¼–è¯‘å¥½çš„jsxå®Œå…¨èµ‹å€¼ç»™ innerHTML â€¦ï¼‰ çš®ç‰¹åœ¨ä¸ä¹…åæ¾„æ¸…â€¦ React å¹¶ä¸æ˜¯é­”æœ¯ï¼Œå°±åƒå°† c å†™å…¥æ±‡ç¼–åå‡»è´¥ c ç¼–è¯‘å™¨ä¸€æ ·ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä½ éœ€è¦çš„æƒ…å†µä¸‹ä½¿ç”¨åŸç”ŸDOMå’Œ API è¿›è¡Œæ“ä½œä»è€Œå‡»è´¥ reactã€‚ä½¿ç”¨Cæˆ–Javaæˆ–JavaScriptå¯ä»¥å°†æ€§èƒ½æé«˜ä¸€ä¸ªæ•°é‡çº§ï¼Œå› æ­¤æ‚¨ä¸å¿…åœ¨æ„å¹³å°çš„ç»†èŠ‚ã€‚ä½¿ç”¨ react ä½ ç”šè‡³å¯ä»¥ä¸è€ƒè™‘æ€§èƒ½è€Œæ„å»ºåº”ç”¨ï¼Œå› ä¸ºå®ƒé»˜è®¤æ˜¯å¿«é€Ÿçš„ã€‚ â€¦ä½†è¿™ä¸ªè§£é‡Šæˆ‘å¹¶ä¸ä¹°è´¦ å› æ­¤â€¦ è™šæ‹ŸDOMæ˜¯æ…¢çš„ä¹ˆï¼Ÿä¹Ÿä¸èƒ½è¿™ä¹ˆè¯´ã€‚åªèƒ½è¯´ è™šæ‹ŸDOMåœ¨é€šå¸¸æƒ…å†µä¸‹è¶³å¤Ÿå¿« ï¼Œä½†æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚ React æœ€åˆçš„æ‰¿è¯ºæ˜¯å½“ä½ ä¿®æ”¹çŠ¶æ€é‡æ–°æ¸²æŸ“æ•´ä¸ªåº”ç”¨æ—¶ä¸ç”¨æ‹…å¿ƒæ€§èƒ½ã€‚æˆ‘è®¤ä¸ºè¿™å¹¶ä¸æ­£ç¡®ï¼Œå¦‚æœçœŸå¦‚æ­¤ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šæä¾› shouldComponentUpdate è¿™æ ·çš„å‡½æ•°è¿˜è·³è¿‡å¯¹ç»„ä»¶çš„æ›´æ–°ã€‚ å³ä½¿æœ‰äº† shouldComponentUpdate ï¼Œä¸€æ¬¡å®Œæˆæ›´æ–°æ•´ä¸ªåº”ç”¨ç¨‹åºçš„è™šæ‹ŸDOMçš„å·¥ä½œé‡ä»ç„¶å¾ˆå¤§ã€‚ä¸ä¹…å‰ï¼ŒReactå›¢é˜Ÿæ¨å‡ºäº†ä¸€ç§å«åšReact Fiberçš„ä¸œè¥¿ï¼Œå®ƒå¯ä»¥å°†æ›´æ–°åˆ†æˆè¾ƒå°çš„å—ã€‚è¿™æ„å‘³ç€ï¼ˆé™¤å…¶ä»–äº‹é¡¹å¤–ï¼‰æ›´æ–°ä¸ä¼šé•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹ï¼Œå°½ç®¡å®ƒä¸ä¼šå‡å°‘å·¥ä½œæ€»é‡æˆ–æ›´æ–°æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ å¼€é”€åœ¨å“ªé‡Œï¼Ÿé‡ç‚¹åœ¨äº diff ã€‚æ‚¨å¿…é¡»å…ˆå°†æ–°çš„è™šæ‹ŸDOMä¸å…ˆå‰çš„å¿«ç…§è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæ‰èƒ½å¯¹çœŸå®DOMåº”ç”¨æ›´æ”¹ã€‚ä»¥å‰é¢çš„HelloMessage ç¤ºä¾‹ä¸ºä¾‹ï¼Œå‡è®¾ name ä» world æ”¹ä¸º everybodyã€‚ ä¸¤ä¸ªå¿«ç…§éƒ½åŒ…å«ä¸€ä¸ªå…ƒç´ ã€‚åœ¨ä¸¤ç§æƒ…å†µä¸‹éƒ½æ˜¯ &lt;div&gt; ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¿ç•™ç›¸åŒçš„DOMèŠ‚ç‚¹ æˆ‘ä»¬åˆ—ä¸¾äº†æ–°æ—§å±æ€§ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œ &lt;div&gt; ä»¥æŸ¥çœ‹æ˜¯å¦éœ€è¦æ›´æ”¹ï¼Œæ·»åŠ æˆ–åˆ é™¤ä»»ä½•å±æ€§ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸€ä¸ªå±æ€§ className çš„å€¼ä¸ºâ€greetingâ€ åˆ°å…ƒç´ ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°æ–‡æœ¬å·²æ›´æ”¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´æ–°çœŸå®çš„DOMã€‚ åœ¨è¿™ä¸‰æ­¥ä¸­ï¼Œåªæœ‰ç¬¬3æ­¥å¯¹äº DOM æ˜¯æœ‰å½±å“çš„ã€‚è€Œè¿™äº›éƒ½å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªä»£ç ä»£æ›¿ï¼š 123if (changed.name) &#123; text.data = name;&#125; ï¼ˆè¿™å‡ ä¹å®Œå…¨æ˜¯Svelteç”Ÿæˆçš„æ›´æ–°ä»£ç ã€‚ä¸ä¼ ç»Ÿçš„UIæ¡†æ¶ä¸åŒï¼ŒSvelteæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œå®ƒåœ¨æ„å»ºæ—¶å°±çŸ¥é“åº”ç”¨ç¨‹åºä¸­çš„æƒ…å†µå¦‚ä½•å‘ç”Ÿå˜åŒ–ï¼Œè€Œä¸å¿…ç­‰ç€åœ¨è¿è¡Œæ—¶è¿›è¡Œå·¥ä½œã€‚ï¼‰ ä¸ºä»€ä¹ˆæ¡†æ¶è¦ä½¿ç”¨è™šæ‹ŸDOMï¼Ÿé‡è¦çš„æ˜¯è¦äº†è§£è™šæ‹ŸDOMä¸æ˜¯åŠŸèƒ½ã€‚è¿™æ˜¯è¾¾åˆ°ç›®çš„çš„ä¸€ç§æ‰‹æ®µï¼Œæœ€ç»ˆæ˜¯å£°æ˜æ€§çš„ï¼ŒçŠ¶æ€é©±åŠ¨çš„UIå¼€å‘ã€‚è™šæ‹ŸDOMéå¸¸æœ‰ä»·å€¼ï¼Œå› ä¸ºå®ƒä½¿æ‚¨æ— éœ€è€ƒè™‘çŠ¶æ€è½¬æ¢å³å¯æ„å»ºåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”æ€§èƒ½é€šå¸¸è¶³å¤Ÿå¥½ã€‚è¿™æ„å‘³ç€æ›´å°‘çš„é”™è¯¯ä»£ç ï¼Œè€Œå°†æ›´å¤šçš„æ—¶é—´èŠ±è´¹åœ¨åˆ›é€ æ€§çš„ä»»åŠ¡ä¸Šï¼Œè€Œä¸æ˜¯ä¹å‘³çš„å·¥ä½œä¸Šã€‚ ä½†äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬æ— éœ€ä½¿ç”¨è™šæ‹ŸDOMå°±å¯ä»¥å®ç°ç±»ä¼¼çš„ç¼–ç¨‹æ¨¡å‹-è¿™å°±æ˜¯Svelteçš„ç”¨æ­¦ä¹‹åœ°ã€‚ æ€»ç»“ è™šæ‹ŸDOMä¸æ˜¯åŠŸèƒ½ã€‚è¿™æ˜¯è¾¾åˆ°ç›®çš„çš„ä¸€ç§æ‰‹æ®µ åœºæ™¯ä¸åŒéœ€æ±‚ä¸åŒ å°¤å¤§çš„å›ç­”ä¹Ÿå·®ä¸å¤šï¼Œå…·ä½“å¯è§ï¼šç½‘ä¸Šéƒ½è¯´æ“ä½œçœŸå® DOM æ…¢ï¼Œä½†æµ‹è¯•ç»“æœå´æ¯” React æ›´å¿«ï¼Œä¸ºä»€ä¹ˆ?","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"è™šæ‹ŸDom","slug":"è™šæ‹ŸDom","permalink":"https://i7eo.com/tags/è™šæ‹ŸDom/"}]},{"title":"æ·±å…¥æµ…å‡ºreact&reduxç¬”è®°","slug":"æ·±å…¥æµ…å‡ºreact-reduxç¬”è®°","date":"2019-06-11T11:01:06.000Z","updated":"2021-02-01T07:09:23.955Z","comments":true,"path":"2019/06/11/æ·±å…¥æµ…å‡ºreact-reduxç¬”è®°.html","link":"","permalink":"https://i7eo.com/2019/06/11/æ·±å…¥æµ…å‡ºreact-reduxç¬”è®°.html","excerpt":"æ·±å…¥æµ…å‡ºreact&amp;reduxç¬”è®° é«˜å†…èšï¼ˆjsã€jsxã€cssï¼‰ ä½è€¦åˆï¼ˆå¼±åŒ–ä¸åŒç»„ä»¶é—´çš„å…³ç³»ï¼‰ reactç»„ä»¶æ•°æ® ç”Ÿå‘½å‘¨æœŸ (æ‰§è¡Œé¡ºåºå¦‚åºå·é¡ºåº) è£…è½½è¿‡ç¨‹ constructor (åˆå§‹åŒ–stateï¼Œç»‘å®šthisã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä¸ç»‘å®šï¼Œåœ¨classä¸­ä½¿ç”¨å£°æ˜å˜é‡&amp;å°–å¤´å‡½æ•°çš„å†™æ³•) getlnitialState (React.createClassä¸­ä½¿ç”¨) getDefaultProps (React.createClassä¸­ä½¿ç”¨) componentWillMount (è¿™ä¸ªæ—¶å€™æ²¡æœ‰ä»»ä½•æ¸²æŸ“å‡ºæ¥çš„ç»“æœï¼Œå³ä½¿è°ƒç”¨this.setState ä¿®æ”¹çŠ¶æ€ä¹Ÿä¸ä¼šå¼•å‘é‡æ–°ç»˜åˆ¶æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¯ä»¥åœ¨è¿™ä¸ª componentÂ­WillMount ä¸­åšçš„äº‹æƒ…ï¼Œéƒ½å¯ä»¥æå‰åˆ° constructor ä¸­é—´å»åš) render (å®Œå…¨æ ¹æ® this.state å’Œ this.props æ¥å†³å®šè¿”å›çš„ç»“æœï¼Œè€Œä¸”ä¸è¦äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚åœ¨ render å‡½æ•°ä¸­å»è°ƒç”¨ this.setState æ¯«æ— ç–‘é—®æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸€ä¸ªçº¯å‡½æ•°ä¸åº”è¯¥å¼•èµ·çŠ¶æ€çš„æ”¹å˜) componentDidMount (ç»„ä»¶å·²ç»è¢«è£…è½½åˆ° DOM æ ‘ä¸Šäº†,è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯·æ±‚æ¥å¡«å……ç»„ä»¶çš„å†…å®¹ã€ä½¿ç”¨ä¸‰æ–¹ä»£ç è·å–dom, éœ€è¦æ³¨æ„çš„æ˜¯è¯¥ç”Ÿå‘½å‘¨æœŸä¸ä¼šåœ¨ä¸€ä¸ªrenderåç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æ‰€æœ‰å­ç»„ä»¶renderç»“æŸåæ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºrenderåªè¿”å›jsxå¯¹è±¡å¹¶ä¸å¾€domæ ‘ä¸Šè£…è½½å†…å®¹ï¼Œå…·ä½“çš„å†…å®¹è£…è½½æ˜¯reactç»è¿‡vmåæ‰å†³å®šçš„) æ›´æ–°è¿‡ç¨‹ shouldComponentUpdate (å¦‚æœè¿™ä¸ªå‡½æ•°è¿”å› trueï¼Œé‚£å°±ä¼šç»§ç»­æ›´æ–°è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥è°ƒç”¨ render å‡½æ•°;åä¹‹ï¼Œå¦‚æœå¾—åˆ° ä¸€ä¸ª falseï¼Œé‚£å°±ç«‹åˆ»åœæ­¢æ›´æ–°è¿‡ç¨‹ï¼Œä¹Ÿå°±ä¸ä¼šå¼•å‘åç»­çš„æ¸²æŸ“äº†) componentWillReceiveProps (åªè¦æ˜¯çˆ¶ç»„ä»¶çš„ render å‡½æ•°è¢«è°ƒç”¨ï¼Œåœ¨ render å‡½æ•°é‡Œé¢è¢«è°ŠæŸ“çš„å­ç»„ä»¶å°±ä¼šç»å†æ›´æ–°è¿‡ç¨‹ï¼Œä¸ç®¡çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ props æœ‰æ²¡æœ‰æ”¹å˜ï¼Œéƒ½ä¼šè§¦å‘å­ç»„ä»¶çš„ componentWillReceiveProps å‡½æ•°, å­ç»„ä»¶ä¸­çš„ setstate ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•) componentWillUpdate render componentDidUpdate å¸è½½è¿‡ç¨‹ componentWillUnmount (é€šå¸¸è§£ç»‘äº‹ä»¶ã€å®šæ—¶å™¨ç­‰)","text":"æ·±å…¥æµ…å‡ºreact&amp;reduxç¬”è®° é«˜å†…èšï¼ˆjsã€jsxã€cssï¼‰ ä½è€¦åˆï¼ˆå¼±åŒ–ä¸åŒç»„ä»¶é—´çš„å…³ç³»ï¼‰ reactç»„ä»¶æ•°æ® ç”Ÿå‘½å‘¨æœŸ (æ‰§è¡Œé¡ºåºå¦‚åºå·é¡ºåº) è£…è½½è¿‡ç¨‹ constructor (åˆå§‹åŒ–stateï¼Œç»‘å®šthisã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä¸ç»‘å®šï¼Œåœ¨classä¸­ä½¿ç”¨å£°æ˜å˜é‡&amp;å°–å¤´å‡½æ•°çš„å†™æ³•) getlnitialState (React.createClassä¸­ä½¿ç”¨) getDefaultProps (React.createClassä¸­ä½¿ç”¨) componentWillMount (è¿™ä¸ªæ—¶å€™æ²¡æœ‰ä»»ä½•æ¸²æŸ“å‡ºæ¥çš„ç»“æœï¼Œå³ä½¿è°ƒç”¨this.setState ä¿®æ”¹çŠ¶æ€ä¹Ÿä¸ä¼šå¼•å‘é‡æ–°ç»˜åˆ¶æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¯ä»¥åœ¨è¿™ä¸ª componentÂ­WillMount ä¸­åšçš„äº‹æƒ…ï¼Œéƒ½å¯ä»¥æå‰åˆ° constructor ä¸­é—´å»åš) render (å®Œå…¨æ ¹æ® this.state å’Œ this.props æ¥å†³å®šè¿”å›çš„ç»“æœï¼Œè€Œä¸”ä¸è¦äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚åœ¨ render å‡½æ•°ä¸­å»è°ƒç”¨ this.setState æ¯«æ— ç–‘é—®æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸€ä¸ªçº¯å‡½æ•°ä¸åº”è¯¥å¼•èµ·çŠ¶æ€çš„æ”¹å˜) componentDidMount (ç»„ä»¶å·²ç»è¢«è£…è½½åˆ° DOM æ ‘ä¸Šäº†,è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯·æ±‚æ¥å¡«å……ç»„ä»¶çš„å†…å®¹ã€ä½¿ç”¨ä¸‰æ–¹ä»£ç è·å–dom, éœ€è¦æ³¨æ„çš„æ˜¯è¯¥ç”Ÿå‘½å‘¨æœŸä¸ä¼šåœ¨ä¸€ä¸ªrenderåç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æ‰€æœ‰å­ç»„ä»¶renderç»“æŸåæ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºrenderåªè¿”å›jsxå¯¹è±¡å¹¶ä¸å¾€domæ ‘ä¸Šè£…è½½å†…å®¹ï¼Œå…·ä½“çš„å†…å®¹è£…è½½æ˜¯reactç»è¿‡vmåæ‰å†³å®šçš„) æ›´æ–°è¿‡ç¨‹ shouldComponentUpdate (å¦‚æœè¿™ä¸ªå‡½æ•°è¿”å› trueï¼Œé‚£å°±ä¼šç»§ç»­æ›´æ–°è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥è°ƒç”¨ render å‡½æ•°;åä¹‹ï¼Œå¦‚æœå¾—åˆ° ä¸€ä¸ª falseï¼Œé‚£å°±ç«‹åˆ»åœæ­¢æ›´æ–°è¿‡ç¨‹ï¼Œä¹Ÿå°±ä¸ä¼šå¼•å‘åç»­çš„æ¸²æŸ“äº†) componentWillReceiveProps (åªè¦æ˜¯çˆ¶ç»„ä»¶çš„ render å‡½æ•°è¢«è°ƒç”¨ï¼Œåœ¨ render å‡½æ•°é‡Œé¢è¢«è°ŠæŸ“çš„å­ç»„ä»¶å°±ä¼šç»å†æ›´æ–°è¿‡ç¨‹ï¼Œä¸ç®¡çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ props æœ‰æ²¡æœ‰æ”¹å˜ï¼Œéƒ½ä¼šè§¦å‘å­ç»„ä»¶çš„ componentWillReceiveProps å‡½æ•°, å­ç»„ä»¶ä¸­çš„ setstate ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•) componentWillUpdate render componentDidUpdate å¸è½½è¿‡ç¨‹ componentWillUnmount (é€šå¸¸è§£ç»‘äº‹ä»¶ã€å®šæ—¶å™¨ç­‰) propTypes å»ºè®®åœ¨å¼€å‘ç¯å¢ƒå¯åŠ ï¼Œç”Ÿäº§ç¯å¢ƒé€šè¿‡babel-react-optimizeå»æ‰ åˆå§‹åŒ–stateï¼š 12345678910this.state = &#123; count: props.initValue || 0&#125;// =&gt;this.state = &#123; count: props.initValue&#125;xxx.defaultProps = &#123; count: 0&#125; prop&amp;stateçš„å¯¹æ¯”ï¼š prop ç”¨äºå®šä¹‰å¤–éƒ¨æ¥å£ï¼Œ state ç”¨äºè®°å½•å†…éƒ¨çŠ¶æ€; prop çš„èµ‹å€¼åœ¨å¤–éƒ¨ä¸–ç•Œä½¿ç”¨ç»„ä»¶æ—¶ï¼Œ state çš„èµ‹å€¼åœ¨ç»„ä»¶å†…éƒ¨; ç»„ä»¶ç»ä¸åº”è¯¥æ”¹å˜ prop çš„å€¼ï¼ˆè¦ä¸¥æ ¼éµå®ˆå•å‘æ•°æ®æµåŸåˆ™ï¼Œä¿è¯ ui=render(data) è¿™ä¸ªå‡½æ•°æ— ä»»ä½•å‰¯ä½œç”¨ï¼‰ï¼Œè€Œ stateå­˜åœ¨çš„ç›®çš„å°±æ˜¯è®©ç»„ä»¶æ¥æ”¹å˜çš„ ã€‚ æ¨¡å—åŒ– ç”¨ Reactå’Œ Reduxæ¥æ„å»ºå‰ç«¯ç½‘é¡µåº”ç”¨ï¼Œè¿™ä¸¤è€…éƒ½å¥‰ è¡Œè¿™æ ·ä¸€ä¸ªå…¬å¼ UI=render(state) æ¥äº§ç”Ÿç”¨æˆ·ç•Œé¢ã€‚ Reactæ‰é€‚åˆäºè§†å›¾å±‚é¢çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¸èƒ½æŒ‡æœ›é Reactæ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ï¼Œ Reduxæ‰é€‚åˆæ‹…å½“åº”ç”¨çŠ¶æ€çš„ç®¡ç†å·¥ä½œã€‚ ä»æ¶æ„å‡ºå‘ï¼Œå½“æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªæ–°çš„åº”ç”¨çš„æ—¶å€™ï¼Œæœ‰å‡ ä»¶äº‹æƒ…æ˜¯ä¸€å®šè¦è€ƒè™‘æ¸…æ¥šçš„ï¼š ä»£ç æ–‡ä»¶çš„ç»„ç»‡ç»“æ„ æŒ‰è§’è‰²ç»„ç»‡ï¼š 12345678910111213141516reducers/ todoReducer.js filterReducer.jsactions/ todoActions.js filterActions.jscomponents/ todoList.js todoItem.js filter.jscontainers/ todoListContainer.js todoiternContainer.js filterContainer.js// å”¯ä¸€çš„ç¼ºç‚¹æ˜¯æ–°å¢åŠŸèƒ½éœ€è¦åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹åˆ‡æ¢å¹¶ä¸”åˆ›å»ºæ–°æ–‡ä»¶ æ¥åŠŸèƒ½ç»„ç»‡ï¼š 12345678910111213141516todoList/ actions.js actionTypes.js index.js reducer.js views/ component.js container.jsfilter/ actions.js actionTypes.js index.js reducer.js views/ component.js container.js æ¨¡å—æ¥å£ å¸¸è§„å¯¼å…¥ï¼š 1234import * as actions from â€™ .. /todoList/actions â€™;import container as TodoList from â€™../todoList/views/containerâ€™;// è¿™ç§å†™æ³•å½“ç„¶èƒ½å¤Ÿå®ŒæˆåŠŸèƒ½ï¼Œä½†æ˜¯å´éå¸¸ä¸åˆç†ï¼Œå› ä¸ºè¿™è®© filteræ¨¡å—ä¾èµ–äº todoListæ¨¡å—çš„å†…éƒ¨ç»“æ„ï¼Œè€Œä¸”ç›´æ¥ä¼¸æ‰‹åˆ° todoList å†…éƒ¨å»å¯¼äººæƒ³è¦çš„éƒ¨åˆ† ç»Ÿä¸€å…¥å£å¯¼å…¥ (index.js) 12345import * as actions from â€™. /actions.js â€™;import reducer from â€™. /reducer.jsâ€™;import view from â€™./views/container.js â€™;export &#123;actions, reducer, view&#125;; 12// ä½¿ç”¨å¦‚ä¸‹import &#123;actions , reducer, view as TodoList&#125; from â€™../todoListâ€™ Store çš„çŠ¶æ€æ ‘è®¾è®¡ ä¸€ä¸ªæ¨¡å—æ§åˆ¶ä¸€ä¸ªçŠ¶æ€èŠ‚ç‚¹ é¿å…å†—ä½™æ•°æ® (æ•°æ®ä¸€è‡´æ€§) æ ‘å½¢ç»“æ„æ‰å¹³ï¼Œé¿å…å‡ºç°ä»¥ä¸‹æƒ…å†µï¼š1const d = state.A &amp;&amp; state.A.B &amp;&amp; state.A.B.C &amp;&amp; state.A.B.C.D; ç»„ä»¶æ€§èƒ½ä¼˜åŒ– å®¹å™¨ç»„ä»¶ä¸å‚»ç“œç»„ä»¶ (è®©ä¸€ä¸ªç»„ä»¶åªä¸“æ³¨åšä¸€ä»¶äº‹ï¼Œå®¹å™¨ç»„ä»¶è¿›è¡Œæ•°æ®å¤„ç†ç„¶åå°†æ•°æ®ä¼ å…¥å‚»ç“œç»„ä»¶ï¼Œå‚»ç“œç»„ä»¶åªè´Ÿè´£æ¸²æŸ“) ä½¿ç”¨ shouldcomponentupdate æ¥é¿å…ä¸å¿…è¦çš„ç»„ä»¶æ›´æ–°ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰ é‚£ä¹ˆå¦‚ä½•æŸ¥çœ‹ chrome ä¸­ react æ€§èƒ½è¡¨ç°ï¼Ÿå‚è€ƒèµ„æ–™å¦‚ä¸‹ï¼š Profiling React Performance with React 16 and Chrome DevTools. ä½¿ç”¨ Chrome Performance æ ‡ç­¾åˆ†æç»„ä»¶ é«˜é˜¶ç»„ä»¶ | | ç‰¹ç‚¹ | åŒºåˆ« | | :â€”â€“| :â€”-: | :â€”-: | | ä»£ç†æ–¹å¼çš„é«˜é˜¶ç»„ä»¶ | æ“çºµ prop / è®¿é—® ref / æŠ½å–çŠ¶æ€ / åŒ…è£…ç»„ä»¶ | æ–°ç»„ä»¶ã€å‚æ•°ç»„ä»¶éƒ½è¦ç»å†å„è‡ªçš„ç”Ÿå‘½å‘¨æœŸ | | ç»§æ‰¿æ–¹å¼çš„é«˜é˜¶ç»„ä»¶ | æ“çºµ prop / æ“çºµç”Ÿå‘½å‘¨æœŸå‡½æ•° | åªæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆsuper.render()ï¼‰ | redux reduxåŸºæœ¬åŸåˆ™ï¼š å”¯ä¸€æ•°æ®æº(Single Source ofTruth) ä¿æŒçŠ¶æ€åªè¯»( State is read-only) æ•°æ®æ”¹å˜åªèƒ½é€šè¿‡çº¯å‡½æ•°å®Œæˆ( Changes are made with pure functions) ä¿æŒæ•°æ®çš„å”¯ä¸€æ€§ (context &amp; react-redux) react-redux ä¸¤ä¸ªæœ€ä¸»è¦åŠŸèƒ½: connect: è¿æ¥å®¹å™¨ç»„ä»¶å’Œå‚»ç“œç»„ä»¶; Provider: æä¾›åŒ…å« store çš„ context (context å®Œå…¨å¯ä»¥å®ç° provider ä½†æ˜¯ react-redux ä¸­çš„ provider åŒ…å«ä¸‰ä¸ªå‡½æ•°ï¼šsubscribeã€dispatchã€getStateã€‚react-redux å®šä¹‰äº† Provider çš„ componentWillReceiveProps å‡½æ•°ï¼Œåœ¨ Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ componentWillReceiveProps å‡½æ•°åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶éƒ½ä¼šè°ƒç”¨åˆ°ï¼ŒreactÂ­ redux åœ¨ componentWillReceiveProps å‡½æ•°ä¸­ä¼šæ£€æŸ¥è¿™ä¸€æ¬¡æ¸²æŸ“æ—¶ä»£è¡¨ store çš„ prop å’Œä¸Š ä¸€æ¬¡çš„æ˜¯å¦ä¸€æ ·ã€‚ å¦‚æœä¸ä¸€æ ·ï¼Œå°±ä¼šç»™å‡ºè­¦å‘Šï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é¿å…å¤šæ¬¡æ¸²æŸ“ç”¨äº†ä¸åŒçš„ Redux Storeã€‚ æ¯ä¸ª Redux åº”ç”¨åªèƒ½æœ‰ä¸€ä¸ª Redux Storeï¼Œåœ¨æ•´ä¸ª Redux çš„ç”Ÿå‘½å‘¨æœŸä¸­éƒ½åº”è¯¥ä¿æŒ Store çš„å”¯ä¸€æ€§) tips åœ¨ jsx ç”¨ç›´æ¥æŠŠåŒ¿åå‡½æ•°èµ‹å€¼çš„æ–¹æ³•ï¼Œçœ‹èµ·æ¥éå¸¸ç®€æ´è€Œä¸”æ–¹ä¾¿ï¼Œå…¶å®å¹¶ä¸æ˜¯å€¼å¾—æå€¡çš„æ–¹æ³•ã€‚å› ä¸ºæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›é€ ä¸€ä¸ªæ–°çš„åŒ¿åæ–¹æ³•å¯¹è±¡ ï¼Œè€Œä¸”æœ‰å¯èƒ½å¼•å‘å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚ render å’Œ shouldComponentUpdate å‡½æ•°ï¼Œä¹Ÿæ˜¯ React ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å”¯äºŒä¸¤ä¸ªè¦æ±‚æœ‰è¿”å›ç»“æœçš„å‡½æ•°ã€‚ render å‡½æ•°çš„è¿”å›ç»“æœå°†ç”¨äºæ„é€  DOM å¯¹è±¡ï¼Œè€Œ shouldComponentÂ­Update å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå‘Šè¯‰ React åº“è¿™ä¸ªç»„ä»¶åœ¨è¿™æ¬¡æ›´æ–°è¿‡ç¨‹ä¸­æ˜¯å¦è¦ç»§ç»­ã€‚ ä¸ºä»€ä¹ˆ react ä¸­å¤§å¤šæ•°çš„è°ƒç”¨é€šå¸¸æ˜¯é—­åŒ…å½¢å¼çš„å¤šå±‚è°ƒç”¨ï¼Ÿ å› ä¸ºéµä»ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹çš„åŸåˆ™1connect(mapStateToProps, mapDispatchToProps)(Counter) 1234567891011121314function createThunkMiddleware(extraArgument) &#123; return (&#123; dispatch, getState &#125;) =&gt; next =&gt; action=&gt; &#123; if (typeof action === \"function\")&#123; return action(dispatch , getState , extraArgument); &#125; return next(action) &#125;&#125;/** è¿™æ˜¯ thunk çš„æºç å®ç°ï¼Œåªæ˜¯å•çº¯çš„åˆ¤æ–­äº† action ç±»å‹ï¼Œå…·ä½“åšäº†å¦‚ä¸‹æ“ä½œï¼š * 1. è°ƒç”¨ dispatchæ´¾å‘å‡ºä¸€ä¸ªæ–° actionå¯¹è±¡; * 2. è°ƒç”¨ getStateè·å¾—å½“å‰ReduxStoreä¸Šçš„çŠ¶æ€; * 3. è°ƒç”¨nextå‘Šè¯‰Reduxå½“å‰ä¸­é—´ä»¶å·¥ä½œå®Œæ¯•ï¼Œè®©Reduxè°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶; * 4. è®¿é—® actionå¯¹è±¡ actionä¸Šçš„æ‰€æœ‰æ•°æ®; */ è§¦å‘ re-render çš„æ–¹å¼ï¼š setState props æ”¹å˜ forceupdate fetchè®¤ä¸ºåªè¦æœåŠ¡å™¨è¿”å›ä¸€ä¸ªåˆæ³•çš„ HTTP å“åº”å°±ç®—æˆåŠŸï¼Œå°±ä¼šè°ƒç”¨ thenæä¾›çš„å›è°ƒå‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªHTTPå“åº”çš„çŠ¶æ€ç æ˜¯è¡¨ç¤ºå‡ºé”™äº†çš„400æˆ–è€…500ã€‚å› ä¸º fetch çš„è¿™ä¸ªç‰¹ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ then ä¸­ï¼Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ£€æŸ¥ä¼ äººå‚æ•° response status å­—æ®µï¼Œåªæœ‰ status æ˜¯ä»£è¡¨æˆåŠŸçš„ 200 çš„æ—¶å€™æ‰ç»§ç»­ï¼Œå¦åˆ™ä»¥é”™è¯¯å¤„ç† ã€‚ ç»„ä»¶-action-store-reducerså…³ç³»å›¾ï¼š","categories":[{"name":"React","slug":"React","permalink":"https://i7eo.com/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"https://i7eo.com/tags/React/"},{"name":"Redux","slug":"Redux","permalink":"https://i7eo.com/tags/Redux/"},{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","permalink":"https://i7eo.com/tags/ä¸­é—´ä»¶/"}]},{"title":"ä¸‰æ–¹æ¥å…¥è¸©å‘é›†åˆ","slug":"ä¸‰æ–¹æ¥å…¥è¸©å‘é›†åˆ","date":"2019-05-21T13:41:08.000Z","updated":"2020-05-07T09:18:02.670Z","comments":true,"path":"2019/05/21/ä¸‰æ–¹æ¥å…¥è¸©å‘é›†åˆ.html","link":"","permalink":"https://i7eo.com/2019/05/21/ä¸‰æ–¹æ¥å…¥è¸©å‘é›†åˆ.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨åšè·¨å¢ƒç”µå•†ç½‘ç«™çš„æ—¶å€™é¿å…ä¸äº†æ¥å…¥ä¸‰æ–¹çš„æ”¯ä»˜ã€ç»Ÿè®¡ç­‰ä»£ç æ¥è¿›è¡Œä¸€ç³»åˆ—çš„æ•°æ®ç»Ÿè®¡ã€åˆ†æã€å¼•æµç­‰ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹è‡ªå·±è¸©è¿‡çš„å‘ã€‚ worldpayä¿©æ–¹&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¹‹å‰ä¸è®ºæ˜¯ paypal è¿˜æ˜¯ worldpay æ¥æ”¯ä»˜éƒ½æ˜¯è·³è½¬åˆ°ä¸‰æ–¹é¡µé¢ï¼Œå› ä¸ºä¸­é—´è·³è½¬çš„è¿™ä¸€æ­¥ä¼šå¯¼è‡´éƒ¨åˆ†ç”¨æˆ·å¼ƒå•ï¼Œè½¬åŒ–ç‡ä¸‹é™ã€‚æ ¹æ®æˆ‘ä»¬è‡ªå·±çš„ç»Ÿè®¡å’Œä¸æµ·å¤–å®¢æˆ·æ²Ÿé€šæ¥çœ‹å¾—åˆ°çš„ç»“è®ºæ—¶å°½é‡ä¸è¦è·³è½¬ï¼Œæ‰€ä»¥è¦æŠŠä¹‹å‰çš„ä¸‰æ–¹æ”¹ä¸ºä¿©æ–¹ï¼Œå³é¡µé¢ä¸­åµŒå¥— iframe çš„æ–¹å¼ã€‚ å¼•å…¥èµ„æºcss/js/helper.html åˆ›å»ºç›®æ ‡div æ‰§è¡Œsetup","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨åšè·¨å¢ƒç”µå•†ç½‘ç«™çš„æ—¶å€™é¿å…ä¸äº†æ¥å…¥ä¸‰æ–¹çš„æ”¯ä»˜ã€ç»Ÿè®¡ç­‰ä»£ç æ¥è¿›è¡Œä¸€ç³»åˆ—çš„æ•°æ®ç»Ÿè®¡ã€åˆ†æã€å¼•æµç­‰ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹è‡ªå·±è¸©è¿‡çš„å‘ã€‚ worldpayä¿©æ–¹&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¹‹å‰ä¸è®ºæ˜¯ paypal è¿˜æ˜¯ worldpay æ¥æ”¯ä»˜éƒ½æ˜¯è·³è½¬åˆ°ä¸‰æ–¹é¡µé¢ï¼Œå› ä¸ºä¸­é—´è·³è½¬çš„è¿™ä¸€æ­¥ä¼šå¯¼è‡´éƒ¨åˆ†ç”¨æˆ·å¼ƒå•ï¼Œè½¬åŒ–ç‡ä¸‹é™ã€‚æ ¹æ®æˆ‘ä»¬è‡ªå·±çš„ç»Ÿè®¡å’Œä¸æµ·å¤–å®¢æˆ·æ²Ÿé€šæ¥çœ‹å¾—åˆ°çš„ç»“è®ºæ—¶å°½é‡ä¸è¦è·³è½¬ï¼Œæ‰€ä»¥è¦æŠŠä¹‹å‰çš„ä¸‰æ–¹æ”¹ä¸ºä¿©æ–¹ï¼Œå³é¡µé¢ä¸­åµŒå¥— iframe çš„æ–¹å¼ã€‚ å¼•å…¥èµ„æºcss/js/helper.html åˆ›å»ºç›®æ ‡div æ‰§è¡Œsetup å…·ä½“å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;My test page&lt;/title&gt; &lt;link rel='stylesheet' href='https://payments.worldpay.com/resources/hpp/integrations/embedded/css/hpp-embedded-integration-library.css'/&gt; &lt;script src='https://payments.worldpay.com/resources/hpp/integrations/embedded/js/hpp-embedded-integration-library.js'&gt;&lt;/script&gt;&lt;head/&gt;&lt;body&gt; &lt;div id='custom-html'&gt;&lt;/div&gt; &lt;script type='text/javascript'&gt; var customOptions = &#123; type: 'lightbox', iframeIntegrationId: 'libraryObject', iframeHelperURL: 'https://www.example.com/helper.html', iframeBaseURL: 'https://www.example.com', url: 'https://payments.worldpay.com/ngpp/integration/wpg/corporate?OrderKey=YOUR_ORDER_KEY&amp;Ticket=YOUR_TICKET_ID', target: 'custom-html', accessibility: true, debug: false, language: 'en', country: 'gb', preferredPaymentMethod: '', successURL: 'https://www.example.com/success', cancelURL: 'https://www.example.com/cancel', failureURL: 'https://www.example.com/failure', pendingURL: 'https://www.example.com/pending', errorURL: 'https://www.example.com/error' &#125;; //initialise the library and pass options var libraryObject = new WPCL.Library(); libraryObject.setup(customOptions); &lt;/script&gt;&lt;/body/&gt;&lt;/html/&gt; éœ€è¦æ³¨æ„çš„ç‚¹å¦‚ä¸‹ï¼š helper.html å¿…é¡»æ”¾åœ¨ä¸å½“å‰ç«™ç‚¹åŒæºçš„ç¯å¢ƒä¸­ï¼ˆå¿…é¡»ç¬¦åˆåŒæºç­–ç•¥ï¼‰ï¼Œä»¥æˆ‘ä»¬çš„ javaé¡¹ç›® æ¥è¯´ï¼Œæˆ‘æŠŠ helper.html æ”¾åœ¨äº† static ç›®å½•ä¸‹ï¼Œè¿™æ ·é¿å…ç»è¿‡åç«¯çš„æ‹¦æˆªå™¨å‡ºç°è®¿é—®ä¸åˆ°çš„æƒ…å†µã€‚ç»“æœæ”¾åœ¨ iframeHelperURL å±æ€§å¤„å³å¯: iframeHelperURL: window.location.origin + &#39;/static/html/helper.html&#39; å¯ä»¥åœ¨ç›®æ ‡ div ä¸­åŠ å…¥ loading æ•ˆæœï¼Œå› ä¸º iframe ç”Ÿæˆåä¼šç›´æ¥æ›¿æ¢ç›®æ ‡ div ä¸­çš„å†…å®¹ï¼š 1&lt;div id='custom-html'&gt;&lt;/div&gt; =&gt;12345&lt;div id='custom-html'&gt; &lt;div class=\"worldpay-loading\"&gt; &lt;div class=\"sp sp-circle\"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; ç¤ºä¾‹ä»£ç ä¸­çš„é…ç½®å¯¹è±¡ customOptions ä¸­æ—  inject å±æ€§è€Œä¸”æ–‡æ¡£ä¸­ inject ä¹Ÿæ˜¯éå¿…å¡«çš„ï¼Œä½†æ˜¯ hpp-embedded-integration-library.js è¿™ä¸ªèµ„æºä¸­å¯¹è¿™ä¸ªå±æ€§æ²¡æœ‰åšä»»ä½•ç©ºå€¼å¤„ç†ï¼š1234567891011121314151617181920212223242526if (self.options.inject === 'immediate') &#123; injectIframeToTarget.call(self);&#125; else if (self.options.inject === 'onload') &#123; if (window.addEventListener) &#123; writeMessage.call(self, 'The browser supports addEventListener'); window.addEventListener('load', self.onloadInject, false); &#125; else if (window.attachEvent) &#123; writeMessage.call(self, 'The browser supports attachEvent'); window.attachEvent('onload', self.onloadInject); &#125; else &#123; writeMessage.call(self, 'ERROR: the browser does not support an onload event-handler'); &#125;&#125; else if (self.options.inject === 'default') &#123; window.onload = function (e) &#123; injectIframeToTarget.call(self); if (e &amp;&amp; e.target &amp;&amp; e.target != document) &#123; self.isFakeLoadEvent = true; &#125; &#125;;&#125; else &#123; writeMessage.call(self, 'ERROR: accepted parameters are immediate, onload, default');&#125; å¯ä»¥çœ‹åˆ°å¦‚æœä¸é…ç½® inject: immediate|default|onload çš„è¯ï¼Œè¿™é‡Œç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ iframe å¹¶æœªç”Ÿæˆå‡ºæ¥æ‰€ä»¥å½“å‰ç½‘é¡µçš„æ§åˆ¶å°ä¸­ä¸ä¼šå‡ºç°ä»»ä½•ä¿¡æ¯ï¼Œæ‰€ä»¥åº”è¯¥å°† inject: immediate åŠ å…¥åˆ°é…ç½®å¯¹è±¡ customOptions ä¸­ã€‚ å‚è€ƒèµ„æ–™ï¼š worldpay iframe &amp; lightbox å¸®åŠ©æ–‡æ¡£ paypal smart button&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åšè¿™ä¸ªçš„èµ·å› æ˜¯ paypal æ¥æˆ‘å¸å¹äº†ä¸€ç•ª smart buttonï¼ˆsbpï¼‰ å¯¹äºè·¨å¢ƒç”µå•†å…¬å¸æ˜¯å¤šä¹ˆçš„å¥½ï¼ˆè‡ªåŠ¨åˆ‡æ¢ä¸åŒè¯­ç§ã€é¿å…å¤šæ¬¡è·³è½¬ã€balblablaï¼‰ç»“æœçœŸæ­£å®æ–½èµ·æ¥å‡ºç°çš„ bug è¿˜éƒ½æ˜¯å¯¼è‡´ iframe æœªç”Ÿæˆæˆ–è€… æ”¯ä»˜å¤±è´¥çš„é‡å¤§ bug ï¼Œæ„Ÿè§‰ sbp è¿˜å¤„äºå®éªŒé˜¶æ®µã€‚ã€‚ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœä½ åªéœ€åœ¨ pc ä¸Šä½¿ç”¨ sbp é‚£ä¹ˆ ie 8+ æ²¡é—®é¢˜ï¼Œå¦‚æœè¦è€ƒè™‘æ‰‹æœºã€pcã€å¹³æ¿ç­‰å¤šç«¯ç¯å¢ƒæ—¶ï¼Œå¼ºçƒˆå»ºè®®æš‚æ—¶ä¸è¦ä½¿ç”¨ã€‚é™„ä¸Šä¸€å¼ è€ƒè™‘å¤šç«¯ç¯å¢ƒä¸‹çš„ issue æ‰¯çš®æˆªå›¾ï¼š æ¥å…¥ pc çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;script src=\"//www.paypal.com/sdk/js?client-id=$SITE.paypalClientId&amp;commit=true&amp;locale=$LANG.spbLang&amp;currency=$CURRENCY.code&amp;disable-funding=credit\"&gt;&lt;/script&gt;&lt;script&gt;if(!window.paypal) &#123; console.log('spb error: .js file has some errors when loading');&#125;else&#123; paypal.Buttons(&#123; style: &#123; size: 'responsive', layout: 'horizontal', // vertical tagline: true, label: 'checkout', shape: 'rect', &#125;, commit: true, onInit: function(data, actions)&#123; console.log('onInit, please wait ...'); &#125;, createOrder: function(data, actions)&#123; console.log('createOrder, please wait ...'); // return fetch(ajaxUrl, &#123; // method: 'get' // &#125;) // .then(data =&gt; data.json()) // .then(function(res) &#123; // return resolveFunction(res); // &#125;); return new Promise(function(resolve, reject) &#123; $.get(ajaxUrl, function(res) &#123; if(res.code === 1) &#123; var token = res.data.redirectUrl.split('token=')[1]; result = $.extend(res.data, &#123;token: token&#125;) if(token) &#123; console.log('send ajax'); resolve(token); &#125;else &#123; window.location.href = location; &#125; &#125;else&#123; window.location.href = res.msg || location; &#125; &#125;) &#125;) &#125;, // Finalize the transaction onApprove: function(data, actions)&#123; console.log('onApprove, please wait ...'); var returnUrl = result.returnUrl + \"&amp;paymentId=\" + data.paymentID + \"&amp;token=\" + result.token + \"&amp;PayerID=\" + data.payerID; actions.redirect(returnUrl); &#125;, onCancel: function(data, actions)&#123; &#125;, onError: function(err)&#123; console.error('smart payment button has some errors. like: ', err); return window.location = result.failedUrl + '&amp;err=' + err; &#125; &#125;).render(spbEl);&#125;&lt;/script&gt; éœ€è¦æ³¨æ„çš„ç‚¹å¦‚ä¸‹ï¼š sbp åœ¨ createOrder è¿™ä¸€æ­¥å‘é€è¯·æ±‚çš„æ—¶å€™è¦ä¹ˆå¯¹æ™®é€šè¯·æ±‚è¿›è¡Œ promise åŒ–ï¼Œè¦ä¹ˆç›´æ¥ä½¿ç”¨ fetchã€‚å¦åˆ™ä¼šå‡ºç° iframe ä¸­ä¸€ç›´ loading çš„æƒ…å†µ å‚è€ƒèµ„æ–™ï¼š Smart Payment Buttons Overview certona&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;certonaæ¥å…¥åº”è¯¥æ˜¯æˆ‘åšè¿‡æœ€æ–¹ä¾¿å¿«æ·çš„äº†ã€‚ nodeç¯å¢ƒæ¥å…¥å¦‚ä¸‹ï¼š 123// å½“å‰é¡µé¢ï¼š404.html&lt;%- include('./analysis/certona.html', &#123;pageType: '404'&#125;)%&gt; 1234567891011121314// å½“å‰é¡µé¢ï¼šcertona.html&lt;script type=\"text/javascript\" src=\"//edge1.certona.net/YOUR_TAG/scripts/resonance.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\" id=\"Certona\"&gt;&lt;% if(typeof(pageType) != 'undefined') &#123; %&gt; &lt;% if(pageType == '404') &#123; %&gt; var certona = &#123; \"pagetype\" : \"404ERROR\", \"devicetype\" : \"DESKTOP\", \"recommendations\" : true &#125;; &lt;% &#125; %&gt;&lt;% &#125; %&gt;&lt;/script&gt; pinterest æ·»åŠ ä¸»ä»£ç ä¸ pagevisti è¿½è¸ª 12345678910111213141516171819202122&lt;head&gt;&lt;script type=\"text/javascript\"&gt;!function(e)&#123;if(!window.pintrk)&#123;window.pintrk=function()&#123;window.pintrk.queue.push(Array.prototype.slice.call(arguments))&#125;;varn=window.pintrk;n.queue=[],n.version=\"3.0\";vart=document.createElement(\"script\");t.async=!0,t.src=e;varr=document.getElementsByTagName(\"script\")[0];r.parentNode.insertBefore(t,r)&#125;&#125;(\"https://s.pinimg.com/ct/core.js\"); pintrk('load','YOUR_TAG_ID');pintrk('page');&lt;/script&gt; &lt;noscript&gt; &lt;img height=\"1\" width=\"1\" style=\"display:none;\" alt=\"\" src=\"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;noscript=1\" /&gt; &lt;/noscript&gt;&lt;script&gt;pintrk('track', 'pagevisit');&lt;/script&gt;&lt;noscript&gt;&lt;img height=\"1\" width=\"1\" style=\"display:none;\" alt=\"\" src=\"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;event=pagevisit&amp;noscript=1\" /&gt;&lt;/noscript&gt;&lt;/head&gt; æ”¯ä»˜æˆåŠŸé¡µ 12345678910111213141516171819&lt;script type=\"text/javascript\"&gt; !function(e)&#123;if(!window.pintrk)&#123;window.pintrk=function()&#123;window.pintrk.queue.push( Array.prototype.slice.call(arguments))&#125;;var n=window.pintrk;n.queue=[],n.version=\"3.0\";var t=document.createElement(\"script\");t.async=!0,t.src=e;var r=document.getElementsByTagName(\"script\")[0];r.parentNode.insertBefore(t,r)&#125;&#125;(\"https://s.pinimg.com/ct/core.js\"); pintrk('load', 'YOUR_TAG_ID'); pintrk('page');&lt;/script&gt;&lt;noscript&gt; &lt;img height=\"1\" width=\"1\" style=\"display:none;\" alt=\"\" src=\"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;noscript=1\" /&gt;&lt;/noscript&gt;&lt;script&gt;pintrk ('track', 'checkout', &#123;&#125;);&lt;/script&gt;&lt;noscript&gt;&lt;img height=\"1\" width=\"1\" style=\"display:none;\" alt=\"\"src=\"https://ct.pinterest.com/v3/?tid=YOUR_TAG_ID&amp;event=checkout&amp;noscript=1\" /&gt;&lt;/noscript&gt; éœ€è¦æ³¨æ„çš„ç‚¹å¦‚ä¸‹ï¼š ä¸è®ºä»€ä¹ˆä¸‰æ–¹ä»£ç ï¼Œåœ¨æ”¯ä»˜æˆåŠŸé¡µæ·»åŠ æ—¶ä¸€å®šè¦æ³¨æ„é¿å…åˆ·æ–°åé‡å¤ä¸Šä¼ ï¼Œä¸€èˆ¬åšæ³•æ˜¯åˆ©ç”¨cookieåˆ¤æ–­ã€‚shopify å¹³å°è¿˜æä¾›äº†ä¸€ä¸ª first_time_accessed çš„æ–¹æ³•ã€‚ GA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gaçš„ä»£ç æ–‡æ¡£å·²ç»å¾ˆè¯¦ç»†ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡ä»¥åŠæ•°æ®çš„ä¸åŒç»´åº¦æ¥è‡ªå®šä¹‰ä¸Šä¼ æ•°æ®ï¼Œä¹Ÿæ²¡ä»€ä¹ˆæ·±å‘ï¼Œè¿™é‡Œå°±ä¸å†é˜è¿°äº†ã€‚ Ping Pong Payç°åœ¨å¤§å¤šæ”¯ä»˜å·²ç»ä»é‡å®šå‘çš„ä¸‰æ–¹æ¨¡å¼ï¼Œå‘ä¼ªä¿©æ–¹æˆ–è€…ä¿©æ–¹çš„æ¨¡å¼å‘å±•ã€‚æ¯•ç«Ÿä¿©æ–¹ä¸ä¼šè·³é¡µé¢ï¼Œè¿™æ ·ä¼šé™ä½ç”¨æˆ·çš„æµå¤±ç‡ã€‚ åœ¨å¯¹æ¥è¿™ä¸ªæ”¯ä»˜æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯ä¼ªä¿©æ–¹çš„æ¨¡å¼ï¼Œä½†æ˜¯ pingpong çš„ä¼ªä¿©æ–¹å¹¶ä¸æ˜¯ç›´æ¥ç”Ÿæˆ iframe è€Œæ˜¯ç›´æ¥ç”Ÿæˆ domï¼Œä½†é—®é¢˜æ˜¯è¿™ä¸ªæ”¯ä»˜ç”Ÿæˆ dom çš„çˆ¶å…ƒç´ æ˜¯ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±ä¸šåŠ¡çš„è¡¨å•ï¼Œå½“åˆ‡æ¢å…¶ä»–æ”¯ä»˜å•å‡»æˆ‘ä»¬è‡ªå·±çš„è¡¨å•æäº¤æŒ‰é’®æ—¶ pingpong çš„æ”¯ä»˜ä¹Ÿä¼šè¢«è§¦å‘ã€‚ä¸ pingpong æ²Ÿé€šåï¼Œå¯¹æ–¹ç»™äº†ä¸€ä¸ªåŠ¨æ€ç”Ÿæˆè¡¨å•çš„å»ºè®®ã€‚ä½†æ˜¯é‰´äºæˆ‘ä»¬æ¥å…¥çš„æ”¯ä»˜å¾ˆå¤šï¼Œå¦‚æœé‡‡ç”¨åŠ¨æ€ç”Ÿæˆè¡¨å•éœ€è¦èŠ±æ—¶é—´é‡æ„ã€æµ‹è¯•ï¼Œæ‰€ä»¥è¿™ä¸ªæ„è§å¹¶æ²¡æœ‰é‡‡çº³ã€‚ä¸è¿‡æ²Ÿé€šåå½“æˆ‘å°† pingpong çš„ js ä¸å¼•å…¥åï¼Œä¸Šè¿°é—®é¢˜å¹¶æ²¡ç”¨å¤ç°ã€‚ç°åœ¨çš„é—®é¢˜å°±æ˜¯æ€ä¹ˆå»é™¤ js çš„å½±å“ï¼Ÿé¦–å…ˆæƒ³åˆ°çš„æ˜¯åˆ é™¤ script æ ‡ç­¾ï¼Œä½†æ˜¯åªè¦ js åŠ è½½ï¼Œå³ä½¿åˆ é™¤äº† dom ä»£ç è¿˜æ˜¯ä¼šæ‰§è¡Œã€‚ï¼ˆå…·ä½“å¯å‚è€ƒï¼šRemoved JavaScript is still executableï¼‰æ‰€ä»¥éœ€è¦æ¢ä¸€ç§æ€è·¯ï¼Œé€‰æ‹©é pingpong æ”¯ä»˜æ—¶å°†è¯¥ js æš´éœ²å‡ºæ¥çš„ä¸‰æ–¹å¯¹è±¡å­˜èµ·æ¥åç›´æ¥ç½® nullï¼Œå½“ä»å…¶ä»–æ”¯ä»˜åˆ‡å› pingpong æ”¯ä»˜æ—¶å°†å­˜èµ·æ¥çš„å€¼é‡æ–°èµ‹å›å³å¯ã€‚","categories":[{"name":"ä¸‰æ–¹","slug":"ä¸‰æ–¹","permalink":"https://i7eo.com/categories/ä¸‰æ–¹/"}],"tags":[{"name":"worldpay","slug":"worldpay","permalink":"https://i7eo.com/tags/worldpay/"},{"name":"paypal smart button","slug":"paypal-smart-button","permalink":"https://i7eo.com/tags/paypal-smart-button/"},{"name":"certona","slug":"certona","permalink":"https://i7eo.com/tags/certona/"},{"name":"pinterest","slug":"pinterest","permalink":"https://i7eo.com/tags/pinterest/"},{"name":"ga","slug":"ga","permalink":"https://i7eo.com/tags/ga/"},{"name":"pingpong","slug":"pingpong","permalink":"https://i7eo.com/tags/pingpong/"}]},{"title":"Javascriptç»§æ‰¿","slug":"Javascriptç»§æ‰¿","date":"2019-03-13T13:15:22.000Z","updated":"2019-03-13T17:08:02.500Z","comments":true,"path":"2019/03/13/Javascriptç»§æ‰¿.html","link":"","permalink":"https://i7eo.com/2019/03/13/Javascriptç»§æ‰¿.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Javascriptçš„ç»§æ‰¿æ˜¯åŸºäºåŸå‹çš„ï¼Œä¹‹å‰ç†è§£çš„æ¯”è¾ƒç®€å•ï¼Œç›´åˆ°æœ€è¿‘åœ¨ç”¨ es5 å†™æ˜Ÿçº§è¯„åˆ†ç»„ä»¶çš„æ—¶å€™é‡åˆ°äº†äº›é—®é¢˜ï¼Œè§£å†³ä¹‹åç†è§£æ·±äº†ä¸€äº›ã€‚æ€»ç»“å½’çº³ï¼Œä»¥ä¾¿åç”¨ã€‚ æ˜Ÿçº§è¯„åˆ†åŸæœ¬çš„éœ€æ±‚æœ‰ä¿©ä¸ªï¼š æ ¹æ®åå°è¿”å›çš„è¯„ä»·åˆ†æ•°å•çº¯è¿›è¡Œ5é¢—æ˜Ÿçš„å±•ç¤º ç”¨æˆ·å¯ä»¥åœ¨5é¢—æ˜Ÿä¸Šä¸ºå•†å“è¿›è¡Œæ‰“åˆ†ï¼Œå•å‡»åä¸Šä¼  å¼€å§‹ç”¨æœ€ç¬¨çš„æ–¹æ³•ï¼Œä»ä¸šåŠ¡å‡ºå‘å¾ˆå¿«é€Ÿçš„æŠŠä¿©ä¸ªéœ€æ±‚éƒ½å®ç°äº†ã€‚æœ€åæƒ³ç€èƒ½ä¸èƒ½åˆ©ç”¨ç»§æ‰¿æ¥ä¼˜åŒ–ï¼Œæ–¹ä¾¿åæœŸæ‰©å±•å¯ä»¥è¿›è¡ŒåŠæ˜Ÿæˆ–è€…å››åˆ†ä¹‹ä¸€æ˜Ÿè¯„åˆ†ã€‚ å…·ä½“æ•ˆæœå¦‚ä¸‹ï¼š åˆ©ç”¨åŸå‹åˆ†åˆ«å®ç°æ»¡æ˜Ÿä¸åŠæ˜Ÿ","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Javascriptçš„ç»§æ‰¿æ˜¯åŸºäºåŸå‹çš„ï¼Œä¹‹å‰ç†è§£çš„æ¯”è¾ƒç®€å•ï¼Œç›´åˆ°æœ€è¿‘åœ¨ç”¨ es5 å†™æ˜Ÿçº§è¯„åˆ†ç»„ä»¶çš„æ—¶å€™é‡åˆ°äº†äº›é—®é¢˜ï¼Œè§£å†³ä¹‹åç†è§£æ·±äº†ä¸€äº›ã€‚æ€»ç»“å½’çº³ï¼Œä»¥ä¾¿åç”¨ã€‚ æ˜Ÿçº§è¯„åˆ†åŸæœ¬çš„éœ€æ±‚æœ‰ä¿©ä¸ªï¼š æ ¹æ®åå°è¿”å›çš„è¯„ä»·åˆ†æ•°å•çº¯è¿›è¡Œ5é¢—æ˜Ÿçš„å±•ç¤º ç”¨æˆ·å¯ä»¥åœ¨5é¢—æ˜Ÿä¸Šä¸ºå•†å“è¿›è¡Œæ‰“åˆ†ï¼Œå•å‡»åä¸Šä¼  å¼€å§‹ç”¨æœ€ç¬¨çš„æ–¹æ³•ï¼Œä»ä¸šåŠ¡å‡ºå‘å¾ˆå¿«é€Ÿçš„æŠŠä¿©ä¸ªéœ€æ±‚éƒ½å®ç°äº†ã€‚æœ€åæƒ³ç€èƒ½ä¸èƒ½åˆ©ç”¨ç»§æ‰¿æ¥ä¼˜åŒ–ï¼Œæ–¹ä¾¿åæœŸæ‰©å±•å¯ä»¥è¿›è¡ŒåŠæ˜Ÿæˆ–è€…å››åˆ†ä¹‹ä¸€æ˜Ÿè¯„åˆ†ã€‚ å…·ä½“æ•ˆæœå¦‚ä¸‹ï¼š åˆ©ç”¨åŸå‹åˆ†åˆ«å®ç°æ»¡æ˜Ÿä¸åŠæ˜Ÿ psï¼šè¿™é‡Œçš„æ˜Ÿæ˜Ÿä½¿ç”¨ iconfont çš„å­—ä½“å›¾æ ‡ Domç»“æ„123456789&lt;section class=\"star\"&gt; &lt;ul class=\"star-list\"&gt; &lt;li class=\"item iconfont icon-star-off\" title=\"wtf\"&gt;&lt;/li&gt; &lt;li class=\"item iconfont icon-star-off\" title=\"bad\"&gt;&lt;/li&gt; &lt;li class=\"item iconfont icon-star-off\" title=\"not bad\"&gt;&lt;/li&gt; &lt;li class=\"item iconfont icon-star-off\" title=\"good\"&gt;&lt;/li&gt; &lt;li class=\"item iconfont icon-star-off\" title=\"perfect\"&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/section&gt; æ»¡æ˜Ÿ&amp;åŠæ˜ŸJSä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120var starRating = (function() &#123; // æ•´é¢— var lightenFullStar = function(el, opts) &#123; this.$el = $(el) this.$stars = this.$el.find('.item') this.opts = opts &#125; lightenFullStar.prototype.lighten = function(num) &#123; num = parseInt(num) this.$stars.each(function(i) &#123; if(i &lt; num ) &#123; $(this).removeClass('icon-star-off').addClass('icon-star-on') &#125;else&#123; $(this).removeClass('icon-star-on').addClass('icon-star-off') &#125; &#125;) &#125; lightenFullStar.prototype.bindEvent = function() &#123; var self = this self.$el.on('click', '.item', function() &#123; var selectedStar = $(this).index() + 1 self.opts.num = selectedStar typeof self.opts.select === 'function' &amp;&amp; self.opts.select.call(this, selectedStar, self.$stars.length) &#125;).on('mouseover', '.item', function() &#123; self.lighten($(this).index() + 1) &#125;).on('mouseout', function() &#123; self.lighten(self.opts.num) &#125;) &#125; lightenFullStar.prototype.init = function() &#123; this.lighten(this.opts.num) if(!this.opts.readOnly)&#123; this.bindEvent() &#125; &#125; // åŠé¢— var lightenHalfStar = function(el, opts) &#123; this.$el = $(el) this.$stars = this.$el.find('.item') this.opts = opts this.patch = 1 &#125; lightenHalfStar.prototype.lighten = function(num) &#123; var integer = parseInt(num), hasDecimals = integer !== num this.$stars.each(function(i) &#123; if(i &lt; num ) &#123; $(this).removeClass('icon-star-off icon-star-half').addClass('icon-star-on') &#125;else&#123; $(this).removeClass('icon-star-on icon-star-half').addClass('icon-star-off') &#125; &#125;) // åŠé¢—çš„ç‚¹äº® if(hasDecimals) &#123; this.$stars.eq(integer).removeClass('icon-star-off icon-star-on').addClass('icon-star-half') &#125; &#125; lightenHalfStar.prototype.bindEvent = function() &#123; var self = this self.$el.on('mousemove', '.item', function(e) &#123; // è¿™æ˜¯ç†æƒ³çŠ¶æ€å¦‚æœè®¾ç½®padingleft/right è¿˜æ²¡åˆ°ç›®æ ‡domæ˜Ÿæ˜Ÿå°±äº§ç”Ÿå˜åŒ– // æ˜Ÿæ˜Ÿçš„é—´è·æœ€å¥½è®¾ç½®ä¸ºmargin if(e.pageX - $(this).offset().left &lt; $(this).width() / 2) &#123; self.patch = 0.5 &#125;else&#123; self.patch = 1 &#125; var selectedStar = $(this).index() + self.patch self.lighten(selectedStar) &#125;).on('click', '.item', function() &#123; self.opts.num = $(this).index() + self.patch typeof self.opts.select === 'function' &amp;&amp; self.opts.select.call(this, self.opts.num, self.$stars.length) &#125;).on('mouseout', function() &#123; self.lighten(self.opts.num) &#125;) &#125; lightenHalfStar.prototype.init = function() &#123; this.lighten(this.opts.num) if(!this.opts.readOnly)&#123; this.bindEvent() &#125; &#125; // default var defaults = &#123; mode: 'full', num: 0, readOnly: false, select: function() &#123;&#125; &#125; var reflect = &#123; 'full': lightenFullStar, 'half': lightenHalfStar &#125; var _init = function(el, opts) &#123; opts = $.extend(&#123;&#125;, defaults, opts) if(!reflect[opts.mode]) opts.mode = 'full' new reflect[opts.mode](el, opts).init() &#125; return &#123; init: _init &#125;&#125;)()starRating.init('.star-list', &#123; mode:'full', num: 4.6, readOnly: false, select: function(selected, total) &#123; console.log(selected + '/' + total) &#125;&#125;) ç®€å•æ¥è¯´ä¸€ä¸‹ï¼Œè¿™é‡Œä¸»è¦è¿ç”¨çš„äº‹ä»¶æœ‰ mouseover(mousemove)ã€mouseoutã€clickã€‚ä¸ºä»€ä¹ˆä¸ç”¨ mouseenter&amp;mouseleave å…·ä½“å¯ä»¥å‚è€ƒmdnã€‚æ»¡æ˜Ÿåˆ©ç”¨ mouseover ç›‘å¬é¼ æ ‡ç§»å…¥å½“å‰ dom çš„æ“ä½œï¼ŒåŠæ˜Ÿåˆ™å°† mouseover æ›¿æ¢ä¸º mousemove ï¼Œå› ä¸ºæ­¤æ—¶æˆ‘ä»¬çš„é¼ æ ‡ç§»å…¥æ—¶åœ¨æ˜Ÿæ˜Ÿçš„å³ä¾§ä¹Ÿå°±æ˜¯æ•´é¢—æ˜Ÿï¼Œæ­¤æ—¶åœ¨æ˜Ÿæ˜Ÿå†…éƒ¨é¼ æ ‡ä»å³å‘å·¦ç§»åŠ¨ mouseover æ˜¯æ— æ³•è§¦å‘çš„ï¼Œæ‰€ä»¥ä¸èƒ½é€‰æ‹©åŠæ˜Ÿã€‚å…¶ä»–çš„å®ç°å°±æ˜¯æŒ‰ç…§ä¸šåŠ¡ä¸€æ­¥æ­¥æ¥å³å¯ï¼Œè¿™ä¿©æ®µä»£ç å†™å®Œä¹‹åï¼Œå‘ç°å…¶å®å¾ˆåƒã€‚okï¼Œä¸‹æ¥åˆ©ç”¨ç»§æ‰¿ä¸å¤šæ€æ¥æ”¹å†™ã€‚ åˆ©ç”¨æ¨¡ç‰ˆæ–¹æ³•æ”¹å†™ä»£ç æ¨¡ç‰ˆæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿç®€å•æ¥è¯´ï¼ŒæŠ½ç¦»å‡ºå…¬å…±é€»è¾‘ä½œä¸ºçˆ¶ç±»ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œå¯¹äºç‰¹æœ‰çš„é€»è¾‘æˆ–æ–¹æ³•å¯¹çˆ¶ç±»ä¸­çš„é€»è¾‘æˆ–æ–¹æ³•è¿›è¡Œé‡å†™ã€‚å…·ä½“å¯ä»¥å‚è€ƒè®¾è®¡æ¨¡å¼ã€‚ æå–å…¬å…±é€»è¾‘è®¾ç½®çˆ¶ç±» Lighten1234567891011121314151617181920212223242526272829303132333435363738394041var Lighten = function(el, opts) &#123; this.$el = $(el) this.$stars = this.$el.find('.item') this.opts = opts this.patch = 1 this.selectEvent = 'mouseover'&#125;Lighten.prototype.lighten = function(num) &#123; num = parseInt(num) this.$stars.each(function(i) &#123; if(i &lt; num ) &#123; $(this).removeClass('icon-star-off icon-star-half').addClass('icon-star-on') &#125;else&#123; $(this).removeClass('icon-star-on icon-star-half').addClass('icon-star-off') &#125; &#125;)&#125;Lighten.prototype.bindEvent = function() &#123; var self = this self.$el.on(self.selectEvent, '.item', function(e) &#123; self.calculateRange(e, $(this)) self.lighten($(this).index() + self.patch) &#125;).on('click', '.item', function() &#123; var selectedStar = $(this).index() + self.patch self.opts.num = selectedStar typeof self.opts.select === 'function' &amp;&amp; self.opts.select.call(this, selectedStar, self.$stars.length) &#125;).on('mouseout', function() &#123; self.lighten(self.opts.num) &#125;)&#125;Lighten.prototype.calculateRange = function() &#123; // å­ç±»å¿…é¡»é‡å†™è¯¥æ–¹æ³• console.warn('Subclasses must be overridden')&#125;Lighten.prototype.init = function() &#123; this.lighten(this.opts.num) if(!this.opts.readOnly)&#123; this.bindEvent() &#125;&#125; å­ç±» lightenFullStar &amp; lightenHalfStar12345678910var lightenFullStar = function(el, opts) &#123; Lighten.call(this, el, opts) this.selectEvent = 'mouseover'&#125;lightenFullStar.prototype.lighten = function(num) &#123; Lighten.prototype.lighten.call(this, num)&#125;lightenFullStar.prototype.calculateRange = function() &#123;&#125;lightenFullStar.prototype = new Lighten()lightenFullStar.prototype.construtor = lightenFullStar 1234567891011121314151617181920212223var lightenHalfStar = function(el, opts) &#123; Lighten.call(this, el, opts) this.selectEvent = 'mousemove'&#125;lightenHalfStar.prototype.lighten = function(num) &#123; var integer = parseInt(num), hasDecimals = integer !== num Lighten.prototype.lighten.call(this, integer) // åŠé¢—çš„ç‚¹äº® if(hasDecimals) &#123; this.$stars.eq(integer).removeClass('icon-star-off icon-star-on').addClass('icon-star-half') &#125;&#125;lightenHalfStar.prototype.calculateRange = function(e, $this) &#123; if(e.pageX - $this.offset().left &lt; $this.width() / 2) &#123; this.patch = 0.5 &#125;else&#123; this.patch = 1 &#125;&#125;lightenHalfStar.prototype = new Lighten()lightenHalfStar.prototype.construtor = lightenHalfStar alrightï¼çœ‹èµ·æ¥ä¸é”™ï¼Œæ„Ÿè§‰ä¸‡äº‹å¤§å‰äº†ã€‚è·‘èµ·æ¥è¯•è¯•ï¼Œå‘ç°æŠ¥é”™ çœ‹èµ·æ¥è¿˜ä¸é”™çš„ä»£ç ç«Ÿç„¶è·‘æŒ‚äº†ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯å¾ˆæ˜æ˜¾å¯ä»¥åˆ†æå‡ºæ²¡æœ‰æ‰§è¡Œå­ç±»é‡å†™çš„ lighten æ–¹æ³•ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å‘¢ï¼Ÿ lightenHalfStar.prototype = new Lighten() è¿™è¡Œä»£ç æ˜¯å°†æ„é€ å‡½æ•° Lighten çš„åŸå‹å¯¹è±¡èµ‹å€¼ç»™ lightenHalfStar çš„åŸå‹å¯¹è±¡ã€‚è¿™æœ¬èº«æ˜¯æ²¡ä»€ä¹ˆé”™çš„ï¼ŒåŸå‹ç»§æ‰¿çš„å…³é”®ä¹Ÿæ˜¯è¿™å¥è¯ã€‚å°†æ­¤æ—¶çš„lightenHalfStar.prototypeæ‰“å°å‡ºæ¥å¦‚ä¸‹ï¼š åœ¨æ‰§è¡ŒlightenHalfStar.prototype = new Lighten()ä¹‹å‰lightenHalfStar.prototypeä¸­çš„ lightenç¡®å®æ˜¯è‡ªå·±é‡å†™çš„ï¼ˆå¯ä»¥çœ‹ FunctionLocation:120ï¼‰ã€‚è®©æˆ‘å†çœ‹çœ‹æ‰§è¡Œä¹‹åçš„ç»“æœã€‚å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ° FunctionLocation:41 ï¼ˆå³æŒ‡å‘äº†çˆ¶ç±»çš„ lighten æ–¹æ³•æ‰€åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®ï¼‰ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿç­”æ¡ˆå…¶å®å¾ˆç®€å•ï¼Œå°† lightenHalfStar.prototype = new Lighten() çš„é¡ºåºæ”¾åœ¨å£°æ˜ lightenHalfStar åŸå‹æ–¹æ³•ä¹‹å‰å³å¯ã€‚ æ€»ç»“&amp;æ”¹è¿›å¯¹äºå®ç°é‡å†™æ–¹æ³•æ¥è¯´ï¼Œç»§æ‰¿è¯­å¥çš„ä½ç½®æ˜¯ç›¸å½“å…³é”®çš„ã€‚ä¸€ä¸æ³¨æ„å°±è¿›äº†å‘ã€‚ æ³¨æ„åŸå‹ç»§æ‰¿ä¸­å­ç±»çš„æ„é€ å™¨éœ€è¦æ‰‹åŠ¨ç½®å›ã€‚å¦‚ä¸‹ï¼š12lightenHalfStar.prototype = new Lighten()lightenHalfStar.prototype.constructor = lightenHalfStar åŸå‹ç»§æ‰¿è‹¥å­ç±»ä¸çˆ¶ç±»æ„é€ å™¨ä¸­å˜é‡åŒååˆ™å­ç±»çš„å˜é‡ä¼šè¢«è¦†ç›–ï¼Œè¦æƒ³é‡å†™ï¼Œå°±å¾—åœ¨æ„é€ å™¨ä¸­æ”¹å˜ this æŒ‡å‘ã€‚å¦‚ä»£ç ä¸­çš„ï¼šLighten.call(this, el, opts) é€šè¿‡å›¾ result-2 æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°å®ä¾‹åŒ–ä¹‹åçˆ¶ç±»æ„é€ å‡½æ•°çš„å€¼ä¹Ÿä¼šè¢«å¸¦è¿›æ¥ã€‚å¦‚æœå€¼å¾ˆå¤šçš„è¯ä¹Ÿä¼šæµªè´¹èµ„æºï¼Œè¿™å¹¶ä¸æ˜¯æ¯”è¾ƒå¥½çš„ç»“æœã€‚ä¼˜åŒ–æ–¹æ³•ï¼š 123456var extend = function(sub, sup) &#123; var F = function() &#123;&#125; F.prototype = sup.prototype sub.prototype = new F() sub.prototype.construtor = sub&#125; åˆ©ç”¨ç©ºçš„æ„é€ å‡½æ•°åšä¸­é—´äººï¼ˆä»£ç†ï¼‰å³å¯è§£å†³ã€‚ èµ„æ–™ å®Œæ•´ä»£ç ï¼šæ˜Ÿçº§è¯„åˆ†ç»„ä»¶ Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼šæ„é€ å‡½æ•°çš„ç»§æ‰¿","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"https://i7eo.com/tags/ç»§æ‰¿/"}]},{"title":"å‰ç«¯ä»£ç ç¼–å†™æ³¨æ„äº‹é¡¹","slug":"å‰ç«¯ä»£ç ç¼–å†™æ³¨æ„äº‹é¡¹","date":"2019-03-02T12:22:23.000Z","updated":"2019-03-13T17:24:03.864Z","comments":true,"path":"2019/03/02/å‰ç«¯ä»£ç ç¼–å†™æ³¨æ„äº‹é¡¹.html","link":"","permalink":"https://i7eo.com/2019/03/02/å‰ç«¯ä»£ç ç¼–å†™æ³¨æ„äº‹é¡¹.html","excerpt":"å˜é‡ å£°æ˜ä¸ç”¨ï¼Œæ•°æ®åªä½¿ç”¨ä¸€æ¬¡æˆ–ä¸ä½¿ç”¨å°±æ— éœ€è£…åˆ°å˜é‡ä¸­ å˜é‡å‘½åï¼Œé©¼å³°ã€ç®€æ´ã€æ˜“æ‡‚ ç‰¹å®šå˜é‡ï¼š 12345const MAX_INPUT_LENGTH = 8;if (value.length &lt; MAX_INPUT_LENGTH) &#123; // ä¸€ç›®äº†ç„¶ï¼Œä¸èƒ½è¶…è¿‡æœ€å¤§è¾“å…¥é•¿åº¦ ....&#125; ä½¿ç”¨è¯´æ˜æ€§çš„å˜é‡(å³æœ‰æ„ä¹‰çš„å˜é‡å)","text":"å˜é‡ å£°æ˜ä¸ç”¨ï¼Œæ•°æ®åªä½¿ç”¨ä¸€æ¬¡æˆ–ä¸ä½¿ç”¨å°±æ— éœ€è£…åˆ°å˜é‡ä¸­ å˜é‡å‘½åï¼Œé©¼å³°ã€ç®€æ´ã€æ˜“æ‡‚ ç‰¹å®šå˜é‡ï¼š 12345const MAX_INPUT_LENGTH = 8;if (value.length &lt; MAX_INPUT_LENGTH) &#123; // ä¸€ç›®äº†ç„¶ï¼Œä¸èƒ½è¶…è¿‡æœ€å¤§è¾“å…¥é•¿åº¦ ....&#125; ä½¿ç”¨è¯´æ˜æ€§çš„å˜é‡(å³æœ‰æ„ä¹‰çš„å˜é‡å) 123456789101112131415161718const address = 'One Infinite Loop, Cupertino 95014';const cityZipCodeRegex = /^[^,\\]+[,\\s]+(.+?)s*(d&#123;5&#125;)?$/;saveCityZipCode(address.match(cityZipCodeRegex)[1],// è¿™ä¸ªå…¬å¼åˆ°åº•è¦å¹²å˜›ï¼Œå¯¹ä¸èµ·ï¼ŒåŸä½œè€…å·²ç»ç¦»èŒäº†ã€‚è‡ªå·±çœ‹ä»£ç  address.match(cityZipCodeRegex)[2], // è¿™ä¸ªå…¬å¼åˆ°åº•è¦å¹²å˜›ï¼Œå¯¹ä¸èµ·ï¼ŒåŸä½œè€…å·²ç»ç¦»èŒäº†ã€‚è‡ªå·±çœ‹ä»£ç );// æ”¹ä¸ºå¦‚ä¸‹ï¼šconst address = 'One Infinite Loop, Cupertino 95014';const cityZipCodeRegex = /^[^,\\]+[,\\s]+(.+?)s*(d&#123;5&#125;)?$/;const [, city, zipCode] = address.match(cityZipCodeRegex) || [];saveCityZipCode(city, zipCode); é¿å…ä½¿ç”¨å¤ªå¤šçš„å…¨å±€å˜é‡ï¼Œå¦‚æœ‰éœ€è¦è¯·ä½¿ç”¨å‘½åç©ºé—´ å¯¹äºæ±‚å€¼å˜é‡åšå¥½é»˜è®¤å€¼ï¼ˆå…œåº•ï¼‰ï¼Œå¯¹äºèµ‹å€¼å˜é‡å¯ä¸ç”¨ï¼š 123456//å…¶å®åœ¨é¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ±‚å€¼å˜é‡ï¼Œå¯¹äºæ¯ä¸ªæ±‚å€¼å˜é‡éƒ½éœ€è¦åšå¥½å…œåº•ã€‚let propertyValue = Object.attr || 0; // å› ä¸ºObject.attræœ‰å¯èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥éœ€è¦å…œåº•ã€‚// ä½†æ˜¯ï¼Œèµ‹å€¼å˜é‡å°±ä¸éœ€è¦å…œåº•äº†ã€‚let a = 2; // å› ä¸ºæœ‰åº•äº†ï¼Œæ‰€ä»¥ä¸è¦å…œç€ã€‚let myName = 'Tiny'; // å› ä¸ºæœ‰åº•äº†ï¼Œæ‰€ä»¥ä¸è¦å…œç€ã€‚ å‡½æ•°1.å¯¹äºè¿”å›true or falseçš„å‡½æ•°ï¼Œæœ€å¥½ä»¥should/is/can/haså¼€å¤´ 2.åŠ¨ä½œå‡½æ•°å·²åŠ¨è¯å¼€å¤´å¦åˆ™ä¸å¥½è¾¨åˆ«æ„å›¾ 3.åŠŸèƒ½å‡½æ•°æœ€å¥½ä¸ºçº¯å‡½æ•°ï¼š12345678910// NO: ä¸è¦è®©åŠŸèƒ½å‡½æ•°çš„è¾“å‡ºå˜åŒ–æ— å¸¸ã€‚function plusAbc(a, b, c) &#123; // è¿™ä¸ªå‡½æ•°çš„è¾“å‡ºå°†å˜åŒ–æ— å¸¸ï¼Œå› ä¸ºapiè¿”å›çš„å€¼ä¸€æ—¦æ”¹å˜ï¼ŒåŒæ ·è¾“å…¥å‡½æ•°çš„aï¼Œb,cçš„å€¼ï¼Œä½†å‡½æ•°è¿”å›çš„ç»“æœå´ä¸ä¸€å®šç›¸åŒã€‚var c = fetch('../api'); return a+b+c;&#125;//YESï¼šåŠŸèƒ½å‡½æ•°ä½¿ç”¨çº¯å‡½æ•°ï¼Œè¾“å…¥ä¸€è‡´ï¼Œè¾“å‡ºç»“æœæ°¸è¿œå”¯ä¸€function plusAbc(a, b, c) &#123; // åŒæ ·è¾“å…¥å‡½æ•°çš„aï¼Œb,cçš„å€¼ï¼Œä½†å‡½æ•°è¿”å›çš„ç»“æœæ°¸è¿œç›¸åŒã€‚ return a+b+c;&#125; å‡½æ•°ä¼ å‚è¦æœ‰è¯´æ˜ï¼ˆå‚æ•°è¿‡å¤šï¼Œä½¿ç”¨å¯¹è±¡æ¥ä»£æ›¿ï¼‰ 123456789// NOï¼šä¼ å‚æ— è¯´æ˜page.getSVG(api, true, false); // trueå’Œfalseå•¥æ„æ€ï¼Œä¸€ç›®ä¸äº†ç„¶// YES: ä¼ å‚æœ‰è¯´æ˜page.getSVG(&#123; imageApi: api, includePageBackground: true, // ä¸€ç›®äº†ç„¶ï¼ŒçŸ¥é“è¿™äº›trueå’Œfalseæ˜¯å•¥æ„æ€ compress: false,&#125;) ä¸€ä¸ªå‡½æ•°å®Œæˆä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ï¼Œä¸è¦ä¸€ä¸ªå‡½æ•°æ··æ‚å¤šä¸ªåŠŸèƒ½ ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ï¼Œå°‘ç”¨for å¤šé‡åˆ¤æ–­ä½¿ç”¨array.includesï¼ˆé€»è¾‘å¤æ‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼‰ ï¼š 123456789101112131415// NO function test(fruit) if (fruit == 'apple' || fruit == 'strawberry') &#123; console.log('red'); &#125;&#125;// YESfunction test(fruit) &#123; const redFruits = ['apple', 'strawberry', 'cherry', 'cranberries']; if (redFruits.includes(fruit)) &#123; console.log('red'); &#125;&#125; æ›´å°‘çš„åµŒå¥—ï¼Œå°½æ—©returnï¼Œè€ƒè™‘ä½¿ç”¨éï¼ˆï¼ï¼‰ å€¾å‘äºéå†å¯¹è±¡è¿˜ä¸æ˜¯switchï¼š 1234567891011121314151617181920212223242526272829// NOfunction test(color) &#123; // ä½¿ç”¨æ¡ä»¶è¯­å¥æ¥å¯»æ‰¾å¯¹åº”é¢œè‰²çš„æ°´æœ switch (color) &#123; case 'red': return ['apple', 'strawberry']; case 'yellow': return ['banana', 'pineapple']; case 'purple': return ['grape', 'plum']; default: return []; &#125;&#125;// test resultstest(null); // []test('yellow'); // ['banana', 'pineapple']// YESconst fruitColor = &#123; red: ['apple', 'strawberry'], yellow: ['banana', 'pineapple'], purple: ['grape', 'plum']&#125;;function test(color) &#123; return fruitColor[color] || [];&#125; å¯¹ æ‰€æœ‰/éƒ¨åˆ† åˆ¤æ–­ä½¿ç”¨ Array.every &amp; Array.some","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"https://i7eo.com/tags/è§„èŒƒ/"}]},{"title":"Vue çš„å“åº”å¼/æ¨¡ç‰ˆè§£æ/æ¸²æŸ“","slug":"vuesc","date":"2019-01-03T15:04:45.000Z","updated":"2019-01-05T05:22:56.913Z","comments":true,"path":"2019/01/03/vuesc.html","link":"","permalink":"https://i7eo.com/2019/01/03/vuesc.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¯¹äºä½¿ç”¨ vue çš„åŒå­¦æ¥è¯´ï¼Œå“åº”å¼ã€æ¨¡ç‰ˆè§£æ/æ¸²æŸ“åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œvue å¼€å‘ç¦»ä¸å¼€è¿™äº›ç‰¹æ€§ã€‚ç”¨äº† vue æŒºé•¿æ—¶é—´äº†ï¼Œå†™å†™æ€»ç»“ã€‚ å“åº”å¼åˆ›å»ºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼š 12345let t = &#123; name: 't1' age: 19&#125;console.log(t.age) // 19 é‚£ä¹ˆå¦‚ä½•ç›‘å¬ageå±æ€§çš„è®¿é—®ä¸è®¾ç½®å‘¢ï¼Ÿ åœ¨es5ä¸­åŠ å…¥äº†ä¸€ä¸ªapiå« Object.defineProperty,è¯¥apiå…è®¸","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¯¹äºä½¿ç”¨ vue çš„åŒå­¦æ¥è¯´ï¼Œå“åº”å¼ã€æ¨¡ç‰ˆè§£æ/æ¸²æŸ“åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œvue å¼€å‘ç¦»ä¸å¼€è¿™äº›ç‰¹æ€§ã€‚ç”¨äº† vue æŒºé•¿æ—¶é—´äº†ï¼Œå†™å†™æ€»ç»“ã€‚ å“åº”å¼åˆ›å»ºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼š 12345let t = &#123; name: 't1' age: 19&#125;console.log(t.age) // 19 é‚£ä¹ˆå¦‚ä½•ç›‘å¬ageå±æ€§çš„è®¿é—®ä¸è®¾ç½®å‘¢ï¼Ÿ åœ¨es5ä¸­åŠ å…¥äº†ä¸€ä¸ªapiå« Object.defineProperty,è¯¥apiå…è®¸ åˆ›å»ºå¯¹è±¡çš„å±æ€§è‡ªå®šä¹‰ get/set å‡½æ•°ã€‚ä¿®æ”¹ä¸Šé¢ä»£ç ï¼š 1234567891011121314151617let t = &#123;&#125;let name = 't1'Object.defineProperty(obj, 'name', &#123; get() &#123; console.log('get') return name &#125;, set(newVal) &#123; console.log('set') name = newVal &#125;&#125;)console.log(obj.name)// get// t1obj.name = 'george'// set åœ¨vueä¸­æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œå¤§æ¦‚è¿‡ç¨‹å¦‚ä¸‹ï¼š 123456789101112131415161718let vm = &#123;&#125;let data = &#123; name: 'lyn', age: 20&#125;for(let v in data) &#123; (function(v) &#123; Object.defineProperty(vm, v, &#123; get() &#123; return data[v] &#125;, set(newVal) &#123; data[v] = newVal &#125; &#125;) &#125;)(v)&#125; ä¸ºä»€ä¹ˆè¦å°†dataçš„å€¼å…¨éƒ¨ä»£ç†è‡³vmå¯¹è±¡ä¸Šï¼Ÿvueä¸­å°±æ˜¯è¿™ä¹ˆå†™çš„ â€¦ï¼Œè€Œä¸”æ¨¡ç‰ˆè§£æçš„æ—¶å€™ä¼šç”¨åˆ°ã€‚ æ¨¡æ¿è§£ææˆ‘ä»¬ç»å¸¸åœ¨vueä¸­ä½¿ç”¨vueæ¨¡æ¿ï¼Œæ¯”å¦‚ï¼š 1234567&lt;div id=\"app\"&gt; &lt;input v-model=\"title\"&gt; &lt;button @click=\"add\"&gt;&lt;/button&gt;&lt;/div&gt;&lt;ul&gt; &lt;li v-for=\"v in list\"&gt;&#123;&#123; v &#125;&#125;&lt;/li&gt;&lt;/ul&gt; æ¨¡æ¿çš„æœ¬è´¨æ˜¯å­—ç¬¦ä¸²ï¼Œå…¶ç‰¹ç‚¹æœ‰ï¼š åŒ…å« if/for ç­‰é€»è¾‘æŒ‡ä»¤ åŠ¨æ€çš„ï¼ˆåŠ¨æ€ç”Ÿæˆ dom ï¼‰ æœ€ç»ˆè½¬æ¢ä¸º html ç»¼ä¸Šï¼Œè¦å°†æ¨¡æ¿è½¬æ¢ä¸º html ï¼Œåªèƒ½ä½¿ç”¨ js æ¥æ“ä½œã€‚åœ¨ html/css/js ä¸­ï¼Œåªæœ‰jsèƒ½å¤„ç†é€»è¾‘å’Œæ¸²æŸ“é¡µé¢ã€‚ åœ¨å½“å‰æ–‡ä»¶å¼•å…¥vueæ–‡ä»¶ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œåœ¨æºç ä¸­æœç´¢code.render åœ¨ return å‰æ‰“å° code.renderï¼Œè§‚å¯Ÿæ¨¡æ¿è¢«è§£æåç”Ÿæˆçš„renderå‡½æ•°ï¼Œrenderå‡½æ•°æœ€ç»ˆè¿”å›vnodeã€‚å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758with(this)&#123; // this å°±æ˜¯ vm return _c( 'div', &#123; attrs:&#123;\"id\":\"app\"&#125; &#125;, [_c( 'div', [ _c( 'input', &#123; directives:[ &#123; name:\"model\", rawName:\"v-model\", value:(title), // vm.title åœ¨è¿™é‡Œå°±å°†modelä¸­çš„çš„å€¼é€šè¿‡vmä¸viewä¸­çš„inputæ•°æ®è”ç³»äº†èµ·æ¥ expression:\"title\" &#125; ], domProps:&#123; \"value\":(title) &#125;, on:&#123; \"input\":function($event)&#123; // åœ¨è¿™é‡Œå¯ä»¥å‘ç°v-model å…¶å®åœ¨vueæ¨¡ç‰ˆå†…è¢«å°è£…äº†è¿›å» if($event.target.composing)return; title=$event.target.value åœ¨è¿™é‡Œå°±å°†viewä¸­çš„inputä¸­çš„å€¼é€šè¿‡vmä¸modelä¸­çš„æ•°æ®è”ç³»äº†èµ·æ¥ä¸ä¸Šé¢ç›¸å¯¹åº”å®ç°åŒå‘ç»‘å®š &#125; &#125; &#125; ), _v(\" \"), // å› ä¸ºhtmlä¸­ä¿©ä¸ªæ ‡ç­¾é—´æˆ‘ä»¬æ¢è¡Œæ‰€ä»¥è¿™é‡Œæ˜¯ç©º _c( 'button', &#123; on:&#123; \"click\":add // ç›¸å½“äº vm.addè¿™é‡Œç›´æ¥è°ƒç”¨methodsä¸­å®šä¹‰çš„addå‡½æ•° &#125; &#125;, [_v(\"submit\")] ) ]), _v(\" \"), _c('div', [ _c( 'ul', //v-forè¿™é‡Œä½¿ç”¨å†…éƒ¨å®šä¹‰çš„ _lå‡½æ•°æ¥å¤„ç† _l((list),function(item)&#123;return _c('li',[_v(_s(item))])&#125;) ) ] )] )&#125; _c åˆ›å»ºæ ‡ç­¾ï¼Œ_våˆ›å»ºæ–‡æœ¬å…ƒç´ ï¼Œ_s toString()ï¼Œè¿™ä¸ª_c å’Œ snabbdom ä¸­çš„ h å‡½æ•°å¾ˆåƒï¼Œé‚£vueä¸­æ›´æ–°çš„æ“ä½œä¼šä¸ä¼šå’Œ snabbdom ä¸­çš„é€»è¾‘é¡µç›¸ä¼¼å‘¢ï¼Ÿvue ä¸­çš„æ›´æ–°å‡½æ•°ï¼š 1234567891011121314vm._update(vnode) &#123; const prevNode = vm._vnode vm._node = vnode if(!prevNode) &#123; vm.$el = vm.__patch___(vm.$el, vnode) &#125;else&#123; vm.$el = vm.__patch__(prevNode, vnode) &#125;&#125;function updateComponent() &#123; vm._update(vm._render()) // vm._render å³ç”Ÿæˆä¸Šé¢åŒ…å« _c/_v/_sçš„æ¨¡æ¿è§£æå‡½æ•°&#125; ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡æ”¹å˜dataï¼Œé€šè¿‡Object.definePropertyç›‘å¬ä¿®æ”¹æ“ä½œï¼Œä¸€æ—¦ä¿®æ”¹å°±è°ƒç”¨ updateComponent å‡½æ•°ï¼Œåˆ©ç”¨vm._renderæ–¹æ³•ç”Ÿæˆæ–°çš„ vnodeã€‚é€šè¿‡ vm._patch_ å°†vnodeè½¬åŒ–ä¸ºhtmlå¹¶æ›´æ–°è‡³åŸç”Ÿdomä¸­ã€‚ æ€»ç»“ è§£ææ¨¡æ¿ç”Ÿæˆrenderå‡½æ•° å“åº”å¼å¼€å§‹ç›‘å¬ é¦–æ¬¡æ¸²æŸ“ï¼Œæ˜¾ç¤ºé¡µé¢ä¸”ç»‘å®šä¾èµ– dataå±æ€§å˜åŒ–ï¼Œå†æ¬¡æ¸²æŸ“","categories":[{"name":"Vuejs","slug":"Vuejs","permalink":"https://i7eo.com/categories/Vuejs/"}],"tags":[{"name":"æ¨¡ç‰ˆè§£æ","slug":"æ¨¡ç‰ˆè§£æ","permalink":"https://i7eo.com/tags/æ¨¡ç‰ˆè§£æ/"},{"name":"render å‡½æ•°","slug":"render-å‡½æ•°","permalink":"https://i7eo.com/tags/render-å‡½æ•°/"}]},{"title":"è¯‘æ–‡ï¼šUnderstanding the Virtual DOM","slug":"vdom","date":"2019-01-01T07:22:47.000Z","updated":"2019-01-06T04:22:24.421Z","comments":true,"path":"2019/01/01/vdom.html","link":"","permalink":"https://i7eo.com/2019/01/01/vdom.html","excerpt":"æœ¬æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŸæ–‡åœ°å€ï¼š Understanding the Virtual DOM &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘æœ€è¿‘åœ¨å†™ä¸€äº›å¦‚ä½•æ­£ç¡®åŒºåˆ† dom ä¸ shadow dom çš„æ–‡ç« ã€‚æ€»çš„æ¥è¯´ï¼Œdom æ˜¯HTMLæ–‡æ¡£çš„åŸºäºå¯¹è±¡çš„è¡¨ç¤ºï¼Œä»¥åŠæ“ä½œè¯¥å¯¹è±¡çš„æ¥å£ã€‚shadow dom å¯ä»¥è¢«è®¤ä¸ºæ˜¯è½»é‡çº§ç‰ˆæœ¬çš„ domã€‚å®ƒåŒæ ·æ˜¯ä»¥åŸç”Ÿå¯¹è±¡ä¸ºåŸºç¡€çš„ html documentï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯å®Œæ•´çš„ã€‚å¯èƒ½æœ‰äº›éš¾æ‡‚ï¼Œæ¢ä¸€ç§è¯´æ³•æ¥çœ‹ï¼Œshadow dom å…è®¸æˆ‘ä»¬å»å°†æˆ‘ä»¬çš„ dom åˆ’åˆ†çš„æ›´å°ï¼Œæ›´è½»ï¼Œå¯ä»¥è·¨æ–‡æ¡£ä½¿ç”¨ã€‚ï¼ˆè¿™é‡Œä½œè€…æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æˆªå–éƒ¨åˆ† dom ç”Ÿæˆ vdomï¼Œè€Œä¸ç”¨æ¯æ¬¡ä» html æ ‡ç­¾å¼€å§‹å†™ vdom ç›´åˆ° html æ ‡ç­¾é—­åˆï¼‰ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦ä¸€ä¸ªä½ å¯èƒ½é‡åˆ°è¿‡çš„ç›¸ä¼¼è¯´æ³•ç§° â€œshadow domâ€ ä¸º â€œvirtual DOMâ€ã€‚å°½ç®¡","text":"æœ¬æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŸæ–‡åœ°å€ï¼š Understanding the Virtual DOM &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘æœ€è¿‘åœ¨å†™ä¸€äº›å¦‚ä½•æ­£ç¡®åŒºåˆ† dom ä¸ shadow dom çš„æ–‡ç« ã€‚æ€»çš„æ¥è¯´ï¼Œdom æ˜¯HTMLæ–‡æ¡£çš„åŸºäºå¯¹è±¡çš„è¡¨ç¤ºï¼Œä»¥åŠæ“ä½œè¯¥å¯¹è±¡çš„æ¥å£ã€‚shadow dom å¯ä»¥è¢«è®¤ä¸ºæ˜¯è½»é‡çº§ç‰ˆæœ¬çš„ domã€‚å®ƒåŒæ ·æ˜¯ä»¥åŸç”Ÿå¯¹è±¡ä¸ºåŸºç¡€çš„ html documentï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯å®Œæ•´çš„ã€‚å¯èƒ½æœ‰äº›éš¾æ‡‚ï¼Œæ¢ä¸€ç§è¯´æ³•æ¥çœ‹ï¼Œshadow dom å…è®¸æˆ‘ä»¬å»å°†æˆ‘ä»¬çš„ dom åˆ’åˆ†çš„æ›´å°ï¼Œæ›´è½»ï¼Œå¯ä»¥è·¨æ–‡æ¡£ä½¿ç”¨ã€‚ï¼ˆè¿™é‡Œä½œè€…æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æˆªå–éƒ¨åˆ† dom ç”Ÿæˆ vdomï¼Œè€Œä¸ç”¨æ¯æ¬¡ä» html æ ‡ç­¾å¼€å§‹å†™ vdom ç›´åˆ° html æ ‡ç­¾é—­åˆï¼‰ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦ä¸€ä¸ªä½ å¯èƒ½é‡åˆ°è¿‡çš„ç›¸ä¼¼è¯´æ³•ç§° â€œshadow domâ€ ä¸º â€œvirtual DOMâ€ã€‚å°½ç®¡ è¿™ä¸ªè¯´æ³•å·²ç»å­˜åœ¨äº†å¾ˆå¤šå¹´ï¼Œä½†æ˜¯å®ƒçœŸæ­£çš„æµè¡Œæ˜¯åœ¨ react ä½¿ç”¨å®ƒä¹‹åã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘å°†å°½åŠ›é˜è¿°ä»€ä¹ˆæ˜¯è™šæ‹Ÿ dom ï¼Œå®ƒä¸åŸç”Ÿ dom åˆä»€ä¹ˆä¸åŒä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚ æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ dom ï¼Ÿæƒ³è¦äº†è§£è™šæ‹Ÿdomä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾ä»¥ä¸‹åŸç”Ÿdomã€‚æ­£å¦‚æˆ‘æ‰€æåˆ°çš„ï¼Œdom æ˜¯HTMLæ–‡æ¡£çš„åŸºäºå¯¹è±¡çš„è¡¨ç¤ºï¼Œä»¥åŠæ“ä½œè¯¥å¯¹è±¡çš„æ¥å£ã€‚ä¸¾ä¸ªä¾‹å­çœ‹çœ‹ï¼š 123456789&lt;!doctype html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt;&lt;/head&gt; &lt;body&gt; &lt;ul class=\"list\"&gt; &lt;li class=\"list__item\"&gt;List item&lt;/li&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; å¯ä»¥ç”¨å¦‚ä¸‹ dom æ ‘æ¥è¡¨ç¤ºï¼š è®©æˆ‘ä»¬æ¥è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š ä¿®æ”¹ç¬¬ä¸€ä¸ª li çš„å†…å®¹ä¸º list item one åŠ ä¸Šä¸€ä¸ª li è¦å®Œæˆä¸Šè¿°æ“ä½œéœ€è¦åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œæ·»åŠ æ–°å±æ€§ä¸å†…å®¹ï¼Œæœ€ç»ˆå®Œæˆæ›´æ–°ï¼š 12345678const listItemOne = document.getElementsByClassName(\"list__item\")[0];listItemOne.textContent = \"List item one\";const list = document.getElementsByClassName(\"list\")[0];const listItemTwo = document.createElement(\"li\");listItemTwo.classList.add(\"list__item\");listItemTwo.textContent = \"List item two\";list.appendChild(listItemTwo); Dom å¹¶ä¸æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å½“1998å¹´å‘å¸ƒDOMçš„ç¬¬ä¸€ä¸ªè§„èŒƒæ—¶ï¼Œæˆ‘ä»¬ä»¥éå¸¸ä¸åŒçš„æ–¹å¼æ„å»ºå’Œç®¡ç†webé¡µé¢ã€‚å¾ˆå°‘åƒä»Šå¤©è¿™æ ·ä¾èµ–DOM apiæ¥åˆ›å»ºå’Œæ›´æ–°é¡µé¢å†…å®¹ã€‚ åƒ document.getElementsByClassName() è¿™ä¸ªæ–¹æ³•å°è§„æ¨¡ä½¿ç”¨æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœåœ¨åŒä¸€é¡µé¢é—´éš”å¾ˆçŸ­çš„æƒ…å†µä¸‹å»æ›´æ–°å¤šä¸ªå…ƒç´ ï¼Œå°±ä¼šä½¿å¯¹äº dom çš„æŸ¥è¯¢ä¸æ›´æ–°æ“ä½œå˜å¾—å¾ˆæ˜‚è´µã€‚æ­¤å¤–ï¼Œæ›´æ–°æ–‡æ¡£ä¸­è¾ƒå¤§ä¸€éƒ¨åˆ†æ¯”æ›´æ–°ç‰¹å®šå…ƒç´ çš„å¼€é”€ä¼šå°ä¸€äº›ã€‚å›åˆ°æˆ‘ä»¬åˆ—è¡¨ä¾‹å­ä¸­ï¼Œä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ç”¨æ–°å…ƒç´ æ›¿æ¢æ•´ä¸ªæ— åºåˆ—è¡¨æ¯”ä¿®æ”¹æŸä¸ªç‰¹å®šå…ƒç´ è¦ç®€å•ä¸€äº›ã€‚ä»£ç å¦‚ä¸‹ï¼š 12345const list = document.getElementsByClassName(\"list\")[0];list.innerHTML = `&lt;li class=\"list__item\"&gt;List item one&lt;/li&gt;&lt;li class=\"list__item\"&gt;List item two&lt;/li&gt;`; åœ¨è¿™ä¿©ä¸ªä¾‹å­ä¸­ï¼Œæ€§èƒ½å·®å¼‚å¹¶ä¸å¤§ã€‚ä½†æ˜¯éšç€é¡µé¢æ•°é‡çš„å¢åŠ ï¼Œé€‰æ‹©ã€æ›´æ–°æˆ‘ä»¬éœ€è¦çš„ä»£ç ä¼šæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚ è™šæ‹Ÿ Dom å› æ­¤è€Œå‡ºç°&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è™šæ‹Ÿ Dom çš„å‡ºç°æ˜¯ä¸ºäº†ç”¨æ›´åŠ é«˜æ•ˆçš„æ–¹å¼æ¥å¤„ç†é¢‘ç¹æ›´æ–° dom æ‰€äº§ç”Ÿçš„é—®é¢˜ã€‚ä¸ dom å’Œ shadow dom ä¸åŒçš„æ˜¯ï¼Œè™šæ‹Ÿ dom ä¸æ˜¯ä¸€ç§æ­£å¼çš„è§„èŒƒï¼Œå®ƒæ›´åƒä¸€ç§ä¸ dom äº¤äº’çš„æ–°æ–¹æ³•ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è™šæ‹Ÿ dom å¯ä»¥è¢«è®¤ä¸ºæ˜¯åŸç”Ÿ dom çš„ä¸€ä¸ªå¤åˆ¶å“ã€‚åœ¨è¿™ä¸ªå¤åˆ¶å“ä¸Šæˆ‘ä»¬å¯ä»¥ä¸é€šè¿‡ dom api å°±èƒ½é¢‘ç¹æ›´æ–°æ•°æ®ã€‚ä¸€æ—¦å¯¹è™šæ‹ŸDOMè¿›è¡Œäº†æ‰€æœ‰æ›´æ–°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹éœ€è¦å¯¹åŸå§‹DOMè¿›è¡Œå“ªäº›ç‰¹å®šæ›´æ”¹ï¼Œå¹¶ä¸”ä½¿è¿™äº›æ”¹å˜æ›´åŠ å…·ä½“ä¸ä¼˜åŒ–ã€‚ è™šæ‹Ÿ Dom å¼ ä»€ä¹ˆæ ·å‘¢ï¼Ÿ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€å¬åˆ°è™šæ‹Ÿï¼Œå¯èƒ½ä¼šè§‰å¾—æœ‰äº›ç¥ç§˜æ„Ÿã€‚å…¶å®è™šæ‹Ÿ dom å°±æ˜¯ js å¯¹è±¡ã€‚è®©æˆ‘ä»¬å†æ¥å›é¡¾å…ˆå‰åˆ›å»ºçš„ dom æ ‘ï¼š è¿™ä¸ªæ ‘å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹ js å¯¹è±¡ï¼š 12345678910111213141516171819202122const vdom = &#123; tagName: \"html\", children: [ &#123; tagName: \"head\" &#125;, &#123; tagName: \"body\", children: [ &#123; tagName: \"ul\", attributes: &#123; \"class\": \"list\" &#125;, children: [ &#123; tagName: \"li\", attributes: &#123; \"class\": \"list__item\" &#125;, textContent: \"List item\" &#125; // end li ] &#125; // end ul ] &#125; // end body ]&#125; // end html æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠè¿™ä¸ª js å¯¹è±¡å½“ä½œè™šæ‹Ÿ dom ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±çš„é¢‘ç¹æ“ä½œå®ƒè€Œä¸æ”¹å˜åŸç”Ÿ domã€‚ ç›¸æ¯”äºä½¿ç”¨æ•´ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨éƒ¨åˆ†è™šæ‹Ÿ domã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¦æ“ä½œä¸€ä¸ª list ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¸æˆ‘ä»¬çš„æ— åºåˆ—è¡¨å…ƒç´ ç›¸å…³è”ã€‚å…·ä½“å¦‚ä¸‹ï¼š 1234567891011const list = &#123; tagName: \"ul\", attributes: &#123; \"class\": \"list\" &#125;, children: [ &#123; tagName: \"li\", attributes: &#123; \"class\": \"list__item\" &#125;, textContent: \"List item\" &#125; ]&#125;; è™šæ‹Ÿ Dom å¦‚ä½•ä½¿ç”¨ï¼Ÿ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨æˆ‘ä»¬è§è¯†è¿‡äº†è™šæ‹Ÿdomçš„æ ·å­ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å¤„ç†domæ“ä½œçš„æ€§èƒ½é—®é¢˜ï¼Ÿ æ­£å¦‚æˆ‘æ‰€æåˆ°çš„ï¼Œè™šæ‹Ÿ dom å¯ä»¥ä¸“é—¨ç”¨æ¥å¯¹ä½ éœ€è¦æ”¹å˜çš„å…ƒç´ è¿›è¡Œæ“ä½œã€‚ï¼ˆä¸å½±å“æ²¡æœ‰æ”¹å˜çš„å…ƒç´ ï¼‰è®©æˆ‘ä»¬é‡å›æ— åºåˆ—è¡¨çš„ä¾‹å­ã€‚ ç¬¬ä¸€ä»¶äº‹æˆ‘ä»¬åº”è¯¥å¤åˆ¶domæ¥äº§ç”Ÿè™šæ‹Ÿdomï¼Œç„¶åå¯¹éœ€è¦æ”¹å˜çš„å…ƒç´ åœ¨è™šæ‹Ÿdomä¸­è¿›è¡Œæ”¹å˜æ“ä½œã€‚å¦‚ä¸‹ï¼š 12345678910111213141516const copy = &#123; tagName: \"ul\", attributes: &#123; \"class\": \"list\" &#125;, children: [ &#123; tagName: \"li\", attributes: &#123; \"class\": \"list__item\" &#125;, textContent: \"List item one\" &#125;, &#123; tagName: \"li\", attributes: &#123; \"class\": \"list__item\" &#125;, textContent: \"List item two\" &#125; ]&#125;; è¿™ä¸ªå¤åˆ¶å‡ºæ¥çš„è™šæ‹Ÿ dom ç”¨æ¥å’ŒåŸç”Ÿ dom è¿›è¡Œæ¯”è¾ƒï¼Œä»è€ŒæŠŠæ¯”è¾ƒå‡ºæ¥çš„å·®å¼‚ç”¨åˆ›å»ºçš„ diff æ¥ä¿å­˜ã€‚ diff æ˜¯åƒè¿™ä¸ªæ ·å­çš„ï¼š 1234567891011const diffs = [ &#123; newNode: &#123; /* new version of list item one */ &#125;, oldNode: &#123; /* original version of list item one */ &#125;, index: /* index of element in parent's list of child nodes */ &#125;, &#123; newNode: &#123; /* list item two */ &#125;, index: &#123; /* */ &#125; &#125;] è¿™ä¸ª diff æä¾›äº†ä¸€ä¸ªç»“æ„ï¼Œè¿™ä¸ªç»“æ„å¯ä»¥ç”¨æ¥æ›´æ–°åŸç”Ÿçš„ domã€‚ä¸€æ—¦æ‰€æœ‰çš„ diff æ£€æµ‹å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åŸç”Ÿ dom åªè¿›è¡Œä¸€æ¬¡æ›´æ–°æ“ä½œå³å¯ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯¹ diff è¿›è¡Œå¾ªç¯ï¼Œä¸è®ºæ˜¯æ·»åŠ æ–°çš„å…ƒç´ è¿˜æ˜¯æ›´æ–°æ—§çš„å…ƒç´ ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åƒä¸‹é¢è¿™æ ·åšï¼š 123456789101112131415const domElement = document.getElementsByClassName(\"list\")[0];diffs.forEach((diff) =&gt; &#123; const newElement = document.createElement(diff.newNode.tagName); /* Add attributes ... */ if (diff.oldNode) &#123; // If there is an old version, replace it with the new version domElement.replaceChild(diff.newNode, diff.index); &#125; else &#123; // If no old version exists, create a new node domElement.appendChild(diff.newNode); &#125;&#125;) æ€»ç»“ è™šæ‹Ÿdomæ˜¯è®©æˆ‘ä»¬ä¸domäº¤äº’æ›´åŠ é«˜æ•ˆçš„ä¸”æ€§èƒ½æ›´å¥½ä¸€ç§æ–¹æ³• è™šæ‹Ÿdomæ˜¯ä¸€ä¸ªjså¯¹è±¡ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¯¹jså¯¹è±¡è¿›è¡Œé¢‘ç¹çš„ä¿®æ”¹ æ‰€æœ‰çš„ä¿®æ”¹åœ¨è™šæ‹Ÿdomä¸­ç»“æŸåï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§å¯¹åŸç”Ÿdomä¸­éœ€è¦æ”¹å˜çš„åœ°æ–¹è¿›è¡Œæ›´æ–° é™„å½•ï¼šsnabbdomå®ç° vdom çš„åº“ä¸å¤šï¼Œsnabbdom ç®—æ˜¯ä½¼ä½¼è€…ã€‚vue ä¸­é›†æˆäº†å®ƒçš„æ ¸å¿ƒä»£ç ï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹æ•°æ®åï¼Œéƒ½ä¼šæ‰§è¡Œå‡½æ•°è¿›è¡Œ diffã€‚ä¸‹é¢æ€»ç»“ä¸€ä¸‹éæ¡†æ¶ä¸‹vdomçš„ä½¿ç”¨æ–¹æ³•ï¼š 123456789&lt;div id=\"container\"&gt;&lt;/div&gt; &lt;button id=\"btn-submit\"&gt;change&lt;/button&gt; &lt;script src=\"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom.js\"&gt;&lt;/script&gt; &lt;script src=\"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-class.js\"&gt;&lt;/script&gt; &lt;script src=\"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-props.js\"&gt;&lt;/script&gt; &lt;script src=\"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-style.js\"&gt;&lt;/script&gt; &lt;script src=\"https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-eventlisteners.js\"&gt;&lt;/script&gt; &lt;script src=\"https://cdn.bootcss.com/snabbdom/0.7.3/h.js\"&gt;&lt;/script&gt; ä»¥ä¸Šæ˜¯htmlç»“æ„ï¼Œå¼•å…¥ä¸åŒçš„snabbdomæ–‡ä»¶æ˜¯å¯¹åº”è§£æç»‘å®šçš„äº‹ä»¶ã€å±æ€§ç­‰ã€‚é¦–å…ˆä½¿ç”¨ patch(c, vnode) åˆ›å»ºæ— åºåˆ—è¡¨å¦‚ä¸‹ï¼š å•å‡»æŒ‰é’®å†æ¬¡è°ƒç”¨ patch å‡½æ•°å³å¯ç”Ÿæˆï¼š å…·ä½“ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435const snabbdom = window.snabbdom // init snabbdom let patch = snabbdom.init([ snabbdom_class, snabbdom_props, snabbdom_style, snabbdom_eventlisteners ]) //define h() let h = snabbdom.h let c = document.getElementById('container') let btn = document.getElementById('btn-submit') // create vnode let vnode = h('ul#list', &#123;&#125;, [ h('li.item', &#123;&#125;, 'item1'), h('li.item', &#123;&#125;, 'item2') ]) // first time create vdom and transform it to dom patch(c, vnode) btn.addEventListener('click', () =&gt; &#123; // define new node let newNode = h('ul#list', &#123;&#125;, [ h('li.item', &#123;&#125;, 'item1'), h('li.item', &#123;&#125;, 'item22'), h('li.item', &#123;&#125;, 'item3') ]) // find diffs , update diffs into original DOM patch(vnode, newNode) vnode = newNode &#125;) h å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¼ å…¥çš„æ•°æ®è½¬åŒ–ä¸ºvnodeï¼ˆvnodeå…·ä½“æ ¼å¼å‚ç…§ä¸Šè¿°è¯‘æ–‡ä¸­çš„ copyï¼‰ï¼Œpatch å‡½æ•°å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ vnodeï¼Œä¸å­˜åœ¨çš„è¯ç›´æ¥å°† vnodeï¼Œç”Ÿæˆ domï¼Œæ’å…¥ç›®æ ‡ä¸­ï¼›è‹¥å­˜åœ¨è¿›è¡Œ diff ç®—æ³•ï¼Œæ‰¾å‡ºå·®å¼‚åå¯¹åŸç”Ÿ dom è¿›è¡Œæ›´æ–°ã€‚ åŠ¨æ‰‹æ¨¡æ‹Ÿ patch å®ç°è¿‡ç¨‹patch å‡½æ•°æœ‰ä¿©ç§ç”¨æ³•ï¼š patch(container, vnode) patch(vnode, newNode) å…ˆæ¥çœ‹ç¬¬ä¸€ç§ï¼š 123456789101112131415&#123; tag: 'ul', attrs: &#123; id: 'list' &#125;, children: [ &#123; tag: 'li', attrs: &#123; classname: 'item' &#125;, children: ['item1'] &#125; ]&#125; 123&lt;ul id=\"list\"&gt; &lt;li class=\"item\"&gt;item 1&lt;/li&gt;&lt;/ul&gt; é¦–å…ˆå¾—å°†vnodeè½¬åŒ–ä¸ºhtmlç»“æ„ï¼Œæ‰èƒ½åŠ å…¥åˆ°containerç§ï¼Œé‚£ä¹ˆå¦‚ä½•å°†ä¸Šè¿°jså¯¹è±¡ï¼ˆvnodeï¼‰è½¬åŒ–ä¸º html å‘¢ï¼Ÿ 1234567891011121314151617181920function createEl(vnode) &#123; let tag = vnode.tag let attrs = vnode.attrs || &#123;&#125; let children = vnode.children || [] if(!tag) return null; let el = document.createElement(tag) for(let attrName in attrs) &#123; if(attrs.hasOwnProperty(attrName))&#123; el.setAttribute(attrName, attrs[attrName]) &#125; &#125; children.forEach(v =&gt; &#123; el.append(createElement(v)) &#125;) return el;&#125; å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œåˆ©ç”¨é€’å½’å¾ªç¯éå† childrenï¼Œè®¾ç½® !tag ä¸ºç»ˆæ­¢æ¡ä»¶ã€‚ ç¬¬äºŒç§ï¼š 12345678910111213141516171819202122&#123; tag: 'ul', attrs: &#123; id: 'list' &#125;, children: [ &#123; tag: 'li', attrs: &#123; classname: 'item' &#125;, children: ['item12'] &#125;, &#123; tag: 'li', attrs: &#123; classname: 'item' &#125;, children: ['item2'] &#125; ]&#125; 1234&lt;ul id=\"list\"&gt; &lt;li class=\"item\"&gt;item 12&lt;/li&gt; &lt;li class=\"item\"&gt;item 2&lt;/li&gt;&lt;/ul&gt; è¿™é‡Œæˆ‘ä»¬æƒ³è¦å°†åˆ—è¡¨æ›´æ–°ä¸ºä¸Šè¿°ç»“æ„ï¼Œä½¿ç”¨ patch(vnode, newNode) æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­è‚¯å®šæ˜¯è¦ä¸æ–­çš„å»å¯¹æ¯”ï¼Œä¸æ–­çš„å¯¹æ¯”childrenè‚¯å®šè¿˜ä¼šç”¨åˆ°é€’å½’ï¼Œæ¨¡æ‹Ÿä»£ç ï¼ˆåªè€ƒè™‘æœ€ç®€å•çš„æƒ…å†µï¼‰å¦‚ä¸‹ï¼š 12345678910111213141516function updateEl(vnode, newNode) &#123; let children = vnode.children || [] let newChildren = newNode.children || [] children.forEach((child, idx) =&gt; &#123; let newChild = newChildren[idx] if(newChild === null) return ; if(child.tag === newChild.tag) &#123; // the same tag updateEl(child, newChild) &#125;else&#123; // the different tag replaceNode(child, newChild) &#125; &#125;)&#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"è™šæ‹ŸDom","slug":"è™šæ‹ŸDom","permalink":"https://i7eo.com/tags/è™šæ‹ŸDom/"}]},{"title":"Event Loopæ€»ç»“","slug":"Event-Loopæ€»ç»“","date":"2018-11-11T14:33:12.000Z","updated":"2019-01-05T03:57:58.091Z","comments":true,"path":"2018/11/11/Event-Loopæ€»ç»“.html","link":"","permalink":"https://i7eo.com/2018/11/11/Event-Loopæ€»ç»“.html","excerpt":"ä¹‹å‰ä¹Ÿæœ‰ event loop çš„æ¦‚å¿µï¼Œä½†ä¸€ç›´éƒ½æ˜¯çç¢çš„ã€‚ç›´åˆ°é˜…è¯»ä»¥ä¸‹ä¸‰ç¯‡æ–‡ç« åï¼Œçç¢çš„ç‚¹ä¸²åœ¨äº†ä¸€èµ·ã€‚ ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç† è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶ Event Loopçš„è§„èŒƒå’Œå®ç° ä¸ºäº†å°è±¡æ·±åˆ»ï¼Œè¿˜æ˜¯å†³å®šè‡ªå·±å†™ä¸€å†™ã€‚æ€»ç»“å¦‚ä¸‹ï¼š 1ã€è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿåœ¨è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­ï¼Œåªæœ‰è¿›ç¨‹æ‰èƒ½åœ¨ç³»ç»Ÿä¸­è¿è¡Œã€‚æ‰€ä»¥è¦ä½¿ç¨‹åºè¿è¡Œå°±å¿…é¡»ä¸ºå…¶åˆ›å»ºè¿›ç¨‹ã€‚å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ—¶å°±å·²ç»åˆ›å»ºäº†è¿›ç¨‹ã€‚åˆ›å»ºè¿›ç¨‹ä¹‹åï¼Œç³»ç»Ÿä¼šä¸ºå…¶åˆ†é…èµ„æº(å†…å­˜ç­‰)ä¾›å…¶ä½¿ç”¨ã€‚ è¿›ç¨‹æ˜¯ç¨‹åºï¼ˆæŒ‡ä»¤å’Œæ•°æ®ï¼‰çš„çœŸæ­£è¿è¡Œå®ä¾‹ã€‚è‹¥å¹²è¿›ç¨‹æœ‰å¯èƒ½ â€¦","text":"ä¹‹å‰ä¹Ÿæœ‰ event loop çš„æ¦‚å¿µï¼Œä½†ä¸€ç›´éƒ½æ˜¯çç¢çš„ã€‚ç›´åˆ°é˜…è¯»ä»¥ä¸‹ä¸‰ç¯‡æ–‡ç« åï¼Œçç¢çš„ç‚¹ä¸²åœ¨äº†ä¸€èµ·ã€‚ ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç† è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶ Event Loopçš„è§„èŒƒå’Œå®ç° ä¸ºäº†å°è±¡æ·±åˆ»ï¼Œè¿˜æ˜¯å†³å®šè‡ªå·±å†™ä¸€å†™ã€‚æ€»ç»“å¦‚ä¸‹ï¼š 1ã€è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿåœ¨è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­ï¼Œåªæœ‰è¿›ç¨‹æ‰èƒ½åœ¨ç³»ç»Ÿä¸­è¿è¡Œã€‚æ‰€ä»¥è¦ä½¿ç¨‹åºè¿è¡Œå°±å¿…é¡»ä¸ºå…¶åˆ›å»ºè¿›ç¨‹ã€‚å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ—¶å°±å·²ç»åˆ›å»ºäº†è¿›ç¨‹ã€‚åˆ›å»ºè¿›ç¨‹ä¹‹åï¼Œç³»ç»Ÿä¼šä¸ºå…¶åˆ†é…èµ„æº(å†…å­˜ç­‰)ä¾›å…¶ä½¿ç”¨ã€‚ è¿›ç¨‹æ˜¯ç¨‹åºï¼ˆæŒ‡ä»¤å’Œæ•°æ®ï¼‰çš„çœŸæ­£è¿è¡Œå®ä¾‹ã€‚è‹¥å¹²è¿›ç¨‹æœ‰å¯èƒ½ â€¦ ä¸åŒä¸€ä¸ªç¨‹åºç›¸å…³ç³»ï¼Œä¸”æ¯ä¸ªè¿›ç¨‹çš†å¯ä»¥åŒæ­¥ï¼ˆå¾ªåºï¼‰æˆ–å¼‚æ­¥ï¼ˆå¹³è¡Œï¼‰çš„æ–¹å¼ç‹¬ç«‹è¿è¡Œã€‚ 2ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚ æ€»çš„æ¥è¯´è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯è®¡ç®—æœºç³»ç»Ÿè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹åŸºæœ¬ä¸Šä¸æ‹¥æœ‰èµ„æºï¼ˆä¹Ÿæœ‰ä¸€ç‚¹å¿…ä¸å¯å°‘çš„èµ„æºï¼‰å®ƒåªä¸“æ³¨äºè°ƒåº¦å’Œåˆ†æ´¾ï¼Œæé«˜ç³»ç»Ÿå¹¶å‘ç¨‹åº¦ï¼Œä½†æ˜¯å®ƒå¯ä»¥è®¿é—®å…¶éš¶å±è¿›ç¨‹çš„èµ„æºã€‚ 2ã€æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹ä¸Šå›¾æ¥é˜è¿°ï¼Œè¿›å…¥æµè§ˆå™¨ï¼ˆchromeç­‰ï¼‰æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨çš„ task managerã€‚å¦‚ä¸‹å›¾ï¼š ä»å›¾ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ä»¥ç¡®å®šçš„æ˜¯æˆ‘æ‰“å¼€çš„4ä¸ªé¡µé¢éƒ½æ˜¯è¿›ç¨‹ï¼Œå› ä¸ºå®ƒä»¬æœ‰ä¸åŒçš„ process idï¼ˆè¿›ç¨‹æ ‡è¯†ç¬¦ï¼‰ï¼Œè¿™ä¸ªæ˜¯å­˜åœ¨ PCB ä¸­çš„ï¼Œç³»ç»Ÿåˆ†é…ä¸”å”¯ä¸€çš„æ•°å­—æ ‡è¯†ç¬¦ã€‚PCB æ˜¯è¿›ç¨‹æ§åˆ¶å—ï¼Œå…·ä½“å¯æœç´¢è®¡ç®—æœºæ“ä½œç³»ç»Ÿ-è¿›ç¨‹ã€‚ æµè§ˆå™¨çš„ä¸»è¦è¿›ç¨‹æœ‰å››ä¸ªï¼Œåˆ†åˆ«ä¸ºï¼šä¸»è¿›ç¨‹ã€GPUè¿›ç¨‹ã€æµè§ˆå™¨æ¸²æŸ“ï¼ˆrenderï¼‰è¿›ç¨‹ï¼ˆæ¯ä¸ªæ ‡ç­¾é¡µéƒ½ä¼šä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼‰ã€ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ã€‚ ä¸»è¦æ¥è¯´è¯´è¿™å››ä¸ªè¿›ç¨‹çš„èŒè´£ï¼š 1. ä¸»è¿›ç¨‹ï¼š ç”¨æˆ·çš„å‰è¿›ã€åé€€æ“ä½œ æ¯ä¸ªæ ‡ç­¾é¡µçš„åˆ›å»ºä¸é”€æ¯ å°†æ¸²æŸ“è¿›ç¨‹æ‰§è¡Œåç”Ÿæˆçš„ä½å›¾ï¼ˆbitmapï¼‰ç»˜åˆ¶åœ¨å¯¹åº”æ ‡ç­¾é¡µä¸Šï¼Œå‘ˆç°ç»™ç”¨æˆ· ä¹¦ç­¾ã€ä¸‹è½½ç­‰åŠŸèƒ½çš„ç®¡ç† 2. æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ é¡µé¢æ¸²æŸ“ è„šæœ¬æ‰§è¡Œï¼ˆäº‹ä»¶ã€taskï¼‰ 3. GPUè¿›ç¨‹ï¼šç”¨äº3Dç»˜åˆ¶ç­‰4. ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šä½¿ç”¨æ’ä»¶æ—¶åˆ›å»ºä¸»è¦æ¥è¯´ä¸‹æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯å½“å‰æ ‡ç­¾çš„æ§åˆ¶è€…ã€‚js ä»£ç çš„æ‰§è¡Œã€äº‹ä»¶çš„è§¦å‘ã€é¡µé¢çš„å±•ç¤ºç­‰éƒ½ç”±å®ƒè´Ÿè´£ã€‚é‚£ä¹ˆè¿™ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶å¹²è¿™ä¹ˆå¤šäº‹æƒ…å—ï¼Ÿå®ƒä¸€ä¸ªå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªäººæ¥åšå°±ä¼šæµªè´¹èµ„æºè€Œä¸”ä¸€æ—¦æ‰§è¡Œè„šæœ¬æ–‡ä»¶åä¼šä¸æ–­é˜»å¡é¡µé¢æ‰§è¡Œã€‚è‡³æ­¤ï¼Œå¼•å…¥äº†çº¿ç¨‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 3ã€Javascript çš„å•çº¿ç¨‹åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­åˆ’åˆ†äº†å¾ˆå¤šä¸ªçº¿ç¨‹ï¼Œè¿™é‡Œä»‹ç»ä¸€äº›å¸¸é©»çº¿ç¨‹ï¼š 1. JS çº¿ç¨‹ï¼ˆå¼•æ“çº¿ç¨‹ï¼Œå³å¸¸è¯´çš„é‚£ä¸ªjså•çº¿ç¨‹ï¼‰ è¿è¡Œç¯å¢ƒï¼ˆv8ï¼‰ï¼Œè´Ÿè´£å¤„ç† js è„šæœ¬ æ¯ä¸ªæ ‡ç­¾é¡µåªæœ‰ä¸€ä¸ª js çº¿ç¨‹åœ¨æ‰§è¡Œä»£ç  js çº¿ç¨‹ä¸ Gui æ¸²æŸ“çº¿ç¨‹äº’æ–¥ï¼Œjs æ‰§è¡Œæ—¶é—´è¿‡é•¿ä¼šå¯¼è‡´é¡µé¢æ¸²æŸ“çš„é˜»å¡ï¼ˆäº’æ–¥åŸå› ä¸‹é¢é˜è¿° 2. GUI æ¸²æŸ“çº¿ç¨‹ è´Ÿè´£æ¸²æŸ“é¡µé¢ï¼ˆæ„å»ºdom æ ‘ &amp; cssparser æ ‘ &amp; renderobject æ ‘ï¼‰ å½“é¡µé¢å‡ºç°é‡ç»˜æˆ–å›æµï¼ˆrepaint/reflowï¼‰æ—¶ï¼Œä¼šè°ƒç”¨è¯¥çº¿ç¨‹ ä¸ js çº¿ç¨‹äº’æ–¥ 3. äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­ç­‰å¾… js çº¿ç¨‹å¤„ç†ã€‚ï¼ˆå¼‚æ­¥é˜Ÿåˆ—ä¸‹é¢ä¼šè§£é‡Šï¼‰4. å®šæ—¶å™¨è§¦å‘çº¿ç¨‹ å®šæ—¶å™¨å¹¶ä¸æ˜¯åœ¨æŸæ®µæ—¶é—´åæ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æŸæ—¶é—´åè¢«æ·»åŠ è‡³å¼‚æ­¥é˜Ÿåˆ—ï¼Œç­‰ js çº¿ç¨‹ç©ºé—²åæ‰§è¡Œ W3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚setTimeoutä¸­ä½äº4msçš„æ—¶é—´é—´éš”ç®—ä¸º4ms 5. http è¯·æ±‚çº¿ç¨‹ï¼šè¯·æ±‚æˆåŠŸåä¼šæŠŠå›è°ƒæ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ä¸­ã€‚6. å¤‡æ³¨ï¼šä¸Šè¿°æ‰§è¡Œç¯å¢ƒæ˜¯åœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒæ¢ä¸º node çš„è¯ï¼Œè¿˜æœ‰ I/O çº¿ç¨‹ä¸ setImmediate3ã€ä¸ºä»€ä¹ˆè¯´ JS çº¿ç¨‹ä¸ GUI æ¸²æŸ“çº¿ç¨‹äº’æ–¥ï¼ˆjs ä»£ç ä¼šé˜»å¡æ¸²æŸ“ï¼‰ï¼ŸGUI æ¸²æŸ“çº¿ç¨‹ç¬¬ä¸€ä¸ªæ„å»ºçš„æ˜¯ dom æ ‘ï¼Œjs ä»£ç ä¹Ÿæœ‰å¯èƒ½ä¼šä¿®æ”¹ dom ç»“æ„ï¼Œä¸€æ—¦ä¿®æ”¹å°±ä¼šå¼•èµ· é‡ç»˜æˆ–å›æµï¼Œè¿™å°±ä¼šå¯¼è‡´ GUI çº¿ç¨‹çš„å†æ¬¡ä»å¤´å¼€å§‹ã€‚ä¸ºäº†é¿å…è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿæ‰€ä»¥é‡‡ç”¨äº†è¿™ç§äº’æ–¥çš„ç­–ç•¥ã€‚ä¿©è€…å¹¶ä¸èƒ½åœ¨åŒä¸€æ—¶é—´è¿›è¡Œã€‚ 4ã€å¼‚æ­¥çš„å®ç°æ–¹æ¡ˆ - event loopé’ˆå¯¹äº js å¼•æ“å•çº¿ç¨‹è¿™ç§æƒ…å†µï¼Œä¸ºäº†ä¸è®©ç¨‹åºï¼ˆè¢« http è¯·æ±‚ã€å®šæ—¶å™¨ç­‰ï¼‰é˜»å¡ï¼Œæ‰€ä»¥æœ‰äº†å¼‚æ­¥çš„æ¦‚å¿µã€‚ä½†æ˜¯åœ¨ç°ä»£ web ç¨‹åºå¼€å‘ä¸­ï¼Œä»£ç é‡è¶Šæ¥è¶Šå¤§ã€‚ä¸ºäº†èƒ½è®©è¶Šæ¥è¶Šå¤šçš„å®šæ—¶å™¨ã€äº‹ä»¶ã€è¯·æ±‚æœ‰åºä¸”è§„èŒƒçš„æ‰§è¡Œï¼Œevent loop æ–¹æ¡ˆå‡ºç°äº†ã€‚ 123456789101112131415console.log('1');setTimeout(function() &#123; console.log('2');&#125;, 0);console.log('3');Promise.resolve().then(function() &#123; console.log('4');&#125;).then(function() &#123; console.log('5');&#125;);console.log('6'); ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼š1 3 6 4 5 2 é¦–å…ˆä»‹ç» task &amp; microtaskï¼š task ä¸»è¦åŒ…æ‹¬ï¼šsetTimeoutã€setIntervalã€setImmediateã€I/Oã€UIäº¤äº’äº‹ä»¶ microtask ä¸»è¦åŒ…æ‹¬ï¼šPromiseã€process.nextTickã€MutationObserverï¼ˆåœ¨nodeä¸­ process.nextTick çš„ä¼˜å…ˆçº§é«˜äº promiseï¼‰ task &amp; microtask åœ¨å½“å‰æ ‡ç­¾é¡µä¸­æ‹¥æœ‰ä¿©ä¸ªé˜Ÿåˆ—æ¥åˆ†åˆ«å­˜å‚¨ task &amp; microtaské™¤äº† js &amp; gui çº¿ç¨‹ï¼Œå…¶ä»–æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶éƒ½ä¼šæŒ‰ç…§ taskéƒ½æœ‰ä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—æ¥æ§åˆ¶é¡ºåºã€‚å¦‚ä¸‹å›¾ Event Loop è¿‡ç¨‹å¦‚ä¸‹ï¼š æ•´ä¸ªscriptä»£ç ä½œä¸º task æ‰§è¡Œæ—¶å…ˆåˆ¤æ–­æ˜¯åŒæ­¥ä»»åŠ¡è¿˜æ˜¯å¼‚æ­¥ä»»åŠ¡ åŒæ­¥ä»»åŠ¡ä¾æ¬¡è¿›å…¥ js çº¿ç¨‹ï¼Œä¾æ¬¡æ‰§è¡Œ å¼‚æ­¥ä»»åŠ¡å…ˆåœ¨ table ä¸­æ³¨å†Œï¼Œç„¶åå½“ä»»åŠ¡å®Œæˆæ—¶æŒ‰ç…§ task/microtask åŒºåˆ†å¼€æ¥ï¼Œä¾æ¬¡è¿›å…¥ä¸åŒçš„å¼‚æ­¥é˜Ÿåˆ— js çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼ˆæ‰§è¡Œæ ˆä¸ºç©ºï¼‰å…ˆè¯»å– microtask çš„å¼‚æ­¥é˜Ÿåˆ—ï¼Œå…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼ˆé˜Ÿåˆ—ä¸ºç©ºåï¼‰ï¼Œå†å»è¯»å– task çš„å¼‚æ­¥é˜Ÿåˆ—ï¼Œtask å¼‚æ­¥é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡è‹¥åŒ…å« microtask åˆ™å†æ¬¡å»è¯»å– microtask å¼‚æ­¥é˜Ÿåˆ—ã€‚ ä¸Šè¿°è¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œç›´è‡³ task å¼‚æ­¥é˜Ÿåˆ—ä¸ºç©ºã€‚æ•´ä¸ªè¿‡ç¨‹å³ä¸º Event Loopã€‚ è¿˜æ˜¯ç›´æ¥æ¥çœ‹ä»£ç ï¼š 123456789101112131415161718192021222324252627console.log('1');setTimeout(function() &#123; console.log('2'); new Promise(function(resolve) &#123; console.log('4'); resolve(); &#125;).then(function() &#123; console.log('5') &#125;)&#125;)new Promise(function(resolve) &#123; console.log('7'); resolve();&#125;).then(function() &#123; console.log('8')&#125;)setTimeout(function() &#123; console.log('9'); new Promise(function(resolve) &#123; console.log('11'); resolve(); &#125;).then(function() &#123; console.log('12') &#125;)&#125;) è¯¦ç»†è¿‡ç¨‹è¯·å‚è€ƒï¼š Event Loopçš„è§„èŒƒå’Œå®ç° è¾“å‡ºï¼š1 7 8 2 4 5 9 11 12 é‚£å¦‚æœæ‰§è¡Œç¯å¢ƒåˆ‡æ¢ä¸º nodeï¼Œnode çš„ Event loopçš„å®ç°ä¸æµè§ˆå™¨ç¨æœ‰å·®å¼‚ã€‚å…·ä½“å¦‚ä¸‹ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼š expired timers and intervals queue è¿™ä¸ªå¼‚æ­¥é˜Ÿåˆ—ä¸“é—¨æ¥å­˜å‚¨æ‰€æœ‰çš„ setTimeout/setInterval immediates queue è¿™ä¸ªå¼‚æ­¥é˜Ÿåˆ—ä¸“é—¨æ¥å­˜å‚¨æ‰€æœ‰çš„ setImmediate next tick queue ä¸“é—¨æ¥å­˜å‚¨æ‰€æœ‰çš„ process.nextTick node æ¸…ç©º queue æ—¶ä¼šæ‰§è¡Œæ‰€æœ‰ taskï¼ˆä¸è®ºæ—¶ task è¿˜æ˜¯ microtaskï¼‰ é‚£ä¹ˆä»¥ä¸‹ä»£ç çš„ç»“æœå‘¢ï¼Ÿ 1234567891011121314151617181920212223242526272829303132333435363738console.log(1)setTimeout(() =&gt; &#123; console.log(2) new Promise(resolve =&gt; &#123; console.log(4) resolve() &#125;).then(() =&gt; &#123; console.log(5) &#125;) process.nextTick(() =&gt; &#123; console.log(3) &#125;)&#125;)new Promise(resolve =&gt; &#123; console.log(7) resolve()&#125;).then(() =&gt; &#123; console.log(8)&#125;)process.nextTick(() =&gt; &#123; console.log(6)&#125;)setTimeout(() =&gt; &#123; console.log(9) process.nextTick(() =&gt; &#123; console.log(10) &#125;) new Promise(resolve =&gt; &#123; console.log(11) resolve() &#125;).then(() =&gt; &#123; console.log(12) &#125;)&#125;) js æ‰§è¡Œæ ˆä¸ºç©ºï¼Œmicrotask queue ä¸ºç©ºæ—¶ï¼Œå»æ£€æŸ¥ task queueï¼Œå‘ç°ä¿©ä¸ª settimeout è¿™æ—¶ä¾æ¬¡æ‰§è¡Œã€‚è¿™é‡Œä¸æµè§ˆå™¨ç¯å¢ƒä¸åŒï¼Œæµè§ˆå™¨ç¯å¢ƒæ˜¯ä» task queue è¯»å‡ºä¸€ä¸ª task å…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œåå»æ£€æŸ¥ microtask queueï¼Œè€Œ node ä¸­æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå®Œ task queueï¼Œå†å»æ£€æŸ¥ micrtask queueï¼ˆæ¯”å¦‚ process.nextTickã€promise ç­‰ï¼‰ è¾“å‡ºï¼š1 7 6 8 2 4 9 11 3 10 5 12 åˆ†æè¿‡ç¨‹è¯·å‚è€ƒï¼š Event Loopçš„è§„èŒƒå’Œå®ç° 5.æ€»ç»“ js æ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ event loop æ˜¯ js çš„æ‰§è¡Œæœºåˆ¶ å‚è€ƒèµ„æ–™ï¼š Tasks, microtasks, queues and schedules What you should know to really understand the Node.js Event Loop Timers, Immediates and Process.nextTick","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"EventLoop","slug":"EventLoop","permalink":"https://i7eo.com/tags/EventLoop/"}]},{"title":"HTTPç¬”è®°(ä¸‹)","slug":"HTTP1-02","date":"2018-11-06T14:48:44.000Z","updated":"2019-01-13T08:15:50.703Z","comments":true,"path":"2018/11/06/HTTP1-02.html","link":"","permalink":"https://i7eo.com/2018/11/06/HTTP1-02.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è·¨åŸŸã€ç¼“å­˜è¿™äº›éƒ½æ˜¯å¼€å‘ä¸­å¸¸å¸¸é‡åˆ°çš„ï¼Œåšäº›ç¬”è®°ä¾›æ—¥åæŸ¥é˜…ã€‚ CORSï¼ˆCross-Origin Resource Sharingï¼‰è·¨æºèµ„æºåˆ†äº«åŒæºç­–ç•¥åŒæºç­–ç•¥ï¼ˆsame-origin policyï¼‰æ˜¯æµè§ˆå™¨ä¿éšœå®‰å…¨çš„ä¸€ç§æ–¹æ³•ã€‚ä¸»è¦æŒ‡çš„æ˜¯åœ¨åŒåè®®ï¼ŒåŒåŸŸåï¼ŒåŒç«¯å£ä¸‹æ‰èƒ½è®¿é—®èµ„æºã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·é™åˆ¶ï¼Ÿå‡è®¾æŸç”¨æˆ·ç™»é™†äº†è‡ªå·±çš„ç½‘ä¸Šç½‘ä¸Šé“¶è¡Œï¼Œæ¥ç€å»è®¿é—®äº†å…¶ä»–ç½‘ç«™ï¼Œå¦‚æœæ²¡æœ‰åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œé‚£ä¹ˆå…¶ä»–ç½‘ç«™å°±å¯ä»¥è®¿é—®é“¶è¡Œç½‘ç«™çš„cookieï¼Œè€Œcookieä¸€èˆ¬å­˜æ”¾ç€ä¸ç”¨æˆ·ç›¸å…³çš„æŸäº›ä¿¡æ¯ï¼Œè¿™æ ·ç”¨æˆ·çš„ä¿¡æ¯å°±ä¼šè¢«æ³„æ¼æˆ–è€…è¢«å†’åé¡¶æ›¿å»è®¿é—®ç½‘ä¸Šé“¶è¡Œã€‚","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è·¨åŸŸã€ç¼“å­˜è¿™äº›éƒ½æ˜¯å¼€å‘ä¸­å¸¸å¸¸é‡åˆ°çš„ï¼Œåšäº›ç¬”è®°ä¾›æ—¥åæŸ¥é˜…ã€‚ CORSï¼ˆCross-Origin Resource Sharingï¼‰è·¨æºèµ„æºåˆ†äº«åŒæºç­–ç•¥åŒæºç­–ç•¥ï¼ˆsame-origin policyï¼‰æ˜¯æµè§ˆå™¨ä¿éšœå®‰å…¨çš„ä¸€ç§æ–¹æ³•ã€‚ä¸»è¦æŒ‡çš„æ˜¯åœ¨åŒåè®®ï¼ŒåŒåŸŸåï¼ŒåŒç«¯å£ä¸‹æ‰èƒ½è®¿é—®èµ„æºã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·é™åˆ¶ï¼Ÿå‡è®¾æŸç”¨æˆ·ç™»é™†äº†è‡ªå·±çš„ç½‘ä¸Šç½‘ä¸Šé“¶è¡Œï¼Œæ¥ç€å»è®¿é—®äº†å…¶ä»–ç½‘ç«™ï¼Œå¦‚æœæ²¡æœ‰åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œé‚£ä¹ˆå…¶ä»–ç½‘ç«™å°±å¯ä»¥è®¿é—®é“¶è¡Œç½‘ç«™çš„cookieï¼Œè€Œcookieä¸€èˆ¬å­˜æ”¾ç€ä¸ç”¨æˆ·ç›¸å…³çš„æŸäº›ä¿¡æ¯ï¼Œè¿™æ ·ç”¨æˆ·çš„ä¿¡æ¯å°±ä¼šè¢«æ³„æ¼æˆ–è€…è¢«å†’åé¡¶æ›¿å»è®¿é—®ç½‘ä¸Šé“¶è¡Œã€‚ CORS &amp; JSONPæ­£æ˜¯æºäºä¸Šè¿°çš„ç­–ç•¥ï¼Œå¯¼è‡´åœ¨å¼€å‘ä¸­å‡ºç°è·¨åŸŸçš„é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•è·¨è¿‡è¿™ä¸ªé™åˆ¶å‘¢ï¼Ÿå¸¸è§çš„æœ‰ï¼š cors jsonp websocket postMessage iframe â€¦ å…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šå‰ç«¯å¸¸è§è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼ˆå…¨ï¼‰è¿™é‡Œä¸»è¦è¯´ä¸€è¯´å¸¸è§çš„ cors ä¸ jsonp CROSCORS æŒ‡çš„æ˜¯è·¨æºèµ„æºåˆ†äº«ï¼Œå…·ä½“çš„å®ç°åˆ†ä¸ºä¿©ç±»ï¼š ç®€å•è¯·æ±‚ï¼ˆsimple requestï¼‰ é¢„è¯·æ±‚ï¼ˆpreflight requestï¼‰ å¯¹äºèƒ½æ»¡è¶³ä»¥ä¸‹ä¿©å¤§æ¡ä»¶çš„å³ä¸ºç®€å•è¯·æ±‚ï¼š è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§ä¹‹ä¸€ï¼š GET HEAD POST http çš„å¤´ä¿¡æ¯ä¸èƒ½è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š Accept Accept - Language Content - Language Content - type text/plain multipart/form-data application/x-www-form-urlencoded Viewport-Width DPR Downlink Save-Data Width è€Œä¸æ»¡è¶³å¦‚ä¸Šæ¡ä»¶çš„å³ä¸ºé¢„è¯·æ±‚ã€‚ å‡è®¾ç°åœ¨å¼€å¯äº†ç«¯å£8888ã€8887 ä¿©ä¸ª node æœåŠ¡ï¼Œå½“8888ä¸Šçš„é¡µé¢è¯·æ±‚8887çš„æ—¶å€™ï¼Œè¯·æ±‚å…¶å®æ˜¯å·²ç»å‘é€åˆ°äº†8887ã€‚è¯·æ±‚å¤´ä¸­å¤šå‡ºäº† origin å­—æ®µï¼Œä½†æ˜¯æ­¤æ—¶æœåŠ¡å™¨ä¸­å¹¶æ²¡æœ‰è®¾ç½®ç›¸åº”çš„ Access-Control-Allow-Origin æ‰€ä»¥å½“è¯·æ±‚ä»8887è¿”å›ç»™æµè§ˆå™¨åï¼Œæµè§ˆå™¨é˜»æŒ¡äº†è¯¥è¯·æ±‚: è§£å†³åŠæ³•å°±æ˜¯åœ¨8887ä¸Šçš„å“åº”å¤´ä¸­æ·»åŠ  &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39; è¿™é‡Œçš„ * è¡¨ç¤ºé€šé…ç¬¦ï¼Œå½“ç„¶ä½ è¿˜å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®æˆå•ä¸€çš„åœ°å€ï¼Œæ¯”å¦‚ï¼š&#39;Access-Control-Allow-Origin&#39;: &#39;http://127.0.0.1:8888&#39; ã€‚ å½“ä½ åœ¨è¯·æ±‚å¤´ä¸­è®¾ç½®äº† PUT æˆ–è€… è‡ªå®šä¹‰ä¿¡æ¯ï¼ˆtoken ç­‰ï¼‰è¿™ä¸ªæ—¶å€™éœ€è¦åœ¨å“åº”å¤´ä¸Šæ·»åŠ ï¼š&#39;Access-Control-Allow-Methods&#39;: &#39;PUT, Delete&#39;, &#39;Access-Control-Allow-Headers&#39;: &#39;Token&#39;,è¿™æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨æ”¯æŒå¯¹åº”çš„ä¿¡æ¯ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨8888å‘é€è¯·æ±‚å‰ä¼šå¤šå‘é€ä¸€æ¡æ–¹æ³•ä¸º OPTIONSçš„è¯·æ±‚æ¥è¿›è¡Œé¢„è¯·æ±‚ã€‚è¿˜å¯ä»¥è®¾ç½®æ—¶é—´ä½¿æ¥ä¸‹æ¥çš„è¯·æ±‚ä¸­ä¸å¸¦æœ‰è¿™æ¡é¢„è¯·æ±‚ï¼Œå³ï¼š&#39;Access-Control-Max-Age&#39;: &#39;1000&#39;ï¼ˆå•ä½ä¸ºç§’ï¼‰åœ¨ 1000s å†…ä¸ä¼šå†å‘é€é¢„è¯·æ±‚ã€‚ JSONPæµè§ˆå™¨å…è®¸è·¨åŸŸèµ„æºçš„åµŒå…¥ã€‚å…·ä½“å¦‚ä¸‹ï¼š &lt;script src=&quot;...&quot;&gt;&lt;/script&gt; æ ‡ç­¾åµŒå…¥è·¨åŸŸè„šæœ¬ã€‚è¯­æ³•é”™è¯¯ä¿¡æ¯åªèƒ½åœ¨åŒæºè„šæœ¬ä¸­æ•æ‰åˆ°ã€‚ &lt;link rel=&quot;stylesheet&quot; href=&quot;...&quot;&gt; æ ‡ç­¾åµŒå…¥CSSã€‚ç”±äºCSSçš„æ¾æ•£çš„è¯­æ³•è§„åˆ™ï¼ŒCSSçš„è·¨åŸŸéœ€è¦ä¸€ä¸ªè®¾ç½®æ­£ç¡®çš„Content-Type æ¶ˆæ¯å¤´ &lt;img&gt;åµŒå…¥å›¾ç‰‡ã€‚æ”¯æŒçš„å›¾ç‰‡æ ¼å¼åŒ…æ‹¬PNG,JPEG,GIF,BMP,SVGâ€¦ &lt;video&gt;å’Œ &lt;audio&gt;åµŒå…¥å¤šåª’ä½“èµ„æºã€‚ &lt;frame&gt; å’Œ &lt;iframe&gt; @font-face å¼•å…¥çš„å­—ä½“ã€‚ä¸€äº›æµè§ˆå™¨å…è®¸è·¨åŸŸå­—ä½“ï¼ˆ cross-origin fontsï¼‰ï¼Œä¸€äº›éœ€è¦åŒæºå­—ä½“ï¼ˆsame-origin fontsï¼‰ã€‚ &lt;object&gt;, &lt;embed&gt; å’Œ &lt;applet&gt; çš„æ’ä»¶ã€‚ jsonp æ­£å¼è¿ç”¨äº†ç¬¬ä¸€æ¡è§„åˆ™,å°†æ•°æ®åˆ©ç”¨å¦‚ä¸‹å½¢å¼åŒ…è£…åœ¨è¯·æ±‚çš„jsæ–‡ä»¶ä¸­ï¼šcors({}) ç„¶ååœ¨å‘å‡ºè¯·æ±‚çš„åœ°å€åé¢åŠ ä¸Š callback=cors å³å¯é€šè¿‡ cors è·å¾—æ•°æ®ã€‚ ç¼“å­˜æµè§ˆå™¨çš„ç¼“å­˜æœ‰ä¿©ç§ï¼Œå³å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜ã€‚å…·ä½“é€‰ç”¨å“ªä¸€ç§ç”± header çš„è®¾ç½®æ¥å†³å®šã€‚ å¼ºç¼“å­˜å¼ºç¼“å­˜æœ‰æµè§ˆå™¨è®¾ç½®åœ¨å†…å­˜ä¸­ï¼Œç›´æ¥ä»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸å»æœåŠ¡å™¨æ‹‰å–æ•°æ®ã€‚ å¼ºç¼“å­˜çš„å…·ä½“è®¾ç½®æœ‰ä¿©ç§ï¼š http 1.0 ä¸­è®¾ç½® expiresã€‚å¦‚ï¼š&#39;expires&#39;: &#39;Mon, 10 Jun 2015 21:31:12 GMT&#39; å‘é€è¯·æ±‚çš„æ—¶é—´åœ¨æ­¤ä¹‹å‰ï¼Œç¼“å­˜å‡æœ‰æ•ˆã€‚ http 1.1 ä¸­è®¾ç½® cache-control ã€‚å¦‚ï¼š&#39;cache-control&#39;: &#39;max-age=20&#39;ï¼ˆå•ä½ä¸ºç§’ï¼‰è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€èˆ¬ä½¿ç”¨ cache-control ï¼ˆå®¢æˆ·ç«¯ç¼“å­˜ï¼‰æ—¶ï¼Œè®¾ç½®çš„æ—¶é—´éƒ½è¾ƒé•¿ã€‚æ­¤æ—¶å¦‚æœä¿®æ”¹jsæ–‡ä»¶çš„è¯ï¼Œæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚è§£å†³æ–¹æ³•å°±æ˜¯åœ¨é¡¹ç›®æ„å»ºæ–‡ä»¶ä¸­è·Ÿjsæ–‡ä»¶çš„å†…å®¹ç”Ÿæˆhashå€¼ï¼Œè¿™æ ·å¼ºç¼“å­˜å°±ä¼šåŠæ—¶æ›´æ–°ã€‚è¿˜å¯ä»¥è®¾ç½®å…¶ä»–å±æ€§ï¼Œå¦‚ä¸‹ï¼š å¯ç¼“å­˜æ€§ï¼š public é™¤äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨ä¹Ÿå¯ä»¥ç¼“å­˜ private åªæœ‰å‘èµ·è¯·æ±‚çš„æµè§ˆå™¨æ‰å¯ä»¥ç¼“å­˜ no-cache éœ€è¦ä¸æœåŠ¡å™¨è¿›è¡Œåå•†ï¼Œæ˜¯å¦èƒ½ä½¿ç”¨æœ¬åœ°ç¼“å­˜ no-store æœ¬åœ°ä¸ç¼“å­˜æœåŠ¡å™¨å‡ä¸èƒ½ä½¿ç”¨ç¼“å­˜ åˆ°æœŸ max-age s-maxage åªæœ‰åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ç”Ÿæ•ˆ max-stale æŒ‡å‘èµ·è¯·æ±‚æ–¹ç¼“å­˜è¿‡æœŸåè¿˜å¯ä»¥ä½¿ç”¨è¿‡æœŸç¼“å­˜çš„æ—¶é—´ é‡æ–°éªŒè¯ must-revalidate åœ¨max-ageè¿‡æœŸåï¼Œé‡æ–°å‘é€è¯·æ±‚éªŒè¯æ˜¯å¦çœŸæ­£è¿‡æœŸ proxy-revalidate åœ¨max-ageè¿‡æœŸåï¼Œé‡æ–°å‘é€è¯·æ±‚è‡³ç¼“å­˜æœåŠ¡å™¨éªŒè¯æ˜¯å¦çœŸæ­£è¿‡æœŸ å…¶ä»– no-transform å‘Šè¯‰proxyä¸è¦å‹ç¼©ç¼“å­˜ ä¾‹å­ï¼š&#39;cache-control&#39;: &#39;public, max-age=200, no-cache&#39; åå•†ç¼“å­˜Last-Modified/Etag æ˜¯åå•†ç¼“å­˜çš„ä¿©ç§æ–¹å¼ï¼Œéƒ½æ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„å“åº”å¤´ä¸­è®¾ç½®ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼š ä¸€äº›æ–‡ä»¶å¯èƒ½ä¼šå®šæ—¶çš„æ›´æ–°ï¼Œä½†æ˜¯å†…å®¹æœªè¢«æ›´æ”¹ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœä½¿ç”¨ Last-Modified çš„è¯å°±ä¼šè¢«è®¤ä¸ºæ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œè€Œ etag åˆ™ä¸ä¼šï¼Œå› ä¸º etag æ˜¯æœåŠ¡å™¨ä¸Šæ¯ä¸ªèµ„æºçš„å”¯ä¸€æ ‡è¯†ã€‚å¯ä»¥æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆ hash æ¥è®¾ç½® etagã€‚ å¯¹äºæŸäº›ä¿®æ”¹é¢‘ç¹çš„æ–‡ä»¶æ¥è¯´ï¼Œé¢‘ç‡åœ¨ç§’ä»¥å†…ã€‚Last-Modified åªèƒ½ç²¾ç¡®åˆ°ç§’ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µæ— æ³•åˆ¤æ–­ã€‚ è¿™ä¿©è€…çš„å€¼å¯ä»¥éšä¾¿è®¾ç½®ï¼Œæ²¡æœ‰å…·ä½“çš„è§„å®šã€‚ Last-Modified/If-Modified-Sinceå…·ä½“è¿‡ç¨‹ï¼š åœ¨æœåŠ¡ç«¯å“åº”å¤´ä¸Šè®¾ç½® &#39;Last-Modified&#39;: &#39;&#39; è¯·æ±‚å†æ¬¡å‘é€åˆ°æœåŠ¡å™¨åï¼Œè¯·æ±‚å¤´ä¸­ä¼šå‡ºç° &#39;If-Modified-Since&#39;: &#39;&#39; (è¿™ä¸ªå€¼ä¸ä¸Šè¿°è®¾ç½®çš„å€¼ç›¸åŒ) å†æ¬¡å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨åä¼šåˆ¤æ–­ä¿©è€…çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–åˆ™è¿”å›304 Not Modifiedï¼Œä½†æ˜¯ä¸ä¼šè¿”å›èµ„æºå†…å®¹ï¼›å¦‚æœæœ‰å˜åŒ–ï¼Œå°±æ­£å¸¸è¿”å›èµ„æºå†…å®¹ã€‚å½“æœåŠ¡å™¨è¿”å›304 Not Modifiedçš„å“åº”æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šä»å†…å­˜ä¸­è¯»å–ç¼“å­˜ã€‚è¿™ä¸ªåŠ¨ä½œå°±æ˜¯åå•†åçš„ç»“æœã€‚ å¦‚æœç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œå°±ç›´æ¥ä»æœåŠ¡å™¨åŠ è½½æ•°æ®ã€‚æ­¤æ—¶ä¼šæ›´æ–°å“åº”å¤´ä¸­çš„ Last-Modifiedçš„ä¿¡æ¯ï¼Œä¾›ä¸‹æ¬¡å¯¹æ¯”ä½¿ç”¨ã€‚ Etag/If-None-Matchetag å…·ä½“è¿‡ç¨‹ä¸ä¸Šç›¸åŒã€‚ æ€»ç»“è™½è¯´æ²¡æœ‰å…·ä½“è§„å®šè¦è®¾ç½®çš„å€¼ï¼Œä½†æ˜¯ Last-Modified ä¸€èˆ¬è®¾ç½®ä¸ºæ—¶é—´ï¼Œå³æ–‡ä»¶æœ€åä¸€æ¬¡çš„æ›´æ–°æ—¶é—´ã€‚è€Œ Etag åˆ™è®¾ç½®ä¸ºæ ¹æ®å†…å®¹ç”Ÿæˆçš„ hash å€¼ã€‚ å‚è€ƒæ–‡ç« ï¼š HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰ Fetch Standard","categories":[{"name":"HTTP","slug":"HTTP","permalink":"https://i7eo.com/categories/HTTP/"}],"tags":[{"name":"CORS","slug":"CORS","permalink":"https://i7eo.com/tags/CORS/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"https://i7eo.com/tags/ç¼“å­˜/"}]},{"title":"HTTPç¬”è®°(ä¸Š)","slug":"HTTP1-0","date":"2018-11-03T02:02:35.000Z","updated":"2019-01-06T15:45:24.533Z","comments":true,"path":"2018/11/03/HTTP1-0.html","link":"","permalink":"https://i7eo.com/2018/11/03/HTTP1-0.html","excerpt":"HTTP åŸºç¡€ç½‘ç»œé—´é€šä¿¡çš„å¤§ä½“æµç¨‹ åç§° æ¦‚å¿µ å¸¸ç”¨åè®® åº”ç”¨å±‚ ä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡ HTTP/FTP/SMTP è¡¨ç¤ºå±‚ å®šä¹‰æ•°æ®æ ¼å¼åŠåŠ å¯† ä¼šè¯å±‚ å®šä¹‰äº†å¦‚ä½•å¼€å§‹ã€æ§åˆ¶å’Œç»“æŸä¸€ä¸ªä¼šè¯ SSL ä¼ è¾“å±‚ å‘ç”¨æˆ·æä¾›ç«¯åˆ°ç«¯çš„æœåŠ¡ TCP/UDP ç½‘ç»œå±‚ æ•°æ®åœ¨ä¿©ä¸ªæœºå™¨é—´åˆ›å»ºé€»è¾‘é“¾è·¯ IP(IPV4/IPV6)ã€ARP æ•°æ®é“¾è·¯å±‚ é€šä¿¡å®ä½“é—´å»ºç«‹æ•°æ®é“¾è·¯è¿æ¥ ç‰©ç†å±‚ å®šä¹‰ç‰©ç†è®¾å¤‡é—´å¦‚ä½•ä¼ è¾“æ¯”ç‰¹æµçš„è§„èŒƒï¼ˆç½‘çº¿ã€å…‰ç¼†ç­‰ç¡¬ä»¶ï¼‰ osi æ¨¡å‹è¾ƒä¸ºå¤æ‚ï¼Œä¸€èˆ¬å¸¸è¯´çš„æ˜¯äº”å±‚æ¨¡å‹ï¼š ç‰©ç†å±‚ -&gt; æ•°æ®é“¾è·¯å±‚ -&gt; ç½‘ç»œå±‚ -&gt; ä¼ è¾“å±‚ -&gt; åº”ç”¨å±‚","text":"HTTP åŸºç¡€ç½‘ç»œé—´é€šä¿¡çš„å¤§ä½“æµç¨‹ åç§° æ¦‚å¿µ å¸¸ç”¨åè®® åº”ç”¨å±‚ ä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡ HTTP/FTP/SMTP è¡¨ç¤ºå±‚ å®šä¹‰æ•°æ®æ ¼å¼åŠåŠ å¯† ä¼šè¯å±‚ å®šä¹‰äº†å¦‚ä½•å¼€å§‹ã€æ§åˆ¶å’Œç»“æŸä¸€ä¸ªä¼šè¯ SSL ä¼ è¾“å±‚ å‘ç”¨æˆ·æä¾›ç«¯åˆ°ç«¯çš„æœåŠ¡ TCP/UDP ç½‘ç»œå±‚ æ•°æ®åœ¨ä¿©ä¸ªæœºå™¨é—´åˆ›å»ºé€»è¾‘é“¾è·¯ IP(IPV4/IPV6)ã€ARP æ•°æ®é“¾è·¯å±‚ é€šä¿¡å®ä½“é—´å»ºç«‹æ•°æ®é“¾è·¯è¿æ¥ ç‰©ç†å±‚ å®šä¹‰ç‰©ç†è®¾å¤‡é—´å¦‚ä½•ä¼ è¾“æ¯”ç‰¹æµçš„è§„èŒƒï¼ˆç½‘çº¿ã€å…‰ç¼†ç­‰ç¡¬ä»¶ï¼‰ osi æ¨¡å‹è¾ƒä¸ºå¤æ‚ï¼Œä¸€èˆ¬å¸¸è¯´çš„æ˜¯äº”å±‚æ¨¡å‹ï¼š ç‰©ç†å±‚ -&gt; æ•°æ®é“¾è·¯å±‚ -&gt; ç½‘ç»œå±‚ -&gt; ä¼ è¾“å±‚ -&gt; åº”ç”¨å±‚ ä¸‹é¢è¿™å¼ å›¾ç”¨æ¥ç®€å•æè¿°ä¿©å°é€šè¿‡è·¯ç”±å™¨è”ç³»èµ·æ¥çš„ä¸»æœºçš„æ•°æ®æ˜¯å¦‚ä½•ä¼ è¾“çš„ã€‚ å‡è®¾ä¸»æœº1çš„ç¨‹åºap1å‘ä¸»æœº2çš„ç¨‹åºap2ä¼ é€æ•°æ®ã€‚ap1å…ˆå°†æ•°æ®äº¤ç»™ç¬¬5å±‚ï¼ˆåº”ç”¨å±‚ï¼‰ã€‚ç¬¬5å±‚åŠ ä¸Šå¿…è¦çš„æ§åˆ¶ä¿¡æ¯h5ä¼ é€’ç»™ä¸‹ä¸€å±‚ï¼Œä»¥æ­¤ç±»æ¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æ•°æ®åˆ°è¾¾ç¬¬2å±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰åï¼Œæ§åˆ¶ä¿¡æ¯åˆ†æˆä¿©éƒ¨åˆ†ï¼Œåˆ†åˆ«åŠ åˆ°æœ¬å±‚æ•°æ®å•å…ƒçš„é¦–éƒ¨ï¼ˆh2ï¼‰å’Œå°¾éƒ¨ï¼ˆt2ï¼‰ï¼›è€Œç¬¬1å±‚ç”±äºæ˜¯æ¯”ç‰¹æµä¼ é€å³0101â€¦æ‰€ä»¥ä¸å¿…åŠ ä¸Šæ§åˆ¶ä¿¡æ¯ï¼Œä½†æ˜¯ç‰©ç†å±‚æ˜¯ä»é¦–éƒ¨å¼€å§‹ä¼ é€’æ•°æ®ã€‚ è¿™ä¸€ä¸²æ¯”ç‰¹æµç¦»å¼€ä¸»æœº1åé€šè¿‡ç‰©ç†åª’ä»‹ä¼ é€’åˆ°è·¯ç”±å™¨ï¼Œä»è·¯ç”±å™¨çš„ç¬¬1å±‚ï¼ˆç‰©ç†å±‚ï¼‰ä¾æ¬¡ä¸Šå‡è‡³ç¬¬3å±‚ï¼ˆç½‘ç»œå±‚ï¼‰æ¯ä¸€å±‚éƒ½ä¼šå¯¹æ§åˆ¶ä¿¡æ¯è¿›è¡Œæ“ä½œï¼Œæ“ä½œåå°†æ§åˆ¶ä¿¡æ¯å‰¥å»å°†å‰©ä¸‹çš„æ•°æ®å‘ä¸Šä¼ é€ï¼Œå½“åˆ°è¾¾ç¬¬3å±‚åå°±ä¼šæ ¹æ®é¦–éƒ¨çš„ç›®çš„åœ°å€æŸ¥æ‰¾è·¯ç”±å™¨ä¸­çš„è·¯ç”±è¡¨ï¼Œæ‰¾å‡ºè½¬å‘åˆ†ç»„çš„æ¥å£ï¼Œç„¶åä»ç¬¬3å±‚å‘ä¸‹ä¼ é€’è‡³ç¬¬1å±‚ï¼Œè½¬ä¸ºæ¯”ç‰¹æµä¹‹åä¼ é€’ç»™ä¸»æœº2ï¼Œä¸»æœº2çš„è¿‡ç¨‹ä¸ä¸Šç±»ä¼¼ï¼Œæœ€ç»ˆç¨‹åºap2æ”¶åˆ°ä¼ è¾“çš„æ•°æ®ã€‚ åœ¨æˆ‘ä»¬å¹³æ—¶ä¸Šç½‘æµè§ˆç½‘é¡µæ—¶ï¼Œé€šå¸¸éƒ½æ˜¯æˆ‘ä»¬çš„ç”µè„‘ä¸æœåŠ¡å™¨çš„æ•°æ®äº¤äº’ï¼Œä¸­é—´è¿‡ç¨‹ä¸æ˜¯åƒä¸Šè¿°æè¿°çš„åªç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨è¿™ä¹ˆç®€å•ï¼ŒæœŸé—´ä¼šç»è¿‡dnsæœåŠ¡å™¨ã€cdnæœåŠ¡å™¨ç­‰ç­‰ã€‚è¿™é‡Œç€é‡è®°å½•å…³äº http éƒ¨åˆ†çš„çŸ¥è¯†ã€‚ HTTP ä¸åŒç‰ˆæœ¬ç‰¹ç‚¹å¯¹æ¯”HTTP/0.9 ï¼š åªæœ‰ä¸€ä¸ª GET å‘½ä»¤ æ²¡æœ‰ header ç­‰æè¿°ä¿¡æ¯ æœåŠ¡å™¨å‘é€å®Œæ¯•ï¼Œtcpè¿æ¥è¢«å…³é—­ HTTP/1.0 å¢åŠ  POST/PUT ç­‰å‘½ä»¤ å¢åŠ  header &amp; status code ä¿¡æ¯ æ”¯æŒå¤šå­—ç¬¦é›†ã€å¤šéƒ¨åˆ†å‘é€ï¼Œç¼“å­˜ç­‰ HTTP/1.1 ä½¿tcpè¿æ¥æŒä¹…åŒ– pipelineï¼ˆå®¢æˆ·ç«¯å¯ä»¥å‘é€å¤šä¸ªhttpè¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡ç«¯å¿…é¡»æŒ‰é¡ºåºè¿”å›ï¼‰ å¢åŠ hostä¸å…¶ä»–å‘½ä»¤ï¼ˆåˆ©ç”¨hostä¸­çš„ç«¯å£åˆ¤æ–­å…·ä½“å±äºnodeè¿˜æ˜¯javaç­‰ï¼‰ HTTP/2.0 æ•°æ®ä»¥äºŒè¿›åˆ¶ä¼ è¾“ï¼ˆ2.0ä¹‹å‰æ•°æ®ä¼ è¾“æ˜¯å·²å­—ç¬¦ä¸²ä¼ è¾“ï¼‰ å¯¹äºå®¢æˆ·ç«¯å‘é€çš„å¤šä¸ªhttpè¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›æ—¶ä¸ç”¨æŒ‰ç…§é¡ºåºè¿”å›ï¼Œå¯ä»¥å¹¶è¡Œè¿”å› å¤´ä¿¡æ¯å‹ç¼©ï¼Œå¢åŠ äº†æ¨é€ç­‰æé«˜æ•ˆç‡çš„åŠŸèƒ½ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š ç†è®ºä¸Šæ¥è¯´ä¸€ä¸ªtcpè¿æ¥ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªhttpè¯·æ±‚ï¼Œä½†æ˜¯ç›®å‰çš„åšæ³•æ˜¯http1.1ä¸­ä¸€ä¸ªtcpé“¾æ¥ä¸ŠåŒæ—¶æœ€å¤šåªæœ‰ä¸€ä¸ªhttpè¯·æ±‚ å¹¶å‘é‡ä¸€èˆ¬æŒ‡çš„æ˜¯tcpè¿æ¥çš„å¹¶å‘é‡ å„ä¸ªæµè§ˆå™¨å¯¹åº”çš„tcpå¹¶å‘æ•°é‡è¯¦æƒ…å¯æŸ¥çœ‹ï¼šä¸»æµæµè§ˆå™¨çš„HTTPæœ€å¤§å¹¶å‘è¿æ¥æ•° HTTP çš„ä¸‰æ¬¡æ¡æ‰‹ å…·ä½“æƒ…å†µå¦‚ä¸Šå›¾ï¼Œè¿™é‡Œçš„ syn ä»£è¡¨åŒæ­¥ä½ï¼Œseq ä»£è¡¨åºå·ï¼Œack ä»£è¡¨ç¡®è®¤å·ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å½“é¦–æ¬¡æ¡æ‰‹å‘ç”Ÿæ—¶ï¼Œå³å®¢æˆ·ç«¯è¿›å…¥ SYN-SENTçŠ¶æ€å‰ï¼Œä¸èƒ½æºå¸¦æ•°æ®ï¼Œå½“å‘ç”ŸäºŒæ¬¡æ¡æ‰‹æ—¶ï¼Œå³æœåŠ¡å™¨è¿›å…¥SYN-RECVçŠ¶æ€å‰ï¼Œä¹Ÿæ˜¯ä¸èƒ½æºå¸¦æ•°æ®çš„ï¼Œå½“å‘ç”Ÿç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶å³å®¢æˆ·ç«¯è¿›å…¥ESTAB-LISHEDçŠ¶æ€å‰ï¼Œå¯ä»¥æºå¸¦æ•°æ®ã€‚ ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿå› ä¸ºtcpè¦ä¿è¯ä¼ è¾“çš„æ•°æ®å¯é æ€§ï¼Œä½†æ˜¯ä¿¡é“ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰ä¼ è¾“æ˜¯ä¸å¯é çš„ã€‚å¦‚ä½•ä¿è¯tcpä¼ è¾“çš„æ•°æ®æ˜¯å¯é çš„ï¼Ÿåªèƒ½åœ¨tcpè¿æ¥å»ºç«‹å‰ä¿è¯é€šé“ç•…é€šã€‚å› ä¸ºåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ä¸­æœ‰ç½‘ç»œå»¶è¿Ÿã€åŒ…ä¸¢å¤±ç­‰åŸå› ï¼Œæ‰€ä»¥æ‰æœ‰äº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸‰æ¬¡æ¡æ‰‹æ˜¯ç†è®ºä¸Šçš„æœ€å°å€¼ã€‚å…·ä½“åˆ†æè¯·å‚è€ƒï¼šTCP ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–å››æ¬¡ï¼Ÿ ã€tcpå»ºç«‹è¿æ¥ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ è¡¥å……ï¼šå¥—æ¥å­—ï¼ˆsocketï¼‰å¹³å¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨è‡ªå·±ç”µè„‘æµ‹è¯•ç§»åŠ¨ç«¯é¡µé¢æˆ–è€…æ˜¯è‡ªå·±åœ¨å†™ç¨‹åºè¿æ¥æŸé¡¹æœåŠ¡æ—¶éƒ½ä¼šä½¿ç”¨ ip + ç«¯å£å· æ¥è¿æ¥ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å› ä¸ºè¿™äº›åšæ³•éƒ½ä½¿ç”¨äº†tcpè¿æ¥ï¼Œè€ŒtcpæŠŠè¿æ¥ä½œä¸ºæœ€åŸºæœ¬çš„æŠ½è±¡ã€‚åœ¨tcpçš„ä¿©ç«¯åˆ†åˆ«æœ‰ä¿©ä¸ªç«¯ç‚¹ï¼Œç«¯ç‚¹å«åšå¥—æ¥å­—ã€‚rfc 793 å®šä¹‰ï¼šç«¯å£å·æ‹¼æ¥åˆ° ip åœ°å€æ„æˆäº†å¥—æ¥å­—ã€‚å¦‚ä¸‹å›¾ï¼š åŒä¸€ä¸ªipåœ°å€å¯ä»¥æœ‰å¤šä¸ªtcpè¿æ¥ï¼Œè€ŒåŒä¸€ä¸ªç«¯å£å·ä¹Ÿå¯ä»¥å‡ºç°åœ¨å¤šä¸ªä¸åŒçš„tcpè¿æ¥ä¸­ã€‚ HTTP æŠ¥æ–‡æ ¼å¼ è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„è¯·æ±‚ä¸å“åº”æŠ¥æ–‡æ ¼å¼å›¾ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å“åº”æŠ¥æ–‡çš„é¦–éƒ¨ç»“å°¾æ˜¯ç©ºè¡Œã€‚å“åº”æŠ¥æ–‡ä¸­å…·ä½“çš„status code è¯·å‚è€ƒï¼šå¸¸è§çš„HTTPRequestçŠ¶æ€ç è¯´æ˜","categories":[{"name":"HTTP","slug":"HTTP","permalink":"https://i7eo.com/categories/HTTP/"}],"tags":[]},{"title":"CSSå…ƒç´ åµŒå¥—é—®é¢˜","slug":"CSSå…ƒç´ åµŒå¥—é—®é¢˜","date":"2018-09-05T13:30:39.000Z","updated":"2019-01-05T06:45:07.511Z","comments":true,"path":"2018/09/05/CSSå…ƒç´ åµŒå¥—é—®é¢˜.html","link":"","permalink":"https://i7eo.com/2018/09/05/CSSå…ƒç´ åµŒå¥—é—®é¢˜.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å›é¡¾äº†ä¸€ä¸‹ä¹‹å‰çš„ä»£ç ï¼Œå‘ç°ä¸€ä¸ªcssä¸­çš„å‘å³å±‚å é¡ºåºã€‚ä»€ä¹ˆå«å±‚å é¡ºåºï¼Ÿç®€å•æ¥è¯´å°±æ˜¯åœ¨å±å¹•ä¸ŠæŸä¸€ä¸ªä½ç½®å †ç§¯äº†å¾ˆå¤š div è¿™äº›å—å“ªä¸ªåœ¨ä¸Šå“ªä¸ªåœ¨ä¸‹çš„å…³ç³»å°±æ˜¯å±‚å é¡ºåºã€‚ï¼ˆä¸‹é¢ä»£ç æ¼”ç¤ºäº†ä¸‰å±‚å †å ï¼‰","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å›é¡¾äº†ä¸€ä¸‹ä¹‹å‰çš„ä»£ç ï¼Œå‘ç°ä¸€ä¸ªcssä¸­çš„å‘å³å±‚å é¡ºåºã€‚ä»€ä¹ˆå«å±‚å é¡ºåºï¼Ÿç®€å•æ¥è¯´å°±æ˜¯åœ¨å±å¹•ä¸ŠæŸä¸€ä¸ªä½ç½®å †ç§¯äº†å¾ˆå¤š div è¿™äº›å—å“ªä¸ªåœ¨ä¸Šå“ªä¸ªåœ¨ä¸‹çš„å…³ç³»å°±æ˜¯å±‚å é¡ºåºã€‚ï¼ˆä¸‹é¢ä»£ç æ¼”ç¤ºäº†ä¸‰å±‚å †å ï¼‰ 123456789101112131415161718192021222324252627282930.test2&#123; position: absolute; width: 300px; height: 260px; top: 50%; left: 50%; margin-left: -150px; margin-top: -130px; background-color: blue;&#125;.test3&#123; position: absolute; width: 200px; height: 200px; top: 50%; left: 50%; margin-left: -100px; margin-top: -100px; background-color: black;&#125;.test4&#123; position: absolute; width: 150px; height: 150px; top: 50%; left: 50%; margin-left: -75px; margin-top: -75px; background-color: gray;&#125; å¯¹åº”çš„htmlç»“æ„å¦‚ä¸‹ï¼š 12345&lt;div class=\"test2\"&gt; &lt;div class=\"test3\"&gt; &lt;div class=\"test4\"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; å¦‚å›¾æ‰€ç¤ºï¼Œéƒ½æ˜¯æ°´å¹³å‚ç›´å±…ä¸­çš„ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨å±‚å é¡ºåºã€‚æ­¤æ—¶ä¸‰è€…å‡ä¸ºç»å¯¹å®šä½ï¼Œç”±test2å¼€å§‹ä»ä¸‹åˆ°ä¸Šä¾æ¬¡æ˜¯ test2 -&gt; test3 -&gt; test4 è¿™æ ·çš„é¡ºåºã€‚test4ä½äºæœ€ä¸Šæ–¹ï¼Œæ­¤æ—¶æƒ³è®©test3ä¸test4ä½ç½®é¢ å€’ä¸”test2ä½ç½®ä¸å˜ï¼ˆç”±ä¸‹åˆ°ä¸Šçš„é¡ºåºä¸ºtest2 -&gt; test4 -&gt; test3ï¼‰ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿè‚¯å®šé¦–å…ˆæƒ³åˆ°ä½¿ç”¨ z-indexï¼š 123456789.test3 &#123; //... z-index: 3&#125;.test4 &#123; //.. z-index: 2&#125; è¿™æ ·ä¿®æ”¹ç»“æœå¹¶ä¸ä¼šæ”¹å˜ã€‚ä¸ºä»€ä¹ˆï¼Ÿæ—¢ç„¶ z-index ä¸ç”Ÿæ•ˆé‚£æˆ‘ä»¬è‚¯å®šå…ˆå»æŸ¥ z-index ã€‚ å¯¹äºä¸€ä¸ªå·²ç»å®šä½çš„å…ƒç´ ï¼ˆå³positionå±æ€§å€¼æ˜¯éstaticçš„å…ƒç´ ï¼‰ï¼Œz-index å±æ€§æŒ‡å®šï¼šå…ƒç´ åœ¨å½“å‰å †å ä¸Šä¸‹æ–‡ä¸­çš„å †å å±‚çº§ã€‚å…ƒç´ æ˜¯å¦åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°å±‚å ä¸Šä¸‹æ–‡ã€‚ MDN : z-index æ ¹æ®mdnçš„ä»‹ç»æ¥çœ‹ï¼Œæˆ‘ä»¬è®¾å®šäº†å †å å±‚çº§ï¼Œè¿™æ ·æ¥è¯´æ˜¯åº”è¯¥å¯ä»¥çš„ã€‚ä½†æ˜¯ç»“æœå´ä¸å°½äººæ„ã€‚ç•™æ„ä¸€ä¸‹å±‚å ä¸Šä¸‹æ–‡ï¼Œæ˜¯å¦è·Ÿåˆ›å»ºçš„å±‚å ä¸Šä¸‹æ–‡æœ‰å…³å‘¢ï¼Ÿå¸¸è§çš„åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contextï¼‰çš„æ–¹å¼æœ‰ï¼š z-index å€¼ä¸ä¸º â€œautoâ€çš„ ç»å¯¹/ç›¸å¯¹å®šä½ ä¸€ä¸ª z-index å€¼ä¸ä¸º â€œautoâ€çš„ flex é¡¹ç›® (flex item)ï¼Œå³ï¼šçˆ¶å…ƒç´  display: flex|inline-flex å¯èƒ½ä½ å¹¶æ²¡æœ‰æ„è¯†ï¼Œä½†ä½ ç¡®å®ä¼šå¸¸å¸¸è¿™æ ·ä¸ºhtmlæ ‡ç­¾åˆ›å»ºæ ·å¼å¹¶ä¸ºå®ƒåˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ã€‚ å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹ï¼š(mdn) ç»™ä¸€ä¸ª HTML å…ƒç´ å®šä½å’Œ z-index èµ‹å€¼åˆ›å»ºä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ï¼Œï¼ˆopacity å€¼ä¸ä¸º 1 çš„ä¹Ÿæ˜¯ç›¸åŒï¼‰ã€‚ å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åŒ…å«åœ¨å…¶ä»–å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶ä¸”ä¸€èµ·åˆ›å»ºä¸€ä¸ªæœ‰å±‚çº§çš„å±‚å ä¸Šä¸‹æ–‡ã€‚ æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å®Œå…¨ç‹¬ç«‹äºå®ƒçš„å…„å¼Ÿå…ƒç´ ï¼šå½“å¤„ç†å±‚å æ—¶åªè€ƒè™‘å­å…ƒç´ ã€‚ æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªåŒ…å«çš„ï¼šå½“å…ƒç´ çš„å†…å®¹å‘ç”Ÿå±‚å åï¼Œæ•´ä¸ªè¯¥å…ƒç´ å°†ä¼š åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¸­ æŒ‰é¡ºåºè¿›è¡Œå±‚å ã€‚ å…·ä½“çš„å±‚å å…³ç³»å¦‚ä¸‹å›¾ï¼š æ·±å…¥ç†è§£CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº å¯¹äºå½“å‰ä»£ç æ¥è¯´ï¼Œæˆ‘åˆ›å»ºäº†ä¸‰ä¸ªå±‚å ä¸Šä¸‹æ–‡å…ƒç´ å¹¶ä¸”ä¸€ä¸€åµŒå¥—ã€‚å½“æˆ‘ä»¬è®¾ç½®test3çš„z-indexæ—¶ï¼Œtest4æ˜¯test3çš„å­å…ƒç´ ï¼ˆå±‚å ä¸Šä¸‹æ–‡ç‰¹ç‚¹3ï¼‰ï¼Œä¼šå½±å“åˆ°test4ã€‚æ­¤æ—¶test3ä¸test4ä¸€åŒæ¥åˆ°äº†test2ä¸Šæ–¹ï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ä¿æŒäº†åŸä½ç½®ï¼Œå› ä¸ºtest2æ²¡æœ‰è®¾ç½®zindexæ‰€ä»¥æ²¡æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼‰ã€‚è¿™ä¸ªæ—¶å€™å†è®¾ç½®test4çš„z-indexï¼Œç›¸å½“äºä¿©ä¸ªå±‚å ä¸Šä¸‹æ–‡å…ƒç´ åœ¨æ¯”è¾ƒz-indexï¼Œé‚£æŒ‰ç…§ä¸Šå›¾æ‰€ç¤ºçš„æ¯”è¾ƒè§„åˆ™ï¼Œtest3çš„z-indexåªè¦å¤§äºtest4å°±èƒ½åœ¨ä¸Šé¢äº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸å˜å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹å¤§ç¥çš„è§£é‡Šï¼š å±‚å ä¸Šä¸‹æ–‡å…ƒç´ æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼šï¼ˆç†è§£å…ƒç´ å±‚å ä¸Šä¸‹æ–‡-å¼ é‘«æ—­ï¼‰ 1ã€å±‚å ä¸Šä¸‹æ–‡çš„å±‚å æ°´å¹³è¦æ¯”æ™®é€šå…ƒç´ é«˜ï¼ˆåŸå› åé¢ä¼šè¯´æ˜ï¼‰ï¼› 2ã€å±‚å ä¸Šä¸‹æ–‡å¯ä»¥é˜»æ–­å…ƒç´ çš„æ··åˆæ¨¡å¼ï¼› 3ã€å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åµŒå¥—ï¼Œå†…éƒ¨å±‚å ä¸Šä¸‹æ–‡åŠå…¶æ‰€æœ‰å­å…ƒç´ å‡å—åˆ¶äºå¤–éƒ¨çš„å±‚å ä¸Šä¸‹æ–‡ã€‚ 4ã€æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å’Œå…„å¼Ÿå…ƒç´ ç‹¬ç«‹ï¼Œä¹Ÿå°±æ˜¯å½“è¿›è¡Œå±‚å å˜åŒ–æˆ–æ¸²æŸ“çš„æ—¶å€™ï¼Œåªéœ€è¦è€ƒè™‘åä»£å…ƒç´ ã€‚ 5ã€æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªæˆä½“ç³»çš„ï¼Œå½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œæ•´ä¸ªå…ƒç´ è¢«è®¤ä¸ºæ˜¯åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡çš„å±‚å é¡ºåºä¸­ã€‚ æ ¹æ®ä¸Šé¢ç¬¬3ç‚¹æˆ‘ä»¬çŸ¥é“äº†å†…éƒ¨å±‚å å—åˆ¶äºå¤–éƒ¨å±‚å ï¼Œç»“åˆä»£ç ä¹Ÿå°±æ˜¯è¯´åªè¦test3è®¾ç½®äº†z-indexï¼Œé‚£å®ƒå°±ä¼šå¸¦ç€test4ä¸€èµ·èµ°ã€‚å½“test4è®¾ç½®z-indexæ—¶ï¼Œé¦–å…ˆè¦åˆ¤æ–­è®¾ç½®çš„å€¼å’Œtest3çš„z-indexæ­£è´Ÿæ˜¯å¦ç›¸åŒï¼Œå¦‚æœéƒ½ä¸ºæ­£ï¼ˆåŒä¸ºè´Ÿï¼‰ï¼Œæ— è®ºå¤§å°test3ä¸test4çš„ä½ç½®æ°¸ä¸ä¼šå˜ã€‚æ—¢ç„¶è®¾ç½®ä¿©ä¸ªæ­£å€¼ä½œä¸ºz-indexè¡Œä¸é€šï¼Œé‚£æˆ‘ä»¬è¯•è¯•ä¸€æ­£ä¸€è´Ÿè¡Œå¾—é€šå—ï¼Ÿ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é¦–å…ˆè®¾ç½®test4çš„z-indexä¸º-1ï¼Œæ­¤æ—¶åªæœ‰ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡test4ï¼Œå¹¶ä¸”å±‚å é¡ºåºä¸ºï¼šç”±test4å¼€å§‹ä»ä¸‹åˆ°ä¸Šä¾æ¬¡æ˜¯ test4 -&gt; test2 -&gt; test3 è¿™æ ·çš„é¡ºåºã€‚test3ä½äºæœ€ä¸Šæ–¹ï¼Œæ­¤æ—¶å¦‚æœç»™test3çš„z-indexèµ‹æ­£å€¼ä¼šå¯¼è‡´test4é‡å›åŸä½ç½®ï¼ˆtest3ä¸Šæ–¹ï¼‰ï¼Œèµ‹è´Ÿå€¼ä¼šå¯¼è‡´test3æ¥åˆ°äº†test2ä¹‹ä¸‹ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚æ—¢ç„¶çˆ¶çº§å…ƒç´ æ²¡æœ‰æ“ä½œç©ºé—´äº†ï¼Œè¯•è¯•çˆ¶çˆ¶çº§å…ƒç´ test2ï¼Œæ ¹æ®ç‰¹ç‚¹3æˆ‘ä»¬çŒœæƒ³å¦‚æœtest2çš„z-indexè®¾ç½®æ­£å€¼é‚£ä¹ˆä¼šæŠŠtest3ï¼ˆåŒ…æ‹¬test4ï¼‰è¿™ä¸ªæ•´ä½“å…±åŒå¸¦åˆ°test2ä¹‹ä¸Šçš„ä½ç½®ã€‚å¦‚ä¸‹ï¼š åœ¨æ”¹å˜test4çš„z-indexä¹‹åï¼ˆä¸ºäº†çœ‹å¾—æ›´æ¸…æ™°æˆ‘æ‰‹åŠ¨æ”¹å˜äº†é•¿å®½ï¼‰æˆ‘ä»¬å‘ç°è¾¾åˆ°äº†æ•ˆæœã€‚è®¾ç½®çˆ¶çˆ¶çº§ï¼ˆtest2ï¼‰çš„z-indexä¸º1ä¹‹åæ‹¥æœ‰äº†å±‚å ä¸Šä¸‹æ–‡ï¼Œtest4è®¾ç½®z-indexä¸º-1ä¹Ÿæ‹¥æœ‰äº†å±‚å ä¸Šä¸‹æ–‡ã€‚æ­¤æ—¶test3ä½œä¸ºæ™®é€šçš„ç»å¯¹å®šä½å…ƒç´ ä¿ç•™åœ¨åŸä½ç½®ï¼ˆä¸ºäº†æ–¹ä¾¿ç†è§£æ‰€ä»¥è¿™æ ·æè¿°ï¼Œè¿™é‡Œtest3å…¶å®æ˜¯bfcå‘æŒ¥äº†ä½œç”¨ï¼‰ï¼Œå› ä¸ºtest2æ˜¯çˆ¶çˆ¶çº§ç¬¦åˆç‰¹ç‚¹3ï¼Œæ‰€ä»¥å°†ä½äºåº•ä¸‹çš„test4å¸¦äº†ä¸Šæ¥ï¼Œä½†æ˜¯test4å±äºtest3çš„å­å…ƒç´ ï¼Œä¸Šæ¥åå°±å»å’Œtest3æ¯”è¾ƒï¼Œå› ä¸ºtest3ä¸æ‹¥æœ‰å±‚å ä¸Šä¸‹æ–‡ä¿ç•™åœ¨åŸä½ç½®ï¼Œè€Œæ­¤æ—¶test4çš„z-indexä¸ºè´Ÿå€¼ï¼Œæ‰€ä»¥åœ¨test3ä¹‹ä¸‹ï¼Œtest2ä¹‹ä¸Šæ˜¾ç¤ºã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™é‡Œè¯´äº†ä¸‰ä¸ªå—çº§å…ƒç´ ï¼Œå¤§å®¶è¿˜å¯ä»¥è¯•è¯•åµŒå¥—è¡Œå†…å…ƒç´ æ˜¯ä»€ä¹ˆæ•ˆæœã€‚éœ€è¦æ³¨æ„çš„æ˜¯ä¼ªå…ƒç´ åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„è¡¨ç°æ˜¯å¦å’Œä¸Šé¢ä¸€æ ·å‘¢ï¼Ÿ 123456789101112131415161718192021222324252627282930313233343536373839404142434445.test&#123; position: absolute; width: 300px; height: 260px; top: 50%; left: 50%; margin-left: -150px; margin-top: -130px; background-color: blue; z-index: 1;&#125;.test1 &#123; position: absolute; width: 200px; height: 200px; top: 50%; left: 50%; margin-left: -100px; margin-top: -100px; background-color: black;&#125;.test1:after&#123; content: ''; position: absolute; width: 100%; height: 100%; background-color: gray; animation: breathe infinite ease-in-out 2s; opacity: 0; z-index: -1;&#125;@keyframes breathe&#123; 0% &#123; transform:scale(.5); opacity:.9; &#125; 95% &#123; transform:scale(1.5); opacity:0; &#125; 100% &#123; transform:scale(.9); opacity:0; &#125;&#125; htmlå¦‚ä¸‹ï¼š 123&lt;div class=\"test\"&gt; &lt;div class=\"test1\"&gt;&lt;/div&gt;&lt;/div&gt; è¿™ä¸ªå…¶å®å°±æ˜¯æˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œç”¨ä¼ªå…ƒç´ åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œæˆ‘æƒ³è®©ä¼ªå…ƒç´ åŠ¨ç”»å‡ºç°åœ¨test1çš„ä¸‹æ–¹testçš„ä¸Šæ–¹ã€‚å’Œä¸Šé¢ä¸€æ ·åˆ†åˆ«è®¾ç½®z-indexä¸º-1å’Œ1å³å¯è¾¾åˆ°æ•ˆæœã€‚ å‚è€ƒèµ„æ–™ï¼š æ·±å…¥ç†è§£CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº CSSæ·±å…¥ç†è§£æµä½“ç‰¹æ€§å’ŒBFCç‰¹æ€§ä¸‹å¤šæ è‡ªé€‚åº”å¸ƒå±€ å±‚å ä¸Šä¸‹æ–‡ Stacking_context_example_2 Stacking_context_example_3","categories":[{"name":"HTML&CSS","slug":"HTML-CSS","permalink":"https://i7eo.com/categories/HTML-CSS/"}],"tags":[{"name":"å±‚å ä¸Šä¸‹æ–‡","slug":"å±‚å ä¸Šä¸‹æ–‡","permalink":"https://i7eo.com/tags/å±‚å ä¸Šä¸‹æ–‡/"}]},{"title":"Nuxt.jsè¸©å‘å®å½•","slug":"Nuxt.jsè¸©å‘å®å½•","date":"2018-07-04T15:22:36.000Z","updated":"2019-01-05T03:57:01.319Z","comments":true,"path":"2018/07/04/Nuxt.jsè¸©å‘å®å½•.html","link":"","permalink":"https://i7eo.com/2018/07/04/Nuxt.jsè¸©å‘å®å½•.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å‰ä¸€é˜µå­æ¥è§¦ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œç”¨äº†vueä¸­çš„ssrè§£å†³æ–¹æ¡ˆ â€” Nuxt.jsã€‚ä¹Ÿç®—æ˜¯å°æœ‰æ„Ÿå—ï¼Œè®°å½•ä¸€äº›ç»éªŒç•™åå¤‡ç”¨ã€‚ CSR &amp; SSRä»€ä¹ˆæ˜¯ CSR ?CSR =&gt; client-side-rederï¼Œå³å®¢æˆ·ç«¯æ¸²æŸ“ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ·è¯·æ±‚é¡µé¢ï¼Œè¿”å›é¡µé¢ã€‚æ­¤æ—¶é¡µé¢åªæ˜¯æ¨¡ç‰ˆé¡µé¢ æµè§ˆå™¨è§£æé¡µé¢ä»£ç ï¼Œè¯»åˆ°jsä»£ç æ—¶ï¼Œä¼šæ ¹æ®æˆ‘ä»¬æ‰€å†™çš„æ¥å£å»è¯·æ±‚æ•°æ® å¾—åˆ°è¿”å›æ•°æ®åä½¿ç”¨æ¨¡ç‰ˆï¼ˆvue/react/ng/art-templateï¼‰è¿›è¡Œæ¸²æŸ“ä»€ä¹ˆæ˜¯ SSR ?","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å‰ä¸€é˜µå­æ¥è§¦ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œç”¨äº†vueä¸­çš„ssrè§£å†³æ–¹æ¡ˆ â€” Nuxt.jsã€‚ä¹Ÿç®—æ˜¯å°æœ‰æ„Ÿå—ï¼Œè®°å½•ä¸€äº›ç»éªŒç•™åå¤‡ç”¨ã€‚ CSR &amp; SSRä»€ä¹ˆæ˜¯ CSR ?CSR =&gt; client-side-rederï¼Œå³å®¢æˆ·ç«¯æ¸²æŸ“ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ·è¯·æ±‚é¡µé¢ï¼Œè¿”å›é¡µé¢ã€‚æ­¤æ—¶é¡µé¢åªæ˜¯æ¨¡ç‰ˆé¡µé¢ æµè§ˆå™¨è§£æé¡µé¢ä»£ç ï¼Œè¯»åˆ°jsä»£ç æ—¶ï¼Œä¼šæ ¹æ®æˆ‘ä»¬æ‰€å†™çš„æ¥å£å»è¯·æ±‚æ•°æ® å¾—åˆ°è¿”å›æ•°æ®åä½¿ç”¨æ¨¡ç‰ˆï¼ˆvue/react/ng/art-templateï¼‰è¿›è¡Œæ¸²æŸ“ä»€ä¹ˆæ˜¯ SSR ? SSR =&gt; server-side-renderï¼Œå³æœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ·è¯·æ±‚é¡µé¢ åç«¯å–åˆ°å‡†å¤‡å¥½çš„æ•°æ®ï¼Œæ¸²æŸ“åˆ°æˆ‘ä»¬è‡ªå·±å†™çš„æœåŠ¡å™¨æ¨¡ç‰ˆï¼ˆnext/nuxt/ejsï¼‰ä¸­ï¼Œå‡†å¤‡å¥½htmlç»“æ„ä¸ç›¸åº”æ•°æ®åè¿”å›ç»™æµè§ˆå™¨ CSR &amp; SSR ä¼˜ç¼ºç‚¹å¯¹æ¯” ä¼˜ç‚¹ ç¼ºç‚¹ CSR å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼Œå‰åç«¯åˆ†ç¦» å¯¹seoä¸å‹ï¼ˆä¸åˆ©äºçˆ¬è™«çˆ¬å–ï¼‰ï¼Œé¦–é¡µæ¸²æŸ“å­˜åœ¨ç™½å±é—®é¢˜ SSR å¯¹seoå‹å¥½ï¼Œé¦–é¡µæ¸²æŸ“å®Œç¾æ— ç™½å±é—®é¢˜ å¯¹æœåŠ¡å™¨æ€§èƒ½æœ‰ä¸€å®šè¦æ±‚ï¼Œä¸åˆ©äºå‰åç«¯åˆ†ç¦» å…¶å®åœ¨çœŸæ­£å¼€å‘ä¸­é€šå¸¸æ˜¯ csr ä¸ ssr ç›¸ç»“åˆä½¿ç”¨ï¼Œå‰ç«¯ä½¿ç”¨cdnç¼“å­˜ï¼Œåç«¯ä½¿ç”¨nginxç¼“å­˜ã€‚è¿™æ ·æ˜¯æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¸Šä¸¤å¼ å›¾å¤§å®¶å¯¹æ¯”ç†è§£ï¼š Nuxt.jsä»€ä¹ˆæ˜¯ Nuxt ?Nuxt.js æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„é€šç”¨åº”ç”¨æ¡†æ¶ã€‚é€šè¿‡å¯¹å®¢æˆ·ç«¯/æœåŠ¡ç«¯åŸºç¡€æ¶æ„çš„æŠ½è±¡ç»„ç»‡ï¼ŒNuxt.js ä¸»è¦å…³æ³¨çš„æ˜¯åº”ç”¨çš„ UIæ¸²æŸ“ã€‚ Nuxt æµç¨‹ nuxtServerInitè¯·æ±‚å…ˆåˆ°è¾¾ nuxtServerInit æ–¹æ³•ï¼Œå›¾ä¸­ä¹Ÿè¡¨æ˜äº†é€‚ç”¨åœºæ™¯æ˜¯å¯¹ store çš„ action æ“ä½œå³ï¼ˆvuexï¼‰ï¼š middlewareä¸‹æ¥è¯·æ±‚åˆ°è¾¾ middleware å±æ€§ï¼Œè™½ç„¶è¿™é‡Œå«åšä¸­é—´ä»¶å±æ€§ï¼Œä½†è¿˜æ˜¯åšç€åŒä¸­é—´ä»¶ä¸€æ ·çš„äº‹ã€‚å®˜æ–¹ç»™å‡ºçš„å®šä¹‰ï¼š1ä¸­é—´ä»¶å…è®¸æ‚¨å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°è¿è¡Œåœ¨ä¸€ä¸ªé¡µé¢æˆ–ä¸€ç»„é¡µé¢æ¸²æŸ“ä¹‹å‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®šä¹‰ middleware å±æ€§åä½ å¯ä»¥åœ¨ åŒ¹é…å¸ƒå±€ï¼ˆlayout ç»„ä»¶ï¼‰å‰æ‰§è¡ŒæŸç§æ“ä½œï¼Œä¹Ÿå¯ä»¥åœ¨è§£æå®Œ layout ä¹‹åï¼Œè§£æ page ç»„ä»¶å‰ æ‰§è¡ŒæŸç§æ“ä½œã€‚ validateä¸‹æ¥è¯·æ±‚åˆ°è¾¾ validate æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå¯ä»¥å¯¹ page ç»„ä»¶æˆ–è€… page ä¸­çš„å­ç»„ä»¶ component è¿›è¡ŒåŠ¨æ€è·¯ç”±å¯¹åº”çš„é¡µé¢ç»„ä»¶ä¸­åŠ¨æ€è·¯ç”±å‚æ•°çš„æœ‰æ•ˆæ€§ã€‚ asyncData &amp; fetchæ¥ä¸‹æ¥è¾¾åˆ° asyncData &amp; fetch æ–¹æ³•ï¼ŒasyncData() é€‚ç”¨äºåœ¨æ¸²æŸ“ç»„ä»¶å‰è·å–å¼‚æ­¥æ•°æ®ï¼Œfetch() é€‚ç”¨äºåœ¨æ¸²æŸ“é¡µé¢å‰å¡«å…… vuex ä¸­ç»´æŠ¤çš„æ•°æ®ã€‚ renderæœ€åè¿›è¡Œæ¸²æŸ“ã€‚å°†æ¸²æŸ“åçš„é¡µé¢è¿”å›ç»™æµè§ˆå™¨ï¼Œç”¨æˆ·åœ¨é¡µé¢è¿›è¡Œæ“ä½œï¼Œå¦‚æœå†æ¬¡è¯·æ±‚æ–°çš„é¡µé¢ï¼Œæ­¤æ—¶åªä¼šå›åˆ°ç”Ÿå‘½å‘¨æœŸä¸­çš„ middlerware ä¸­ï¼Œè€Œé nuxtServerInit ï¼Œæ‰€ä»¥å¦‚æœä¸åŒé¡µé¢é—´éœ€è¦æ“ä½œç›¸åŒçš„æ•°æ®è¯·ç”¨ vuex æ¥ç»´æŠ¤ã€‚ Nuxt ç¬”è®°Nuxt é¡¹ç›®ç»“æ„ é€šè¿‡ 12npm install npxnpx create-nuxt-app xxx ç”Ÿæˆå¦‚ä¸Šç»“æ„ï¼Œå¸ƒå±€ç»„ä»¶ï¼ˆlayoutï¼‰ç”¨æ¥å­˜æ”¾é¡µé¢æ•´ä½“å¸ƒå±€ï¼Œåœ¨ layout ä¸­æˆ‘ä»¬å¯ä»¥æ”¾å…¥ä¸€äº›æ¯ä¸ªé¡µé¢éƒ½ä¼šä»¥ç”¨åˆ°çš„ç»„ä»¶ï¼Œæ¯”å¦‚ header &amp; footerã€‚å½“ç„¶å¦‚æœä½ ä¸æƒ³ä½¿ç”¨å·²ç”Ÿæˆçš„ layout ç»„ä»¶ï¼Œä½ å¯ä»¥é‡æ–°åˆ›å»ºä¸€ä¸ªï¼Œæ¯”å¦‚ blank.vue ä¸€èˆ¬ä¸éœ€è¦å¼•å…¥ header&amp;footer çš„é¡µé¢å¯ä»¥ä½¿ç”¨ blank.vue è¿™ä¸ª layout ç»„ä»¶ã€‚ä»£ç å¦‚ä¸‹ï¼š 1layout: &apos;blank&apos; åœ¨ nuxt ä¸­å¼•å…¥ layout ä¸ç”¨å†™è·¯å¾„ï¼Œnuxt å·²ç»å¸®æˆ‘ä»¬åšäº†æ˜ å°„ï¼ŒåŒç†åœ¨ nuxt ä¸­ä¸ç”¨å†™è·¯ç”±ï¼Œpages ä¸­æ–‡ä»¶åæ˜ å°„ä¸ºäº†è·¯ç”±ã€‚ nuxt ä¸­çš„é’©å­å‡½æ•°nuxt ä¸­æä¾›å¾ˆå¤šé’©å­å‡½æ•°ï¼Œå‚è€ƒæ–‡æ¡£ï¼šnuxt hooks è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ¥çœ‹ vue ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­é’©å­å‡½æ•°ï¼ŒæœåŠ¡å™¨ç«¯çš„ vue ç»„ä»¶ä¹Ÿæ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œåªä¸è¿‡åªæœ‰ beforeCreate å’Œ created ä¿©ä¸ªã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æŠŠæœåŠ¡å™¨ç«¯åˆ›å»ºçš„ .vue æ–‡ä»¶å…¨éƒ¨ç†è§£æˆç»„ä»¶ï¼Œåœ¨æœåŠ¡å™¨ç«¯ç¯å¢ƒï¼ˆnodeï¼‰é€šè¿‡ beforeCreate å’Œ created è¿™ä¿©ä¸ªç”Ÿå‘½å‘¨æœŸèŠ‚ç‚¹åæœåŠ¡å™¨ç«¯ vue ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚è¿”å›é¡µé¢ç»™æµè§ˆå™¨ï¼Œåœ¨å®¢æˆ·ç«¯ç¯å¢ƒï¼ˆv8ï¼‰ä¸­è¿™ä¸ª vue ç»„ä»¶å®ä¾‹åˆ›å»ºåä¼šåœ¨å®¢æˆ·ç«¯å†æ¬¡æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ­¤æ—¶ç”Ÿå‘½å‘¨æœŸä¸­æœ‰ mounted ç­‰é’©å­å‡½æ•°ã€‚ éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ nuxt ä¸­æ²¡æœ‰ mounted é’©å­å‡½æ•°ä¹Ÿæ²¡æœ‰ç»„ä»¶å®ä¾‹ï¼Œåªæœ‰ beforeCreate/created é’©å­ä¸ context å¯¹è±¡ã€‚ asyncData() ä¼ é€’æœåŠ¡å™¨æ•°æ®è‡³å®¢æˆ·ç«¯åœ¨ asyncData() ä¸­å¯ä»¥å¤„ç†è¯·æ±‚å¾—æ¥çš„æ•°æ®ï¼Œé€šè¿‡ return å°†å¤„ç†åçš„æ•°æ®è¿”å›ç»™å½“å‰ vue ç»„ä»¶çš„ data ã€‚å†æ¬¡å¼ºè°ƒè¿™é‡Œä¸èƒ½ä½¿ç”¨ this ï¼Œå› ä¸ºæ²¡æœ‰ç»„ä»¶å®ä¾‹ï¼ŒasyncData() é»˜è®¤çš„å‚æ•°æ˜¯ ctx å³ content å¯¹è±¡ã€‚ å¯¹äºæ‰“å¼€ç½‘é¡µè¦ç«‹å³æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦‚é¦–é¡µä¸­çš„ geo ç»„ä»¶ï¼ˆæ˜¾ç¤ºå½“å‰ä½ç½®ï¼‰æ¥è¯´æœ‰ä¿©ç§æ–¹å¼å®ç°ï¼Œå¦‚ä¸‹ï¼š ssr nuxtServerInit æ–¹æ³• middleware å±æ€§ vue ç»„ä»¶ mounted å‡½æ•°å‘é€è¯·æ±‚ no-ssr å³ mounted å‡½æ•°æ–¹å¼å®ç°ç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ã€‚ä¸»è¦æ¥è¯´è¯´ ssr å¯¹åº”çš„ä¿©ç§å®ç°æ–¹å¼ã€‚ nuxtServerInit() å‰é¢ä¹Ÿè¯´è¿‡ï¼Œæ­é… vuex ä½¿ç”¨ï¼Œæ‰€ä»¥é¡¾åæ€ä¹‰ï¼Œåœ¨ nuxtServerInit å‡½æ•°ä¸­å‡†å¤‡å¥½é¦–é¡µ geo ç»„ä»¶éœ€è¦çš„æ•°æ®å­˜å…¥ vuexï¼Œè¿™æ · vuex å®ä¾‹åŒ–åçš„ store ä¼šè´¯ç©¿æ•´ä¸ªæœåŠ¡å™¨ç«¯ä¸å®¢æˆ·ç«¯çš„ç”Ÿå‘½å‘¨æœŸã€‚å¯èƒ½æœ‰çš„åŒå­¦ä¼šé—®è¿™æ˜¯æ€ä¹ˆä¼ è¿‡å»çš„ï¼Ÿæ–‡æœ«ä¼šæˆªå›¾è¯´æ˜ã€‚æ‰€ä»¥åœ¨é¦–é¡µè¿”å›å®¢æˆ·ç«¯æ—¶æ•°æ®å­˜åœ¨ store å®ä¾‹ä¸­å¯ç›´æ¥è·å–å³å¯ã€‚è·å–æ–¹å¼å¦‚ä¸‹ï¼š æœåŠ¡å™¨ç«¯ï¼š 12ctx.store.state.xxx.xxx.xxx// eg: ctx.store.state.home.position.city å®¢æˆ·ç«¯ï¼š 12this.$store.state.xxx.xxx.xxx// eg: this.$store.state.home.position.city middleware å±æ€§æ˜¯åœ¨ vue ç»„ä»¶ä¸­ç›´æ¥å®šä¹‰å³å¯ï¼Œå¦‚ä¸‹ï¼š 1234middleware: async (ctx) =&gt; &#123; let &#123;status, data: &#123;province, city&#125;&#125; = await ctx.$axios.get(&apos;/geo/getPosition&apos;) ... &#125; é—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†è·å–çš„ data èµ‹å€¼ç»™ç»„ä»¶ä¸­çš„ data å‘¢ï¼Ÿä¸Šé¢åœ¨ nuxtæµç¨‹å›¾ éƒ¨åˆ†æˆ‘ä»¬åˆ†æè¿‡ï¼Œæ¸²æŸ“å‰çš„æœ€åä¸€æ­¥æ˜¯ asyncData&amp;fetch ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ç”¨ asyncData æ–¹æ³•æŠŠ data ç»™ç»„ä»¶ return å³å¯ã€‚å…·ä½“åšæ³•è§å®˜æ–¹ç»™å‡ºçš„ issue &amp; ä¾‹å­ï¼š issueï¼š#1738 nuxt/fn-midd.vue è§£ç­”ä¸Šé¢é—ç•™çš„é—®é¢˜ï¼Œssr ç”Ÿæˆçš„é¡µé¢å¦‚ä½•æŠŠ vuex å®ä¾‹åçš„ store ä¼ ç»™å®¢æˆ·ç«¯ï¼Ÿ å…¶å®åœ¨æœåŠ¡å™¨è¿”å›é¡µé¢ç»™æµè§ˆå™¨æ—¶ä¼šä¼ ä¸€ä¸ªåä¸º __NUXT__ çš„å¯¹è±¡æŒ‚è½½åœ¨ window ä¸Šï¼Œè¿™é‡Œé¢å­˜å‚¨äº† store ã€‚å¦‚ä¸‹ï¼š å¦‚å›¾å¯ä»¥æ‰¾åˆ° $store.state.home.position.city è¿™ä¸ªæ•°æ®ã€‚ å‚è€ƒæ–‡ç« ï¼š The Benefits of Server Side Rendering Over Client Side Rendering NUXT-Universal Vue.js Applications","categories":[{"name":"Vuejs","slug":"Vuejs","permalink":"https://i7eo.com/categories/Vuejs/"}],"tags":[{"name":"Nuxt.js","slug":"Nuxt-js","permalink":"https://i7eo.com/tags/Nuxt-js/"},{"name":"SSR","slug":"SSR","permalink":"https://i7eo.com/tags/SSR/"}]},{"title":"Javascripté¢å‘å¯¹è±¡ç¬”è®°","slug":"Javascripté¢å‘å¯¹è±¡ç¬”è®°","date":"2018-03-25T02:29:48.000Z","updated":"2018-12-30T13:44:35.875Z","comments":true,"path":"2018/03/25/Javascripté¢å‘å¯¹è±¡ç¬”è®°.html","link":"","permalink":"https://i7eo.com/2018/03/25/Javascripté¢å‘å¯¹è±¡ç¬”è®°.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¯´åˆ°é¢å‘å¯¹è±¡ï¼Œå¤§å¤šæ•°äººéƒ½æƒ³åˆ°çš„æ˜¯é«˜çº§è¯­è¨€ï¼šc++ã€javaï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºå¯¹äºä¸€åcoderæ¥è¯´ä¸è®ºä»€ä¹ˆè¯­è¨€ï¼Œä¸€å®šè¦æœ‰é¢å‘å¯¹è±¡è¿™ç§æ€æƒ³ï¼ˆå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨è¯­è¨€è¿™ä¸ªå·¥å…·æŠŠæ€æƒ³è¡¨è¾¾å‡ºæ¥å³å¯ã€‚æœ¬æ–‡åªè®¨è®ºç»§æ‰¿ã€‚ Javascript ä¸­åˆ›å»ºå¯¹è±¡new å…³é”®å­—åšäº†ä»€ä¹ˆï¼Ÿåˆ©ç”¨ new &amp; æ„é€ å‡½æ•° åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚è¿™ä¸ªåˆ›å»ºæ–°å¯¹è±¡çš„è¿‡ç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š å£°æ˜æ–°çš„å˜é‡ basketball","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¯´åˆ°é¢å‘å¯¹è±¡ï¼Œå¤§å¤šæ•°äººéƒ½æƒ³åˆ°çš„æ˜¯é«˜çº§è¯­è¨€ï¼šc++ã€javaï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºå¯¹äºä¸€åcoderæ¥è¯´ä¸è®ºä»€ä¹ˆè¯­è¨€ï¼Œä¸€å®šè¦æœ‰é¢å‘å¯¹è±¡è¿™ç§æ€æƒ³ï¼ˆå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨è¯­è¨€è¿™ä¸ªå·¥å…·æŠŠæ€æƒ³è¡¨è¾¾å‡ºæ¥å³å¯ã€‚æœ¬æ–‡åªè®¨è®ºç»§æ‰¿ã€‚ Javascript ä¸­åˆ›å»ºå¯¹è±¡new å…³é”®å­—åšäº†ä»€ä¹ˆï¼Ÿåˆ©ç”¨ new &amp; æ„é€ å‡½æ•° åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚è¿™ä¸ªåˆ›å»ºæ–°å¯¹è±¡çš„è¿‡ç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š å£°æ˜æ–°çš„å˜é‡ basketball new å°†æ–°å˜é‡çš„ _proto_ å±æ€§æŒ‡å‘äº†æ„é€ å‡½æ•°ï¼ˆBallï¼‰çš„ prototype å±æ€§ï¼Œè¿™æ—¶å†…å­˜ä¸º basketball åˆ†é…äº†å†…å­˜ï¼Œå…¶æˆä¸ºäº†å¯¹è±¡ã€‚basketball._proto_ = ball.prototype åˆ©ç”¨ call å‡½æ•°å°†æ–°äº§ç”Ÿçš„å¯¹è±¡ basketball çš„ this æŒ‡å‘ ballã€‚å³ç»‘å®š thisã€‚ prototype/_proto_ æ˜¯ä»€ä¹ˆï¼Ÿæœ‰çš„ä¹¦ä¸Šåˆ«åˆ«ç”¨æ˜¾ç¤ºåŸå‹/éšç¤ºåŸå‹æ¥åˆ†åˆ«ä»£ prototype/_proto_ è¿˜æœ‰çš„ç”¨åŸå‹å¯¹è±¡/å¯¹è±¡åŸå‹ã€‚å…¶å®ä¸è®ºå“ªä¸€ç§è¯´æ³•ï¼Œä»£è¡¨çš„ä¸œè¥¿éƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒç§è¯´æ³•ã€‚ä¿©è€…åŒºåˆ«å¦‚ä¸‹è¡¨ï¼š è§£é‡Š å¤‡æ³¨ prototype æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆåŒ…æ‹¬æ‹¥æœ‰çš„å˜é‡ä¸æ–¹æ³•ï¼Œconstructor ï¼Œ_proto_ï¼‰ åªæœ‰å‡½æ•°æ‹¥æœ‰æ­¤å±æ€§ _proto_ æŒ‡å‘æ„é€ å™¨çš„åŸå‹å¯¹è±¡ ä¸è®ºå¯¹è±¡æˆ–è€…å‡½æ•°éƒ½æœ‰æ­¤å±æ€§ æ¥çœ‹ä¸‹é¢ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132function Ball(name)&#123; this.name = name;&#125;var basketball = new Ball('basketball');console.log(basketball.__proto__);/* è¾“å‡º constructor: Æ’ ball(name) arguments: null caller: null length: 1 name: \"ball\" prototype: &#123;constructor: Æ’&#125; __proto__: Æ’ ()*/console.log(ball.prototype)/* è¾“å‡º constructor: Æ’ ball(name) arguments: null caller: null length: 1 name: \"ball\" prototype: &#123;constructor: Æ’&#125; __proto__: Æ’ ()*/console.log(basketball.__proto__ === ball.prototype)// true ä»ç»“æœæ¥çœ‹ç¡®å®è·Ÿæˆ‘ä»¬ä¸Šè¿°çš„ new åˆ›å»ºå¯¹è±¡è¿‡ç¨‹ä¸€è‡´ã€‚ é¢å‘å¯¹è±¡ â€” ç»§æ‰¿1ã€call/applyè¯¥æ–¹å¼é‡‡å–çš„åŠæ³•æ˜¯å°†çˆ¶å¯¹è±¡çš„æ„é€ å‡½æ•°ç»‘å®šåœ¨å­å¯¹è±¡ä¸Šã€‚å…·ä½“å¦‚ä¸‹ï¼š 1234567891011121314function Ball() &#123; this.general = \"çƒç±»è¿åŠ¨\";&#125;function Basketball(name, space) &#123; Ball.apply(this, arguments); this.name = name; this.space = space;&#125;let bb = new Basketball('è€å…‹7å·çƒ', 'å®¤å†…')console.log(bb.general)// çƒç±»è¿åŠ¨ 2ã€åŸå‹é“¾ç»§æ‰¿ä½¿å­ç±»åŸå‹å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ä»¥å®ç°ç»§æ‰¿ã€‚å…·ä½“å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324function Ball() &#123; this.general = \"çƒç±»è¿åŠ¨\"; this.ballprint = function() &#123; console.log('ball'); &#125;;&#125;function Basketball(name, space) &#123; this.name = name; this.space = space; this.print = function() &#123; console.log('basketball'); &#125;;&#125;Basketball.prototype = new Ball();let bb = new Basketball('è€å…‹7å·çƒ', 'å®¤å†…');console.log(bb.general) // 1ã€çƒç±»è¿åŠ¨console.log(bb.ballprint()) // 2ã€ballconsole.log(bb.name) // 3ã€è€å…‹7å·çƒconsole.log(bb.print()) // 4ã€basketballconsole.log(Basketball.prototype == Ball.prototype) // 5ã€trueconsole.log(Basketball.prototype.__proto__ == Ball.prototype) // 6ã€true è°ƒè¯•è¯­å¥5æ›´æ·±å±‚æ¬¡çš„æ„æ€æ˜¯è¯´:1Basketball.prototype.constuctor = Ball.prototype.constuctor å› ä¸ºå‰é¢è¯´è¿‡æ¯ä¸ªå‡½æ•°ç‰¹æœ‰ prototype è¿™ä¸ªåŸå‹å¯¹è±¡å±æ€§ï¼Œè€Œåœ¨è¿™ä¸ªåŸå‹å¯¹è±¡ä¸­å­˜æœ‰ constuctor ï¼Œæ‰€ä»¥è¦ä½¿ä¿©å‡½æ•°çš„ prototype ç›¸ç­‰ï¼Œé‚£ä¹ˆå…¶ä¸­çš„ constuctor å¿…å®šä¹Ÿæƒ³ç­‰ã€‚æ‰€ä»¥ bb ä½œä¸ºå­ç±»æ‰å¯ä»¥è®¿é—®åˆ° ball ä¸­çš„å±æ€§ä¸æ–¹æ³•ã€‚è¯­å¥1&amp;2è¯æ˜äº†è¿™ä¸€ç‚¹ã€‚ è¯­å¥6ç»“æœç¬¦åˆ new æ“ä½œç¬¦çš„æ“ä½œã€‚ å¦‚æœå­ç±»ä¸çˆ¶ç±»ä¸­çš„å±æ€§ã€æ–¹æ³•åŒåé‚£ä¹ˆç»“æœæ€æ ·å‘¢ï¼Ÿç»“æœå¦‚ä¸‹ï¼š 12345678910111213141516171819202122function Ball() &#123; this.name = \"çƒç±»è¿åŠ¨\"; this.print = function() &#123; console.log('ball'); &#125;;&#125;function Basketball(name, space) &#123; this.name = name; this.space = space; this.print = function() &#123; console.log('basketball'); &#125;;&#125;Basketball.prototype = new Ball();let bb = new Basketball('è€å…‹7å·çƒ', 'å®¤å†…');console.log(bb.name) // 1ã€è€å…‹7å·çƒconsole.log(bb.print()) // 2ã€basketballconsole.log(Basketball.prototype == Ball.prototype) // 3ã€trueconsole.log(Basketball.prototype.__proto__ == Ball.prototype) // 4ã€true æ­¤æ—¶è™½ç„¶ bb._proto_ = Basketball.prototype = Ball.prototype ä½†æ˜¯åŒåé‡‡å–çš„å°±è¿‘è®¿é—®çš„åŸåˆ™ï¼Œæ‰€ä»¥æ‰§è¡Œ Basketball ä¸­çš„è¯­å¥ã€‚è€Œä¸ä¼šé€šè¿‡ _proto_ åŸå‹é“¾å»å»ä¸Šçº§çˆ¶ç±»å¯»æ‰¾å˜é‡ä¸æ–¹æ³•ã€‚ 3ã€æ”¹è¿›åçš„åŸå‹ç»§æ‰¿å› ä¸ºä¸Šè¿°2ä¸­çš„æ–¹æ³•ä¼šä¿®æ”¹æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥æ‰‹åŠ¨ç½®å›ã€‚å…·ä½“å¦‚ä¸‹ï¼š 123456789101112131415161718function Ball() &#123; this.name = \"çƒç±»è¿åŠ¨\"; this.print = function() &#123; console.log('ball'); &#125;;&#125;function Basketball(name, space) &#123; this.name = name; this.space = space; this.print = function() &#123; console.log('basketball'); &#125;;&#125;Basketball.prototype = new Ball();Basketball.prototype.constructor = Basketball;let bb = new Basketball('è€å…‹7å·çƒ', 'å®¤å†…'); è¿™æ ·å³å¯ã€‚å½“ç„¶è¿™æ ·çš„ç»§æ‰¿æ–¹å¼æ˜¯å¤šå ç”¨äº†äº›å†…å­˜ï¼ŒBasketball.prototype = new Ball(); ï¼Œå½“ç„¶è¿˜æœ‰ä¸å å†…å­˜çš„æ–¹å¼ï¼Œæ¯”å¦‚åˆ©ç”¨ç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹çš„æ–¹å¼ã€‚åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶çš„å¯¹è±¡ï¼Œç†è§£èµ·æ¥ä¸éš¾ã€‚å…·ä½“è¯·å‚è€ƒï¼š Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼šæ„é€ å‡½æ•°çš„ç»§æ‰¿ é˜®è€å¸ˆè¿™é‡Œä»‹ç»çš„ç©ºå¯¹è±¡æ–¹æ³•ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯æˆ‘è§‰å¾—æ²¡æœ‰æŠŠä¸´æ—¶å¯¹è±¡ä½¿ç”¨å®Œåæ‰‹åŠ¨ç½®ç©ºçš„æ“ä½œï¼Œè‡ªå·±åŠ ä¸Šå³å¯ã€‚ 4ã€class/extends å…³é”®å­—å®ç°ç»§æ‰¿es6ä¸­å¼•å…¥äº†ç±»çš„æ¦‚å¿µï¼Œç”¨ class å…³é”®å­—å£°æ˜çš„å‡½æ•°ä½œä¸ºå¯¹è±¡æ¨¡ç‰ˆã€‚å…·ä½“å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031class Ball&#123; constructor(name) &#123; this.name = name &#125; play() &#123; console.log('Ball is: ', this.name) &#125;&#125;class Basketball extends Ball &#123; constructor(name) &#123; super(name) this.name = name &#125; playb() &#123; console.log('Basketball is: ', this.name) &#125;&#125;let bb = new Basketball('nikeball')bb.play(); // Ball is: nikeballbb.playb(); // Basketball is: nikeballconsole.log(typeof Ball) // 1ã€functionconsole.log(typeof Basketball) // 2ã€functionconsole.log(bb.__proto__ == Basketball.prototype) // 3ã€trueconsole.log(Basketball.prototype)/* 4ã€constructor: class Basketballplayb: Æ’ playb()__proto__: Object*/ ç”±æ‰“å°å‡ºçš„ç»“æœ1&amp;2æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œclass å¥½åƒæ˜¯åŒ…åœ¨ function ä¸Šçš„è¯­æ³•ç³–ï¼›ç”±3æ…¢æ…¢ç¡®å®šäº†è¿™ä¸€ç‚¹ï¼›ç”±4æˆ‘ä»¬æ›´åŠ ç¡®å®šäº†è¿™ä¸€ç‚¹ï¼Œè€Œä¸”ç»“åˆå‰é¢è¯´çš„æ”¹è¿›åŸå‹ç»§æ‰¿çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥å°è¯•åˆ†æ class ç»§æ‰¿çš„å…³é”®æ­¥éª¤ï¼š 123456Basketball.prototype = new Ball()Basketball.prototype.constructor = Basketball// playb() &#123;...&#125; ç›¸å½“äº:Basketball.prototype.playb = function() &#123;...&#125; ä½¿ç”¨ class æ—¶ä¸€å®šè¦æ³¨æ„åœ¨ä½¿ç”¨ this æˆ–è€…å­ç±»æ„é€ å‡½æ•°è¿”å›å‰ï¼Œä¸€å®šè¦åœ¨å­ç±»ä¸­ä½¿ç”¨ super å…³é”®å­—è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¯´ç™½äº†å°±æ˜¯åœ¨å­ç±»ä¸­ä¸€å®šè¦ä½¿ç”¨ super ã€‚ å‚è€ƒèµ„æ–™ï¼š JSå½“ä¸­çš„newå…³é”®å­—éƒ½å¹²äº†äº›ä»€ä¹ˆï¼Ÿ ä½œç”¨åŸŸé“¾ä¸åŸå‹é“¾ è¯¦è§£prototypeä¸_proto_","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"https://i7eo.com/tags/ç»§æ‰¿/"},{"name":"prototype/_proto_","slug":"prototype-proto","permalink":"https://i7eo.com/tags/prototype-proto/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://i7eo.com/tags/é¢å‘å¯¹è±¡/"}]},{"title":"Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ","slug":"Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ","date":"2018-01-13T12:57:58.000Z","updated":"2019-01-05T05:29:01.883Z","comments":true,"path":"2018/01/13/Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ.html","link":"","permalink":"https://i7eo.com/2018/01/13/Macä¸‹åˆ©ç”¨Alfredä¸ä¸ƒç‰›æ­å»ºmarkdownå›¾åºŠ.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ä½¿ç”¨hexoä¸gitpageå®Œæˆä¸ªäººåšå®¢æ­å»ºåï¼Œåœ¨å†™åšå®¢æ—¶æƒ³æ’å…¥å›¾ç‰‡æ€»æ˜¯éœ€è¦å¤–é“¾ï¼Œæ„Ÿè§‰å¾ˆç¹çã€‚åˆšå¥½åœ¨åˆ©ç”¨alfredçš„workflowåè§‰å¾—èƒ½ä¸èƒ½æŠŠæ•´å¥—æ‰‹åŠ¨è·å–å›¾ç‰‡å¤–é“¾çš„åŠ¨ä½œå˜æˆè‡ªåŠ¨åŒ–çš„åŠ¨ä½œï¼Œæ¥ç”¨çƒ­é”®è§¦å‘ã€‚æœäº†ä¸‹ç›¸å…³çš„æ–‡ç« è‡ªå·±è¸©äº†ä¸å°‘å‘æœ€ç»ˆè¿˜æ˜¯å®Œæˆäº†ï¼Œæ€»ç»“å‡ºæ¥é¿å…å¤§å®¶åé¢è¸©å‘ã€‚ å‰æœŸå‡†å¤‡ï¼š å¯ä»¥ä½¿ç”¨workflowçš„alfredï¼ˆèƒ½æ”¯æŒæ­£ç‰ˆæœ€å¥½ä¸è¿‡æˆ‘è¿˜æ˜¯å‡†å¤‡äº†é“¾æ¥ï¼Œä½ç½®åœ¨æ–‡ç« æœ€åï¼‰","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ä½¿ç”¨hexoä¸gitpageå®Œæˆä¸ªäººåšå®¢æ­å»ºåï¼Œåœ¨å†™åšå®¢æ—¶æƒ³æ’å…¥å›¾ç‰‡æ€»æ˜¯éœ€è¦å¤–é“¾ï¼Œæ„Ÿè§‰å¾ˆç¹çã€‚åˆšå¥½åœ¨åˆ©ç”¨alfredçš„workflowåè§‰å¾—èƒ½ä¸èƒ½æŠŠæ•´å¥—æ‰‹åŠ¨è·å–å›¾ç‰‡å¤–é“¾çš„åŠ¨ä½œå˜æˆè‡ªåŠ¨åŒ–çš„åŠ¨ä½œï¼Œæ¥ç”¨çƒ­é”®è§¦å‘ã€‚æœäº†ä¸‹ç›¸å…³çš„æ–‡ç« è‡ªå·±è¸©äº†ä¸å°‘å‘æœ€ç»ˆè¿˜æ˜¯å®Œæˆäº†ï¼Œæ€»ç»“å‡ºæ¥é¿å…å¤§å®¶åé¢è¸©å‘ã€‚ å‰æœŸå‡†å¤‡ï¼š å¯ä»¥ä½¿ç”¨workflowçš„alfredï¼ˆèƒ½æ”¯æŒæ­£ç‰ˆæœ€å¥½ä¸è¿‡æˆ‘è¿˜æ˜¯å‡†å¤‡äº†é“¾æ¥ï¼Œä½ç½®åœ¨æ–‡ç« æœ€åï¼‰ ä¸ƒç‰›è´¦å·&amp;ä¸ƒç‰›è‡ªåŠ¨åŒ–å·¥å…·qshell æˆªå›¾å·¥å…·ï¼ˆè¿™ä¸ªä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¯ä»¥åˆ©ç”¨ç”µè„‘è‡ªå¸¦çš„æˆªå›¾åŠŸèƒ½ï¼Œåªè¦ä¿è¯æˆªå›¾åŠ¨ä½œåçš„ç»“æœå¤„äºå‰ªåˆ‡æ¿ä¸­å³å¯ï¼‰ ç¬¬ä¸€éƒ¨åˆ†ï¼šï¼ˆä¸ƒç‰›æ“ä½œï¼‰ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒæˆåŠŸç™»é™†åï¼Œå•å‡» ç®¡ç†æ§åˆ¶å° -&gt; å¯¹è±¡å­˜å‚¨ -&gt; å†…å®¹ç®¡ç† æ‰¾åˆ°å¤–é“¾é»˜è®¤åŸŸåï¼Œå¤åˆ¶å¹¶ä¿å­˜ã€‚ ç¬¬äºŒæ­¥ï¼šè¿”å›é¦–é¡µï¼Œå•å‡» æœåŠ¡ä¸æ”¯æŒ -&gt; å¼€å‘è€…ä¸­å¿ƒ -&gt; sdkä¸å·¥å…· -&gt; å¼€å‘è€…å·¥å…· -&gt; qshell è¿›å…¥åæŒ‰ç…§æç¤ºä¸‹è½½å¹¶å®‰è£…ã€‚ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºè´¦æˆ·æ—¶ï¼Œé™¤äº†ak&amp;sk ç°åœ¨è¿˜éœ€è¦è¾“å…¥ä¸ƒç‰›è´¦æˆ·åï¼›é…ç½®upload.confæ–‡ä»¶æ—¶éœ€è¦æ³¨æ„å¦‚æœæœ¬åœ°æ–°å¢æ–‡ä»¶ä¸ƒç‰›é»˜è®¤ä¸ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼Œä½ éœ€è¦è®¾ç½® rescan_local: true ;å¦‚æœä½ åœ¨ä¸ƒç‰›ç©ºé—´ï¼ˆwebé¡µï¼‰ä¸­æ‰‹åŠ¨åˆ é™¤æŸä¸ªæ–‡ä»¶ï¼Œå†æ¬¡ä¸Šä¼ è¯¥æ–‡ä»¶çš„æ—¶å€™ä¸ƒç‰›é»˜è®¤è¯¥æ–‡ä»¶å·²ç»å­˜åœ¨ç©ºé—´ä¸­ï¼Œä¸ä¼šå†ä¸Šä¼ è¯¥æ–‡ä»¶ï¼Œä½ éœ€è¦é…ç½® check_exists: true ã€‚ ç¬¬äºŒéƒ¨åˆ†ï¼šï¼ˆalfred workflowæ“ä½œï¼‰ç¬¬ä¸€æ­¥ï¼š ç‚¹å‡» + ï¼Œåˆ›å»ºblank workflowå³å¯ï¼Œæ³¨æ„bundle idå¿…å¡«ä¸€ä¸ªå”¯ä¸€å€¼ï¼Œèƒ½å¤Ÿåœ¨alfredä¸­æ ‡ç¤ºä½ è¿™ä¸ªworkflowå³å¯ï¼Œå…¶ä½™é€‰é¡¹æ­£å¸¸å¡«å†™ï¼Œcategoryé»˜è®¤é€‰é¡¹å³å¯ã€‚ ç¬¬äºŒæ­¥ï¼š åˆ›å»ºçƒ­é”®hotkeyï¼Œå…¶ä½™é»˜è®¤é€‰é¡¹ä¸å˜ï¼Œå®Œæˆåsaveã€‚ åˆ›å»ºçƒ­é”®è§¦å‘åéœ€è¦æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå½“ç„¶run scriptåˆ›å»ºçš„è„šæœ¬æ˜¯åå°è¿è¡Œä¸éœ€è¦å…ˆè°ƒå‡ºterminalï¼ˆæ§åˆ¶å°ï¼‰ï¼Œå¦‚æœéœ€è¦è°ƒå‡ºterminalï¼ˆæ§åˆ¶å°ï¼‰ï¼Œé€‰æ‹©terminal commandã€‚æ ¹æ®è„šæœ¬è¯­è¨€å¯¹åº”é€‰æ‹©languageï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªasç‰ˆæœ¬ä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243property fileTypes : &#123;Â¬ &#123;Â«class PNGfÂ», \".png\"&#125;, Â¬ &#123;JPEG picture, \".jpg\"&#125;&#125;on getType() --åˆ¤æ–­å‰ªè´´æ¿ä¸­çš„æ•°æ®ç±»å‹ï¼Œæš‚æ—¶åªæ”¯æŒpngå’Œjpgï¼Œä¼˜å…ˆç”¨png repeat with aType in fileTypes repeat with theInfo in (clipboard info) if (first item of theInfo) is equal to (first item of aType) then return aType end repeat end repeat return missing valueend getTypeset theType to getType()if theType is not missing value then set filePath to \"/Users/xxx/Documents/screenCaptures/\" --è¿™é‡Œæ¢æˆä½ è‡ªå·±æ”¾ç½®å›¾ç‰‡çš„è·¯å¾„ set fileName to do shell script \"date \\\"+%Y%m%d%H%M%S\\\" | md5\" --ç”¨å½“å‰æ—¶é—´çš„md5å€¼åšæ–‡ä»¶å set prefix to \"i7eo_\" -- æ”¹æˆè‡ªå·±çš„å‰ç¼€ if fileName does not end with (second item of theType) then set fileName to (fileName &amp; second item of theType as text) set markdownUrl to \"![æˆªå›¾](http://xxx.com/i7eo_\" &amp; fileName &amp; \")\" --è¿™é‡Œå¦‚æœæ²¡æœ‰ç”¨åˆ°å›¾åºŠï¼Œå°±æŠŠå‰é¢å‰ç¼€å»æ‰ï¼Œç”¨åˆ°çš„è¯æ¢æˆä½ è‡ªå·±å›¾åºŠçš„url set filePath to filePath &amp; prefix &amp; fileName try set imageFile to (open for access filePath with write permission) set eof imageFile to 0 write (the clipboard as (first item of theType)) to imageFile -- as whatever close access imageFile set the clipboard to markdownUrl try tell application \"System Events\" keystroke \"v\" using command down end tell end try on error try close access imageFile end try return \"\" end tryelse return \"\"end if æŠŠ http://xxx.com/æ”¹ä¸ºä¹‹å‰ä»ä¸ƒç‰›é»˜è®¤å¤–é“¾å¤„å¤åˆ¶å‡ºæ¥çš„åœ°å€ã€‚ ç¬¬ä¸‰æ­¥ï¼šå†æ¬¡åˆ›å»ºä¸€ä¸ªblank workflowï¼Œçƒ­é”®è‡ªå·±è®¾ç½®ï¼›å†æ¬¡åˆ›å»ºä¸€ä¸ªasè„šæœ¬ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š1do shell script \"/usr/local/bin/qshell qupload ~/.qshell/upload.conf\" æŠŠquploadå‰çš„è·¯å¾„æ¢æˆè‡ªå·±å­˜æ”¾ä¸ƒç‰›qshellæ–‡ä»¶çš„ä½ç½®ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¸ªæ–¹æ³•é€‚åˆå†™åšå®¢æ—¶ï¼ŒæŠŠè¯¥ç¯‡åšå®¢éœ€è¦çš„å›¾ç‰‡éƒ½å­˜æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œå†™å®Œåä¸€æ¬¡æ€§ä¸Šä¼ è‡³ä¸ƒç‰›ç©ºé—´ã€‚ç„¶ååœ¨æŠŠåšå®¢æ¨è‡³gitpageå³å¯ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœæƒ³æ¯æ¬¡æ’å…¥ä¸€å¼ å›¾ç‰‡å°±ä¸Šä¼ ï¼Œå¯ä»¥ä½¿ç”¨æ’ä»¶ Mac ç‰ˆæœ¬çš„ Markdown ä¸€é”®è´´å›¾å·¥å…· alfred3 Powerpack","categories":[{"name":"è‡ªåŠ¨åŒ–","slug":"è‡ªåŠ¨åŒ–","permalink":"https://i7eo.com/categories/è‡ªåŠ¨åŒ–/"}],"tags":[{"name":"Alfred3 workflow","slug":"Alfred3-workflow","permalink":"https://i7eo.com/tags/Alfred3-workflow/"},{"name":"å›¾åºŠ","slug":"å›¾åºŠ","permalink":"https://i7eo.com/tags/å›¾åºŠ/"},{"name":"qshell","slug":"qshell","permalink":"https://i7eo.com/tags/qshell/"}]},{"title":"ä¸ºgit pageå¼€é€šhttpsè¸©å‘å®å½•","slug":"ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•","date":"2017-10-01T08:37:27.000Z","updated":"2018-12-28T18:56:19.680Z","comments":true,"path":"2017/10/01/ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•.html","link":"","permalink":"https://i7eo.com/2017/10/01/ä¸ºgitPageså¼€é€šhttpsè¸©å‘å®å½•.html","excerpt":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ©ç”¨hexoä¸gitpageå¼€é€šåšå®¢åï¼Œæ— è®ºæ˜¯pc&amp;mobileç™»é™†æ—¶æ€»ä¼šå‘ç°åœ°å€æ å‰æœ‰ä¸ªæ„Ÿå¹å·ã€‚å¼ºè¿«ç—‡è¡¨ç¤ºçœŸçš„çœ‹ä¸ä¸‹å»ï¼Œæ‰€ä»¥å°±å»äº†è§£äº†ä¸‹httpsã€‚ HTTPSçš„ä¼˜ç‚¹ äº†è§£åˆ°httpsæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚ æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œhttpså¯ä»¥é¿å…dnsæŒŸæŒï¼Œå°±æ˜¯å¯ä»¥é¿å…åœ¨æµè§ˆç½‘é¡µæ—¶å‡ºç°ä¸€äº›å°å¹¿å‘Šå¼¹çª—ï¼","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ©ç”¨hexoä¸gitpageå¼€é€šåšå®¢åï¼Œæ— è®ºæ˜¯pc&amp;mobileç™»é™†æ—¶æ€»ä¼šå‘ç°åœ°å€æ å‰æœ‰ä¸ªæ„Ÿå¹å·ã€‚å¼ºè¿«ç—‡è¡¨ç¤ºçœŸçš„çœ‹ä¸ä¸‹å»ï¼Œæ‰€ä»¥å°±å»äº†è§£äº†ä¸‹httpsã€‚ HTTPSçš„ä¼˜ç‚¹ äº†è§£åˆ°httpsæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚ æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œhttpså¯ä»¥é¿å…dnsæŒŸæŒï¼Œå°±æ˜¯å¯ä»¥é¿å…åœ¨æµè§ˆç½‘é¡µæ—¶å‡ºç°ä¸€äº›å°å¹¿å‘Šå¼¹çª—ï¼ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç»“åˆè‡ªå·±çš„ä»£ç å‘ç°å¼•ç”¨çš„å›¾ç‰‡å…¨æ˜¯httpåè®®ä¸‹çš„ï¼Œè€Œä¸”åœ¨inputï¼ˆå³ä½¿typeâ‰ keywordï¼‰è¾“å…¥å†…å®¹æ—¶æ„Ÿå¹å·å˜æˆäº†çº¢å­—å‰ã€‚æˆ‘æ‰€ç”¨çš„æ˜¯é˜¿é‡Œçš„åŸŸåæ‰€ä»¥å»ç½‘ç«™æŸ¥è¯¢httpsçš„ä¿¡æ¯ï¼Œå‘ç°æœ‰å…è´¹çš„èµ›é—¨é“å…‹ï¼ˆSymantecï¼‰è¯ä¹¦è¯•ç”¨ã€‚æœæ–­ç”³è¯·åï¼Œå‘ç°ï¼š gitPagesæ³¨æ„äº‹é¡¹ git pageè‡ªå¸¦httpsï¼Œåœ¨å¯¹åº”repçš„è®¾ç½®ä¸­ï¼Œç‚¹å‡» Enforce HTTPS å³å¯ã€‚ git pageç»‘å®šè‡ªå®šä¹‰åŸŸååæ— æ³•æ·»åŠ sslè¯ä¹¦ã€‚è¿™ä¸ªæ—¶å€™æœ‰ç‚¹æ‡µäº†ï¼Œä¸è¿‡æ£€ç´¢å¤šæ¬¡ç›¸å…³å…³é”®å­—åï¼Œå‘ç°äº†cloudflareè¿™ä¸ªå¥½ä¸œè¥¿ã€‚å¤§æ¦‚äº†è§£äº†ä¸‹åå°±ç¡®å®šç”¨å®ƒäº†ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š å®‰åˆ©cloudflareçš„åŸå›  æœ‰å…è´¹å¥— cloudflareçš„dnsæœåŠ¡å™¨é£è¯„è¿˜æ˜¯ä¸é”™çš„-cloudflareæä¾› Universal SSL æœåŠ¡ï¼Œç®€å•æ¥è¯´å°±æ˜¯è®©ä»»æ„httpç«™ç‚¹æ”¯æŒhttpsã€‚ ï¼ˆå…·ä½“åŸç†æŒ‡çš„æ˜¯ï¼Œç”¨cloudflareçš„dnsæœåŠ¡å™¨ï¼Œå½“ä½ è®¿é—®ç½‘é¡µæ—¶ï¼Œç½‘é¡µ -&gt; cloudflare è¿™ä¸ªè¿‡ç¨‹æ˜¯åŠ å¯†çš„ï¼Œè€Œ cloudflare -&gt; git pageè¿™ä¸ªè¿‡ç¨‹æ˜¯éåŠ å¯†ï¼ˆhttpï¼‰ï¼‰ å…·ä½“å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š how Cloudflareâ€™s servers connect to your origin for HTTPS requests cloudflareé…ç½®çš„å…·ä½“æ­¥éª¤ç¬¬ä¸€æ­¥ï¼šè®¾ç½®dnsæŠŠè‡ªå·±å¯¹åº”çš„dnsæœåŠ¡å™¨æ”¹ä¸ºcloudflareçš„ï¼Œä¸‹é¢ä»¥é˜¿é‡Œæ¥ä¸¾ä¾‹ã€‚é˜¿é‡Œäº‘ -&gt; åŸŸå -&gt; ç®¡ç† -&gt; ä¿®æ”¹dnsï¼Œå‡ºç°ä¸€ä¸‹ç•Œé¢ï¼š è¿™æ˜¯æˆ‘å·²ç»ä¿®æ”¹åçš„ï¼Œå•å‡»å³è¾¹çš„ä¿®æ”¹dnsæœåŠ¡å™¨å³å¯ï¼ŒæŠŠcloudflareç»™å‡ºçš„ä¿©ä¸ªdnsåœ°å€æ¢ä¸Šæ¥å°±å¥½ã€‚cloudflareç»™å‡ºçš„dnsåœ°å€ä½äºï¼šcloudflare -&gt; dns -&gt; Cloudflare Nameserversã€‚ å¦‚ä½•åˆ¤æ–­æ›´æ¢dnsæˆåŠŸï¼Ÿå›åˆ°cloudflareåï¼Œå•å‡»overviewï¼Œå¦‚æœæˆåŠŸä¼šå‡ºç°ï¼š ç¬¬äºŒæ­¥ï¼šè®¾ç½®dnsä¿¡æ¯cloudflare -&gt; dns -&gt; DNS Records å¦‚æœè¿™é‡Œæ²¡è®¾ç½®æ—¶æœ‰è®°å½•å…ˆåˆ é™¤ï¼Œæ–°å¢ä¸€æ¡è®°å½•: ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ssl&amp;å¼ºåˆ¶è·³è½¬cloudflare -&gt; crypto -&gt; SSL å‹¾é€‰flexible cloudflare -&gt; crypto -&gt; Always Use HTTPS å‹¾é€‰on ç¬¬å››æ­¥ï¼šåç­‰&amp;æ’é”™å¤§æ¦‚10mins - 30minså·¦å³å°±ä¼šç”Ÿæ•ˆï¼Œå¯ä»¥åœ¨ç­‰å¾…çš„æ—¶å€™ä½¿ç”¨pingå‘½ä»¤æ¥pingä¸ªäººçš„åŸŸåæŸ¥çœ‹ipã€‚ å¦‚æœä½ çš„åšå®¢å‡ºç°ä»¥ä¸‹æƒ…å†µï¼š æ£€æŸ¥gitpageçš„è®¾ç½®ï¼Œå–æ¶ˆæ‰å‹¾é€‰çš„Enforce HTTPSé€‰é¡¹ï¼Œè¿™ä¸ªè®¾ç½®æ˜¯æœ‰ç¼“å­˜çš„ å¯ä»¥åˆ‡æ¢sourceæˆ–è€…theme chooserè¿™æ ·å¯ä»¥æ¸…ç†æ‰ç¼“å­˜çš„Enforce HTTPSé€‰é¡¹ä¿¡æ¯ã€‚ å‚è€ƒæ–‡ç« ï¼š ä½¿ç”¨Cloudflareä¸ºè‡ªå®šä¹‰åŸŸåçš„GithubPageså®ç°HTTPSåŒ– è§£å†³Cloudflareäº§ç”Ÿçš„â€œERR_TOO_MANY_REDIRECTSâ€é”™è¯¯","categories":[{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"https://i7eo.com/categories/è¿ç»´/"}],"tags":[{"name":"cloudflare","slug":"cloudflare","permalink":"https://i7eo.com/tags/cloudflare/"},{"name":"https","slug":"https","permalink":"https://i7eo.com/tags/https/"}]},{"title":"æ‰‹æ’•å€¼ä¼ é€’&å¯¹è±¡æ·±æµ…æ‹·è´","slug":"æ‰‹æ’•å€¼ä¼ é€’","date":"2017-05-20T13:42:48.000Z","updated":"2019-01-05T08:55:09.286Z","comments":true,"path":"2017/05/20/æ‰‹æ’•å€¼ä¼ é€’.html","link":"","permalink":"https://i7eo.com/2017/05/20/æ‰‹æ’•å€¼ä¼ é€’.html","excerpt":"å€¼ä¼ é€’ JS ä¸­çš„åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹å¦‚ä½•å­˜å‚¨ï¼Ÿ å€¼ä¼ é€’çš„ç”±æ¥&amp;ä¸¾ä¾‹è¯´æ˜å€¼ä¼ é€’çš„è¿‡ç¨‹ æ‰©å±•é˜…è¯»ï¼ˆcall-by-sharingï¼‰ JS ä¸­çš„åŸºæœ¬ç±»å‹JS ä¸­çš„åŸºæœ¬ç±»å‹åˆ†åˆ«æ˜¯ï¼šNumberã€Stringã€Booleanã€undefinedã€nullï¼›å¼•ç”¨ç±»å‹åˆ†åˆ«æ˜¯ï¼šFunctionã€Objectã€Array ç­‰ã€‚ åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹å­˜å‚¨åŸºæœ¬ç±»å‹å‡å­˜å‚¨åœ¨æ ˆä¸­è€Œä¸”","text":"å€¼ä¼ é€’ JS ä¸­çš„åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹å¦‚ä½•å­˜å‚¨ï¼Ÿ å€¼ä¼ é€’çš„ç”±æ¥&amp;ä¸¾ä¾‹è¯´æ˜å€¼ä¼ é€’çš„è¿‡ç¨‹ æ‰©å±•é˜…è¯»ï¼ˆcall-by-sharingï¼‰ JS ä¸­çš„åŸºæœ¬ç±»å‹JS ä¸­çš„åŸºæœ¬ç±»å‹åˆ†åˆ«æ˜¯ï¼šNumberã€Stringã€Booleanã€undefinedã€nullï¼›å¼•ç”¨ç±»å‹åˆ†åˆ«æ˜¯ï¼šFunctionã€Objectã€Array ç­‰ã€‚ åŸºæœ¬ç±»å‹&amp;å¼•ç”¨ç±»å‹å­˜å‚¨åŸºæœ¬ç±»å‹å‡å­˜å‚¨åœ¨æ ˆä¸­è€Œä¸” åœ¨æ ˆä¸­çš„å¤§å°æ˜¯åœ¨å¼•æ“ä¸­å›ºå®šçš„ï¼Œæ‰€ä»¥åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹ï¼ˆNumber&amp;String&amp;Booleanï¼‰çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œå› ä¸ºä¸€æ—¦åŒ…è£…ç±»å‹çš„ç”Ÿå‘½å‘¨æœŸå˜é•¿ï¼Œå¯¹åº”çš„æ ˆä¸­å†…å­˜ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´å†…å­˜å‡ºç°é—®é¢˜ã€‚è€Œå¼•ç”¨ç±»å‹çš„å­˜å‚¨åˆ†ä¸ºä¿©éƒ¨åˆ†ï¼Œåœ¨æ ˆä¸­å­˜å‚¨å¯¹åº”å˜é‡çš„å¼•ç”¨ï¼ˆç†è§£ä¸ºåœ°å€å¥½ä¸€ç‚¹ï¼‰ï¼Œå †ä¸­å­˜æ”¾çœŸæ­£çš„æ•°æ®ã€‚æ¯æ¬¡éƒ½æ˜¯æ ¹æ®æ ˆä¸­çš„åœ°å€è€Œæ‰¾åˆ°å¯¹åº”çš„å †ä¸­å­˜æ”¾çš„ä½ç½®ï¼Œè¿›è¡Œè¯»å†™ã€‚ä»£ç å’Œå›¾ç¤ºå¦‚ä¸‹ï¼š 123var pen = 'hero';var pencil = 'zhonghua';var pencil_box = &#123; eraser: 'xiaoxiao' &#125;; è¿™é‡Œè¡¥å……ä¸€ä¸ªå…³äºåŒ…è£…å¯¹è±¡çš„é—®é¢˜ã€‚ä»£ç å¦‚ä¸‹ï¼š 123var test = 'test';test.color = 'red';console.log(test.color); // test.color è¾“å‡ºä»€ä¹ˆï¼Ÿ è¾“å‡º undefinedï¼Œå¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„ä¸»è¦åŒºåˆ«å°±æ˜¯å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåœ¨ä¸Šè¿°å·²ç»è¯´æ˜ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ä¼šå‘ç”Ÿä»€ä¹ˆï¼‰ã€‚è‡ªåŠ¨åˆ›å»ºçš„åŸºæœ¬åŒ…è£…ç±»å‹çš„å¯¹è±¡åªå­˜åœ¨äºæ‰§è¡Œä»£ç åçš„ç¬é—´ï¼Œç„¶åè¢«é”€æ¯ã€‚ å€¼ä¼ é€’çš„è¿‡ç¨‹ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚åŸºæœ¬ç±»å‹å€¼çš„ä¼ é€’å¦‚åŒåŸºæœ¬ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼Œè€Œå¼•ç”¨ç±»å‹å€¼çš„ä¼ é€’ï¼Œåˆ™å¦‚åŒå¼•ç”¨ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ã€‚è®¿é—®å˜é‡æœ‰æŒ‰å€¼å’ŒæŒ‰å¼•ç”¨ä¿©ç§æ–¹å¼ï¼Œè€Œå‚æ•°åªèƒ½æŒ‰å€¼ä¼ é€’ã€‚å€¼ä¼ é€’ä»£ç å’Œå›¾ç¤ºå¦‚ä¸‹ï¼š 12345678function addTen (num) &#123; num += 10; return num;&#125;var count = 20;var result = addTen(count);console.log(count); // 20console.log(result); // 30 æ”¹ä¸ºå¯¹è±¡å†è¯•è¯•çœ‹ï¼š 123456function setName (obj) &#123; obj.name = 'Nicholas';&#125;var person = &#123;&#125;;setName(person);console.log(person.name); // \"Nicholas\" å› ä¸º person æŒ‡å‘çš„å¯¹è±¡åœ¨å †å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªï¼Œè€Œä¸”æ˜¯å…¨å±€çš„ã€‚æœ‰å¾ˆå¤šäººé”™è¯¯åœ°è®¤ä¸ºï¼šåœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­ï¼ˆsetName ä¸­ï¼‰ä¿®æ”¹çš„å¯¹è±¡ä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼ˆconsole.log( person.name )ï¼‰åæ˜ å‡ºæ¥å°±è¯´æ˜å‚æ•°æŒ‰å¼•ç”¨ä¼ é€’ã€‚ä¸ºäº†è¯æ˜å¯¹è±¡æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå†æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 12345678function setName (obj) &#123; obj.name = 'Nicholas'; obj = new Object(); obj.name = 'Greg';&#125;var person = new Object();setName(person);console.log(person.name); è¿™ä¸ªæ—¶å€™è¾“å‡ºçš„ä¼šæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ â€œNicholasâ€ï¼Ÿè¿˜æ˜¯ â€œGregâ€ï¼Ÿå¥½å§ï¼Œå…ˆæ¥ä¸€ä¸ªé”™è¯¯ç­”æ¡ˆ â€œGregâ€ï¼ˆå³å¼•ç”¨ä¼ é€’ï¼‰ çš„å›¾ç¤ºï¼š è°ƒç”¨ setName æ‰§è¡Œåˆ° obj = new Object(); æ—¶ä¼šæ–­å¼€ person åŸå…ˆæŒ‡å‘å †ä¸­çš„è¿æ¥ï¼ˆå›¾ä¸­çº¢å‰å¤„ï¼‰ä»è€ŒæŒ‡å‘æ–°å¼€è¾Ÿçš„å†…å­˜ç©ºé—´ï¼ˆnew Object()ï¼‰ï¼Œç„¶åè®¾ç½® obj çš„ name å±æ€§ã€‚æ­£ç¡®çš„ç»“æœåº”è¯¥æ˜¯ â€œNicholasâ€ å›¾ç¤ºå¦‚ä¸‹ï¼š ä¼ å…¥çš„ obj åªæ˜¯å¯¹ person å¯¹è±¡çš„å¼•ç”¨è¿›è¡Œäº†å¤åˆ¶ï¼Œæ‰§è¡Œ obj = new Object(); æ—¶åªæ˜¯è®©å¤åˆ¶åçš„ person å¯¹è±¡çš„å¼•ç”¨æŒ‡å‘äº† æ–°å¼€è¾Ÿçš„ç©ºé—´ï¼ˆnew Object()ï¼‰ã€‚ å¼•ç”¨ç±»å‹çš„æ·±æµ…æ‹·è´æµ…æ‹·è´æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥åˆ©ç”¨ = èµ‹å€¼ï¼Œè¿™æ ·çš„è¯æ”¹å˜ä¸€ä¸ªå€¼ï¼Œå¦ä¸€ä¸ªä¹Ÿè·Ÿç€å˜åŒ–ã€‚åŸç†å°±æ˜¯å› ä¸ºè¿™æ ·ç®€å•åœ°èµ‹å€¼ç»“æœå…±ç”¨çš„æ˜¯åŒä¸€å—å†…å­˜ã€‚è¿™ä¸ªä¸ç®¡æ˜¯ Array è¿˜æ˜¯ Objectéƒ½å¾ˆç®€å•å°±ä¸ä¸¾ä¾‹äº†ã€‚åœ¨è¿™é‡Œæƒ³ç€é‡è¯´çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯å…³äº Array çš„ slice&amp;concat æ–¹æ³•ï¼Œå¾ˆå¤šå¾ˆå¤šç½‘æ–‡éƒ½æŠŠè¿™ä¿©ä¸ªæ–¹æ³•è¯´æˆäº† Array çš„æ·±æ‹·è´æ–¹æ³•ï¼Œå…¶å®è¿™æ˜¯é”™çš„ã€‚ä¸ºä»€ä¹ˆï¼Ÿè¯·çœ‹ä¸‹ä¾‹ï¼š 12345var arr1 = [1, 2, [3, 4] ];var arr2 = arr1.slice(); // æ¢æˆ var arr2 = arr1.concat(); ç»“æœä¸å˜console.log(arr1,arr2);arr1[2][0] = 'ss';console.log(arr1,arr2); // arr1[2][0] = 'ss' , arr2[2][0] = 'ss' å¦‚æœæ˜¯äºŒç»´æ•°ç»„ï¼Œå¦‚ä¸Šä»£ç ã€‚é€šè¿‡æŸ¥çœ‹ arr1[2][0]&amp;arr2[2][0] çš„ç»“æœæˆ‘ä»¬å¯ä»¥å‘ç°è¿™å¹¶ä¸æ˜¯æ·±æ‹·è´ï¼Œå› ä¸ºæ”¹å˜äº† arr1[2][0] å arr2[2][0] ä¹Ÿé¡ºåŠ¿æ”¹å˜ã€‚ä½†å¦‚æœæ˜¯ä¸€ç»´æ•°ç»„ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚å¦‚ä¸‹ä»£ç ï¼š 12345var arr1 = [1, 2, 3];var arr2 = arr1.slice();console.log(arr1,arr2);arr1[0] = 'ss';console.log(arr1,arr2); // arr1 = ['ss', 2, 3] , arr2 = [1, 2, 3] éš¾é“åªæ˜¯å› ä¸ºæ•°ç»„çš„ç»´æ•°ä¸åŒå—ï¼Ÿä¸æ˜¯çš„ï¼Œåº”è¯¥è¯´æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰æ·±å±‚æ¬¡åœ°æ˜ç™½ä»€ä¹ˆå«æµ…æ‹·è´ï¼Ÿä»€ä¹ˆå«æ·±æ‹·è´ï¼Ÿ æµ…æ‹·è´åªå¤åˆ¶ä¸€å±‚å¼•ç”¨ç±»å‹å¯¹è±¡çš„å±æ€§ã€‚æ·±æ‹·è´ä¸ä»…å°†åŸå¯¹è±¡çš„å„ä¸ªå±æ€§é€ä¸ªå¤åˆ¶å‡ºå»ï¼Œè€Œä¸”å°†åŸå¯¹è±¡å„ä¸ªå±æ€§æ‰€åŒ…å«çš„å¯¹è±¡ä¹Ÿä¾æ¬¡é‡‡ç”¨æ·±å¤åˆ¶çš„æ–¹æ³•é€’å½’å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸Šã€‚ä»£ç å’Œå›¾ç¤ºï¼Œè¯·æŸ¥çœ‹çŸ¥ä¹ä¸Šå…³äºè¿™ä¸ªé—®é¢˜çš„å›ç­” javascriptä¸­çš„æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Ÿé€šåƒæ•°ç»„ä¸å¯¹è±¡çš„æ·±æ‹·è´ä»£ç ï¼š 123456789101112131415var cloneObj = function(obj)&#123; var str, newobj = obj.constructor === Array ? [] : &#123;&#125;; if(typeof obj !== 'object')&#123; return; &#125; else if(window.JSON)&#123; str = JSON.stringify(obj), //ç³»åˆ—åŒ–å¯¹è±¡ newobj = JSON.parse(str); //è¿˜åŸ &#125; else &#123; for(var i in obj)&#123; newobj[i] = typeof obj[i] === 'object' ? cloneObj(obj[i]) : obj[i]; &#125; &#125; return newobj;&#125;; JSON.stringify()&amp;JSON.parse()å¯ä»¥è¿›è¡Œå¼•ç”¨å¯¹è±¡çš„æ‹·è´ï¼Œä½†æ˜¯å¯¹å¤è€æµè§ˆå™¨ï¼ˆIE6â€”IE8ï¼‰çš„å…¼å®¹æ€§é—®é¢˜å³ä½ å¾—å…ˆæŸ¥çœ‹ï¼ˆwindow.JSONï¼‰æµè§ˆå™¨æ˜¯å¦æœ‰ JSON å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰å¯ä»¥å¼•ç”¨ json2.js æ–‡ä»¶ã€‚å¦‚æœæ•°ç»„å€¼ä¸ºå‡½æ•°ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚ è¡¥å…… å°½ç®¡ pass-by-referenceï¼ˆå¼•ç”¨ä¼ é€’ï¼‰ä¸ pass-by-value ï¼ˆå€¼ä¼ é€’ï¼‰å­˜åœ¨äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯å¤–å›½å°å“¥æå‡ºäº†ä¸€ç§ pass-by-sharing çš„è¯´æ³•ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ã€‚Is JavaScript a pass-by-reference or pass-by-value language?","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"å€¼ä¼ é€’","slug":"å€¼ä¼ é€’","permalink":"https://i7eo.com/tags/å€¼ä¼ é€’/"},{"name":"æ·±æ‹·è´","slug":"æ·±æ‹·è´","permalink":"https://i7eo.com/tags/æ·±æ‹·è´/"}]},{"title":"æ‰‹æ’•é—­åŒ…","slug":"æ‰‹æ’•é—­åŒ…","date":"2017-05-12T11:24:19.000Z","updated":"2019-01-05T08:57:58.908Z","comments":true,"path":"2017/05/12/æ‰‹æ’•é—­åŒ….html","link":"","permalink":"https://i7eo.com/2017/05/12/æ‰‹æ’•é—­åŒ….html","excerpt":"æ—¢ç„¶è¯´åˆ°äº†æ‰‹æ’•é‚£ä¹ˆæˆ‘ä»¬å°±æŒ‰ç…§ä¸‹åˆ—é¡ºåºä¸€æ­¥æ­¥æ¥çœ‹ã€‚ é—­åŒ…æ˜¯ä»€ä¹ˆ? é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£ é—­åŒ…å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ é«˜ç¨‹ä¸‰ï¼šé—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚ Javasript Ninjaï¼šé—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°åœ¨åˆ›å»ºæ—¶å…è®¸è¯¥è‡ªèº«å‡½æ•°è®¿é—®å¹¶æ“ä½œè¯¥è‡ªèº«å‡½æ•°ä¹‹å¤–çš„å˜é‡æ—¶æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸã€‚ â€¦æ€»ç»“ä¸€ä¸‹ï¼Œé—­åŒ…æ˜¯æœ‰æƒæ“ä½œé™¤è‡ªå·±å¤–å‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚","text":"æ—¢ç„¶è¯´åˆ°äº†æ‰‹æ’•é‚£ä¹ˆæˆ‘ä»¬å°±æŒ‰ç…§ä¸‹åˆ—é¡ºåºä¸€æ­¥æ­¥æ¥çœ‹ã€‚ é—­åŒ…æ˜¯ä»€ä¹ˆ? é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£ é—­åŒ…å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ é«˜ç¨‹ä¸‰ï¼šé—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚ Javasript Ninjaï¼šé—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°åœ¨åˆ›å»ºæ—¶å…è®¸è¯¥è‡ªèº«å‡½æ•°è®¿é—®å¹¶æ“ä½œè¯¥è‡ªèº«å‡½æ•°ä¹‹å¤–çš„å˜é‡æ—¶æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸã€‚ â€¦æ€»ç»“ä¸€ä¸‹ï¼Œé—­åŒ…æ˜¯æœ‰æƒæ“ä½œé™¤è‡ªå·±å¤–å‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚ è¿™é‡Œå¯¹äºä¸Šé¢çš„æ€»ç»“æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æœ‰ä¸‰ç‚¹ï¼Œä¹Ÿå°±æ˜¯é—­åŒ…çš„ä¸‰ä¸ªç‰¹ç‚¹ã€‚é¦–å…ˆé—­åŒ…æ˜¯ä¸€ä¸ª å‡½æ•°ï¼Œå…¶æ¬¡é—­åŒ…å…·æœ‰æ“ä½œï¼ˆè¯»å†™ï¼‰é™¤è‡ªå·±å¤–å‡½æ•°ä½œç”¨åŸŸçš„èƒ½åŠ›ï¼Œæœ€åé—­åŒ…å¯ä»¥æ“ä½œï¼ˆè¯»å†™ï¼‰çš„æ˜¯ å˜é‡ã€‚ é—­åŒ…äº§ç”Ÿè¿‡ç¨‹è¯¦è§£è¿™é‡Œè¿˜æ˜¯å–å¤§å®¶å¸¸çœ‹çš„é«˜ç¨‹ä¸‰ä¸Šçš„ä¾‹å­æ¥ä¸¾ä¾‹è¯´æ˜ã€‚ 1234567891011121314151617function createComparisonFunction (propertyName) &#123; return function (obj1, obj2) &#123; var val1 = obj1[propertyName]; var val2 = obj2[propertyName]; if (val1 &lt; val2) &#123; return -1; &#125; else if (val1 &gt; val2) &#123; return 1; &#125; else &#123; return 0; &#125; &#125;&#125;var compareNames = createComparisonFunction(\"name\");var result = compareName(&#123; name: \"Nicholas\" &#125;, &#123; name: \"Greg\" &#125;); ä¸‹åˆ— AOï¼Œä»£è¡¨æ‰§è¡Œç¯å¢ƒä¸­åˆ›å»ºçš„ activity objectï¼Œå¯ä»¥å¯¹åº” variable objectï¼ˆVOï¼‰ æ¥è®°å¿†ã€‚æ­¤æ—¶ js å¼•æ“ä¸­çš„å¤„ç†é¡ºåºå¦‚ä¸‹å›¾ï¼š æ­¤æ—¶åŒ¿åå‡½æ•°ä¸­çš„val1/val2 è·å¾—äº† propertyName ï¼Œæ‹¥æœ‰äº†è¯»çš„èƒ½åŠ›ï¼Œæ‰€ä»¥å½¢æˆäº†é—­åŒ…ã€‚è€Œä¸”åœ¨åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒä¸­ä¸ä»…åŒ…æ‹¬äº†è‡ªå·±çš„ AO è¿˜åŒ…æ‹¬äº† createComparsonFunction æ‰§è¡Œç¯å¢ƒçš„ AOï¼ˆåˆ†åˆ«æœ‰ createComparson AO&amp;Global AOï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š ä»€ä¹ˆæ˜¯ VO? ä»€ä¹ˆæ˜¯æ‰§è¡Œç¯å¢ƒï¼Ÿå¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« æ‰‹æ’•ä½œç”¨åŸŸ&amp;ä¸Šä¸‹æ–‡ç”±ä¸Šæˆ‘ä»¬çŸ¥é“äº† é—­åŒ…å…¶å®åœ¨å½¢æˆçš„è¿‡ç¨‹ä¸­æºå¸¦äº†åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œæ­£å› ä¸ºå¦‚æ­¤ï¼Œæ‰€ä»¥é—­åŒ…æ‰æœ‰è¯»å†™é™¤è‡ªå·±å¤–å‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„èƒ½åŠ›ã€‚ä½†è¿™æ ·æ‹¥æœ‰è¿‡å¤šä½œç”¨åŸŸä¼šå ç”¨å¤§é‡å†…å­˜ ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ compareNames = null;æ¥æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ã€‚å¦‚æœå¤§é‡ä½¿ç”¨é—­åŒ…çš„è¯ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸ªä¸ªæ‰‹åŠ¨å»é‡Šæ”¾å†…å­˜ï¼Œæ‰€ä»¥è¿˜æ˜¯è¯·å¤§å®¶æ…ç”¨é—­åŒ…ã€‚ é—­åŒ…åº”ç”¨åœºæ™¯ç§æœ‰å˜é‡ â€”â€” é™åˆ¶å˜é‡ä½œç”¨åŸŸè¯´å¾—ç®€å•ç‚¹å°±æ˜¯æ¨¡æ‹Ÿå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„å˜é‡ä¿®é¥°ç¬¦ privateï¼Œç»™å˜é‡å¢åŠ æƒé™æ§åˆ¶ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112function Ninja () &#123; var feints = 0; this.getFeints = function () &#123; return feints; &#125;; this.feint = function () &#123; feints++; &#125;;&#125;var ninja = new Ninja();ninja.feint();console.log(ninja.getFeints() == 1); // true ä½¿å˜é‡ feints ç§æœ‰ï¼Œè®©å¤–éƒ¨ä¸èƒ½ç›´æ¥è®¿é—®ã€‚å¦‚æœæƒ³è®¿é—®åªèƒ½é€šè¿‡ getFeints æ–¹æ³•è®¿é—®ï¼Œè¿™é‡Œçš„ getFeints æ–¹æ³•å³å½¢æˆäº†é—­åŒ…ï¼Œå› ä¸ºåœ¨è¿™ä¸ªå‡½æ•°ä¸­æ‹¥æœ‰è®¿é—® feints å˜é‡çš„èƒ½åŠ›ã€‚è¿™é‡Œå¦‚æœå°† var feints = 0; æ”¹ä¸º this.feints = 0; å¤–éƒ¨å³å¯è®¿é—® =ã€‚= èªæ˜çš„ä½ ä¸€å®šä¸€çœ¼å°±çœ‹å‡ºäº†ä¸ºä»€ä¹ˆå§ï¼Ÿå°±æ˜¯å› ä¸ºä¸Šä¸‹æ–‡ï¼å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç«  æ‰‹æ’•ä½œç”¨åŸŸ&amp;ä¸Šä¸‹æ–‡ å›è°ƒï¼ˆcallbackï¼‰ä¸è®¡æ—¶å™¨ï¼ˆtimerï¼‰æ¥çœ‹ä¸€ä¸ªå›è°ƒçš„ä¾‹å­ã€‚å¦‚ä¸‹ï¼š 1234567891011$('#btn').click(function () &#123; var elem = $('btnObject'); elem.html(\"Loading ...\"); $.ajax(&#123; url: 'test.html', success: function (data) &#123; elem.html(data); &#125; &#125;);&#125;); åœ¨ success å›è°ƒä¸­æœ‰èƒ½åŠ›æ“ä½œ elem ï¼Œå³å½¢æˆäº†é—­åŒ…ã€‚è®¡æ—¶å™¨ç±»ä¼¼ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»å†™å†™ç±»ä¼¼çš„ã€‚ å³æ—¶å‡½æ•°ä¸é—­åŒ…çš„ç»„åˆ ç”±äºå³æ—¶å‡½æ•°æ˜¯ç«‹å³æ‰§è¡Œï¼Œå…¶å†…éƒ¨æ‰€æœ‰çš„å‡½æ•°ã€æ‰€æœ‰çš„å˜é‡éƒ½å±€é™äºå…¶å†…éƒ¨ä½œç”¨åŸŸ&gt;ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å³æ—¶å‡½æ•°åˆ›å»ºä¸€ä¸ªä¸´æ—¶ä½œç”¨åŸŸï¼Œç”¨äºå­˜å‚¨æ•°æ®çŠ¶æ€ã€‚æƒ³èµ·ä¸€åˆ°ç»å…¸çš„ JSé¢˜ç›®ã€‚ä»£ç å¦‚ä¸‹ï¼š 123456789function createFuntcions () &#123; var result = []; for (var i = 0; i &lt; 10; i++) &#123; result[i] = function () &#123; return i; &#125;; &#125; return result; &#125; ä¸ºä»€ä¹ˆ result æ€»æ˜¯10ï¼Ÿå› ä¸ºæ¯ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­éƒ½ä¿å­˜ç€createFunction çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥ä»–ä»¬å¼•ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå˜é‡ i ã€‚å½“ createFunction è¿”å›å i çš„å€¼ä¸º 10 ï¼Œæ­¤æ—¶æ¯ä¸ªå‡½æ•°éƒ½å¼•ç”¨ç€ä¿å­˜å˜é‡ i çš„åŒä¸€ä¸ªå˜é‡å¯¹è±¡ï¼Œæ‰€ä»¥æ¯ä¸ªå‡½æ•°å†…éƒ¨ i çš„å€¼éƒ½æ˜¯10ã€‚(æ‰€æœ‰å‡½æ•°éƒ½æ‹¥æœ‰çš„æ˜¯åŒä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸï¼Œè¦æƒ³ä½¿æ¯ä¸€ä¸ªé—­åŒ…ä¿ç•™å½“æ—¶çš„å¯¹içš„å¼•ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸€ä¸ªé—­åŒ…æ–°å»ºä¸€ä¸ªä½œç”¨åŸŸã€‚)å¯ä»¥ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°&amp;letåˆ›å»ºå‡½æ•°ä½œç”¨åŸŸ&amp;å—çº§ä½œç”¨åŸŸæ”¹è¿›ä»£ç å¦‚ä¸‹ï¼š 123456789function createFuntcions () &#123; var result = []; for (var i = 0; i &lt; 10; i++) &#123; result[i] = (function (i) &#123; return i; &#125;)(i); &#125; return result; &#125; 12345for (let i = 0; i &lt; 10; i++) &#123; result[i] = function (i) &#123; return i; &#125;;&#125;","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"https://i7eo.com/tags/é—­åŒ…/"}]},{"title":"æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡","slug":"æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡","date":"2017-05-10T11:37:58.000Z","updated":"2019-01-05T08:21:05.623Z","comments":true,"path":"2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡.html","link":"","permalink":"https://i7eo.com/2017/05/10/æ‰‹æ’•ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡.html","excerpt":"å…ˆæ¥æŠ›å‡ºç»“è®ºï¼š ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡è‚¯å®šä¸æ˜¯ä¸€å›äº‹ã€‚ ä½œç”¨åŸŸæ˜¯ç”± function è¿›è¡Œå£°æ˜çš„è€Œéä»£ç å—ï¼ˆ{ }ï¼‰ã€‚ é™¤äº†å…¨å±€ä½œç”¨åŸŸï¼Œå‡½æ•°åªè¦è¢«å£°æ˜ï¼ˆåˆ›å»ºäº†ï¼‰ï¼Œå®ƒå°±æœ‰äº†ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚ æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯ thisï¼Œè¿™é‡Œå…¶å®å¯¹ this æ›´å‡†ç¡®çš„è¯´æ³•åº”è¯¥è¢«ç§°ä¸ºå‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆfunction contextï¼‰ã€‚ å„å¤§ç½‘æ–‡ä¸éƒ¨åˆ†ä¹¦ç±ä¸­æ‰€è®²è§£çš„ä¸Šä¸‹æ–‡ï¼Œå…¶å®æ˜¯æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰æœ‰çš„åœ°æ–¹ä¹Ÿç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒã€‚è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸ä»…ç¡®å®šäº† this ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰ï¼Œè¿˜ç¡®å®šäº†å°†å„ä¸ªä½œç”¨åŸŸè”ç³»èµ·æ¥çš„ä½œç”¨åŸŸé“¾ã€‚ æ‰§è¡Œç¯å¢ƒå¹¶ä¸æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯ç”¨æ¥ç¡®å®šå®ƒçš„æŒ‡å‘ã€‚ æœ¬æ–‡ä¸­å°†é‡‡ç”¨é«˜ç¨‹3çš„è¯´æ³• â€” æ‰§è¡Œç¯å¢ƒã€‚ ä½œç”¨åŸŸåœ¨ Javascript ä¸­ï¼Œä½œç”¨åŸŸæ˜¯ç”± function å£°æ˜çš„ï¼Œè€Œä¸æ˜¯ä»£ç å—ã€‚å£°æ˜çš„ä½œç”¨åŸŸåˆ›å»ºäºä»£ç å—ï¼Œä½†ä¸ç»ˆäºä»£ç å—ï¼ˆå…¶ä»–è¯­è¨€ç»ˆäºä»£ç å—ï¼‰ã€‚æŸ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š 1234if (window) &#123; var x = '123'; &#125; alert(x); åœ¨å…¶å®ƒè¯­è¨€ä¸­ï¼Œx ç»ˆç»“äºå¤§æ‹¬å·å…³é—­å¤„ï¼Œalert å¼¹å‡º undefinedã€‚","text":"å…ˆæ¥æŠ›å‡ºç»“è®ºï¼š ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡è‚¯å®šä¸æ˜¯ä¸€å›äº‹ã€‚ ä½œç”¨åŸŸæ˜¯ç”± function è¿›è¡Œå£°æ˜çš„è€Œéä»£ç å—ï¼ˆ{ }ï¼‰ã€‚ é™¤äº†å…¨å±€ä½œç”¨åŸŸï¼Œå‡½æ•°åªè¦è¢«å£°æ˜ï¼ˆåˆ›å»ºäº†ï¼‰ï¼Œå®ƒå°±æœ‰äº†ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚ æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯ thisï¼Œè¿™é‡Œå…¶å®å¯¹ this æ›´å‡†ç¡®çš„è¯´æ³•åº”è¯¥è¢«ç§°ä¸ºå‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆfunction contextï¼‰ã€‚ å„å¤§ç½‘æ–‡ä¸éƒ¨åˆ†ä¹¦ç±ä¸­æ‰€è®²è§£çš„ä¸Šä¸‹æ–‡ï¼Œå…¶å®æ˜¯æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰æœ‰çš„åœ°æ–¹ä¹Ÿç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒã€‚è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸ä»…ç¡®å®šäº† this ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰ï¼Œè¿˜ç¡®å®šäº†å°†å„ä¸ªä½œç”¨åŸŸè”ç³»èµ·æ¥çš„ä½œç”¨åŸŸé“¾ã€‚ æ‰§è¡Œç¯å¢ƒå¹¶ä¸æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯ç”¨æ¥ç¡®å®šå®ƒçš„æŒ‡å‘ã€‚ æœ¬æ–‡ä¸­å°†é‡‡ç”¨é«˜ç¨‹3çš„è¯´æ³• â€” æ‰§è¡Œç¯å¢ƒã€‚ ä½œç”¨åŸŸåœ¨ Javascript ä¸­ï¼Œä½œç”¨åŸŸæ˜¯ç”± function å£°æ˜çš„ï¼Œè€Œä¸æ˜¯ä»£ç å—ã€‚å£°æ˜çš„ä½œç”¨åŸŸåˆ›å»ºäºä»£ç å—ï¼Œä½†ä¸ç»ˆäºä»£ç å—ï¼ˆå…¶ä»–è¯­è¨€ç»ˆäºä»£ç å—ï¼‰ã€‚æŸ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š 1234if (window) &#123; var x = '123'; &#125; alert(x); åœ¨å…¶å®ƒè¯­è¨€ä¸­ï¼Œx ç»ˆç»“äºå¤§æ‹¬å·å…³é—­å¤„ï¼Œalert å¼¹å‡º undefinedã€‚ ä½†æ˜¯è¿™é‡Œè¿˜æ˜¯ä¼šå‡ºç° 123ï¼Œè¿™æ˜¯å› ä¸ºJavascript ä¸­å¹¶æ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„æ¦‚å¿µã€‚è¿™æ ·çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯å…¶ä¸­è¿˜æ˜¯æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ã€‚å¦‚ä¸‹ï¼š å˜é‡å£°æ˜çš„ä½œç”¨åŸŸå¼€å§‹äºå£°æ˜å¼€å§‹çš„åœ°æ–¹ï¼Œç»“æŸäºæ‰€åœ¨å‡½æ•°çš„ç»“å°¾ã€‚ å‡½æ•°å¯ä»¥åœ¨å…¶ä½œç”¨åŸŸèŒƒå›´å†…è¢«æå‰å¼•ç”¨ï¼ˆè¢«æå‡ï¼‰ï¼Œä½†å˜é‡ä¸è¡Œã€‚ å¯¹äºä½œç”¨åŸŸå£°æ˜ï¼Œå…¨å±€ä½œç”¨åŸŸå°±åƒä¸€ä¸ªåŒ…å«é¡µé¢æ‰€æœ‰ä»£ç çš„è¶…å¤§å‹å‡½æ•°ã€‚ å‡½æ•°æå‡çš„è¯¦ç»†åŸå› å‚ç…§ä¸‹è¿°çš„ ä¸‰ã€æ‰§è¡Œç¯å¢ƒ ä¸­çš„å†…å®¹ã€‚ æ¥çœ‹ä¸‹é¢ä»£ç ï¼š å¯¹äºè¿™æ®µä»£ç ï¼Œæ‰§è¡Œè°ƒç”¨ outer() æ—¶ï¼Œouter å‡½æ•°ä¸­æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œä»£ç ï¼Œå½“è¿›å…¥ç¬¬2è¡Œæ—¶ï¼ˆåœ¨ outer ä¸­ï¼Œå˜é‡ a å£°æ˜å‰ï¼‰ï¼Œinner å·²ç»åœ¨ä½œç”¨åŸŸï¼ˆscopeï¼‰ä¸­ï¼Œæ­¤æ—¶ä½œç”¨åŸŸä¸­æœ‰ outer () ä¸ inner()ã€‚ä¹‹åæ‰§è¡Œç¬¬ 2 è¡Œï¼Œç°åœ¨ a ä¹Ÿåœ¨ scope ä¸­ã€‚å½“è¿›å…¥ç¬¬ 4 è¡Œæ—¶ï¼ˆåœ¨ outer ä¸­ï¼Œinner() ä¸ a ä¹‹åï¼‰ï¼Œç”±äºå‡½æ•°å£°æ˜æå‰è¿™é‡Œç¬¬ 3 è¡Œç›¸å½“äºå·²ç»æå‰æ‰§è¡Œï¼Œæ‰€ä»¥è¶Šè¿‡ç¬¬ 3 è¡Œï¼Œç›´æ¥æ‰§è¡Œç¬¬ 4 è¡Œã€‚åé¢è¿‡ç¨‹ä»¥æ­¤ç±»æ¨ã€‚ ä¸Šä¸‹æ–‡ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„ thisï¼‰åœ¨å¼€å§‹ä¸Šä¸‹æ–‡ä¹‹å‰æˆ‘ä»¬éœ€è¦æ˜ç™½æˆ‘ä»¬ç ”ç©¶çš„ this æ˜¯ä»å“ªé‡Œæ¥çš„ã€‚å…¶å®è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œåœ¨æˆ‘ä»¬è°ƒç”¨å‡½æ•°çš„æ—¶å€™å…³æ³¨ç‚¹æ€»æ˜¯åœ¨å¯ä»¥çœ‹åˆ°çš„å‡½æ•°å‚æ•°ä¸Šé¢ï¼Œè€Œæ²¡æœ‰æ³¨æ„åˆ°ä¿©ä¸ªéšå¼ï¼ˆimplicitï¼‰å‚æ•°â€”â€” arguments ä¸ thisã€‚arguments å‚æ•°æ˜¯ä¼ é€’ç»™å‡½æ•°çš„ä¸€ä¸ªæ‰€æœ‰å‚æ•°çš„é›†åˆï¼Œå®ƒæœ¬è´¨ä¸æ˜¯æ•°ç»„ä½†æ˜¯æœ‰ length å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å–œæ¬¢å«å®ƒç±»æ•°ç»„ã€‚this å‚æ•°å¼•ç”¨äº†ä¸è¯¥å‡½æ•°è°ƒç”¨è¿›è¡Œéšå¼å…³è”çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ï¼‰ï¼Œè¢«ç§°ä¸ºå‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆfunction contextï¼‰ã€‚ ä¸åŒçš„æ–¹æ³•è¿›è¡Œå‡½æ•°è°ƒç”¨å†³å®šäº†å‡½æ•°ä¸Šä¸‹æ–‡çš„ä¸åŒã€‚æ€»ç»“å¦‚ä¸‹ï¼š ä½œä¸ºæ™®é€šå‡½æ•°è¿›è¡Œè°ƒç”¨æ—¶ï¼Œå…¶ä¸Šä¸‹æ–‡æ˜¯å…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰ã€‚ ä½œä¸ºæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œå…¶ä¸Šä¸‹æ–‡æ˜¯æ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡ã€‚ ä½œä¸ºæ„é€ å™¨è¿›è¡Œè°ƒç”¨æ—¶ï¼Œå…¶ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªæ–°åˆ†é…çš„å¯¹è±¡ã€‚ é€šè¿‡å‡½æ•°çš„ apply/call æ–¹æ³•è¿›è¡Œè°ƒç”¨æ—¶ï¼Œä¸Šä¸‹æ–‡å¯ä»¥è®¾ç½®æˆä»»æ„å€¼ã€‚ å¯¹äºä¸Šè¿°çš„ 1ã€2 ç‚¹æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š 1-4 è¡Œä»£ç ï¼Œéƒ½æ˜¯ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œä¸Šä¸‹æ–‡ä¸ºwindowã€‚6-12 è¡Œä»£ç ï¼Œéƒ½æ˜¯åšä¸ºæ–¹æ³•è°ƒç”¨ï¼Œä¸Šä¸‹æ–‡æ˜¯æ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡ï¼ˆninja1ã€ninja2ï¼‰ã€‚å¯¹äºç¬¬ 3 ç‚¹æˆ‘ä»¬æ¥çœ‹ä¸‹åˆ—ä»£ç ï¼š è¿™æ—¶çš„ä¸Šä¸‹æ–‡æŒ‡æ–°åˆ›å»ºçš„ ninja ï¼Œé€šè¿‡ç¬¬ 8 è¡Œä»£ç æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç° skulk æ–¹æ³•è¿”å›çš„æ˜¯æ„é€ å™¨å¯¹è±¡æœ¬èº«ã€‚å¯¹äºç¬¬ 4 ç‚¹æˆ‘ä»¬æ¥çœ‹ä¸‹åˆ—ä»£ç ï¼š é€šè¿‡ apply&amp;call æˆ‘ä»¬å¯ä»¥åˆ†åˆ«å°†ä¸Šä¸‹æ–‡ä» juggle åˆ‡æ¢è‡³ ninja1&amp;ninja2ã€‚ å¯¹äº apply&amp;call æˆ‘ä»¬å¾ˆå¸¸ç”¨ï¼Œæ‰€ä»¥æ‰©å±•ä¹Ÿå¾ˆå¤šã€‚ä¸‹é¢åˆ—å‡ºä¸€ä¸ªè‡ªå®šä¹‰ forEach å‡½æ•°ï¼š è¿™ä¸ªä¾‹å­ï¼Œåˆ—å‡ºäº†å¦‚ä½•åœ¨å›è°ƒä¸­æŒ‡å®šä¸Šä¸‹æ–‡ï¼Œè€Œåœ¨è¿™é‡Œçš„9-12è¡Œæˆ‘ä»¬ä¹ŸéªŒè¯äº†å¦‚ä¸Šæ‰€è¯´çš„ï¼Œthis ï¼ˆä¸Šä¸‹æ–‡ï¼‰æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å› ä¸ºåœ¨ç¬¬ 3 è¡Œä»£ç å¤„ï¼Œæˆ‘ä»¬ä¼ å…¥çš„ List[i] çš„ç±»å‹æ˜¯ stringï¼Œä½†æ˜¯ç»è¿‡ call å°†å…¶æŒ‡å®šæˆä¸Šä¸‹æ–‡å¯¹è±¡ååœ¨ç¬¬ 10 è¡Œæˆ‘ä»¬æ¯”è¾ƒæ—¶å‘ç° this === heroList[index] ç»“æœä¸º falseï¼Œç¬¬ 11 è¡ŒéªŒè¯äº†ä¸Šä¸‹æ–‡ç¡®å®æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ª String å¯¹è±¡å…·ä½“ä¿¡æ¯å°±ä¸å†æ·±ç©¶äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æ‰“å° this å‡ºæ¥çœ‹çœ‹ã€‚ æ‰§è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰ è¿™é‡Œå†æ¬¡é‡æ–°å£°æ˜ï¼Œæ‰§è¡Œç¯å¢ƒå¹¶ä¸æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯ thisï¼ˆå‡½æ•°ä¸Šä¸‹æ–‡ï¼‰ã€‚è¯¥æ‰§è¡Œç¯å¢ƒç¡®å®šäº†ä½œç”¨åŸŸé“¾ï¼ˆscope chainï¼‰ä¸ this ã€‚æ¥ä¸€æ®µé«˜ç¨‹ä¸‰ä¸­å¯¹äºæ‰§è¡Œç¯å¢ƒçš„ä»‹ç»å¦‚ä¸‹ï¼š æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼Œä¸ºç®€å•èµ·è§ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºâ€œç¯å¢ƒâ€ï¼‰æ˜¯Javascriptä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡å’Œå‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œå†³å®šäº†å®ƒä»¬å„è‡ªçš„è¡Œä¸ºã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œä½†è§£æå™¨åœ¨å¤„ç†æ•°æ®æ—¶ä¼šåœ¨åå°ä½¿ç”¨å®ƒã€‚ å…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å›´çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒã€‚æ ¹æ®ECMAScript å®ç°æ‰€åœ¨å®¿ä¸»ç¯å¢ƒä¸åŒï¼Œè¡¨ç¤ºæ‰§è¡Œç¯å¢ƒçš„å¯¹è±¡ä¹Ÿä¸ä¸€æ ·ã€‚åœ¨Webæµè§ˆå™¨ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒè¢«è®¤ä¸ºæ˜¯ window å¯¹è±¡ï¼Œå› æ­¤æ‰€æœ‰å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½æ˜¯ä½œä¸º window å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•åˆ›å»ºçš„ã€‚æŸä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥ç¯å¢ƒè¢«é”€æ¯ï¼Œä¿å­˜åœ¨å…¶ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å®šä¹‰ä¹Ÿéšä¹‹é”€æ¯ï¼ˆå…¨å±€æ‰§è¡Œç¯å¢ƒç›´åˆ°åº”ç”¨ç¨‹åºé€€å‡ºâ€”â€”ä¾‹å¦‚å…³é—­ç½‘é¡µæˆ–æµè§ˆå™¨â€”â€”æ—¶æ‰ä¼šè¢«é”€æ¯ï¼‰ã€‚ æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒã€‚å½“æ‰§è¡Œç¯å¢ƒæµå…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ã€‚è€Œåœ¨å‡½æ•°æ‰§è¡Œä¹‹åï¼Œæ ˆå°†å…¶ç¯å¢ƒå¼¹å‡ºï¼ŒæŠŠæ§åˆ¶æƒè¿”å›ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚ECMAScript ç¨‹åºä¸­çš„æ‰§è¡Œæµæ­£åœ¨ç”±è¿™ä¸ªæ–¹ä¾¿çš„æœºåˆ¶æ§åˆ¶ç€ã€‚ ç®€æ´æ˜äº†ï¼Œè¿™é‡Œå¯¹äºçº¯æ–‡å­—çœ‹ç€å¯èƒ½æ¯”è¾ƒè‹¦æ¶©ã€‚æ¥ä¸ªå›¾ç‰‡ä»¥åŠä¾‹å­ï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€æ¶ˆåŒ–ã€‚ä¸‹é¢å…ˆç»™å‡º js å¼•æ“æ‰§è¡Œå‡½æ•°æ—¶çš„è¿›å‡ºæ ˆå›¾ã€‚ æ ¹æ®è¿™å¹…å›¾ï¼Œå¤§å®¶ç»“åˆä¸‹é¢ä»£ç ä¸ executionContextAction.gif å¯ä»¥å¾ˆæ¸…æ¥šçš„ç†è§£jsçº¿ç¨‹å·¥ä½œçš„æ–¹å¼ã€‚ä»£ç ç‰‡æ®µï¼š 12345678(function foo(i) &#123; if (i === 3) &#123; return; &#125; else &#123; foo(++i); &#125;&#125;(0)); è¿™ä¸ªä»£ç å¯¹åº”å¼•æ“å¤„ç†å‡½æ•°çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š åœ¨ææ¸…æ¥šäº†å¼•æ“å·¥ä½œçš„æ–¹å¼åï¼Œæˆ‘ä»¬è¿˜å¾—çŸ¥é“æ‰§è¡Œç¯å¢ƒåœ¨å»ºç«‹çš„æ—¶å€™å‘ç”Ÿçš„è¯¦ç»†è¿‡ç¨‹ã€‚å»ºç«‹é˜¶æ®µä»¥åŠä»£ç æ‰§è¡Œé˜¶æ®µçš„è¯¦ç»†åˆ†æå¦‚ä¸‹ï¼š ç¡®åˆ‡åœ°è¯´ï¼Œæ‰§è¡Œç¯å¢ƒæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“è¢«çœŸæ­£æ‰§è¡Œä»¥å‰æ‰€åˆ›å»ºçš„ã€‚å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå°±å¤„äºç¬¬ä¸€ä¸ªé˜¶æ®µâ€”â€”å»ºç«‹é˜¶æ®µã€‚è¿™ä¸ªæ—¶åˆ»ï¼Œå¼•æ“ä¼šæ£€æŸ¥å‡½æ•°ä¸­çš„å‚æ•°ï¼Œå£°æ˜çš„å˜é‡ä»¥åŠå†…éƒ¨å‡½æ•°ï¼Œç„¶ååŸºäºè¿™äº›ä¿¡æ¯å»ºç«‹æ‰§è¡Œç¯å¢ƒä¸­ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒvariableObject å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ï¼Œä»¥åŠ this æ‰€æŒ‡å‘çš„å¯¹è±¡éƒ½ä¼šè¢«ç¡®å®šã€‚ å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š æ‰¾åˆ°å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„è°ƒç”¨å‡½æ•°çš„ä»£ç  åœ¨æ‰§è¡Œè¢«è°ƒç”¨çš„å‡½æ•°ä½“ä¸­çš„ä»£ç ä»¥å‰ï¼ˆç¼–è¯‘é˜¶æ®µï¼‰ï¼Œå¼€å§‹åˆ›å»ºæ‰§è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡/æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰ è¿›å…¥ç¬¬ä¸€ä¸ªé˜¶æ®µ-å»ºç«‹é˜¶æ®µ: å»ºç«‹variableObjectå¯¹è±¡: å»ºç«‹argumentså¯¹è±¡ï¼Œæ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ï¼Œå»ºç«‹è¯¥å¯¹è±¡ä¸‹çš„å±æ€§ä»¥åŠå±æ€§å€¼ ç¡®å®šå‚æ•°å˜é‡ï¼Œè‹¥æœ‰é‡åï¼Œä»¥å·²æœ‰çš„å˜é‡ä¸ºå‡†ã€‚ç”¨å·²æœ‰çš„å˜é‡å»è¦†ç›–å‚æ•°å˜é‡ æ£€æŸ¥å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å‡½æ•°å£°æ˜ï¼š æ¯æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œå°±åœ¨variableObjectä¸‹é¢ç”¨å‡½æ•°åå»ºç«‹ä¸€ä¸ªå±æ€§ï¼Œå±æ€§å€¼å°±æ˜¯æŒ‡å‘è¯¥å‡½æ•°åœ¨å†…å­˜ä¸­çš„åœ°å€çš„ä¸€ä¸ªå¼•ç”¨ã€‚ å¦‚æœä¸Šè¿°å‡½æ•°åå·²ç»å­˜åœ¨äºvariableObjectä¸‹ï¼Œé‚£ä¹ˆå¯¹åº”çš„å±æ€§å€¼ä¼šè¢«æ–°çš„å¼•ç”¨æ‰€è¦†ç›–ã€‚ æ£€æŸ¥å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡å£°æ˜ï¼š æ¯æ‰¾åˆ°ä¸€ä¸ªå˜é‡çš„å£°æ˜ï¼Œå°±åœ¨variableObjectä¸‹ï¼Œç”¨å˜é‡åå»ºç«‹ä¸€ä¸ªå±æ€§ï¼Œå±æ€§å€¼ä¸ºundefinedã€‚ å¦‚æœè¯¥å˜é‡åå·²ç»å­˜åœ¨äºvariableObjectå±æ€§ä¸­ï¼Œç›´æ¥è·³è¿‡ï¼ˆé˜²æ­¢æŒ‡å‘å‡½æ•°çš„å±æ€§çš„å€¼è¢«å˜é‡å±æ€§è¦†ç›–ä¸ºundefinedï¼‰ï¼ŒåŸå±æ€§å€¼ä¸ä¼šè¢«ä¿®æ”¹ã€‚ åˆå§‹åŒ–ä½œç”¨åŸŸé“¾ ç¡®å®šä¸Šä¸‹æ–‡ â€” thisï¼ˆç¡®å®šæŒ‡å‘ï¼‰ ä»£ç æ‰§è¡Œé˜¶æ®µ: æ‰§è¡Œå‡½æ•°ä½“ä¸­çš„ä»£ç ï¼Œä¸€è¡Œä¸€è¡Œåœ°è¿è¡Œä»£ç ï¼Œç»™variableObjectä¸­çš„å˜é‡å±æ€§èµ‹å€¼ã€‚ æ¥ä¸ªä¾‹å­æ¥æ¨¡æ‹Ÿå¼•æ“çš„æ‰§è¡Œè¿‡ç¨‹ã€‚å¦‚ä¸‹ï¼š åœ¨è°ƒç”¨ testEC(11) æ—¶ï¼ŒçœŸæ­£æ‰§è¡Œ testEC(11) ä¹‹å‰ï¼Œå»ºç«‹ä»¥ä¸‹é˜¶æ®µï¼š ç”±æ­¤å¯è§ï¼Œåœ¨å»ºç«‹é˜¶æ®µï¼Œé™¤äº†argumentsï¼Œå‡½æ•°çš„å£°æ˜ï¼Œä»¥åŠå‚æ•°è¢«èµ‹äºˆäº†å…·ä½“çš„å±æ€§å€¼ï¼Œå…¶å®ƒçš„å˜é‡å±æ€§é»˜è®¤çš„éƒ½æ˜¯undefinedã€‚ä¸€æ—¦ä¸Šè¿°å»ºç«‹é˜¶æ®µç»“æŸï¼Œå¼•æ“å°±ä¼šè¿›å…¥ä»£ç æ‰§è¡Œé˜¶æ®µã€‚å¦‚ä¸‹ï¼š é‚£ä¹ˆé€šè¿‡ä¸Šé¢ä¾‹å­ä¸­çš„ä¸‰å¼ å›¾ç‰‡æˆ‘ä»¬èƒ½å¦å‘ç°åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­å…³äºæå‡çš„ä¸€äº›ç§˜å¯†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼åœ¨ testEC-prev.png ä¸­ c å‡½æ•° æ˜¯è¢«æå‡çš„ï¼å› ä¸ºåœ¨å»ºç«‹é˜¶æ®µc: pointer to function c ()ï¼Œè€Œ b ä¸ a å‡æ˜¯ undefinedï¼Œç”±å›¾ä¸Šæ˜¾è€Œæ˜“è§ã€‚ è¡¥å……æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸçš„å…³ç³» åœ¨æ‰§è¡Œç¯å¢ƒä¸­é¦–å…ˆæˆ‘ä»¬å°†å‚æ•°ã€å˜é‡ç­‰éƒ½å­˜åœ¨ VOï¼ˆå˜é‡å¯¹è±¡ä¸­ï¼‰ï¼Œè¿™æ˜¯ç¡®ç¡®å®å®å­˜åœ¨çš„ï¼Œåªèƒ½ä¾›å†…éƒ¨ä½¿ç”¨ã€‚ æ‰§è¡Œç¯å¢ƒåªåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»º æ‰§è¡Œå‡½æ•°æ—¶ VO -&gt; AOï¼ˆæ´»åŠ¨å¯¹è±¡ï¼‰ è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨äº† ä¸€ä¸ªä½œç”¨åŸŸä¸‹å¯ä»¥æ²¡æœ‰æ‰§è¡Œç¯å¢ƒï¼ˆæœªè¢«è°ƒç”¨ï¼‰ï¼›å¯ä»¥æœ‰1ä¸ªï¼›è¿˜å¯ä»¥æœ‰è‹¥å¹²ä¸ªï¼ˆå­˜åœ¨é—­åŒ…ï¼‰ å¦‚ä½•åœ¨ callback ä¸­ç»‘å®šthisåœ¨ div èŠ‚ç‚¹äº‹ä»¶å‡½æ•°å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªå±€éƒ¨çš„ callback æ–¹æ³•ï¼Œcallback è¢«ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨æ—¶ï¼Œcallback å†…éƒ¨çš„ this æŒ‡å‘äº† windowï¼Œä½†æˆ‘ä»¬å¾€å¾€æƒ³è®©å®ƒæŒ‡å‘è¯¥ div èŠ‚ç‚¹ã€‚å¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt; &lt;div id=\"test\"&gt;I am a div!&lt;/div&gt; &lt;script&gt; window.id = 'window'; document.getElementById('test').onclick = function () &#123; alert(this.id); // test var callback = function () &#123; alert(this.id); // window &#125;; callback(); &#125;; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡ä¿å­˜ div èŠ‚ç‚¹çš„å¼•ç”¨ï¼š 1234567document.getElementById('test').onclick = function () &#123; var that = this; // ä¿å­˜ div èŠ‚ç‚¹å¼•ç”¨ var callback = function () &#123; alert(that.id); // test &#125;; callback(); &#125;; 123456789101112131415161718192021222324252627282930&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=utf-8 /&gt; &lt;title&gt;Events in JavaScript: Removing event listeners&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;button id=\"element\"&gt;Click Me&lt;/button&gt; &lt;script src=\"https://code.jquery.com/jquery-1.10.2.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&lt;script&gt;//var element = document.getElementById('element');var element = $('#element');var user = &#123; firstname: 'Bob', greeting: function()&#123; alert('My name is ' + this.firstname); &#125;&#125;;function bind (obj, name) &#123; return obj[name].apply(obj);&#125;// Attach user.greeting as a callback//element.addEventListener('click', bind(user, 'greeting'));element.on('click', user.greeting.bind(user))&lt;/script&gt; è¿™ä¸ªä¾‹å­æ˜¯å‘Šè¯‰æˆ‘ä»¬æ— è®ºåŸç”Ÿjsè¿˜æ˜¯jqueryåœ¨ä½¿ç”¨äº‹ä»¶å‡½æ•°è°ƒç”¨æ‰§è¡Œæ–¹æ³•æ—¶å‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆthisï¼‰é»˜è®¤æŒ‡å½“å‰è·å–çš„domå…ƒç´ ï¼ˆjqå¯¹è±¡ï¼‰æ‰€ä»¥å½“æˆ‘ä»¬å¸Œæœ›å½“å‰å‡½æ•°ä¸Šä¸‹æ–‡æŒ‡å‘useræ—¶æˆ‘ä»¬åº”è¯¥æ”¹å˜å‡½æ•°ä¸Šä¸‹æ–‡å³æ”¹å˜thisçš„æŒ‡å‘ã€‚æ”¹å˜çš„æ–¹æ³•æœ‰ä¸‰ç§apply/call/bindã€‚ å‚è€ƒèµ„æ–™ï¼š Javascripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬3ç‰ˆï¼‰ Javascript Ninja æ·±å…¥ç†è§£Javascriptä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡(Execution Context) æ·±å…¥ç†è§£javascriptåŸå‹å’Œé—­åŒ…ï¼ˆ18ï¼‰â€”â€”è¡¥å……ï¼šä¸Šä¸‹æ–‡ç¯å¢ƒå’Œä½œç”¨åŸŸçš„å…³ç³» æœ€è¯¦ç»†çš„JavaScriptå’Œäº‹ä»¶è§£è¯»","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"ä½œç”¨åŸŸ","slug":"ä½œç”¨åŸŸ","permalink":"https://i7eo.com/tags/ä½œç”¨åŸŸ/"},{"name":"ä¸Šä¸‹æ–‡","slug":"ä¸Šä¸‹æ–‡","permalink":"https://i7eo.com/tags/ä¸Šä¸‹æ–‡/"},{"name":"æ‰§è¡Œç¯å¢ƒ","slug":"æ‰§è¡Œç¯å¢ƒ","permalink":"https://i7eo.com/tags/æ‰§è¡Œç¯å¢ƒ/"}]},{"title":"cssæ°´å¹³å‚ç›´å±…ä¸­","slug":"cssæ°´å¹³å‚ç›´å±…ä¸­","date":"2017-04-01T12:52:22.000Z","updated":"2019-01-05T06:05:26.310Z","comments":true,"path":"2017/04/01/cssæ°´å¹³å‚ç›´å±…ä¸­.html","link":"","permalink":"https://i7eo.com/2017/04/01/cssæ°´å¹³å‚ç›´å±…ä¸­.html","excerpt":"æ°´å¹³å‚ç›´å±…ä¸­æ°´å¹³å‚ç›´å±…ä¸­æ˜¯è€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œä¹Ÿæ˜¯é¢è¯•å®˜æ¯”è¾ƒå–œæ¬¢é—®çš„é—®é¢˜ã€‚ä¸‹é¢æˆ‘å¯¹åœ¨å®é™…ä¸­å¸¸å¸¸è¿ç”¨çš„å‡ ç§æ–¹å¼åšæ€»ç»“ã€‚HTMLç»“æ„å¦‚ä¸‹(è¿™é‡Œæˆ‘é»˜è®¤wrapperæ°´å¹³å‚ç›´å±…ä¸­)ï¼š 123 &lt;div class=\"wrapper\"&gt;&lt;div class=\"goal\"&gt;&lt;/div&gt; &lt;/div&gt;","text":"æ°´å¹³å‚ç›´å±…ä¸­æ°´å¹³å‚ç›´å±…ä¸­æ˜¯è€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œä¹Ÿæ˜¯é¢è¯•å®˜æ¯”è¾ƒå–œæ¬¢é—®çš„é—®é¢˜ã€‚ä¸‹é¢æˆ‘å¯¹åœ¨å®é™…ä¸­å¸¸å¸¸è¿ç”¨çš„å‡ ç§æ–¹å¼åšæ€»ç»“ã€‚HTMLç»“æ„å¦‚ä¸‹(è¿™é‡Œæˆ‘é»˜è®¤wrapperæ°´å¹³å‚ç›´å±…ä¸­)ï¼š 123 &lt;div class=\"wrapper\"&gt;&lt;div class=\"goal\"&gt;&lt;/div&gt; &lt;/div&gt; æœ‰ç¡®å®šçš„å®½é«˜ä¸€èˆ¬å¸¸ç”¨åœ¨åŒ…å«ä¼—å¤šdivçš„å®¹å™¨å±‚(å¸¸ç§°ä¸ºwrapperï¼Œè¿™é‡Œä¸€èˆ¬ç¾å·¥éƒ½ä¼šæ ‡æ³¨å¥½å®½é«˜)ã€‚ 123456789101112131415161718 .wrapper &#123; position: absolute; top: 50%; left: 50%; margin: -100px 0 0 -100px; width: 200px; height: 200px; background-color: #ccc;&#125;.goal &#123; position: relative; top: 50%; left: 50%; margin: -50px 0 0 -50px; width: 100px; height: 100px; background-color: deeppink; &#125; è¿™æ ·å°±å®ç°äº†goalæ°´å¹³å‚ç›´å±…ä¸­ã€‚ å®½é«˜ä¸ç¡®å®šå¯èƒ½æ›´å¤šåœ°æ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“divçš„å®½é«˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ç°æ°´å¹³å‚ç›´å±…ä¸­ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š 12345678910111213141516 .wrapper &#123; position: absolute; top: 50%; left: 50%; margin: -100px 0 0 -100px; width: 200px; height: 200px; background-color: #ccc;&#125;.goal &#123; position: absolute; top: 50%; left: 50%; background-color: deeppink; transform: translate(-50%, -50%); &#125; è€Œå¯¹äºæ‰‹æœºç«¯æ¥è¯´æˆ‘ä»¬æ›´å¤šçš„æ˜¯é‡‡ç”¨flexå¸ƒå±€çš„æ–¹å¼æ¥å®ç°æ°´å¹³å‚ç›´å±…ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122 .wrapper &#123; display: -webkit-flex; display: flex; position: absolute; top: 50%; left: 50%; margin: -100px 0 0 -100px; -webkit-align-items: center; align-items: center; -webkit-justify-content: center; justify-content: center; width: 200px; height: 200px; background-color: #ccc;&#125;.goal &#123; position: absolute; top: 50%; left: 50%; background-color: deeppink; transform: translate(-50%, -50%); &#125; ä¹Ÿå°±æ˜¯ä¸º.wrapperè¿™ä¸ªå®¹å™¨divè®¾ç½®æ°´å¹³/å‚ç›´(justify-content/align-items)çš„å¯¹é½æ–¹å¼ï¼Œå‡è®¾ç½®ä¸ºå±…ä¸­åå®¹å™¨ä¸­çš„.goalé¡¹ç›®divè‡ªç„¶æ°´å¹³å‚ç›´å±…ä¸­ã€‚(åœ¨flexå¸ƒå±€ä¸­å¸¸æŠŠå¤–å±‚ç§°ä¸ºå®¹å™¨ï¼Œå†…å±‚divç§°ä¸ºé¡¹ç›®ã€‚) åˆ©ç”¨ä¼ªå…ƒç´ æ¥å®ç°åˆ©ç”¨ä¼ªå…ƒç´ å¯ä»¥é¿å…ä½¿ç”¨marginæ—¶åœ¨IEä¸­çš„bugé—®é¢˜ã€‚ 123456789101112131415161718192021 .wrapper &#123; width: 200px; height: 200px; text-align: center; background-color: #ccc;&#125;.goal &#123; display: inline-block; width: 100px; height: 100px; vertical-align: middle; background-color: deeppink; &#125; .wrapper:after &#123; content: ' '; display: inline-block; width: 0; height: 100%; vertical-align: middle; background-color: deeppink; &#125; è¯¥æ–¹æ³•çš„é‡ç‚¹åœ¨äºåˆ©ç”¨ä¼ªå…ƒç´ ç»™goalè¿™ä¸ªdivæä¾›vertical-alignæ‰€éœ€çš„å¯¹é½ä¸­å¿ƒç‚¹ã€‚è¯¦æƒ…å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡å¾®ç ”ç©¶ï¼šCSSï¼šä½¿ç”¨ä¼ªå…ƒç´ åšæ°´å¹³å‚ç›´å±…ä¸­çš„å¾®æ·±å…¥ç ”ç©¶ å¸¸ç”¨æŠ€å·§å·¦è¾¹æ  å·¦è¾¹æ çš„å¸¸ç”¨å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»å‡ ç§å¸¸ç”¨æ–¹å¼ï¼š è¾¹æ¡†æ³•ï¼šborder-left: 5px solid blue; ä¼ªå…ƒç´ æ³•ï¼š 123456789 div:after &#123; content: ' '; position: absolute; top: 0; left: 0; width: 5px; height: 60px; background-color: blue; &#125; å†…/å¤–/å››å‘¨é˜´å½±æ³•ï¼š12box-shadow:-5px 0px 0 0 blue;/box-shadow:inset 5px 0px 0 0 blue;/ box-shadow: 0 0 5px blue(box-shaow ä¸å ç”¨å…ƒç´ çš„å®½é«˜å“¦) å•è¡Œå±…ä¸­ï¼Œä¿©è¡Œå±…å·¦ï¼Œè¶…è¿‡ä¿©è¡Œçœç•¥ã€‚ ä¸»è¦å®ç°ä¾é ï¼š 123display: -webkit-box; // è®¾ç½®displayï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º -webkit-line-clamp: 2; // é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•° -webkit-box-orient: vertical; // è§„å®šæ¡†çš„å­å…ƒç´ åº”è¯¥è¢«æ°´å¹³æˆ–å‚ç›´æ’åˆ— å…·ä½“å®ç°å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šå•è¡Œå±…ä¸­ï¼Œä¸¤è¡Œå±…å·¦ï¼Œè¶…è¿‡ä¸¤è¡Œçœç•¥ çŸ­å°æ ‡é¢˜çš„å¿«é€Ÿæ°´å¹³å‚ç›´å±…ä¸­æ³•ç»ƒæ‰‹çš„é¡¹ç›®ä¸­è¦å®ç°ä¸€åˆ—èœå•ï¼Œèœå•ä¸­çš„å°æ ‡é¢˜éœ€è¦æ°´å¹³å‚ç›´å±…ä¸­ï¼š å¯¹äºè¿™ç§æƒ…å†µå¸¸ç”¨tableå¸ƒå±€ã€‚å¦‚ä¸‹ï¼š 1234567891011121314 .menu-item &#123; display: table; width: 56px; height: 49px; padding: 0 12px; text-align: center; .text &#123; display: table-cell; width: 56px; vertical-align: middle; .border_1px(rgba(7, 17, 27, .1)); font-size: 12px; &#125;&#125; åªéœ€è¦åœ¨çˆ¶å…ƒç´ .menu-itemä¸­æ·»åŠ display:tableï¼Œåœ¨å­å…ƒç´ (éœ€è¦æ°´å¹³å‚ç›´å±…ä¸­çš„å…ƒç´ )ä¸­æ·»åŠ display:table-cell;vertical-align:middleå³å¯ã€‚","categories":[{"name":"HTML&CSS","slug":"HTML-CSS","permalink":"https://i7eo.com/categories/HTML-CSS/"}],"tags":[{"name":"æ°´å¹³å‚ç›´å±…ä¸­","slug":"æ°´å¹³å‚ç›´å±…ä¸­","permalink":"https://i7eo.com/tags/æ°´å¹³å‚ç›´å±…ä¸­/"}]},{"title":"webpackç¬”è®°","slug":"webpackç¬”è®°","date":"2017-03-05T10:41:08.000Z","updated":"2019-01-05T09:15:20.928Z","comments":true,"path":"2017/03/05/webpackç¬”è®°.html","link":"","permalink":"https://i7eo.com/2017/03/05/webpackç¬”è®°.html","excerpt":"webpack 2.0 ç”¨äº†å°ä¸€ä¸ªæœˆäº†ï¼Œä¸€ç›´éƒ½æ˜¯ç…§çŒ«ç”»è™ã€‚è¿™ä¿©å¤©å¼€å§‹ç»†è¯»å®˜ç½‘çš„éƒ¨åˆ†æ–‡ç« ç»“åˆä¸€äº›è®²è§£è§†é¢‘ï¼Œæ·±å…¥å­¦ä¹ ä¸€ä¸‹ã€‚å°ç»“ä¸€å‘æ¥æ±‡æ€»çŸ¥è¯†ç‚¹ã€‚ webpack çš„ç”±æ¥? å·²å­˜åœ¨çš„æ¨¡å—æ‰“åŒ…å™¨å¯¹äºå¤§å‹åº”ç”¨ï¼ˆå¤§å‹çš„SPAï¼‰æ¥è¯´å¹¶ä¸é€‚åˆã€‚å‘å±•å¦ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨æœ€è¿«åˆ‡çš„åŸå› é‚£å°±æ˜¯ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰å¹¶ä¸”å¯ä»¥è®©é™æ€èµ„æºèƒ½å¤Ÿæ— ç¼çš„é€‚ç”¨äºæ¨¡å—åŒ–ã€‚ webpack å¯ä»¥åšçš„äº‹æƒ…ï¼Ÿ å°†é¡¹ç›®é—´çš„ä¾èµ–åˆ†å‰²æˆä»£ç å—å¹¶æŒ‰éœ€åŠ è½½","text":"webpack 2.0 ç”¨äº†å°ä¸€ä¸ªæœˆäº†ï¼Œä¸€ç›´éƒ½æ˜¯ç…§çŒ«ç”»è™ã€‚è¿™ä¿©å¤©å¼€å§‹ç»†è¯»å®˜ç½‘çš„éƒ¨åˆ†æ–‡ç« ç»“åˆä¸€äº›è®²è§£è§†é¢‘ï¼Œæ·±å…¥å­¦ä¹ ä¸€ä¸‹ã€‚å°ç»“ä¸€å‘æ¥æ±‡æ€»çŸ¥è¯†ç‚¹ã€‚ webpack çš„ç”±æ¥? å·²å­˜åœ¨çš„æ¨¡å—æ‰“åŒ…å™¨å¯¹äºå¤§å‹åº”ç”¨ï¼ˆå¤§å‹çš„SPAï¼‰æ¥è¯´å¹¶ä¸é€‚åˆã€‚å‘å±•å¦ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨æœ€è¿«åˆ‡çš„åŸå› é‚£å°±æ˜¯ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰å¹¶ä¸”å¯ä»¥è®©é™æ€èµ„æºèƒ½å¤Ÿæ— ç¼çš„é€‚ç”¨äºæ¨¡å—åŒ–ã€‚ webpack å¯ä»¥åšçš„äº‹æƒ…ï¼Ÿ å°†é¡¹ç›®é—´çš„ä¾èµ–åˆ†å‰²æˆä»£ç å—å¹¶æŒ‰éœ€åŠ è½½ å°†åˆå§‹åŒ–è½½å…¥æ—¶é—´ä¿æŒåœ¨æœ€ä½ æ¯ä¸€ä¸ªé™æ€èµ„æºéƒ½åº”è¢«ä½œä¸ºä¸€ä¸ªæ¨¡å— æœ‰å°†ç¬¬ä¸‰æ–¹çš„åº“æ•´åˆä¸ºæ¨¡å—çš„èƒ½åŠ› æœ‰å®šåˆ¶æ¨¡å—çš„èƒ½åŠ› é€‚åˆå¤§å‹çš„å•é¡µåº”ç”¨- webpack çš„ç‰¹ç‚¹æœ‰ï¼Ÿ ä»£ç åˆ†å‰²ï¼šwebapck åœ¨å®ƒçš„ä¾èµ–æ ‘ä¸­æœ‰ä¿©ç§ä¾èµ–å…³ç³»ï¼ŒåŒæ­¥ä¸å¼‚æ­¥ï¼å¼‚æ­¥ä¾èµ–å¯ä»¥åˆ†å‰²æˆè®¸å¤šä¸åŒçš„ç‚¹ï¼ˆéƒ¨åˆ†ï¼‰å¹¶ä¸”è¿™äº›ä¾èµ–æ¥è‡ªäºæ–°çš„ä»£ç å—ã€‚åœ¨å—çº§æ ‘ç”Ÿæ•ˆåï¼Œä¸€ä¸ªæ–‡ä»¶ä¼šè¢«ä¼ é€’ç»™æ¯ä¸€ä¸ªä»£ç å—ã€‚ åŠ è½½å™¨ï¼šwebpack æ˜¯å”¯ä¸€çš„ä¸ç”Ÿä¿±æ¥å°±å…·æœ‰å¤„ç† JS ä»£ç çš„èƒ½åŠ›ï¼Œä½†æ˜¯åŠ è½½å™¨è¢«ç”¨æ¥å°†å…¶ä»–æºæ–‡ä»¶è½¬æ¢ä¸º JS æ–‡ä»¶ã€‚è¿™æ ·æ¥åšæˆ‘ä»¬å°±å¯ä»¥å¤„ç†æ¥è‡ªä¸åŒæ¨¡å—çš„æºæ–‡ä»¶ã€‚ æ™ºèƒ½è§£æï¼šwebpack å¯ä»¥æ™ºèƒ½è§£æç¬¬ä¸‰æ–¹åº“æ–‡ä»¶ã€‚å®ƒç”šè‡³å…è®¸åœ¨ä¾èµ–ä¸­å‡ºç°è§£é‡Šæ€§çš„æè¿°ä¾‹å¦‚ï¼šrequire(&quot;./templates/&quot; + name + &quot;.jade&quot;)ã€‚å…·æœ‰ CMD&amp;AMD&amp;es6 ä¸‰ç§å¤„ç†æ¨¡å¼ã€‚ æ’ä»¶ç³»ç»Ÿï¼šwebpack æœ€æœ‰ç‰¹ç‚¹çš„å°±æ˜¯å®ƒç”Ÿæ€ä¸°å¯Œçš„æ’ä»¶ç³»ç»Ÿã€‚è®¸å¤šå†…éƒ¨çš„ç‰¹æ€§éƒ½å»ºç«‹åœ¨è¿™ä¸ªæ’ä»¶ç³»ç»Ÿä¹‹ä¸Šã€‚å®ƒå…è®¸ä½ å®šåˆ¶ä½ è‡ªå·±çš„éœ€æ±‚å¹¶ä¸”å¯ä»¥å°†å…¶å¼€æºã€‚ ä»¥ä¸Šæ˜¯æˆ‘å¯¹ what-is-webpack çš„éƒ¨åˆ†ç¿»è¯‘ï¼Œè¿™äº›å¯¹äºå¿«é€Ÿäº†è§£ webpack æ¥è¯´è¶³å¤Ÿäº†ã€‚ æ€»æ‰€å‘¨çŸ¥å¯¹äºè‡ªåŠ¨åŒ–æ„å»ºè¿™éƒ¨åˆ†æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„å·¥å…·å¾ˆå¤šï¼Œæ¯”å¦‚ï¼šgrunt ã€gulp ç­‰ï¼Œé‚£ä¹ˆè¿™ä¿©è€…ä¸ webpack æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ Grunt&amp;Gulp æ˜¯æµç¨‹å·¥å…·ï¼Œå…¶å·¥ä½œæ–¹å¼æ˜¯åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡æ˜å¯¹æŸäº›æ–‡ä»¶è¿›è¡Œçš„æ“ä½œï¼ˆè¯¸å¦‚ç¼–è¯‘ï¼Œç»„åˆï¼Œå‹ç¼©ç­‰ä»»åŠ¡ï¼‰çš„å…·ä½“æ­¥éª¤ï¼Œä¹‹åå¯ä»¥è‡ªåŠ¨å®Œæˆè¿™äº›ä»»åŠ¡ã€‚æµç¨‹å¦‚ä¸‹ï¼š WebPackåˆ™æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ï¼Œå…¶å·¥ä½œæ–¹å¼é€šè¿‡ä¸»æ–‡ä»¶ï¼ˆindex.jsï¼‰æ‰¾åˆ°å…¨éƒ¨ä¾èµ–ï¼ˆè‡ªå·±è®¾ç½®çš„ä»£ç å—ã€ç¬¬ä¸‰æ–¹åº“ç­‰ï¼‰ä½¿ç”¨loaders å¤„ç†ï¼Œæœ€ç»ˆæ‰“åŒ…ä¸ºå¯æ‰§è¡Œçš„ Javascript æ–‡ä»¶ã€‚æµç¨‹å¦‚ä¸‹ï¼š ä¸‹é¢é€šè¿‡å®ä¾‹æ¥çœ‹çœ‹ webpack çš„å¨åŠ›ã€‚ 1&gt; ç®€å•ä½¿ç”¨ 1234mkdir webpack-1cd webpack-1npm initnpm install -d webpack --save-dev å®‰è£…å®Œ webpack 2.0 åï¼Œæ–°å»º js&amp;html&amp;css æ–‡ä»¶æˆ‘çš„ç›®å½•å¦‚ä¸‹ï¼š hello.js ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 12345678require('./world.js');require('./style.css');function hello () &#123; alert('test!');&#125;hello(); style.css ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 1234567html , body&#123; padding: 0; margin: 0;&#125;body&#123; background-color: red;&#125; åœ¨ webpack èƒ½åšçš„äº‹æƒ…ä¸­æˆ‘ä»¬äº†è§£åˆ° webpack å…·æœ‰è¯†åˆ« js çš„èƒ½åŠ›ï¼Œé‚£ css å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½ï¼é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿåˆ©ç”¨ loaders æ¥å¤„ç†ã€‚å¯¹äº css æ–‡ä»¶æˆ‘ä»¬ä½¿ç”¨ css-loader&amp;style-loader å…ˆåˆ©ç”¨ npm åˆ†åˆ«å®‰è£…ã€‚ä¹‹ååœ¨å½“å‰ç›®å½•ä¸‹æ‰“å¼€ cmd é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼šwebpack hello.js hello.bundle.js --module-bind css=style-loader!css-loader --watch module-bind å‘½ä»¤ç”¨äºå¯ç”¨ loader å¤„ç†ä¸»æ–‡ä»¶ï¼Œwatch ç”¨æ¥ç›‘è§† hello.js æ–‡ä»¶çš„å˜åŒ–ï¼Œè‹¥å˜åŒ–åˆ™è‡ªåŠ¨æ›´æ–° hello.bundle.js æ–‡ä»¶ã€‚ åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬å¦‚æœæ¯æ¬¡éƒ½è¦æ•²ä¸€é•¿ä¸²å‘½ä»¤çš„è¯å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨package.json çš„ script ä¸­é…ä¸Š webpack å‘½ä»¤ã€‚æˆ‘å¾—é…ç½®å¦‚ä¸‹ï¼š &quot;webpack&quot;: &quot;webpack --config webpack.config.js --progress --display-modules --colors --display-reasons&quot; å…¶ä¸­ progress&amp;modules&amp;reasonsåˆ†åˆ«ä»£è¡¨è¿‡ç¨‹ç™¾åˆ†æ¯” / å„æ¨¡å— / æ‰“åŒ…åŸå› ã€‚ æˆ‘ä»¬å¯ä»¥å°†webpackçš„é…ç½®å•ç‹¬æ”¾åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆwebpack.config.jsï¼‰ä¸­ä¼šè‡ªåŠ¨è¯»å–è¯¥æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…åç§°ä¸ä¸€è‡´åˆ™éœ€è¦é€šè¿‡å‘½ä»¤è¡Œæ¥è¿è¡Œï¼ˆä¸å­˜åœ¨çš„è¯é€šè¿‡ webpack å‘½ä»¤ï¼Œåç§°ä¸ä¸€è‡´é€šè¿‡â€“config æ¥æŒ‡å®šæ–‡ä»¶ï¼‰ã€‚ å¯¹äº webpack æ¥è¯´å…¥å£ä¸å‡ºå£è‚¯å®šæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œé‚£ä¹ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æˆ‘ä»¬è¿™æ ·å†™ï¼š 1234567module.exports = &#123; entry: './src/index.js', // entry: ['./src/index-1.js' , './src/index-2.js'] å¤šå…¥å£ output: &#123; //é…ç½®æ–‡ä»¶è¾“å‡ºä½ç½® filename: 'bundle.js', path: './dist/js' &#125;&#125;; è¿˜æœ‰ entry ä¼ å…¥å¯¹è±¡çš„å½¢å¼å…¥å£ï¼š 12345678910module.exports = &#123; entry:&#123; main1: './src/index1.js', main2: './src/index2.js' &#125;, output: &#123; //é…ç½®æ–‡ä»¶è¾“å‡ºä½ç½® filename: '[name]-[chunkhash].js', // è¿™é‡Œå¦‚æœè¿˜è¿™æ ·å†™filename: 'bundle.js'çš„ç»“æœæ˜¯index2ä¼šæŠŠindex1è¦†ç›–ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨å†…ç½®çš„å ä½ç¬¦ name &amp; chunkhash æ¥å‘½å path: './dist/js' &#125;&#125;; è¿™æ ·çš„è¯åœ¨ index.htmlä¸­å¼•å…¥çš„ js æ–‡ä»¶åæˆ‘ä»¬ä¸å¯èƒ½æ¯æ¬¡æ‰“åŒ…å®Œéƒ½è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œè¿™æ ·å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ’ä»¶æ¥è‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®ã€‚npm install html-webpack-plugin å®‰è£…åä¿®æ”¹é…ç½®æ–‡ä»¶ä¸ºï¼š 1234567891011121314151617181920212223242526272829var htmlWebpackPlugin = require('html-webpack-plugin');module.exports = &#123; entry: &#123; main: './src/scripts/main.js', mainA: './src/scripts/mainA.js' &#125;, output: &#123; //é…ç½®æ–‡ä»¶è¾“å‡ºä½ç½® filename: '[name]-[chunkhash]-bundle.js' //æ‰“åŒ…çš„æ–‡ä»¶åç§°*/ path : './dist', filename: 'js/[name]-[chunkhash].js', //æŠŠhtmlä¸jsåˆ†å¼€å­˜æ”¾ publicPath: 'http://bluespace/' //ä¸Šçº¿åœ°å€çš„ç»å¯¹è·¯å¾„ï¼Œè‡ªåŠ¨æ›¿æ¢å½“å‰é¡¹ç›®ä¸­ç›¸å¯¹è·¯å¾„ &#125;, plugins: [ new htmlWebpackPlugin(&#123; //filename: '[hash].index.html', //åç§° template: 'index.html', //ä»¥ä»€ä¹ˆä¸ºæ¨¡æ¿ï¼Œä¸€èˆ¬ä»¥é…ç½®æ–‡ä»¶ä¸‹çš„index.htmlä¸ºæ¨¡æ¿ //inject: 'head' //scriptså­˜æ”¾çš„ä½ç½® title: 'webpack is good!', inject: false, date: new Date(), minify: &#123; //å‹ç¼©htmlæ–‡ä»¶ï¼Œå»é™¤ç©ºæ ¼ï¼Œå»é™¤æ³¨é‡Š collapseWhitespace: true, removeComments: true &#125; &#125;) ]&#125;; è€Œ index.html æ¨¡æ¿çš„ä»£ç å¦‚ä¸‹ï¼ˆhtml-webpack-pluginæ”¯æŒejså†™æ³•ï¼‰ï¼š 1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"utf-8\"&gt; &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title%&gt;&lt;/title&gt; &lt;script src=\"&lt;%= htmlWebpackPlugin.files.chunks.main.entry%&gt;\"&gt;&lt;/script&gt; &lt;!-- æŠŠè„šæœ¬åˆ†å¼€æ”¾ --&gt; &lt;!-- htmlWebpackPlugin.options.date --&gt; &lt;/head&gt; &lt;body&gt; &lt;em&gt;&lt;%= htmlWebpackPlugin.options.date%&gt;&lt;/em&gt; &lt;script src=\"&lt;%= htmlWebpackPlugin.files.chunks.mainA.entry%&gt;\"&gt;&lt;/script&gt;&lt;!--å¦‚æœæƒ³æ›´åŠ ä¼˜åŒ–çš„è¯ä¸ºäº†å‡å°‘ä¸€æ¬¡postè¯·æ±‚ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥æŠŠscriptä»£ç æ”¾è¿›æ¥ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š &lt;script&gt; &lt;%= compilation.assets[htmlWebpackPlugin.files.chunks.mainA.entry.substr(htmlWebpackPlugin.files.publicPath.length)].source()%&gt; &lt;/script&gt;--&gt; &lt;/body&gt;&lt;/html&gt; 2&gt; åˆ©ç”¨ htmlwebpackplugin æ„å»ºå¤šé¡µåº”ç”¨ ï¼ˆå·²ä¸Šä¼ è‡³ i7eo-githubï¼‰3&gt; é…ç½®å¸¸è§çš„ loader 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192var htmlWebpackPlugin = require('html-webpack-plugin'); var path = require('path'); module.exports = &#123; entry: './src/app.js', output: &#123; path: './dist', filename: 'js/[name].bundle.js' &#125;, module: &#123; rules: [ &#123; test: /\\.js$/, use: [&#123; loader: 'babel-loader', options: &#123; presets: ['es2015'] &#125; &#125;], include: path.resolve(__dirname , './src'), exclude: path.resolve(__dirname , './node_modules') //å°½é‡ä½¿ç”¨ç»å¯¹è·¯å¾„ä¼šæé«˜æ‰“åŒ…é€Ÿåº¦åœ¨configruationé‡Œé¢é€šè¿‡excludeå’Œincludeæ¥æé«˜æ‰“åŒ…é€Ÿåº¦ &#125;, &#123; test: /\\.css$/, use: [ 'style-loader', &#123; loader: 'css-loader', options: &#123; importLoaders: 1 &#125; &#125;, &#123; loader: 'postcss-loader', options: &#123; plugins: function()&#123; return [ require('autoprefixer') ]; &#125; &#125; &#125; ] &#125;, &#123; test: /.\\.less$/, use: [ 'style-loader', 'css-loader', &#123; loader: 'postcss-loader', options: &#123; plugins: function()&#123; return [ require('autoprefixer') // postcssä¸‹çš„è‡ªåŠ¨è¡¥å…¨æµè§ˆå™¨å‰ç¼€çš„æ’ä»¶ ]; &#125; &#125; &#125;, 'less-loader' //ä½¿ç”¨lessæˆ–è€…sassæ—¶ä¸ç”¨ä¸º@importçš„less/sassæ·»åŠ importLoaders:1å› ä¸ºè‡ªåŠ¨æ·»åŠ ã€‚å› ä¸ºless/sassæ”¯æŒimport ] &#125;, &#123; test: /\\.html$/, use: 'html-loader' // å°†htmlå½“åšå­—ç¬¦ä¸²å¤„ç†ï¼Œå¯¹åº”innerhtmlã€‚åå¤„æ˜¯ä¸èƒ½ä½¿ç”¨forç­‰æ¨¡æ¿è¯­æ³• &#125;, &#123; test: /\\.ejs$/, use: 'ejs-loader' // æŠŠhtmlå½“åšæ¨¡æ¿å¤„ç† &#125;, &#123; test: /\\.(png|jpg|gif|svg)$/i, //ç”¨åŒ…ç®¡ç†å·¥å…·é™¤äº†æ¨¡æ¿å¤–çš„æ–‡ä»¶æ”¾ç½®ç›¸å¯¹è·¯å¾„æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­åº”è¯¥![]($&#123;require('../../assets/George.jpg')&#125;) use: [ &#123; loader: 'url-loader', //url-loaderå¯ä»¥è®¾ç½®limitè‹¥å›¾ç‰‡ä½“ç§¯å°äºlimitçš„è¯åˆ™é€šè¿‡url-loaderè½¬åŒ–ä¸ºbase64ä»£ç ï¼Œè‹¥å¤§äºåˆ™è°ƒç”¨file-loader options: &#123; name: 'assets/[name]-[hash:5].[ext]', limit: 4000 //ç»å¸¸éœ€è¦åŠ è½½çš„å›¾ç‰‡åˆ©ç”¨httpè¯·æ±‚è¾ƒå¥½ï¼Œå› ä¸ºå¯ä»¥äº«å—åˆ°ç¼“å­˜ï¼Œè€Œbase64åˆ™éœ€æ¯æ¬¡è¯»å– &#125; &#125;, 'image-webpack-loader' //å‹ç¼©å›¾ç‰‡ä½“ç§¯ ] &#125; ] &#125;, plugins: [ new htmlWebpackPlugin(&#123; filename: 'index.html', template: 'index.html', inject: 'body' &#125;) ] &#125;; å‚è€ƒèµ„æ–™ï¼š webpack å…¥é—¨webpackï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº† html-webpack-plugin","categories":[{"name":"Javascript","slug":"Javascript","permalink":"https://i7eo.com/categories/Javascript/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://i7eo.com/tags/webpack/"}]},{"title":"æµ…è°ˆå“åº”å¼å¸ƒå±€&è‡ªé€‚åº”å¸ƒå±€","slug":"æµ…è°ˆå“åº”å¼å¸ƒå±€-è‡ªé€‚åº”å¸ƒå±€","date":"2017-02-15T04:35:53.000Z","updated":"2019-01-05T06:08:06.668Z","comments":true,"path":"2017/02/15/æµ…è°ˆå“åº”å¼å¸ƒå±€-è‡ªé€‚åº”å¸ƒå±€.html","link":"","permalink":"https://i7eo.com/2017/02/15/æµ…è°ˆå“åº”å¼å¸ƒå±€-è‡ªé€‚åº”å¸ƒå±€.html","excerpt":"ä¸€ã€å“åº”å¼å¸ƒå±€1ã€ä»€ä¹ˆæ˜¯å“åº”å¼é¡µé¢ï¼Ÿå“åº”å¼å¸ƒå±€å¯ä»¥ä¸€ç»Ÿpc&amp;mobileå—ï¼Ÿå“åº”å¼ä¸è‡ªé€‚åº”å¼å¸ƒå±€çš„åŒºåˆ«ï¼Ÿ å“åº”å¼ç®€å•æ¥è¯´æ˜¯ä¸€ä¸ªç½‘ç«™çš„å¸ƒå±€ èƒ½å¤Ÿå…¼å®¹å¤šä¸ªä¸åŒç»ˆç«¯ï¼Œ è€Œå¹¶ä¸æ˜¯ä¼ ç»Ÿçš„pcç«¯ä¸€å¥—é¡µé¢ï¼Œç§»åŠ¨ç«¯ä¸€å¥—é¡µé¢ã€‚ å½“åˆEthan Marcotteåœ¨2010å¹´5æœˆä»½æå‡ºçš„è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™æ˜¯å¸Œæœ›å“åº”å¼å¯ä»¥ä¸€ç»Ÿpc&amp;mobileé¡µé¢ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿåšåˆ°äº†ã€‚ä½†æ˜¯è¿™æ ·å¸¦æ¥çš„é—®é¢˜ä¹Ÿè¶Šå‘è®©å¼€å‘è€…å¿ƒçƒ¦æ„ä¹±ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯å…¼å®¹å„ç§è®¾å¤‡ä¼šå¯¼è‡´ å¤§é‡ç´¯èµ˜çš„ä»£ç ï¼Œç»´æŠ¤ä¸é‡æ„è¾ƒéº»çƒ¦ã€‚ å“åº”å¼å¸ƒå±€è®²ç©¶çš„æ˜¯ä½¿ç”¨ä¸€å¥—å¸ƒå±€ä»£ç æ¥åœ¨ä¸åŒç»ˆç«¯å±•ç¤ºï¼Œæ ¹æ®å±å¹•å°ºå¯¸çš„å¤§å°å¯¹é¡µé¢çš„å¸ƒå±€è¿›è¡Œæ”¹é€ ï¼ˆå³å½“å±å¹•å˜å°æ—¶ï¼Œå¼€å‘è€…å¯èƒ½ä¼šè®©æ ‡é¢˜æ ä¸­åŸæœ¬æ˜¾ç¤º10ä¸ªå­æ ‡é¢˜ç°åœ¨åªæ˜¾ç¤º5ä¸ªï¼Œéšè—å‰©ä¸‹çš„5ä¸ªæˆ–è€…è®©å…¶åœ¨ç¬¬äºŒè¡Œå‡ºç°ï¼‰ï¼Œè€Œ","text":"ä¸€ã€å“åº”å¼å¸ƒå±€1ã€ä»€ä¹ˆæ˜¯å“åº”å¼é¡µé¢ï¼Ÿå“åº”å¼å¸ƒå±€å¯ä»¥ä¸€ç»Ÿpc&amp;mobileå—ï¼Ÿå“åº”å¼ä¸è‡ªé€‚åº”å¼å¸ƒå±€çš„åŒºåˆ«ï¼Ÿ å“åº”å¼ç®€å•æ¥è¯´æ˜¯ä¸€ä¸ªç½‘ç«™çš„å¸ƒå±€ èƒ½å¤Ÿå…¼å®¹å¤šä¸ªä¸åŒç»ˆç«¯ï¼Œ è€Œå¹¶ä¸æ˜¯ä¼ ç»Ÿçš„pcç«¯ä¸€å¥—é¡µé¢ï¼Œç§»åŠ¨ç«¯ä¸€å¥—é¡µé¢ã€‚ å½“åˆEthan Marcotteåœ¨2010å¹´5æœˆä»½æå‡ºçš„è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™æ˜¯å¸Œæœ›å“åº”å¼å¯ä»¥ä¸€ç»Ÿpc&amp;mobileé¡µé¢ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿåšåˆ°äº†ã€‚ä½†æ˜¯è¿™æ ·å¸¦æ¥çš„é—®é¢˜ä¹Ÿè¶Šå‘è®©å¼€å‘è€…å¿ƒçƒ¦æ„ä¹±ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯å…¼å®¹å„ç§è®¾å¤‡ä¼šå¯¼è‡´ å¤§é‡ç´¯èµ˜çš„ä»£ç ï¼Œç»´æŠ¤ä¸é‡æ„è¾ƒéº»çƒ¦ã€‚ å“åº”å¼å¸ƒå±€è®²ç©¶çš„æ˜¯ä½¿ç”¨ä¸€å¥—å¸ƒå±€ä»£ç æ¥åœ¨ä¸åŒç»ˆç«¯å±•ç¤ºï¼Œæ ¹æ®å±å¹•å°ºå¯¸çš„å¤§å°å¯¹é¡µé¢çš„å¸ƒå±€è¿›è¡Œæ”¹é€ ï¼ˆå³å½“å±å¹•å˜å°æ—¶ï¼Œå¼€å‘è€…å¯èƒ½ä¼šè®©æ ‡é¢˜æ ä¸­åŸæœ¬æ˜¾ç¤º10ä¸ªå­æ ‡é¢˜ç°åœ¨åªæ˜¾ç¤º5ä¸ªï¼Œéšè—å‰©ä¸‹çš„5ä¸ªæˆ–è€…è®©å…¶åœ¨ç¬¬äºŒè¡Œå‡ºç°ï¼‰ï¼Œè€Œ è‡ªé€‚åº”å¸ƒå±€åˆ™ç›¸åï¼Œå®ƒä½¿ç”¨ä¸€å¥—å¸ƒå±€ä»£ç ä¸ä¼šæ ¹æ®å±å¹•å¤§å°æ”¹å˜è¿˜æ”¹å˜å¸ƒå±€ç»“æ„ï¼Œå®ƒåªæ˜¯ä¼šç­‰æ¯”ç¼©å°æˆ–è€…æ”¾å¤§å¯¹åº”å†…å®¹çš„å°ºå¯¸ã€‚ ï¼’ã€å“åº”å¼å¸ƒå±€é‡‡ç”¨çš„æŠ€æœ¯ æ§åˆ¶è§†å£ï¼ˆviewportï¼‰ æ§åˆ¶è§†å£è¿™ä¸€ç‚¹ä¸è®ºæ˜¯å“åº”å¼ã€è‡ªé€‚åº”è¿˜æ˜¯ç§»åŠ¨ç«¯å¸ƒå±€éƒ½æ˜¯æœ€é‡è¦çš„ã€‚æˆ‘ä»¬å¸¸å¸¸ä¼šä½¿ç”¨è¿™ä¸€å¥ï¼š 1&lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no\"\"&gt; è§†å£å®½åº¦ç­‰äºè®¾å¤‡å®½åº¦ï¼Œåˆå§‹ç¼©æ”¾æ¯”æœ€å¤§ç¼©æ”¾æ¯”ä¸æœ€å°ç¼©æ”¾æ¯”å‡ä¸º1ï¼Œç¦æ­¢ç”¨æˆ·ç¼©æ”¾ã€‚è¯¦ç»†æè¿°å¯æŸ¥çœ‹ MDN-metaã€‚åœ¨è¿™é‡Œå¯èƒ½æœ‰çš„æœ‹å‹ä¼šè§åˆ°è®¾å¤‡åƒç´ æ¯”ï¼ˆdpr å³ deivcePixelRatioï¼‰ä¹Ÿå°±æ˜¯ç‰©ç†åƒç´ ä¸è®¾å¤‡ç‹¬ç«‹åƒç´ çš„æ¯”å€¼ï¼Œå¸¸è§çš„æœ‰retinaå±ç­‰ã€‚è¯¦æƒ…å¯ä»¥å‚è€ƒå¼ é‘«æ—­è€å¸ˆçš„è¿™ç¯‡ è®¾å¤‡åƒç´ æ¯”devicePixelRatioç®€å•ä»‹ç» æ–‡ç« ã€‚ CSSçš„åª’ä½“æŸ¥è¯¢ï¼ˆmedia queryï¼‰ ä½¿ç”¨@media æŸ¥è¯¢ï¼Œä½ å¯ä»¥é’ˆå¯¹ä¸åŒçš„åª’ä½“ç±»å‹å®šä¹‰ä¸åŒçš„æ ·å¼ã€‚è¯·çœ‹ä¸‹ä¾‹ï¼š 1234567@media only screen and (max-width: 480px)&#123; header .top .tel, header .top ul li:nth-child(3), header .top ul li:nth-child(4)&#123; display: none; &#125;&#125; è¿™ä¸ªä»£ç ç‰‡æ„æ€æ˜¯å½“è®¾å¤‡è§†å£å®½åº¦è¾¾åˆ°480pxæ—¶å¯¹ li äº.tel è¿›è¡Œå¤„ç†ã€‚media queryçš„è¯¦æƒ…å¯ä»¥æŸ¥çœ‹ MDN-media ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯å¾ˆå¤šäººç¼–å†™å“åº”å¼å¸ƒå±€æ—¶éƒ½å–œæ¬¢ç”±pcå¤§å±å¼€å§‹ï¼Œæ…¢æ…¢åˆ°padå†åˆ°mobileï¼Œè¿™é‡Œæˆ‘å»ºè®®è®¾è®¡çš„æ—¶å€™å¯ä»¥ä»å°å±çš„mobileå¼€å§‹ï¼Œå…ˆç¡®å®šå†…å®¹ç„¶åé€çº§å‘å¤§å±è®¾è®¡ã€‚å¯¹äºIE9ä»¥ä¸‹æµè§ˆå™¨æˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªå…³äºmedia query çš„ polyfillï¼ˆå¯ä»¥ç†è§£ä¸ºè¡¥ä¸åŒ…ï¼‰ï¼Œ css3-mediaqueries.js æˆ–è€… respond.jsã€‚ è‡ªé€‚åº”å›¾ç‰‡ç­‰ç´ æ è¿™é‡Œæˆ‘ä»¬å¸¸å¯¹å›¾ç‰‡åšå¤„ç†ï¼Œå¤„ç†çš„æ–¹æ³•æœ‰å¾ˆå¤šæˆ‘ä»¬å¯ä»¥é‡‡ç”¨HTML5 picture æ ‡ç­¾ï¼Œåˆ©ç”¨è¯¥æ ‡ç­¾å¯ä»¥åœ¨ä¸åŒè®¾å¤‡ä¸­æ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡ã€‚å¦‚ä¸‹ä»£ç ï¼š1234567&lt;picture&gt; &lt;source media=\"(max-width: 36rem)\" srcset=\"img/ad001-l-480w.png\"/&gt; &lt;source srcset=\"img/ad001-l-1600w.png\"/&gt; ![](img/ad001-l.png) &lt;/picture&gt; source ä»£è¡¨ä½ è¦æ˜¾ç¤ºå›¾ç‰‡çš„æºï¼Œmediaä»£è¡¨ä½ éœ€è¦ä»€ä¹ˆæ¡ä»¶ä¸‹æ˜¾ç¤ºè¯¥å›¾ç‰‡ï¼Œsrcset é¡»å¡«å†™å›¾ç‰‡è·¯å¾„d sä»£ç ç‰‡æ„æ€æ˜¯å½“è®¾å¤‡è§†å£å®½åº¦å¤§äº36rem æ—¶æ˜¾ç¤º ad001-l-480w.png è¿™å¼ å›¾ç‰‡ï¼Œè‹¥å°äº 36rem åˆ™ä½¿ç”¨ad001-l-1600w.png è¿™å¼ å›¾ç‰‡ï¼Œè¦æ˜¯æµè§ˆå™¨ä¸æ”¯æŒ picture åˆ™ä½¿ç”¨ img æ ‡ç­¾ä¸­çš„å›¾ç‰‡ã€‚picture è¯¦ç»†ä¿¡æ¯å¯æŸ¥çœ‹ MDN-picture åŒæ ·çš„è¿™é‡Œéœ€è¦æ³¨æ„åœ¨ IE9&amp;IE9ä»¥ä¸‹ æµè§ˆå™¨æƒ³ä½¿ç”¨ picture é¡»å¯¼å…¥ polyfill ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ html5shiv.js ã€‚ äºŒã€è‡ªé€‚åº”å¸ƒå±€ï¼‘ã€è‡ªé€‚åº”çš„å¸ƒå±€çš„å‰ä¸–ä»Šç”Ÿ å¾ˆå¤šäººè¿˜æ˜¯å–œæ¬¢æŠŠè‡ªé€‚åº”ç§°ä¸ºç™¾åˆ†æ¯”å¸ƒå±€ï¼Œè€Œæˆ‘è®¤ä¸ºè‡ªé€‚åº”æ˜¯ç™¾åˆ†æ¯”çš„å¢å¼ºç‰ˆï¼Œè¿™ä¸ªæ¦‚å¿µåŒ…æ‹¬äº†å¾ˆå¤šæ–°æŠ€æœ¯ä¸å°æŠ€å·§è€Œå¹¶éå•çº¯çš„ä½¿ç”¨ç™¾åˆ†æ¯”å®ç°é¡µé¢å¸ƒå±€ã€‚è¯·çœ‹ä¸‹å›¾ï¼š è¿™ä¸ªç»“æ„å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š 12345678&lt;div class=\"main about\"&gt; &lt;span class=\"title\"&gt;&lt;span class=\"icon\"&gt;&lt;/span&gt;&lt;a href=\"aboutUs\"&gt;å…³äºæˆ‘ä»¬&lt;/a&gt;&lt;/span&gt; &lt;div class=\"mainText\"&gt; &lt;a href=\"aboutUs\"&gt; &lt;p class=\"content\"&gt;&lt;/p&gt; &lt;/a&gt; &lt;/div&gt; &lt;/div&gt;` å¯¹åº”çš„æ ·å¼ä¸ºï¼š 12345678910111213141516171819202122232425262728293031.container .main&#123; width: 90%; margin: 0 auto;&#125;.container .main .title&#123; display: inline-block; margin: 1.425rem 0; font-size: 1.25rem; color: rgb(13,76,187);&#125;.container .main .title .icon&#123; margin-right: 1rem; vertical-align: middle;&#125;.container .main .icon&#123; display: inline-block; width: .25rem; height: 1.3rem; background: url(../img/indexPage/mainBtn.png);&#125;.container .main .mainText img&#123; width: 100%; height: 100%;&#125;.container .main .content&#123; margin: 1.2rem 0 1.425rem 0; text-indent: 1.7rem; font-size: .9rem; line-height: 1.35rem; color: #3d3d3d;&#125; åœ¨é¡¹ç›®ä¸­æ›´å¤šçš„ä½¿ç”¨çš„éƒ½æ˜¯ç»„åˆè®¡ï¼Œç™¾åˆ†æ¯”æ§åˆ¶å„ä¸ªå®¹å™¨çš„å®½å’Œå°‘é‡çš„é«˜åº¦ï¼Œç”¨ rem æ¥æ§åˆ¶ padding/margin/font/height ç­‰ã€‚è‡³æ­¤ï¼Œåˆ©ç”¨ç™¾åˆ†æ¯”å¸ƒå±€çš„æ–¹å¼å³â€œå‰ä¸–â€ï¼Œè€Œâ€œä»Šç”Ÿâ€åˆ™æ˜¯åœ¨ä¸æ–­çš„æ··åˆæ–°çš„æŠ€æœ¯ä¸æ–­å¢å¼ºã€‚å¯¹äºä»Šç”Ÿï¼Œæ˜¾ç„¶æˆ‘ä»¬è¿˜æœ‰ web App æ²¡æœ‰è¯´ï¼Œé‚£æˆ‘ä»¬å°±æ¥çœ‹çœ‹ç§»åŠ¨ç«¯çš„ web é¡µé¢ã€‚ 2ã€rem ä¸Šé¢å‡ºç°äº†ä¸€ä¸ªå•ä½remï¼Œé‚£ä¹ˆremåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ remï¼ˆfont size of the root elementï¼‰æ˜¯æŒ‡ç›¸å¯¹äºæ ¹å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½ã€‚ç®€å•çš„è¯´å®ƒå°±æ˜¯ä¸€ä¸ªç›¸å¯¹å•ä½ã€‚çœ‹åˆ°remå¤§å®¶ä¸€å®šä¼šæƒ³èµ·emå•ä½ï¼Œemï¼ˆfont size of the elementï¼‰æ˜¯æŒ‡ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½ã€‚å®ƒä»¬ä¹‹é—´å…¶å®å¾ˆç›¸ä¼¼ï¼Œåªä¸è¿‡ä¸€ä¸ªè®¡ç®—çš„è§„åˆ™æ˜¯ä¾èµ–æ ¹å…ƒç´ ä¸€ä¸ªæ˜¯ä¾èµ–çˆ¶å…ƒç´ è®¡ç®—ã€‚ å¯¹äºä¸€ä¸ªç½‘é¡µæ¥è¯´ï¼Œremçš„åˆå§‹å€¼ä¸º 16pxï¼Œå½“ç„¶è¿™ä¸ªå€¼æ˜¯å¯ä»¥æ ¹æ®å½“å‰é¡¹ç›®ä¸­çš„éœ€è¦æ¥æ”¹å˜çš„ï¼Œè®¾ç½®htmlçš„font-sizeå³å¯ã€‚æ¯”å¦‚è¯´ï¼šæ‹¿åˆ°äº†ä¸€ä»½å®½åº¦ä¸º680pxï¼Œremä¸º20pxçš„è®¾è®¡ç¨¿å…¶ä¸­æŸå…ƒç´ å®½åº¦ä¸º200pxï¼Œä½†æ˜¯å¦‚æœè¦åœ¨å®½åº¦ä¸º375ä¸414çš„å±å¹•ä¸Šæ˜¾ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥è®¾ç½®ä¸ºå¤šå°‘å‘¢ï¼Ÿ å®½åº¦ å®½åº¦æ¯” html(font-size) æŸå…ƒç´ å®½åº¦(px) æŸå…ƒç´ å®½åº¦(rem) 384 384/640=0.6 12px 120px 10rem 480 480/640=0.75 15px 150px 10rem é‡ç‚¹æ˜¯è¦è®¡ç®—å‡ºhtmlçš„font-sizeï¼Œå¦‚æœæ˜¯retinaå±è¿˜éœ€æ³¨æ„dprã€‚å¦‚æœæˆ‘ä»¬æƒ³å¿«é€Ÿä¸Šæ‰‹ä¸æƒ³è®¡ç®—çš„è¯å¯ä»¥å¼•å…¥flexible.jsï¼Œè¿™ä¸ªè„šæœ¬ä¸»è¦æ˜¯æ ¹æ®åª’ä½“æŸ¥è¯¢æ¥åŠ¨æ€è®¾ç½®html font-sizeï¼Œå…¼å®¹æ€§è¿˜ä¸é”™ã€‚ 3ã€webApp ä¸­çš„è‡ªé€‚åº”åˆ©å™¨ - flexå¼¹æ€§å¸ƒå±€ ç”±äº media queryçš„å‡ºç°å½±å“äº†å¾ˆå¤§ä¸€éƒ¨åˆ†å¼€å‘äººå‘˜ï¼Œæ‰€ä»¥åœ¨æ—©äº›æ—¶å€™çš„ webApp é¡µé¢ä¸­è¿˜æ˜¯ä¼šå‡ºç°ä¼—å¤šçš„ media query ã€‚ç›´åˆ° flex æµè¡Œå¼€æ¥åæˆ‘ä»¬é€æ­¥è®¤è¯†åˆ° flex çš„å¼ºå¤§ï¼Œå› ä¸º flex ä¸Šæ‰‹ç®€å•ï¼Œä»£ç ç²¾ç®€ï¼Œä¸€å°æ®µå°±å¯ä»¥å®Œæˆæˆ‘ä»¬å¸¸è¯´çš„â€œåœ£æ¯å¸ƒå±€â€ç­‰ï¼Œä¹Ÿå¯ä»¥å®Œæˆå¸¸è€ƒçš„æ°´å¹³å‚ç›´é—®é¢˜ã€‚å…³äº flex å¤§å®¶å¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„æ•™ç¨‹ï¼Œè®²è§£çš„ååˆ†è¯¦ç»†ã€‚Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡ã€‚è¯·çœ‹ä¸‹ä¾‹ï¼š é¡ºæ‰‹æ‹‰æ¥è‡ªå·±ç»ƒæ‰‹çš„ vue2 ä¸­ç”¨ flex å¸ƒå±€åçš„é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ° pc&amp;mobile å®Œç¾é©¾é©­ã€‚å› ä¸ºç›®å‰å„å¤§æµè§ˆå™¨å¯¹ flex çš„æ”¯æŒåº¦åœ¨å¢åŠ æ‰€ä»¥ pc&amp;mobile å‡å¯ä½¿ç”¨å°±åœ¨ä¸ä¹…çš„å°†æ¥ ï¼Œä¸è¿‡ä¸€èˆ¬è¿˜æ˜¯æ›´å¤šçš„ç”¨åœ¨ç§»åŠ¨ç«¯ã€‚","categories":[{"name":"HTML&CSS","slug":"HTML-CSS","permalink":"https://i7eo.com/categories/HTML-CSS/"}],"tags":[{"name":"flex","slug":"flex","permalink":"https://i7eo.com/tags/flex/"},{"name":"rem","slug":"rem","permalink":"https://i7eo.com/tags/rem/"}]},{"title":"åº•éƒ¨å›ºå®š(sticky footer)","slug":"sticky-footer","date":"2017-01-03T11:59:34.000Z","updated":"2019-01-05T06:07:31.495Z","comments":true,"path":"2017/01/03/sticky-footer.html","link":"","permalink":"https://i7eo.com/2017/01/03/sticky-footer.html","excerpt":"æ»šåŠ¨æ¡çš„å‡ºç°æ€»æ˜¯åœ¨æµè§ˆå™¨çš„æœ€å³è¾¹å’Œæœ€ä¸‹æ–¹ï¼Œç‰¢ç‰¢çš„ fixedåœ¨é¡µé¢ä¸Šã€‚å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯è¿™æ ·çš„","text":"æ»šåŠ¨æ¡çš„å‡ºç°æ€»æ˜¯åœ¨æµè§ˆå™¨çš„æœ€å³è¾¹å’Œæœ€ä¸‹æ–¹ï¼Œç‰¢ç‰¢çš„ fixedåœ¨é¡µé¢ä¸Šã€‚å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯è¿™æ ·çš„ è¿™æ ·å­å¾ˆæ˜æ˜¾ç™»å½•çš„å°äººæŒ‰é’®è¢«æŒ¡ä½äº†ï¼Œè€Œä¸”çœŸçš„ä¸å¤ªç¾è§‚ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¸Œæœ›å¤´éƒ¨å¸é¡¶ï¼Œæ»šåŠ¨æ¡å‡ºç°åœ¨ä¸‹æ–¹çš„divå†…ã€‚å¦‚ä¸‹å›¾ï¼š å…¶å®å®ç°å¾ˆç®€å•ï¼Œåœ¨å¤´éƒ¨ï¼ˆheaderï¼‰å’Œå†…å®¹ï¼ˆsectionï¼‰å¤–é¢å†åŒ…è£¹ä¸€å±‚ï¼ˆ.wrapperï¼‰ï¼Œç»™ .wrapper å±‚é«˜åº¦ 100%ï¼›ç„¶åè®©å†…å±‚ section ç»å¯¹å®šä½ï¼Œè®¾ç½® top/overflow-y å³å¯ã€‚HTML ç»“æ„å¦‚ä¸‹ï¼š 12345678&lt;div class=\"wrapper\"&gt; &lt;header&gt; &lt;span class=\"title\"&gt;This is header!&lt;/span&gt; &lt;/header&gt; &lt;section&gt; è¿™é‡Œæ·»åŠ è¶…è¿‡é¡µé¢é«˜åº¦çš„å†…å®¹ &lt;/section&gt;&lt;/div&gt; æ ·å¼ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425body &#123; overflow: hidden; &#125;.wrapper &#123; position: relative; height: 100%; min-height: 100%; overflow: hidden; &#125;header &#123; position: relative; padding: 0 90px; height: 48px; background: #efeff0; border-bottom: 1px solid #fff; text-align: center; &#125;section &#123; position: absolute; top: 48px; left: 0; bottom: 0; right: 0; overflow-y: scroll; &#125; ä½†æ˜¯è¿™æ ·æ˜¾ç¤ºsectionä¸­çš„å†…å®¹æ˜¯æ˜¾ç¤ºä¸å‡ºæ¥çš„ã€‚å¦‚ä¸‹ï¼š è¿™é‡Œçš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ .wrapper ä¸­è®¾ç½® height: 100%ï¼Œè€Œè®¾ç½®é«˜åº¦ç™¾åˆ†æ¯”æ—¶è¿™ä¸ªç™¾åˆ†æ¯”æ—¶æ ¹æ®çˆ¶å…ƒç´ çš„é«˜åº¦æ¥è®¡ç®—çš„ï¼Œè¿™é‡Œçš„çˆ¶å…ƒç´ æ˜¯ body&amp;htmlï¼Œæ²¡æœ‰è®¾ç½® height æ—¶çˆ¶å…ƒç´  body&amp;html çš„ height: autoï¼Œè¿™æ—¶è¦æ±‚æµè§ˆå™¨æ ¹æ®è¿™æ ·ä¸€ä¸ªç¼ºçœå€¼æ¥è®¡ç®—ç™¾åˆ†æ¯”é«˜åº¦æ—¶ï¼Œåªèƒ½å¾—åˆ° undefined çš„ç»“æœã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ª null å€¼ï¼Œæµè§ˆå™¨ä¸ä¼šå¯¹è¿™ä¸ªå€¼æœ‰ä»»ä½•çš„ååº”ï¼ˆè¯¦æƒ…è§ä¸‹é¢é“¾æ¥ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å°†æ ·å¼ä¿®æ”¹ä¸ºï¼š 12345678910111213141516171819202122232425262728html,body &#123; height: 100%; &#125;body &#123; overflow: hidden; &#125;.wrapper &#123; position: relative; height: 100%; min-height: 100%; overflow: hidden; &#125;header &#123; position: relative; padding: 0 90px; height: 48px; background: #efeff0; border-bottom: 1px solid #fff; text-align: center; &#125;section &#123; position: absolute; top: 48px; left: 0; bottom: 0; right: 0; overflow-y: scroll; &#125; æ•ˆæœå¦‚ä¸‹ï¼š åº•éƒ¨å›ºå®šåˆå« css sticky footerï¼Œç½‘ä¸Šçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šã€‚ä¸‹æ¥ä»‹ç»ä¸€ä¸ªç®€å•å®ç”¨çš„æ–¹å¼ï¼Œå¯¹åº”çš„ HTML ç»“æ„å¦‚ä¸‹ï¼š 123456789&lt;div class=\"content-wrapper\"&gt; &lt;header&gt; &lt;span class=\"title\"&gt;This is header!&lt;/span&gt; &lt;/header&gt; &lt;div class=\"content\"&gt;&lt;/div&gt; &lt;div class=\"close\"&gt; Ã— &lt;/div&gt;&lt;/div&gt; CSS ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536html,body &#123; height: 100%; &#125; .content-wrapper &#123; position: fixed; top: 0; left: 0; width: 100%; height: 100%; min-height: 100%; overflow: auto; background: rgba(7, 17, 27, .8); z-index: 100; &#125; header &#123; position: relative; width: 100%; height: 48px; background: #efeff0; text-align: center; &#125; .content &#123; width: 90%; margin: 0 auto; padding-bottom: 64px; &#125; .close &#123; position: relative; width: 100%; height: 64px; margin: -64px auto 0; padding-top: 16px; font-size: 32px; clear: both; text-align: center; &#125; æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘ä»¬çš„å…³é—­ icon å‡åœ¨æ–‡å­—çš„æœ€ä¸‹æ–¹ï¼Œæ ¹æ®å†…å®¹çš„é«˜åº¦å˜åŒ–è€Œæ”¹å˜ã€‚æ˜¾ç„¶è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯ä¸è®ºå†…å®¹æ˜¯å¦æ’‘æ»¡å±å¹•é«˜åº¦è¿™ä¸ªå…³é—­çš„ icon éƒ½è¦å›ºå®šåœ¨æœ€ä¸‹æ–¹ï¼Œè€Œ exhibition-1.png ä¸­çš„ç°è±¡æ˜¯å‡ºç°åœ¨äº†å†…å®¹çš„åº•éƒ¨è€Œä¸æ˜¯å±å¹•çš„åº•éƒ¨ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å¯¹ä¸ºè¿™ä¸ªæ•´ä½“å†åŒ…è£¹ä¸€å±‚ï¼Œç„¶åæŠŠ .close è¿™ä¸ª div æ”¾å‡ºå»ä¸ content-wrapper åŒçº§å³å¯ã€‚ä¿®æ”¹åçš„ HTML/CSS ä»£ç å¦‚ä¸‹ï¼š 123456789101112&lt;div class=\"wrapper\"&gt; &lt;div class=\"content-wrapper\"&gt; &lt;header&gt; &lt;span class=\"title\"&gt;This is header!&lt;/span&gt; &lt;/header&gt; &lt;div class=\"content\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"close\"&gt; Ã— &lt;/div&gt;&lt;/div&gt; 123456789101112131415161718192021222324252627282930313233343536.wrapper &#123; position: fixed; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; background: rgba(7, 17, 27, .8); z-index: 100; &#125; .content-wrapper &#123; width: 100%; min-height: 100%; &#125; header &#123; position: relative; width: 100%; height: 48px; background: #efeff0; text-align: center; &#125; .content &#123; width: 90%; margin: 0 auto; padding-bottom: 64px; &#125; .close &#123; position: relative; width: 100%; height: 64px; margin: -64px auto 0; padding-top: 16px; font-size: 32px; clear: both; text-align: center; &#125; æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š å®Œæˆæ•ˆæœã€‚ æœ€åæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ css sticky footer çš„æ­¥éª¤ã€‚ç¬¬ä¸€æ­¥éœ€è¦ä¸€ä¸ªå¤§å®¹å™¨ï¼ˆ.content-wrapperï¼‰è®¾ç½® min-height ä¸º100%ï¼Œæ’‘æ»¡æ•´ä¸ªå¯è§†åŒºåŸŸï¼Œä¸ç„¶ä½ éœ€è¦ sticky çš„ footer å°±ä¸ä¼šå‡ºç°åœ¨ä½ çš„è§†çº¿é‡Œ;ç¬¬äºŒæ­¥åœ¨ content-wrapper ä¸­åˆ›å»ºä½ çš„å†…å®¹åŒºåŸŸï¼Œåœ¨å†…å®¹åŒºå†…å»ºç«‹äº†ä¸€ä¸ª content ï¼Œè¿™æ—¶çš„å†…å®¹åŒºåŸŸï¼ˆcontentï¼‰ä¸€å®šè¦è®¾ç½® padding-bottom æ¥ä¸ºä½ çš„ footerï¼ˆ.closeï¼‰ å ä½;ç¬¬ä¸‰æ­¥åœ¨ content-wrapper åŒçº§ä¸‹åˆ›å»ºä½ çš„ footerï¼ˆ.closeï¼‰ï¼Œç„¶åç›¸å¯¹å®šä½ï¼ˆç›¸å¯¹äºcontent-wrapperï¼‰ç„¶åè¿™é‡Œçš„ margin-top å¿…é¡»ä¸ºè´Ÿï¼ˆå¡«å……ä½ åœ¨ç¬¬äºŒæ­¥ä¸­æ‰€å çš„ç©ºé—´è¿™é‡Œçš„è´Ÿå€¼å¿…é¡»ä¸ç¬¬äºŒæ­¥ä¸­è®¾ç½®çš„å€¼ç›¸åŒï¼Œé”æ­» footer çš„ä½ç½®ï¼‰ã€‚","categories":[{"name":"HTML&CSS","slug":"HTML-CSS","permalink":"https://i7eo.com/categories/HTML-CSS/"}],"tags":[{"name":"sticky footer","slug":"sticky-footer","permalink":"https://i7eo.com/tags/sticky-footer/"}]}]}