<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Webpack4.0 学习笔记（上） | Solitude is freedom</title>
  <!-- <meta name="description" content="A man who dreams of being a full stack engineer" />
  <meta name="keywords" content="Javascript,Nodejs,Vue,Nuxt,Other" /> -->
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- <link rel="shortcut icon" href="/"> -->
  <link rel="icon" href="/images/favicon.ico">
  <link rel="alternate" href="/atom.xml" title="Solitude is freedom">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Webpack4.0 学习笔记webpack是什么？webpack 是模块打包工具，底层的文件处理逻辑全部由 node 完成 支持的模块的规范webpack 支持多种模块规范，es6: import/export default | common.js: reuqire/moudle.export | AMD: define/require | styles file: @import | res">
<meta name="keywords" content="webpack,webpack4.0">
<meta property="og:type" content="article">
<meta property="og:title" content="Webpack4.0 学习笔记（上）">
<meta property="og:url" content="https://i7eo.com/2020/03/03/Webpack4-0-学习笔记-上.html">
<meta property="og:site_name" content="Solitude is freedom">
<meta property="og:description" content="Webpack4.0 学习笔记webpack是什么？webpack 是模块打包工具，底层的文件处理逻辑全部由 node 完成 支持的模块的规范webpack 支持多种模块规范，es6: import/export default | common.js: reuqire/moudle.export | AMD: define/require | styles file: @import | res">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2021-06-24T12:28:34.886Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Webpack4.0 学习笔记（上）">
<meta name="twitter:description" content="Webpack4.0 学习笔记webpack是什么？webpack 是模块打包工具，底层的文件处理逻辑全部由 node 完成 支持的模块的规范webpack 支持多种模块规范，es6: import/export default | common.js: reuqire/moudle.export | AMD: define/require | styles file: @import | res">

  <!-- <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"> -->
  <link href="//cdn.bootcss.com/node-waves/0.7.5/waves.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>
</html>
<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script> 
  <header class="l_header">
	<div class="wrapper">
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href="/">
				Solitude is freedom
			</a>
			<div class="menu">
				<ul class="h-list">
					
						<li>
							<a class="flat-box nav-home" href="/">
								Home
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-archives" href="/archives">
								Archives
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-about" href="/about">
								About
							</a>
						</li>
					
				</ul>
				<div class="underline"></div>
			</div>
			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search">
						<span class="icon icon-search"></span>
					</form>
				</div>
			
			<ul class="switcher h-list">
				
					<li class="s-search"><a href="javascript:void(0)"><span class="icon icon-search flat-box"></span></a></li>
				
				<li class="s-menu"><a href="javascript:void(0)"><span class="icon icon-menu flat-box"></span></a></li>
			</ul>
		</div>

		<div class="nav-sub container container--flex">
			<a class="logo mlogo" href="javascript:void(0)">
				Word of Forks
			</a>

			<ul class="switcher h-list">
				<li class="s-comment"><a href="javascript:void(0)"><span class="icon icon-chat_bubble_outline flat-box"></span></a></li>
				<li class="s-top"><a href="javascript:void(0)"><span class="icon icon-arrow_upward flat-box"></span></a></li>
				<!-- <li class='s-toc'><a href='javascript:void(0)'><span class="icon icon-format_list_numbered flat-box"></span></a></li> -->
			</ul>
		</div>
	</div>
</header>
<aside class="menu-phone">
	<nav>
		
			<a href="/" class="nav-home nav">
				Home
			</a>
		
			<a href="/archives" class="nav-archives nav">
				Archives
			</a>
		
			<a href="/about" class="nav-about nav">
				About
			</a>
		
	</nav>
</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        <article id="post-Webpack4-0-学习笔记-上" class="post white-box article-type-post" itemscope="" itemprop="blogPost">
	<section class="meta">
	<h2 class="title">
  	<a href="/2020/03/03/Webpack4-0-学习笔记-上.html">
    	Webpack4.0 学习笔记（上）
    </a>
  </h2>
	<time>
	  Mar 3, 2020
	</time>
	
    
    <span class="post-count">
      |&nbsp;字数 1603
    </span>
    <div class="cats">
        <a href="/categories/Javascript/">Javascript</a>
    </div>


	</section>
	
		<section class="toc-wrapper"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack4-0-学习笔记"><span class="toc-number">1.</span> <span class="toc-text">Webpack4.0 学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#webpack是什么？"><span class="toc-number">1.1.</span> <span class="toc-text">webpack是什么？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#支持的模块的规范"><span class="toc-number">2.</span> <span class="toc-text">支持的模块的规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loader"><span class="toc-number">3.</span> <span class="toc-text">loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#loader-就是-webpack-除-js-文件外帮助其识别、处理对应资源的-js-文件"><span class="toc-number">3.1.</span> <span class="toc-text">loader 就是 webpack 除 js 文件外帮助其识别、处理对应资源的 js 文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#plugin"><span class="toc-number">4.</span> <span class="toc-text">plugin</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#plugin-是-webpack-的插件接口，这个插件接口使-webpack-变得极其灵活。原理就是可以在-webpack-运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）"><span class="toc-number">4.1.</span> <span class="toc-text">plugin 是 webpack 的插件接口，这个插件接口使 webpack 变得极其灵活。原理就是可以在 webpack 运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#devServer"><span class="toc-number">5.</span> <span class="toc-text">devServer</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#devServer-是-webpack-在本地的开发环境下利用-http-proxy-middleware-amp-node-开启的一个服务器"><span class="toc-number">5.1.</span> <span class="toc-text">devServer 是 webpack 在本地的开发环境下利用 http-proxy-middleware &amp; node 开启的一个服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack-执行方式"><span class="toc-number">6.</span> <span class="toc-text">webpack 执行方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tips"><span class="toc-number">7.</span> <span class="toc-text">tips</span></a></li></ol></section>
		<section class="toc-wrapper-vdom"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack4-0-学习笔记"><span class="toc-number">1.</span> <span class="toc-text">Webpack4.0 学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#webpack是什么？"><span class="toc-number">1.1.</span> <span class="toc-text">webpack是什么？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#支持的模块的规范"><span class="toc-number">2.</span> <span class="toc-text">支持的模块的规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loader"><span class="toc-number">3.</span> <span class="toc-text">loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#loader-就是-webpack-除-js-文件外帮助其识别、处理对应资源的-js-文件"><span class="toc-number">3.1.</span> <span class="toc-text">loader 就是 webpack 除 js 文件外帮助其识别、处理对应资源的 js 文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#plugin"><span class="toc-number">4.</span> <span class="toc-text">plugin</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#plugin-是-webpack-的插件接口，这个插件接口使-webpack-变得极其灵活。原理就是可以在-webpack-运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）"><span class="toc-number">4.1.</span> <span class="toc-text">plugin 是 webpack 的插件接口，这个插件接口使 webpack 变得极其灵活。原理就是可以在 webpack 运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#devServer"><span class="toc-number">5.</span> <span class="toc-text">devServer</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#devServer-是-webpack-在本地的开发环境下利用-http-proxy-middleware-amp-node-开启的一个服务器"><span class="toc-number">5.1.</span> <span class="toc-text">devServer 是 webpack 在本地的开发环境下利用 http-proxy-middleware &amp; node 开启的一个服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack-执行方式"><span class="toc-number">6.</span> <span class="toc-text">webpack 执行方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tips"><span class="toc-number">7.</span> <span class="toc-text">tips</span></a></li></ol></section>
	
	<section class="article typo">
  	<div class="article-entry" itemprop="articleBody">
    	<h3 id="Webpack4-0-学习笔记"><a href="#Webpack4-0-学习笔记" class="headerlink" title="Webpack4.0 学习笔记"></a>Webpack4.0 学习笔记</h3><h4 id="webpack是什么？"><a href="#webpack是什么？" class="headerlink" title="webpack是什么？"></a>webpack是什么？</h4><p>webpack 是模块打包工具，底层的文件处理逻辑全部由 node 完成</p>
<h3 id="支持的模块的规范"><a href="#支持的模块的规范" class="headerlink" title="支持的模块的规范"></a>支持的模块的规范</h3><p>webpack 支持多种模块规范，es6: import/export default | common.js: reuqire/moudle.export | AMD: define/require | styles file: @import | resource file: <code>&lt;img src=...&gt;</code>。在 webpack 发展初期只是打包 js，但随着发展后现在可以打包 js/css 等文章</p>
<a id="more"></a>
<h3 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h3><h4 id="loader-就是-webpack-除-js-文件外帮助其识别、处理对应资源的-js-文件"><a href="#loader-就是-webpack-除-js-文件外帮助其识别、处理对应资源的-js-文件" class="headerlink" title="loader 就是 webpack 除 js 文件外帮助其识别、处理对应资源的 js 文件"></a>loader 就是 webpack 除 js 文件外帮助其识别、处理对应资源的 js 文件</h4><pre><code>1. file-loader 就是将图片资源复制粘贴进你配置的打包文件路径中，并将最新的符合你配置规则的图片名称（路径）返回，供代码使用
2. [&apos;style-loader&apos;, &apos;css-loader&apos;] 先执行 css-loader 分析清楚 css 间的关系，并将其整合为一个 css 文件；style-loader 则将这个 css 文件挂载到 html 的 head 底部。
3. css-loader 的 options 中设置 `importLoaders: 2` 指的是 index.scss 中 @import 了 a.scss，a.scss 中 @import 了 b.scss，如果不加这一项就会导致 b.scss 无法走 scss-loader 设置这个的目的就是为了确保 b.scss 先走 postcss-loader =》scss-loader 再走 css-loader =》style-loader
4. css moudle 的配置需要在 css-loader 的 option 中设置 `modules: true` 即可使用 `style.xxx`
</code></pre><h3 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h3><h4 id="plugin-是-webpack-的插件接口，这个插件接口使-webpack-变得极其灵活。原理就是可以在-webpack-运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）"><a href="#plugin-是-webpack-的插件接口，这个插件接口使-webpack-变得极其灵活。原理就是可以在-webpack-运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）" class="headerlink" title="plugin 是 webpack 的插件接口，这个插件接口使 webpack 变得极其灵活。原理就是可以在 webpack 运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）"></a>plugin 是 webpack 的插件接口，这个插件接口使 webpack 变得极其灵活。原理就是可以在 webpack 运行到某一时刻的时候，帮你做一些事情。（类比生命周期的钩子函数）</h4><pre><code>1. html-webpack-plugin: 该插件将为你生成一个 HTML5 文件， 并将打包生成的 js 自动插入到这个 html 中。当 webpack 打包资源结束这个时刻开始工作
2. clean-webpack-plugin: 该插件当 webpack 打包前这个时刻先删除之前的打包文件（dist）
3. webpack.HotMoudleReplacementPlugin() HMR 指的是在不刷新 .html 文件下只更新（保留当前页面的状态包括js结果）变动的代码（样式等）对应的在 devserver 中需要开启 hot/hotOnly 
</code></pre><h3 id="devServer"><a href="#devServer" class="headerlink" title="devServer"></a>devServer</h3><h4 id="devServer-是-webpack-在本地的开发环境下利用-http-proxy-middleware-amp-node-开启的一个服务器"><a href="#devServer-是-webpack-在本地的开发环境下利用-http-proxy-middleware-amp-node-开启的一个服务器" class="headerlink" title="devServer 是 webpack 在本地的开发环境下利用 http-proxy-middleware &amp; node 开启的一个服务器"></a>devServer 是 webpack 在本地的开发环境下利用 http-proxy-middleware &amp; node 开启的一个服务器</h4><p>这里主要说一下 proxy 的配置，如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase: <span class="string">'./dist'</span>,</span><br><span class="line">        open: <span class="literal">true</span>,</span><br><span class="line">        port: <span class="number">8080</span>,</span><br><span class="line">        hot: <span class="literal">true</span>,</span><br><span class="line">        hotOnly: <span class="literal">true</span>,</span><br><span class="line">        proxy: &#123;</span><br><span class="line">            <span class="string">'/api'</span>: &#123;</span><br><span class="line">                target: <span class="string">'https://www.xxx.com'</span>,</span><br><span class="line">                secure: <span class="literal">false</span>,</span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                    <span class="string">'info.json'</span>: <span class="string">'demo.json'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                changeOrigin: <span class="literal">true</span>,</span><br><span class="line">                headers: &#123;</span><br><span class="line">                    cookie: <span class="string">'xxx'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li>target 指接口转发的目标地址，如果目标使用了 https 协议，那么必须带上 secure: false，如果是 http，则可以不配置 secure 或者使其为 true</li>
<li>pathRewrite 常用应用场景是后台正在开发接口，但是你这边需要数据，后端给了一个 mock 数据的接口，但是在业务代码中你又不想修改 info.json 为 demo.json，所以在这里进行配置后期注释掉即可</li>
<li>changeOrigin 是修改发起请求的头信息，主要是为了防止转发的目标地址会对头信息做限制，导致拿不到数据</li>
<li>headers 中设置一些头信息、cookie 主要用来模拟登陆状态</li>
</ol>
<h3 id="webpack-执行方式"><a href="#webpack-执行方式" class="headerlink" title="webpack 执行方式"></a>webpack 执行方式</h3><ol>
<li>命令行执行：<a href="https://webpack.docschina.org/api/cli/" target="_blank" rel="noopener">https://webpack.docschina.org/api/cli/</a></li>
<li>node 中执行：<a href="https://webpack.docschina.org/api/node/" target="_blank" rel="noopener">https://webpack.docschina.org/api/node/</a></li>
</ol>
<h3 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h3><p>1 npx 想要解决的主要问题，就是调用项目内部安装的模块</p>
<p>2 npx create-react-app my-react-app 避免全局安装模块</p>
<p>3 url-loader 中包含 file-loader 这俩者都能处理资源（图片、字体等）但是 url-loader 的好处就是可以转换将图片自动转为 base64 </p>
<p>4 output 中配置 cdn/oss 地址需要配置 publicPath 可以使用相关的 plugin 进行上传</p>
<p>5 sourcemap 是一个映射 src 到 dist 中代码的映射关系</p>
<p>6 需要注意的点是 babel:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该方案只针对于业务代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// npm install --save-dev babel-loader @babel/core</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">        presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正常情况下我们是这样配置 babel 的，但如果在代码中使用了低版本浏览器不兼容的 promise、map 等方法该怎么办？</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// npm install --save @babel/polyfill</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">        presets: [[<span class="string">'@babel/preset-env'</span>, &#123;</span><br><span class="line">            targets: &#123;</span><br><span class="line">                chrome: <span class="string">'67'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            useBuiltIns: <span class="string">'usage'</span></span><br><span class="line">        &#125;]]</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这样配置后只需要在使用 es6 语法的地方 import "@babel/polyfill" 即可，但这</span></span><br><span class="line"><span class="comment">// 样的问题是原本可能只有10多k大小的文件引入polyfill后变成上百k，但其实代码里只用</span></span><br><span class="line"><span class="comment">// 到了 promise，这个时候就需要配置 useBuiltIns: 'usage' 这样就只会引入 </span></span><br><span class="line"><span class="comment">// promise 相关的 polyfill，targets 的作用是当浏览器小于某个版本时才进行 </span></span><br><span class="line"><span class="comment">// babel 的转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack4 中不用在文件中 import "@babel/polyfill" 配置 useBuiltIns: 'usage' 后 babel 自动加上 polyfill</span></span><br></pre></td></tr></table></figure></p>
<p>详情请参考：<a href="https://babeljs.io/docs/en/babel-preset-env#usebuiltins" target="_blank" rel="noopener">https://babeljs.io/docs/en/babel-preset-env#usebuiltins</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该方案只针对于与业务无关的插件、类库等三方代码</span></span><br><span class="line"><span class="comment">// 为什么这样做？因为 polyfill 会将方法注入至全局，污染全局环境</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// npm install --save-dev babel-loader @babel/core</span></span><br><span class="line"><span class="comment">// npm install --save-dev @babel/plugin-transform-runtime</span></span><br><span class="line"><span class="comment">// npm install --save @babel/runtime-corejs</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">       plugins: [[<span class="string">'@babel/plugin-transform-runtime'</span>, &#123;</span><br><span class="line">           corejs: <span class="number">2</span>,</span><br><span class="line">           helper: <span class="literal">true</span>,</span><br><span class="line">           regenerator: <span class="literal">true</span>,</span><br><span class="line">           useESModules: <span class="literal">false</span></span><br><span class="line">       &#125;]]</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去掉代码中的 import "@babel/polyfill" 然后执行即可</span></span><br><span class="line"><span class="comment">// 如果 options 中配置参数较多可以将 options 对象直接提出放至项目根目录的 .babelrc 中即可</span></span><br></pre></td></tr></table></figure>
<p>详情请参考：<a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime" target="_blank" rel="noopener">https://babeljs.io/docs/en/babel-plugin-transform-runtime</a></p>
<p>7 所有 loader 或者 loader 中的 options 配置执行顺序都是从下往上、从右往左</p>
<p>8 开启了 hotOnly: true 后局部更新后页面不会自动刷新</p>
<p>9 开启 devserver 后打包文件存在于内存中，想查看的话可以通 <code>npx webpack --config webpack.dev.config</code> 来避开 <code>webpack-dev-server --config webpack.dev.config</code> </p>
<p>10 前端spa路由需要注意的一个点是要配置 <code>historyApiFallback: true</code> 这样才能保证在地址栏输入路径后不被 devServer 的代理当作接口转发走</p>
<p>11 resolve 的配置：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    resolve: &#123;</span><br><span class="line">        <span class="comment">// 配置 extensions 可以免去写文件后缀名，但是尽量不要也将资源类文件的后缀配进来（因为每次查找文件会使用node的fs模块，性能会受影响）</span></span><br><span class="line">        extensions: [<span class="string">'.js'</span>, <span class="string">'.jsx'</span>],</span><br><span class="line">        <span class="comment">// 配置 mainFiles 可以在引入时只写目录 eg: `import Child from './src/child'`，这样 webpack 会先找 child 目录下的 indexjs 没有的话会找 childjs</span></span><br><span class="line">        mainFiles: [<span class="string">'index'</span>, <span class="string">'child'</span>],</span><br><span class="line">        <span class="comment">// 配置 alias 就可以使用别名</span></span><br><span class="line">        alias: &#123;</span><br><span class="line">            i7eo: path.resolve(__dirname, <span class="string">'./src/child'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

  	</div>
	  
	  <div class="article-tags tags">
      
        <a href="/tags/webpack/">webpack</a>
      
        <a href="/tags/webpack4-0/">webpack4.0</a>
      
	  </div>
    

	
		<div class="art-item-footer">
				
					<span class="art-item-left">上一篇：<a href="/2020/03/10/Webpack4-0-学习笔记-下.html" rel="prev" title="Webpack4.0 学习笔记（下）">
						Webpack4.0 学习笔记（下）
					</a></span>
				
				
					<span class="art-item-right">下一篇：<a href="/2019/08/10/译文-Virtual-DOM-is-pure-overhead.html" rel="next" title="译文: Virtual DOM is pure overhead">
						译文: Virtual DOM is pure overhead
					</a></span>
				
		</div>
	
	</section>
	
</article>
<script>
	window.subData = {
		title: 'Webpack4.0 学习笔记（上）',
		tools: true
	}
</script>

      </div>
      <aside class='l_side'>
        
    <section class="m_widget about">
<a href="/about">
  <img class="avatar waves-image" src="/images/avatar.jpeg">
</a>
<div class="header">George Tan</div>
<div class="content">
<div class="desc">A man who dreams of being a full stack engineer</div>
</div>
</section>


    <!-- <section class='m_widget links'>
<div class='header'>Links</div>
<div class='content'>
    <ul class="entry">
    
        <li><a class="flat-box" target="_blank" href="https://ccoooss.com">
            <div class='name'>ClassicOldSong</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://frantic1048.logdown.com/">
            <div class='name'>Frantic1048</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://hclmaster.github.io/">
            <div class='name'>Hclmaster</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://whst.github.io/">
            <div class='name'>WANG Hsü-Tung</div>
        </a></li>
    
    </ul>
</div>
</section> -->


    <section class="m_widget categories">
<div class="header">Categories</div>
<div class="content">
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/HTML-CSS/"><div class="name">HTML&amp;CSS</div><div class="badget">4</div></a></li>
    
        <li><a class="flat-box" href="/categories/HTTP/"><div class="name">HTTP</div><div class="badget">2</div></a></li>
    
        <li><a class="flat-box" href="/categories/Javascript/"><div class="name">Javascript</div><div class="badget">12</div></a></li>
    
        <li><a class="flat-box" href="/categories/React/"><div class="name">React</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/Vuejs/"><div class="name">Vuejs</div><div class="badget">2</div></a></li>
    
        <li><a class="flat-box" href="/categories/三方/"><div class="name">三方</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/自动化/"><div class="name">自动化</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/运维/"><div class="name">运维</div><div class="badget">1</div></a></li>
    
    </ul>
    
</div>
</section>

    
<div class="m_widget tagcloud">
    <div class="header">Tags</div>
    <div class="content">
        <a href="/tags/Alfred3-workflow/" style="font-size: 14px; color: #808080">Alfred3 workflow</a> <a href="/tags/CORS/" style="font-size: 14px; color: #808080">CORS</a> <a href="/tags/EventLoop/" style="font-size: 14px; color: #808080">EventLoop</a> <a href="/tags/Nuxt-js/" style="font-size: 14px; color: #808080">Nuxt.js</a> <a href="/tags/React/" style="font-size: 14px; color: #808080">React</a> <a href="/tags/Redux/" style="font-size: 14px; color: #808080">Redux</a> <a href="/tags/SSR/" style="font-size: 14px; color: #808080">SSR</a> <a href="/tags/certona/" style="font-size: 14px; color: #808080">certona</a> <a href="/tags/cloudflare/" style="font-size: 14px; color: #808080">cloudflare</a> <a href="/tags/flex/" style="font-size: 14px; color: #808080">flex</a> <a href="/tags/ga/" style="font-size: 14px; color: #808080">ga</a> <a href="/tags/https/" style="font-size: 14px; color: #808080">https</a> <a href="/tags/paypal-smart-button/" style="font-size: 14px; color: #808080">paypal smart button</a> <a href="/tags/pingpong/" style="font-size: 14px; color: #808080">pingpong</a> <a href="/tags/pinterest/" style="font-size: 14px; color: #808080">pinterest</a> <a href="/tags/prototype-proto/" style="font-size: 14px; color: #808080">prototype/_proto_</a> <a href="/tags/qshell/" style="font-size: 14px; color: #808080">qshell</a> <a href="/tags/rem/" style="font-size: 14px; color: #808080">rem</a> <a href="/tags/render-函数/" style="font-size: 14px; color: #808080">render 函数</a> <a href="/tags/sticky-footer/" style="font-size: 14px; color: #808080">sticky footer</a> <a href="/tags/webpack/" style="font-size: 20px; color: #000">webpack</a> <a href="/tags/webpack4-0/" style="font-size: 17px; color: #404040">webpack4.0</a> <a href="/tags/worldpay/" style="font-size: 14px; color: #808080">worldpay</a> <a href="/tags/上下文/" style="font-size: 14px; color: #808080">上下文</a> <a href="/tags/中间件/" style="font-size: 14px; color: #808080">中间件</a> <a href="/tags/作用域/" style="font-size: 14px; color: #808080">作用域</a> <a href="/tags/值传递/" style="font-size: 14px; color: #808080">值传递</a> <a href="/tags/图床/" style="font-size: 14px; color: #808080">图床</a> <a href="/tags/层叠上下文/" style="font-size: 14px; color: #808080">层叠上下文</a> <a href="/tags/执行环境/" style="font-size: 14px; color: #808080">执行环境</a> <a href="/tags/模版解析/" style="font-size: 14px; color: #808080">模版解析</a> <a href="/tags/水平垂直居中/" style="font-size: 14px; color: #808080">水平垂直居中</a> <a href="/tags/深拷贝/" style="font-size: 14px; color: #808080">深拷贝</a> <a href="/tags/继承/" style="font-size: 17px; color: #404040">继承</a> <a href="/tags/缓存/" style="font-size: 14px; color: #808080">缓存</a> <a href="/tags/虚拟Dom/" style="font-size: 17px; color: #404040">虚拟Dom</a> <a href="/tags/规范/" style="font-size: 14px; color: #808080">规范</a> <a href="/tags/闭包/" style="font-size: 14px; color: #808080">闭包</a> <a href="/tags/面向对象/" style="font-size: 14px; color: #808080">面向对象</a>
    </div>
</div>




      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/i7eo" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="/atom.xml" class="social rss" target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>

  <div>Theme <a href="https://github.com/stkevintan/hexo-theme-material-flow" class="codename">MaterialFlow</a> Powered by <a href="https://hexo.io/" target="_blank" class="codename">Hexo</a>.</div>

</footer>

  <script>setLoadingBarProgress(80);</script>
  

<!-- <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/node-waves/0.7.5/waves.min.js"></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
  var ROOT = "/"||"/";
  if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>

  <script>setLoadingBarProgress(100);</script>
</body>
</html>
